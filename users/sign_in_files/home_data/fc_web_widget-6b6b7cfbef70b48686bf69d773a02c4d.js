"use strict"
define("hotline-web/adapters/agent",["exports","ember-data-url-templates","hotline-web/adapters/application","hotline-web/mixins/url-mixin","hotline-web/utils/constants"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=s.default.extend(t.default,n.default,{shouldBackgroundReloadRecord:function(){return!1},URL:{default:a.default.EmberModelUrl.agent.url},urlTemplate:Ember.computed("token",{get:function(){return this.URL.default.replace("{token}",this.token)}})})
e.default=i}),define("hotline-web/adapters/application",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.RESTAdapter.extend({headers:{Accept:"application/json"}})
e.default=s}),define("hotline-web/adapters/calendar-avail-info",["exports","ember-data-url-templates","hotline-web/adapters/application","hotline-web/mixins/url-mixin","hotline-web/utils/constants"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=s.default.extend(t.default,n.default,{URL:{public:a.default.EmberModelUrl.calendarData.url,default:a.default.EmberModelUrl.calendarData.url},findRecord:function(e,t,s,n){var a=this.get("session.token")
if(!Ember.isBlank(s)){var i=this.URL.public.replace("{token}",a).replace("{userAlias}",s)
return n&&n.adapterOptions&&n.adapterOptions.calendarProviderType&&(i+="?calendarProviderType="+n.adapterOptions.calendarProviderType),this.ajax(i,"GET")}this._super.apply(this,arguments)}})
e.default=i}),define("hotline-web/adapters/conversation",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/csat",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/datastore",["exports","ember-localforage-adapter/adapters/localforage"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({session:Ember.inject.service(),namespace:Ember.computed("session.{appId,siteId}",{get:function(){var e=this.get("session.appId").toString(),t=this.get("session.siteId")
return t?"".concat(e,"_").concat(t):e}}),createRecord:n,updateRecord:n,caching:"all",_setNamespaceData:function(e,t){var s=this,n=this._modelNamespace(e)
return new Ember.RSVP.Promise(function(e,a){s._loadData().then(function(a){"none"!==s.caching&&s.cache.set(n,t),a[n]=t,e(window.localforage.setItem(s._adapterNamespace(),a))},function(e){a(e)})})},_getNamespaceData:function(e){var t=this,s=this._modelNamespace(e)
if("none"!==this.caching){var n=this.cache.get(s)
if(n)return Ember.RSVP.resolve(n)}return new Ember.RSVP.Promise(function(e,n){t._loadData().then(function(n){var a=n&&n[s]||{records:{}}
"model"===t.caching?t.cache.set(s,a):"all"===t.caching&&n&&t.cache.replace(n),e(a)},function(e){n(e)})})},_loadData:function(){var e=this
return new Ember.RSVP.Promise(function(t,s){window.localforage.getItem(e._adapterNamespace()).then(function(e){t(e||{})},function(e){s(e)})})}})
function n(e,t,s){var n=this
return this.queue.attach(function(a,i){n._getNamespaceData(t).then(function(r){var o=e.serializerFor(t.modelName).serialize(s,{includeId:!0}),l=s.id||o.id
r.records[l]=o,n._setNamespaceData(t,r).then(function(){a()},function(e){i(e)})},function(e){i(e)})})}e.default=s}),define("hotline-web/adapters/ds-article",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/ds-category",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/ds-faq",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/event-condition",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/event-property",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/event",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/executed-rule",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/external-article",["exports","ember-data-url-templates","hotline-web/adapters/application","hotline-web/utils/constants","jquery"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=s.default.extend(t.default,{getArticle:function(e,t){var s=n.default.EmberModelUrl.getTemplateArticle.url
return t&&(s+="?placeholderReferenceId={placeholderId}"),s=s.replace("{token}",this.get("session.token")).replace("{alias}",e).replace("{placeholderId}",t),new Ember.RSVP.Promise(function(e,t){a.default.ajax({type:"GET",url:s,contentType:"application/json; charset=UTF-8"}).then(function(t){e(t)},function(e){t(e)})})},postArticleFeedback:function(e){var t=n.default.EmberModelUrl.getTemplateArticle.postBackURL
return t=t.replace("{token}",this.get("session.token")).replace("{messageAlias}",e.messageAlias).replace("{referenceId}",e.referenceId),delete e.messageAlias,delete e.referenceId,new Ember.RSVP.Promise(function(s,n){a.default.ajax({type:"POST",url:t,contentType:"application/json",data:JSON.stringify(e)}).then(function(e){Ember.run(null,s,e)},function(e){e.then=null,Ember.run(null,n,e)})})}})
e.default=i}),define("hotline-web/adapters/faq",["exports","ember-data-url-templates","hotline-web/adapters/application","hotline-web/utils/constants","hotline-web/mixins/datastore"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=s.default.extend(t.default,a.default,{locale:Ember.inject.service(),urlTemplate:n.default.EmberModelUrl.faqCategories.url+"?platform=web&locales={locale}&since={lastModifiedAt}&lastLocaleId={lastLocaleId}",urlSegments:{token:function(){return this.get("session.token")},locale:function(){return this.locale.currentLocaleString()},lastModifiedAt:function(){return this.get("hotline.ui.lastModifiedFaqsAt")},lastLocaleId:function(){return this.get("hotline.ui.lastLocaleId")}},handleResponse:function(e,t,s,n){return 304===e||204===e?(s={categories:[],contentLocale:null,lastModifiedAt:null,status:e},this._super(e,t,s,n)):(s=s&&s.categories&&s.categories.length>0?{categories:s.categories,contentLocale:s.contentLocale,lastModifiedAt:s.lastModifiedAt,status:200}:{categories:[],contentLocale:s.contentLocale,lastModifiedAt:s.lastModifiedAt,status:200},this._super(e,t,s,n))}})
e.default=i}),define("hotline-web/adapters/identifier",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/ls-datastore",["exports","ember-data","hotline-web/mixins/message","hotline-web/utils/utils"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=t.default.Adapter.extend(Ember.Evented,s.default,{defaultSerializer:"lsdatastore",coalesceFindRequests:!0,_adapterNamespace:function(){return this.namespace||"DS.LSAdapter"},_modelNamespace:function(e){return e.url||e.modelName},_storageAvailable:function(){return"lsds"===Ember.get(this,"hotline.ui.dsType")||!1},_getLSDS:function(){return this._storageAvailable()?Ember.get(this,"hotline.ui.lsds"):{}},_loadData:function(){var e=this._getLSDS(),t=this._adapterNamespace(),s=e&&e[t],a=n.default.safelyParseJSON(s)
return a||{}},_setData:function(e){var t,s,n,a=this._adapterNamespace()
Ember.set(this,"hotline.ui.lsds",(n=e,(s=a)in(t={})?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t))},_getStorage:function(e){var t=this._modelNamespace(e),s=this._loadData()
return s&&s[t]||{records:{}}},_setStorage:function(e,t){var s=this._modelNamespace(e),n=this._adapterNamespace(),a=this._loadData()
a&&(a[s]=t,this._setData(JSON.stringify(a)),this.postMessage({action:"set_lsds_item",data:{key:n,value:a}}))},session:Ember.inject.service(),cache:Ember.inject.service(),generateIdForRecord:function(){return Math.random().toString(32).slice(2).substr(0,5)},namespace:Ember.computed("session.{token,siteId}",{get:function(){var e=this.get("session.token").toString(),t=this.get("session.siteId")
return t?"lsds_".concat(e,"_").concat(t):"lsds_".concat(e)}}),createRecord:i,updateRecord:i,deleteRecord:function(e,t,s){var n=this
return new Promise(function(e){var a=n._getStorage(t)
delete a.records[s.id],n._setStorage(t,a),e()})},shouldBackgroundReloadRecord:function(){return!1},shouldReloadAll:function(){return!0},findRecord:function(e,t,s){return this._getStorage(t).records[s]||Ember.RSVP.reject()},findAll:function(e,t){var s=this._getStorage(t),n=[]
for(var a in s.records)n.push(s.records[a])
return n},findMany:function(e,t,s){for(var n=this._getStorage(t),a=[],i=0,r=s.length;i<r;i++){var o=n.records[s[i]]
o&&a.push(o)}return a},queryRecord:function(e,t,s){var n=this._getStorage(t),a=this._query(n.records,s,!0)
return a||Ember.RSVP.reject()},query:function(e,t,s){var n=this._getStorage(t)
return this._query(n.records,s)}})
function i(e,t,s){var n=this
return new Promise(function(a){var i=e.serializerFor(t.modelName).serialize(s,{includeId:!0}),r=s.id||i.id,o=n._getStorage(t)
o.records[r]=i,n._setStorage(t,o),a()})}e.default=a}),define("hotline-web/adapters/message",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/participant",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/properties",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/user-behaviour",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/adapters/user-location",["exports","hotline-web/adapters/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/app",["exports","hotline-web/resolver","ember-load-initializers","hotline-web/config/environment"],function(e,t,s,n){var a
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a=Ember.Application.extend({modulePrefix:n.default.modulePrefix,podModulePrefix:n.default.podModulePrefix,Resolver:t.default}),(0,s.default)(a,n.default.modulePrefix)
var i=a
e.default=i}),define("hotline-web/components/-dynamic-element-alt",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend()
e.default=t}),define("hotline-web/components/-dynamic-element",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend()
e.default=t}),define("hotline-web/components/app-categories-list/component",["exports","jquery","hotline-web/mixins/direction","hotline-web/mixins/actions","hotline-web/mixins/message","hotline-web/mixins/datastore","hotline-web/mixins/faq","hotline-web/mixins/brand-check-mixin","hotline-web/mixins/sanitize","hotline-web/utils/dom-utils","hotline-web/utils/utils"],function(e,t,s,n,a,i,r,o,l,c,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var d=Ember.Component.extend(s.default,n.default,a.default,i.default,r.default,o.default,l.default,{fetchData:function(){var e=this,t=this.model
this.fetchFaqData().then(function(s){s&&200===s.get("status")&&(e.set("model.categories",s.get("categories")),e.set("model.contentLocale",s.get("contentLocale")),e.set("model.lastModifiedAt",s.get("lastModifiedAt")),e.regularDataObject(t))})},didInsertElement:function(){this._super.apply(this,arguments),Ember.run.scheduleOnce("afterRender",this,this.fetchData),c.default.bindEvent(this.element.querySelector(".search-input-text"),"focus",this.focusIn),c.default.bindEvent(this.element.querySelector(".search-input-text"),"blur",this.focusOut),c.default.bindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback),this.gradientDisplay(this.element.querySelectorAll(".scroll-section")[0]),this.setHeightForArticleHead(),this.parentView&&this.parentView.send("updateView",void 0)},didUpdate:function(){c.default.bindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback)},willDestroyElement:function(){c.default.unbindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback),c.default.unbindEvent(this.element.querySelector(".search-input-text"),"focus",this.focusIn),c.default.unbindEvent(this.element.querySelector(".search-input-text"),"blur",this.focusOut)},focusIn:function(){Ember.set(this,"focusInput",!0)},focusOut:function(){Ember.set(this,"focusInput",!1)},transitionDelays:800,classNames:["h-conv"],count:1,focusInput:!0,isCategoryPage:!0,isBackToArticleView:!1,isDeepLinkedArticlesView:!1,searchArticleFromCategory:!1,isIPhone:Ember.computed.readOnly("hotline.ui.isIPhone"),modelWithQueryAndCategory:Ember.computed.and("model.query","model.category"),noModal:Ember.computed.not("hotline.ui.modal"),modelWithoutModal:Ember.computed.and("modelWithQueryAndCategory","noModal"),headerClass:Ember.computed("hotline.ui.modal","model.category",{get:function(){return this.hotline&&this.hotline.ui&&this.hotline.ui.modal?"article-view-header":this.model&&this.model.category?"article-list-header":"category-list-header shadow"}}),bodyClass:Ember.computed("hotline.ui.modal","model.category","hidePoweredBy","isFAQAvailable",{get:function(){var e=""
return this.hotline.ui.modal?e="article-view-section":this.model.category&&(e="article-lists-section"),this.hidePoweredBy&&(e="".concat(e," no-footer")),this.isFAQAvailable||(e="".concat(e," no-articles")),e}}),origin:Ember.computed("session.referrer",{get:function(){return atob(this.get("session.referrer"))}}),isFaqPopupView:Ember.computed("session.config.faqPopupView",{get:function(){return this.get("session.config.faqPopupView")||!1}}),onScroll:function(e){if(!Ember.get(this,"hotline.ui.isDesktop")){var t=this.element.querySelector(".search-input-text")
t&&t.blur()}var s=e&&e.target
s&&s.scrollTop<=0?c.default.addCSSInline(this.element.querySelector(".shadow"),"box-shadow","none"):c.default.addCSSInline(this.element.querySelector(".shadow"),"box-shadow","0 2px 4px 0 rgba(156, 156, 156, .2)"),this.gradientDisplay(s)},gradientDisplay:function(e){e&&(e.scrollHeight-e.scrollTop-e.clientHeight<=0?c.default.addCSSInline(this.element.querySelector(".bottom-gradient"),"visibility","hidden"):c.default.addCSSInline(this.element.querySelector(".bottom-gradient"),"visibility","visible"))},scrollCallback:Ember.computed({get:function(){return this.onScroll.bind(this)}}),setHeightForArticleHead:function(){setTimeout(function(){var e=document.getElementsByClassName("article-heading")
Ember.isBlank(e)||(e[0].style.height=e[0].offsetHeight+"px",document.getElementsByClassName("list-section")[0].style.height="calc(100% - "+e[0].offsetHeight+"px)")},this.transitionDelays)},categories:Ember.computed("model.categories",{get:function(){var e=!Ember.isBlank(this.get("model.categories"))&&this.get("model.categories").toArray(),t=this.get("session.faqTags")
return this.filterFAQCategories(e,t)}}),lunrCategories:Ember.computed("model.categories",{get:function(){var e,t=this.categories,s=this.get("model.contentLocale.displayCode"),n=this.get("session.faqTags"),a=!1,i=function(e){var t=function(e){return e.update(function(){return e.toString().toLowerCase()})}
lunr.Pipeline.registerFunction(t,"normaliseSpelling"),e.pipeline.add(t),e.searchPipeline.add(t)}
return e=lunr(function(){lunr[s]&&(a=!0,this.use(lunr[s])),this.field("title"),this.field("content"),this.ref("articleId"),this.use(i)
for(var e=0,r=t.length;e<r;e++){var o=t[e],l=o&&o.get("articles").toArray()
if(n&&"article"===n.filterType){if(u.default.subsetOfArray(o.get("tags"),n.tags)){if(l)for(var c=0,d=l.length;c<d;c++){var m=l[c].toJSON()
this.add({title:m.title,articleId:m.articleId,content:m.content})}}else if(l)for(var h=0,f=l.length;h<f;h++)if(u.default.subsetOfArray(l[h].get("tags"),n.tags)){var g=l[h].toJSON()
this.add({title:g.title,articleId:g.articleId,content:g.content})}}else if(l)for(var p=0,v=l.length;p<v;p++){var b=l[p].toJSON()
this.add({title:b.title,articleId:b.articleId,content:b.content})}}}),!("en"!==s&&!a)&&e}}),articles:Ember.computed("model.{query,category}","categories",{get:function(){var e,t,s=this.get("model.query"),n=this.get("model.category"),a=this.categories,i=this.get("session.faqTags")
return this.r2l&&s?a&&a.reduce(function(e,t){var n=t&&t.get("articles"),a=n&&n.toArray()
return t.get("title")&&-1!==t.get("title").toLowerCase().indexOf(s.toLowerCase())?a&&a.forEach(function(t){e.push(t)}):a&&a.forEach(function(t){(t.get("title")&&-1!==t.get("title").toLowerCase().indexOf(s.toLowerCase())||t.get("content")&&-1!==t.get("content").toLowerCase().indexOf(s.toLowerCase()))&&e.push(t)}),e.sortBy("position")},[])||[]:s?(t=this.lunrCategories)?(e=t.search(s),a&&a.reduce(function(t,s){var n=s&&s.get("articles"),a=n&&n.toArray()
return a&&a.forEach(function(s){var n=e.findBy("ref",s.get("articleId").toString())
n&&(Ember.set(s,"score",n.score),t.push(s))}),t.sortBy("score").reverse()},[])||[]):a&&a.reduce(function(e,t){var n=t&&t.get("articles"),a=n&&n.toArray()
return a&&a.forEach(function(t){(t.get("title")&&-1!==t.get("title").toLowerCase().indexOf(s.toLowerCase())||t.get("content")&&-1!==t.get("content").toLowerCase().indexOf(s.toLowerCase()))&&e.push(t)}),e},[])||[]:n?i&&"article"===i.filterType?u.default.subsetOfArray(n.get("tags"),i.tags)?n.get("articles").sortBy("position"):n.get("articles").filter(function(e){return u.default.subsetOfArray(e.get("tags"),i.tags)}).sortBy("position"):n.get("articles").sortBy("position"):null}}),articlesSearchOnCategory:Ember.computed("articles",{get:function(){var e=this.get("model.query"),t=this.get("model.category"),s=this.articles,n=[]
return e&&t&&(n=s.filter(function(e){return e.get("categoryId")===t.get("categoryId")})),n}}),articlesSearchNotOnCategory:Ember.computed("articles",{get:function(){var e=this.get("model.query"),t=this.get("model.category"),s=this.articles,n=[]
return e&&t&&(n=s.filter(function(e){return e.get("categoryId")!==t.get("categoryId")})),n}}),query:Ember.computed("model.query","session.config.content",{get:function(){var e=this.get("model.query")?this.sanitizeHTML(this.get("model.query"),"strict"):"",t=Ember.get(this,"session.config.content.headers.faq_search_not_available")
return t?t.replace("{{query}}",e).replace("{!query!}",e):this.intl.t("faqs.no_search_results",{query:e})}}),searchPH:Ember.computed("session.config.content",{get:function(){return Ember.get(this,"session.config.content.placeholders.search_field")||this.intl.t("conversation.chat_headers.search_answer")}}),modalCategoryTitle:Ember.computed("hotline.ui.modal",{get:function(){if(this.hotline.ui.modal&&this.hotline.ui.modal.categoryId){var e=this.hotline.ui.modal.categoryId,t=this.model.categories.findBy("categoryId",e)
return t?t.title:""}return""}}),actions:{selectCategory:function(e){Ember.set(this.get("hotline.ui"),"modalOpen",!1),Ember.set(this.model,"category",e),this.send("toggleSearch",!1),Ember.set(this,"focusInput",!1),Ember.set(this,"isCategoryPage",!1),this.setHeightForArticleHead()},showCategories:function(){this.get("model.isDeepLinkFAQ")?(Ember.set(this.model,"isDeepLinkFAQ",!1),this.send("gotoChannel")):this.model.isDeepLinkCategory&&!this.isDeepLinkedArticlesView?(Ember.set(this.model,"isDeepLinkCategory",!1),this.send("gotoHome")):this.get("hotline.ui.modal")&&!this.searchArticleFromCategory?(Ember.set(this.get("hotline.ui"),"modal",void 0),this.send("toggleSearch",!1),Ember.set(this,"isBackToArticleView",!0),this.isDeepLinkedArticlesView=!1):(this.searchArticleFromCategory&&(Ember.set(this,"searchArticleFromCategory",!1),Ember.set(this.get("hotline.ui"),"modal",void 0),Ember.set(this,"isBackToArticleView",!0)),Ember.set(this.model,"category",void 0),this.send("toggleSearch",!1)),(0,t.default)("html").hasClass("expanded-article-view")&&((0,t.default)("html").toggleClass("expanded-article-view"),this.postMessage({action:"expand_article_view"})),this.setHeightForArticleHead()},showArticle:function(e,s){var n=this
this.model.isDeepLinkCategory&&(this.isDeepLinkedArticlesView=!0),Ember.set(this,"isBackToArticleView",!1),Ember.set(this.get("hotline.ui"),"modal",e.toJSON()),Ember.set(this,"searchArticleFromCategory",s),Ember.set(this.model,"category",this.categories.findBy("categoryId",e.categoryId)),Ember.run.later(function(){n.gradientDisplay(n.element.querySelectorAll(".scroll-section")[0])},300),this.isFaqPopupView&&((0,t.default)("html").addClass("expanded-modal"),Ember.set(this.get("hotline.ui"),"modalOpen",!0),this.postMessage({action:"expand_all"}))},toggleSearch:function(e){var t=this.model
e?Ember.set(t,"openSearch",e):Ember.setProperties(t,{query:void 0,openSearch:e})},gotoHome:function(){this.router.send("gotoHome")},gotoChannel:function(){this.router.send("gotoChannel")},setHeight:function(){this.get("model.query")||this.setHeightForArticleHead()}}})
e.default=d}),define("hotline-web/components/app-categories-list/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"OW4FKohU",block:'{"symbols":["obj","index","article","index","article","index","article","index","article","index"],"statements":[[7,"div",true],[10,"class","faq-content"],[8],[0,"\\n  "],[7,"div",true],[11,"class",[29,["h-header ",[22,"headerClass"]," ",[24,["hotline","ui","config","headerProperty","headerStyle"]]]]],[8],[0,"\\n    "],[7,"div",true],[10,"class","logo"],[8],[0,"\\n"],[4,"unless",[[28,"or",[[24,["model","category"]],[24,["hotline","ui","modal"]]],null]],null,{"statements":[[0,"        "],[5,"link-to",[[12,"class","faq-link-wrapper"]],[["@route","@query","@replace"],["home",[28,"hash",null,[["isRoutedFromFAQ"],[true]]],true]],{"statements":[[0,"\\n          "],[7,"div",true],[11,"class",[29,["ic-back ",[28,"if",[[24,["isCategoryPage"]],"animated fadeIn delay fast"],null]]]],[8],[0,"\\n            "],[7,"i",true],[10,"class","icon icon-ic_back"],[8],[9],[0,"\\n          "],[9],[0,"\\n        "]],"parameters":[]}],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div",false],[12,"class","ic-back"],[3,"action",[[23,0,[]],"showCategories"]],[8],[0,"\\n          "],[7,"i",true],[10,"class","icon icon-ic_back"],[8],[9],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]}],[4,"unless",[[24,["hotline","ui","modal"]]],null,{"statements":[[4,"if",[[24,["hotline","ui","config","widgetLogoUrl"]]],null,{"statements":[[0,"          "],[7,"img",true],[11,"class",[29,["logo-holder ",[28,"if",[[24,["isCategoryPage"]],"company-logo"],null]," ",[28,"if",[[24,["isBackToArticleView"]],"animated fadeIn fast"],null]]]],[11,"src",[24,["hotline","ui","config","widgetLogoUrl"]]],[10,"alt","Freshchat"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"img",true],[11,"class",[29,["logo-holder ",[28,"if",[[24,["isCategoryPage"]],"company-logo"],null]," ",[28,"if",[[24,["isBackToArticleView"]],"animated fadeIn fast"],null]]]],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/freshchat-line-1cc53925eae96a19142ee7b807093272.svg"],[10,"alt","Freshchat"],[8],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"    "],[9],[0,"\\n"],[4,"if",[[24,["hotline","ui","modal"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","header-section"],[8],[0,"\\n        "],[7,"div",true],[10,"class","category-title animated fadeIn fast"],[8],[0,"\\n          "],[7,"div",true],[10,"class","title-content uppercase"],[8],[1,[28,"t",["faqs.category"],null],false],[9],[0,"\\n          "],[7,"div",true],[10,"class","sub-title"],[8],[1,[28,"sanitize-html",[[24,["modalCategoryTitle"]],"strict"],null],false],[9],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div",true],[11,"class",[29,["search-for-answer category ",[28,"if",[[24,["focusInput"]],"focus-within"],null]]]],[8],[0,"\\n        "],[7,"div",true],[11,"class",[29,["search-wrap ",[28,"if",[[24,["model","openSearch"]],"search"],null]]]],[8],[0,"\\n          "],[7,"i",false],[12,"class","icon-ic_search"],[3,"action",[[23,0,[]],"toggleSearch",true]],[8],[9],[0,"\\n"],[4,"if",[[24,["model","query"]]],null,{"statements":[[0,"            "],[7,"i",false],[12,"class","close_search_input icon-ic_close_small mild"],[3,"action",[[23,0,[]],"toggleSearch",false]],[8],[9],[0,"\\n"]],"parameters":[]},null],[0,"          "],[5,"ui-input",[[12,"placeholder",[22,"searchPH"]],[12,"class",[28,"if",[[24,["isIPhone"]],"search-input-text iphone-search-input","search-input-text"],null]]],[["@type","@value","@key-up","@autofocus"],["text",[24,["model","query"]],[28,"action",[[23,0,[]],"setHeight"],null],[22,"focusInput"]]]],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]}],[0,"  "],[9],[0,"\\n  "],[7,"div",true],[11,"class",[29,["body sections faq-body-nobg ",[22,"bodyClass"]]]],[8],[0,"\\n"],[4,"if",[[28,"or",[[24,["model","category"]],[24,["hotline","ui","modal"]]],null]],null,{"statements":[[0,"      "],[7,"div",true],[11,"class",[29,["articles-list ",[28,"if",[[24,["hidePoweredBy"]],"hide-footer"],null]]]],[8],[0,"\\n        "],[7,"ul",true],[10,"class","article-list-items animated fadeInUp faster"],[8],[0,"\\n"],[4,"if",[[24,["modelWithoutModal"]]],null,{"statements":[[4,"if",[[24,["articlesSearchOnCategory"]]],null,{"statements":[[0,"              "],[7,"li",true],[10,"class","search-result-heading"],[8],[0,"\\n                "],[7,"b",true],[8],[0,"\\n                  "],[1,[24,["articlesSearchOnCategory","length"]],false],[0,"\\n                "],[9],[0,"\\n                "],[1,[28,"t",["faq_search_results.results_from"],null],false],[0,"\\n                "],[7,"b",true],[8],[0,"\\n                  \'"],[1,[28,"sanitize-html",[[24,["model","category","title"]],"strict"],null],false],[0,"\'\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"],[4,"each",[[24,["articlesSearchOnCategory"]]],null,{"statements":[[0,"                "],[7,"li",false],[12,"class","article"],[3,"action",[[23,0,[]],"showArticle",[23,9,[]],false]],[8],[0,"\\n                  "],[7,"img",true],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_article-3b7945f82fbe666a6e2cceb4ffc244e6.svg"],[8],[9],[0,"\\n                  "],[7,"div",true],[10,"class","category-item"],[8],[0,"\\n                    "],[7,"span",true],[8],[0,"\\n                      "],[1,[28,"sanitize-html",[[23,9,["title"]],"strict"],null],false],[0,"\\n                    "],[9],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[9,10]},null]],"parameters":[]},null],[4,"if",[[24,["articlesSearchNotOnCategory"]]],null,{"statements":[[0,"              "],[7,"li",true],[10,"class","search-result-heading"],[8],[0,"\\n                "],[7,"b",true],[8],[0,"\\n                  "],[1,[24,["articlesSearchNotOnCategory","length"]],false],[0,"\\n                "],[9],[0,"\\n                "],[1,[28,"t",["faq_search_results.results_from_category"],null],false],[0,"\\n              "],[9],[0,"\\n"],[4,"each",[[24,["articlesSearchNotOnCategory"]]],null,{"statements":[[0,"                "],[7,"li",false],[12,"class","article"],[3,"action",[[23,0,[]],"showArticle",[23,7,[]],false]],[8],[0,"\\n                  "],[7,"img",true],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_article-3b7945f82fbe666a6e2cceb4ffc244e6.svg"],[8],[9],[0,"\\n                  "],[7,"div",true],[10,"class","category-item"],[8],[0,"\\n                    "],[7,"span",true],[8],[0,"\\n                      "],[1,[28,"sanitize-html",[[23,7,["title"]],"strict"],null],false],[0,"\\n                    "],[9],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[7,8]},null]],"parameters":[]},null],[4,"if",[[28,"and",[[28,"not",[[24,["articlesSearchOnCategory"]]],null],[28,"not",[[24,["articlesSearchNotOnCategory"]]],null]],null]],null,{"statements":[[0,"              "],[7,"div",true],[10,"class","empty-state animated fadeIn faster"],[8],[0,"\\n                "],[7,"span",true],[10,"class","empty-state-content"],[8],[0,"\\n                  "],[7,"img",true],[10,"class","no-result"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/Empty_faqs-25a6d9bae8489757c523d07d3a996a56.svg"],[8],[9],[0,"\\n"],[0,"                  "],[1,[22,"query"],true],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[28,"or",[[28,"gt",[[24,["articles","length"]],0],null],[24,["hotline","ui","modal"]]],null]],null,{"statements":[[4,"if",[[24,["hotline","ui","modal"]]],null,{"statements":[[0,"              "],[7,"div",true],[10,"class","article-content animated fadeIn fast"],[8],[0,"\\n                "],[5,"ui-modal",[],[["@home"],[[28,"action",[[23,0,[]],"gotoHome"],null]]]],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"div",true],[10,"class","article-lists-sections animated fadeIn faster"],[8],[0,"\\n                "],[7,"div",true],[10,"class","article-heading"],[8],[0,"\\n                  "],[7,"div",true],[10,"class","header-section shadow"],[8],[0,"\\n                    "],[7,"div",true],[10,"class","category-logo"],[8],[0,"\\n"],[4,"if",[[24,["model","category","icon"]]],null,{"statements":[[0,"                        "],[7,"div",true],[10,"class","category-icon"],[8],[0,"\\n                          "],[7,"img",true],[11,"src",[24,["model","category","icon"]]],[10,"class","category-icon-img"],[8],[9],[0,"\\n                        "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[7,"div",true],[10,"class","category-icon"],[8],[0,"\\n                          "],[7,"span",true],[11,"class",[29,["category-icon-inner ",[28,"choose-theme",[[24,["model","category","title"]]],null]]]],[8],[0,"\\n                            "],[1,[28,"avatar-content",[[24,["model","category","title"]]],null],false],[0,"\\n                          "],[9],[0,"\\n                        "],[9],[0,"\\n"]],"parameters":[]}],[0,"                    "],[9],[0,"\\n                    "],[7,"div",true],[10,"class","category-title animated fadeIn fast"],[8],[0,"\\n                      "],[7,"div",true],[10,"class","title-content uppercase"],[8],[1,[28,"t",["faqs.category"],null],false],[9],[0,"\\n                      "],[7,"div",true],[10,"class","sub-title"],[8],[1,[28,"sanitize-html",[[24,["model","category","title"]],"strict"],null],false],[9],[0,"\\n                    "],[9],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n                "],[7,"div",true],[10,"class","list-section scroll-section"],[8],[0,"\\n"],[4,"each",[[24,["articles"]]],null,{"statements":[[0,"                    "],[7,"li",false],[12,"class","article"],[3,"action",[[23,0,[]],"showArticle",[23,5,[]],false]],[8],[0,"\\n                      "],[7,"img",true],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_article-3b7945f82fbe666a6e2cceb4ffc244e6.svg"],[8],[9],[0,"\\n                      "],[7,"div",true],[10,"class","category-item"],[8],[0,"\\n                        "],[7,"span",true],[8],[0,"\\n                          "],[1,[28,"sanitize-html",[[23,5,["title"]],"strict"],null],false],[0,"\\n                        "],[9],[0,"\\n                      "],[9],[0,"\\n                    "],[9],[0,"\\n"]],"parameters":[5,6]},null],[0,"                "],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[28,"and",[[28,"eq",[[24,["articles","length"]],0],null],[24,["model","query"]]],null]],null,{"statements":[[0,"            "],[7,"div",true],[10,"class","empty-state animated fadeIn faster"],[8],[0,"\\n              "],[7,"span",true],[10,"class","empty-state-content"],[8],[0,"\\n                "],[7,"img",true],[10,"class","no-result"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/Empty_faqs-25a6d9bae8489757c523d07d3a996a56.svg"],[8],[9],[0,"\\n"],[0,"                "],[1,[22,"query"],true],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"and",[[28,"eq",[[24,["articles","length"]],0],null],[28,"not",[[24,["model","query"]]],null]],null]],null,{"statements":[[0,"            "],[7,"div",true],[10,"class","empty-state animated fadeIn faster"],[8],[0,"\\n              "],[7,"span",true],[10,"class","empty-state-content"],[8],[0,"\\n                "],[7,"img",true],[10,"class","no-result"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/Empty_faqs-25a6d9bae8489757c523d07d3a996a56.svg"],[8],[9],[0,"\\n                "],[1,[28,"t",["faqs.no_faqs"],null],false],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n          "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"        "],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div",true],[11,"class",[29,["categories-list animated fadeInUp faster scroll-section ",[28,"if",[[24,["hidePoweredBy"]],"hide-footer"],null]]]],[8],[0,"\\n"],[4,"if",[[28,"eq",[[24,["categories","length"]],0],null]],null,{"statements":[[0,"          "],[7,"span",true],[10,"class","no-faqs"],[8],[0,"\\n            "],[7,"img",true],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/Empty_faqs-25a6d9bae8489757c523d07d3a996a56.svg"],[8],[9],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","faq_not_available"]]],null,{"statements":[[0,"              "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","faq_not_available"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[28,"t",["faqs.no_faqs"],null],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["articles","length"]],0],null]],null,{"statements":[[0,"          "],[7,"div",true],[10,"class","empty-state animated fadeIn faster"],[8],[0,"\\n            "],[7,"span",true],[10,"class","empty-state-content"],[8],[0,"\\n              "],[7,"img",true],[10,"class","no-result"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/Empty_faqs-25a6d9bae8489757c523d07d3a996a56.svg"],[8],[9],[0,"\\n"],[0,"              "],[1,[22,"query"],true],[0,"\\n            "],[9],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"gt",[[24,["articles","length"]],0],null]],null,{"statements":[[0,"          "],[7,"h1",true],[10,"class","search-heading"],[8],[1,[28,"t",["conversation.ce.results"],null],false],[9],[0,"\\n          "],[7,"ul",true],[10,"class","search-result animated fadeIn fast"],[8],[0,"\\n"],[4,"each",[[24,["articles"]]],null,{"statements":[[0,"              "],[7,"li",false],[12,"class","article"],[3,"action",[[23,0,[]],"showArticle",[23,3,[]],true]],[8],[0,"\\n                "],[7,"img",true],[10,"class","article-icon"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_article-3b7945f82fbe666a6e2cceb4ffc244e6.svg"],[8],[9],[0,"\\n                "],[7,"div",true],[10,"class","category-item"],[8],[0,"\\n                  "],[7,"span",true],[8],[0,"\\n                    "],[1,[28,"sanitize-html",[[23,3,["title"]],"strict"],null],false],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[3,4]},null],[0,"          "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"h1",true],[8],[1,[28,"t",["faqs.categories"],null],false],[9],[0,"\\n          "],[7,"ul",true],[10,"class","clearfix animated fadeIn fast"],[8],[0,"\\n"],[4,"each",[[24,["categories"]]],null,{"statements":[[4,"if",[[28,"gt",[[23,1,["articles","length"]],0],null]],null,{"statements":[[0,"                "],[7,"li",false],[12,"class",[29,["category ",[28,"odd-even",[[23,2,[]]],null]]]],[3,"action",[[23,0,[]],"selectCategory",[23,1,[]]]],[8],[0,"\\n                  "],[7,"div",true],[10,"class","category-inner"],[8],[0,"\\n"],[4,"if",[[23,1,["icon"]]],null,{"statements":[[0,"                      "],[7,"div",true],[10,"class","category-icon"],[8],[0,"\\n                        "],[7,"img",true],[11,"src",[23,1,["icon"]]],[10,"class","category-icon-img"],[8],[9],[0,"\\n                      "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                      "],[7,"div",true],[10,"class","category-icon"],[8],[0,"\\n                        "],[7,"span",true],[11,"class",[29,["category-icon-inner ",[28,"choose-theme",[[23,1,["title"]]],null]]]],[8],[0,"\\n                          "],[1,[28,"avatar-content",[[23,1,["title"]]],null],false],[0,"\\n                        "],[9],[0,"\\n                      "],[9],[0,"\\n"]],"parameters":[]}],[0,"                    "],[7,"div",true],[10,"class","block-with-text"],[8],[1,[28,"sanitize-html",[[23,1,["title"]],"strict"],null],false],[9],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[1,2]},null],[0,"          "],[9],[0,"\\n        "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"      "],[9],[0,"\\n"]],"parameters":[]}],[4,"if",[[28,"not",[[24,["model","category"]]],null]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","bottom-gradient"],[8],[9],[0,"\\n"]],"parameters":[]},null],[0,"  "],[9],[0,"\\n"],[4,"unless",[[28,"or",[[24,["model","category"]],[24,["hotline","ui","modal"]]],null]],null,{"statements":[[4,"unless",[[24,["hidePoweredBy"]]],null,{"statements":[[0,"      "],[5,"ui-footer-note",[],[[],[]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-categories-list/template.hbs"}})
e.default=t}),define("hotline-web/components/app-channel/component",["exports","hotline-web/mixins/direction","hotline-web/mixins/conversation","hotline-web/utils/constants"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Component.extend(s.default,t.default,{classNames:["channel","animated","fadeInLeft"],enabledAgentTypingIndicator:Ember.computed.alias("hotlineUI.config.enabledAgentTypingIndicator"),classNameBindings:["enabledAgentTypingIndicator"],USER:n.default.CONVERSATION.USER_TYPE.USER,channelId:Ember.computed("channel.channelId",{get:function(){return this.get("channel.channelId")}}),currentAgent:Ember.computed("lastAgentMessage.messageId",{get:function(){var e=this.lastAgentMessage,t=e&&e.get("messageUserAlias")
return!!t&&this.agentService.getAgentInfo(t)}}),isNonWelcomeMessage:Ember.computed.gt("lastMessage.messageFragments.length",0)})
e.default=a}),define("hotline-web/components/app-channel/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"5ZSZZwBN",block:'{"symbols":[],"statements":[[5,"link-to",[[12,"class","channel-link"]],[["@route","@model","@replace"],["home.channel",[24,["channel","channelId"]],true]],{"statements":[[0,"\\n  "],[7,"div",true],[10,"class","h-category-item"],[8],[0,"\\n    "],[7,"div",true],[10,"class","h-category-icon"],[8],[0,"\\n"],[4,"if",[[24,["channel","iconUrl"]]],null,{"statements":[[0,"        "],[7,"img",true],[10,"class","img-circle avatar-image"],[11,"src",[24,["channel","iconUrl"]]],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"span",true],[11,"class",[29,["category-content-wrap ",[28,"choose-theme",[[24,["channel","name"]]],null]]]],[8],[0,"\\n          "],[7,"span",true],[10,"class","category-content"],[8],[0,"\\n            "],[1,[28,"avatar-content",[[24,["channel","name"]]],null],false],[0,"\\n          "],[9],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]}],[0,"    "],[9],[0,"\\n    "],[7,"div",true],[10,"class","channel-names"],[8],[0,"\\n      "],[7,"div",true],[10,"class","channel-content"],[8],[0,"\\n        "],[7,"div",true],[11,"class",[29,["h-category-detail ",[28,"if",[[24,["lastMessage"]],"aw"],null]]]],[8],[0,"\\n          "],[7,"h1",true],[10,"class","channel-name"],[8],[0,"\\n            "],[1,[28,"sanitize-html",[[24,["channel","name"]],"strict"],null],false],[0,"\\n          "],[9],[0,"\\n          "],[7,"h2",true],[11,"class",[29,["welcome-text ",[28,"if",[[24,["unreadCount"]],"unreadMessage"],null]]]],[8],[0,"\\n"],[4,"if",[[24,["enabledAgentTypingIndicator"]]],null,{"statements":[[0,"              "],[5,"ui-agent-typing-indicator",[],[["@channelId"],[[24,["channel","channelId"]]]]],[0,"\\n"]],"parameters":[]},null],[0,"            "],[7,"div",true],[10,"class","message-text"],[8],[0,"\\n"],[4,"if",[[24,["isNonWelcomeMessage"]]],null,{"statements":[[4,"if",[[28,"eq",[[24,["USER"]],[24,["lastMessage","messageUserType"]]],null]],null,{"statements":[[0,"                  "],[7,"i",true],[10,"class","icon-ic_reply"],[8],[9],[0,"\\n"]],"parameters":[]},null],[0,"                "],[7,"div",true],[10,"class","last-msg-preview"],[8],[0,"\\n                  "],[5,"ui-unity-message-fragment",[],[["@message","@isListView"],[[22,"lastMessage"],true]]],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["channel","welcomeMessage","messageFragments","length"]]],null,{"statements":[[0,"                "],[7,"div",true],[10,"class","last-msg-preview"],[8],[0,"\\n                  "],[5,"ui-unity-message-fragment",[],[["@message","@isListView"],[[24,["channel","welcomeMessage"]],true]]],[0,"\\n                "],[9],[0,"\\n              "]],"parameters":[]},null]],"parameters":[]}],[0,"            "],[9],[0,"\\n          "],[9],[0,"\\n        "],[9],[0,"\\n        "],[7,"div",true],[10,"class","h-conv-user"],[8],[0,"\\n"],[4,"if",[[24,["lastMessage"]]],null,{"statements":[[0,"            "],[7,"div",true],[10,"class","time-stamp"],[8],[0,"\\n              "],[1,[28,"format-time",[[24,["lastMessage","createdMillis"]],"LT"],null],false],[0,"\\n            "],[9],[0,"\\n"],[4,"if",[[24,["unreadCount"]]],null,{"statements":[[0,"              "],[7,"div",true],[11,"class",[29,["h-notify ",[28,"if",[[28,"gt",[[24,["unreadCount"]],9],null],"large-count"],null]]]],[8],[0,"\\n"],[4,"if",[[28,"gt",[[24,["unreadCount"]],9],null]],null,{"statements":[[0,"                  "],[1,[28,"t",["common.numbers.nine"],null],false],[0,"+\\n"]],"parameters":[]},{"statements":[[0,"                  "],[1,[22,"unreadCount"],false],[0,"\\n"]],"parameters":[]}],[0,"              "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"        "],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n\\n  "],[9],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-channel/template.hbs"}})
e.default=t}),define("hotline-web/components/app-channels-list/component",["exports","hotline-web/mixins/datastore","hotline-web/mixins/sanitize","hotline-web/utils/constants","hotline-web/mixins/conversation-load"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Component.extend(a.default,t.default,s.default,{tagName:"",fetchConversations:function(){var e=this,t=n.default.EmberModelUrl,s=this.session,a=this.localds,i=s&&s.user,r=s&&s.siteId,o=s&&s.token,l=a&&a.messageAfter||s&&s.didMessage,c=t.conversations,u=c.url.replace("{token}",o).replace("{userAlias}",i.alias),d={src:n.default.CONVERSATION.FETCH.CHANNELS_LOADED}
l&&(d.messageAfter=l),r&&(u+="?siteId=".concat(r)),this.store.getRequest(c.model,u,d).then(function(t){e.isDestroyed&&e.isDestroying||t&&t.conversations&&(e.get("hotline.ui.offlineExperience.awayMessage.localeId")!==n.default.DefaultLocale&&e.replaceUnrepliedOfflineMessageWithCurrentLocaleMessage(),e.loadConversation(t.conversations))})},headerTitle:Ember.computed("session.config.content.headers.chat",{get:function(){var e=this.intl,t=this.get("session.config.content.headers.chat")
return t?this.sanitizeHTML(t,"strict"):e.t("channel.heading_title")}}),didInsertElement:function(){this._super.apply(this,arguments),this.session&&this.session.user&&this.session.user.alias&&this.fetchConversations()},replaceUnrepliedOfflineMessageWithCurrentLocaleMessage:function(){var e=this.conversations,t=this.localds,s=this.get("hotline.ui.offlineExperience.awayMessage.messageFragments.firstObject.content")
e&&e.forEach(function(e){var t=e&&e.get("messages").toArray()
t&&t.forEach(function(e){e&&!0===e.get("offlineMessage")&&e&&!1===e.get("hasBeenRepliedToOffline")&&e.get("messageFragments.firstObject.content")!==s&&e.set("messageFragments.firstObject.content",s)})}),t&&t.save()}})
e.default=i})
define("hotline-web/components/app-channels-list/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"lahxSpn1",block:'{"symbols":["channel"],"statements":[[7,"div",true],[10,"class","channel-section animated fadeInUp delay faster h-categories"],[8],[0,"\\n  "],[7,"div",true],[10,"class","channel-title"],[8],[0,"\\n    "],[7,"div",true],[10,"class","list-sub-title"],[8],[0,"\\n      "],[1,[22,"headerTitle"],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n  "],[7,"ul",true],[10,"class","channel-list"],[8],[0,"\\n"],[4,"each",[[24,["displayChannels"]]],null,{"statements":[[0,"      "],[7,"li",true],[8],[0,"\\n        "],[5,"app-channel",[],[["@channel","@update"],[[23,1,[]],[24,["session","didMessage"]]]]],[0,"\\n        "],[7,"div",true],[10,"class","border-bottom"],[8],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[1]},null],[0,"  "],[9],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-channels-list/template.hbs"}})
e.default=t}),define("hotline-web/components/app-conversation-message/component",["exports","hotline-web/utils/dayjs","hotline-web/mixins/channel","hotline-web/mixins/conversation","hotline-web/mixins/localstorage","hotline-web/mixins/live-translation","hotline-web/utils/constants","hotline-web/mixins/actions","hotline-web/mixins/sanitize","hotline-web/mixins/user-locate","freshchat-component-library/constants/emojiData"],function(e,t,s,n,a,i,r,o,l,c,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var d=Ember.Component.extend(o.default,n.default,s.default,a.default,l.default,i.default,c.default,{tagName:"",classNames:["fc-app-conversation-message"],notification:Ember.inject.service(),pushPermissionOffered:!1,channelWrapedMessage:Ember.computed("channelMessage",{get:function(){var e=[]
return e.push(this.channelMessage),e}}),currentAgent:Ember.computed("lastAgentMessage.messageId",{get:function(){var e=this.lastAgentMessage,t=e&&e.get("messageUserAlias")
return!!t&&this.agentService.getAgentInfo(t)}}),calendarMessages:Ember.computed.alias("conversationCalendarMessages"),messagesWithAppId:Ember.computed("messages.@each",{get:function(){var e=this.messages.filter(function(e){return e.get("appId")})
return e&&e.length},set:function(e,t){return t}}),messageAppIdObserver:Ember.observer("messages.@each.createdMillis",function(){var e=this.messages?this.messages.filter(function(e){return e.get("appId")}):null
e&&e.length>this.messagesWithAppId&&(this.set("messagesWithAppId",e.length),this.messageObserver())}),messageObserver:Ember.on("init",Ember.observer("messagesCount",function(){var e=this.lastMessage,t=(e&&e.get("messageUserType"))===r.default.CONVERSATION.USER_TYPE.USER;(this.isOpen||t)&&this.updateReadReceipt()})),displayMessages:Ember.computed("messages","messages.[]","messages.@each.messageUserId","messages.@each.createdMillis",{get:function(){var e=this,t=this.messages,s=t&&t.toArray(),n=this.messagesCount,a=n>200?n-200:0
if(t){var i=this.groupMessages(s.slice(a,n))
return this.get("isLiveTranslationEnabled")&&i.forEach(function(t){t.messages[0]&&t.messages[0].messageUserType!==r.default.CONVERSATION.USER_TYPE.USER?t.containsTranslations=e.containsTranslatedContent(t.messages):t.containsTranslations=!1}),i}}}),screenShare:Ember.computed.reads("session.fcCbstart"),groupMessages:function(e){var s=this,n=[],a=!1
return e.forEach(function(e){var i=e.get("messageFragments")&&e.get("messageFragments")[0],o=e.get("messageFragments")&&e.get("messageFragments").length
if(i&&1===o&&i.fragmentType!==r.default.CONVERSATION.FRAGMENT_TYPE.IMAGE&&i.fragmentType!==r.default.CONVERSATION.FRAGMENT_TYPE.FILE&&e.set("emojisCount",s.getConsecutiveEmojisCount(s.sanitizeHTML(i.content,"strict"))),i)if(0===n.length){var l=[]
l.push(e),n.push({messages:l})}else{var c=n[n.length-1],u=c.messages,d=u[u.length-1],m=e.get("createdMillis"),h=d.get&&d.get("createdMillis"),f=h&&(0,t.default)(h).startOf("day").valueOf(),g=h&&(0,t.default)(h).endOf("day").valueOf(),p=s.get("readMillis"),v=!0
if(e.get("messageType")!==r.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARE&&f&&g&&!(m>=f&&m<=g)){var b=[]
b.push({dayBreak:m,messageType:5e3}),n.push({messages:b}),v=!1}if(p&&!a&&p<m&&0!==e.get("messageUserType")&&e.get("messageType")!==r.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARE){a=!0
var E=[]
E.push({messageType:5001}),n.push({messages:E}),v=!1}if(v&&d.get("messageUserType")===e.get("messageUserType")&&e.get("createdMillis")-d.get("createdMillis")<3e5&&e.get("messageType")===d.get("messageType")&&e.get("messageUserId")===d.get("messageUserId")&&e.get("messageType")!==r.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.SENT_BY_AGENT&&e.get("messageType")!==r.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.CANCELLED_BY_USER)c.messages.push(e)
else{var y=[]
y.push(e),n.push({messages:y})}}}),n},getConsecutiveEmojisCount:function(e){var t,s,n=0,a=0,i=u.unicodeRegExp
return e&&(s=(t=e.replace(/\s/g,"")).match(i))&&s.length>0&&(s.forEach(function(e){n+=e.length}),n===t.length&&(a=s.length)),a},showPushOptions:Ember.computed("hotline.ui.push.{subscription,permission}","pushPermissionOffered","messagesCount",{get:function(){var e=this.get("hotline.ui.push"),t=this.messages,s=t&&t.findBy("messageUserType",0),n=this.messagesCount,a=e&&e.subscription,i="denied"===(e&&e.permission),r=this.pushPermissionOffered,o=(new Date).getTime(),l=this.getItemLS("lastPushActionMillis"),c=this.notification.isPushSupportedByBrowser(),u=!1
return l=parseInt(l),o-(l=isNaN(l)?0:l)>6048e5&&(u=!0),!i&&!a&&u&&!r&&n&&c&&s}}),setLastPushActionMillis:function(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.get("hotline.ui.isFirefoxMobile")||(this.setItemLS("lastPushActionMillis",(new Date).getTime()),this.set("pushPermissionOffered",!0))},actions:{askPermission:function(){this.notification.requestPermission(),this.setLastPushActionMillis()},clearPermission:function(){this.notification.clearPermission(),this.setLastPushActionMillis(!0)},openCalendarPickerMaximized:function(e){this.openCalendarPickerMaximized(e)},sendMessage:function(e,t){this.sendMessage(e,t)},resendMessage:function(e){this.resendMessage(e)},sendOfflineMessage:function(e){this.sendOfflineMessage(e)}}})
e.default=d}),define("hotline-web/components/app-conversation-message/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"dm4Eb8TS",block:'{"symbols":["wrapedMessage"],"statements":[[4,"if",[[28,"contain-valid-text-fragment",[[24,["channelWrapedMessage"]]],null]],null,{"statements":[[0,"  "],[5,"ui-message",[],[["@model","@isOpen","@wrapedMessage"],[[22,"channelMessage"],[22,"isOpen"],[22,"channelWrapedMessage"]]]],[0,"\\n"]],"parameters":[]},null],[4,"each",[[24,["displayMessages"]]],null,{"statements":[[4,"if",[[28,"contain-valid-text-fragment",[[23,1,["messages"]]],null]],null,{"statements":[[0,"    "],[5,"ui-message",[],[["@wrapedMessage","@model","@calendarMessages","@isOpen","@containsTranslations","@extraParams","@cobrowsingAccepted","@cobrowsingDenied","@openCalendarPickerMaximized","@sendMessage","@sendOfflineMessage","@resendMessage"],[[23,1,["messages"]],[23,1,["messages","lastObject"]],[22,"calendarMessages"],[22,"isOpen"],[23,1,["containsTranslations"]],[22,"extraParams"],"cobrowsingAccepted","cobrowsingDenied",[28,"action",[[23,0,[]],"openCalendarPickerMaximized"],null],[28,"action",[[23,0,[]],"sendMessage"],null],[28,"action",[[23,0,[]],"sendOfflineMessage"],null],[28,"action",[[23,0,[]],"resendMessage"],null]]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null],[4,"if",[[24,["hotlineUI","config","enabledAgentTypingIndicator"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","ui-agent-typing-indicator-wrap"],[8],[0,"\\n    "],[5,"ui-agent-typing-indicator",[],[["@channelId"],[[22,"channelId"]]]],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[28,"and",[[24,["showPushOptions"]],[28,"not",[[24,["session","config","disableNotifications"]]],null]],null]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","notification-container animated fadeIn"],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","push_notification"]]],null,{"statements":[[0,"      "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","push_notification"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[28,"t",["conversation.push_notification.message"],null],false],[0,"\\n"]],"parameters":[]}],[0,"    "],[7,"div",true],[10,"class","btn-container"],[8],[0,"\\n      "],[7,"span",false],[12,"class","btn-left"],[3,"action",[[23,0,[]],"askPermission"]],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","actions","push_notify_yes"]]],null,{"statements":[[0,"          "],[1,[24,["session","config","content","actions","push_notify_yes"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[28,"t",["conversation.push_notification.yes"],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[9],[0,"\\n      "],[7,"span",false],[12,"class","btn-right"],[3,"action",[[23,0,[]],"clearPermission"]],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","actions","push_notify_no"]]],null,{"statements":[[0,"          "],[1,[24,["session","config","content","actions","push_notify_no"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[28,"t",["conversation.push_notification.no"],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-conversation-message/template.hbs"}})
e.default=t}),define("hotline-web/components/app-conversation/component",["exports","hotline-web/utils/constants","hotline-web/mixins/actions","hotline-web/mixins/user","hotline-web/mixins/channel","hotline-web/mixins/conversation","hotline-web/mixins/jwt","hotline-web/utils/dayjs","hotline-web/mixins/sanitize","hotline-web/mixins/file-upload-helper-mixin","hotline-web/utils/dom-utils","hotline-web/config/environment"],function(e,t,s,n,a,i,r,o,l,c,u,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var m=Ember.Component.extend(s.default,i.default,a.default,n.default,l.default,r.default,c.default,{PLACEHOLDERS:t.default.CONVERSATION.PLACEHOLDERS,CONVERSATION:t.default.CONVERSATION,DOM_ID:t.default.DOM_ID,notification:Ember.inject.service(),hotline:Ember.inject.service(),responseTime30Mins:!1,responseTime7Days:!1,cdnUrl:d.default.EmberENV.cdnUrl,extraParams:{},mediumEditorOptions:Ember.computed({get:function(){return{toolbar:!1,imageDragging:!1,placeholder:{hideOnClick:!1},paste:{forcePlainText:!0,cleanPastedHTML:!1,cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[]}}}}),transitionDelays:100,hideHeader:Ember.computed.alias("session.config.headerProperty.hideHeader"),classNames:["h-conv"],classNameBindings:["hideHeader:hide-header"],allowRR:!0,fileId:"fileUploadInput",blockedFileTypes:t.default.ExcludedFileExtensions,fileType:t.default.FILETYPE,isTextLimitExceeded:!1,pendingUploadTextFileObject:null,isValueInEditor:!1,chatWindowClass:Ember.computed("defaultComposer","conversation.resolvedConversation","shouldHideReplyEditor",{get:function(){var e=""
return this.defaultComposer||(e="".concat(e," button-composer")),this.conversation&&this.conversation.resolvedConversation&&(e="".concat(e," fixed-scroll")),this.shouldHideReplyEditor&&(e="".concat(e," offline-form")),e}}),agentProfileClass:Ember.computed("currentAgent.{title,bio}",{get:function(){var e="",t=Ember.get(this,"currentAgent")
return t&&t.get("title")&&(e="".concat(e," agent-section")),t&&t.get("bio")&&(e="".concat(e," agent-bio")),e}}),isSingleChannel:Ember.computed("isFAQAvailable","channelsCount",{get:function(){return!this.isFAQAvailable&&1===this.channelsCount}}),chatSectionClass:Ember.computed("showAgentProfile","showCalPicker","channelEventReminder.eventDateTime","isAgentProfileExpand","isFocusInput","shouldHideReplyEditor","conversation.resolvedConversation",{get:function(){var e=""
return this.showAgentProfile&&(e="".concat(e," profile")),this.showCalPicker&&(e="".concat(e," show-calendar-picker")),this.channelEventReminder&&this.channelEventReminder.eventDateTime&&(e="".concat(e," cal-notif-active")),this.isAgentProfileExpand&&(e="".concat(e," profile-expand")),this.shouldHideReplyEditor&&(e="".concat(e," offline-form")),this.conversation&&this.conversation.resolvedConversation&&(e="".concat(e," csat-fix")),this.showAgentProfile&&!this.isFocusInput||(e="".concat(e," no-profile")),e}}),replyWrapperClass:Ember.computed("defaultComposer","shouldHideReplyEditor",{get:function(){var e=""
return this.defaultComposer||(e="".concat(e," custom-reply-composer")),this.shouldHideReplyEditor&&(e="".concat(e," offline-form")),e}}),replyEditorClass:Ember.computed("hasFileAttachment","data.fileContent","hotline.ui.onLine","shouldHideReplyEditor",{get:function(){var e=""
return this.hasFileAttachment&&(e="".concat(e," has-file-attachment")),this.data&&this.data.fileContent&&(e="".concat(e," preview")),this.hotline&&this.hotline.ui&&!this.hotline.ui.onLine&&(e="".concat(e," is-disabled")),this.shouldHideReplyEditor&&(e="".concat(e," offline-form")),e}}),hasValueInEditor:Ember.computed("isValueInEditor","data.fileContent","hasFileAttachment",{get:function(){return this.isValueInEditor||this.data&&this.data.fileContent||this.hasFileAttachment}}),doesUserExists:Ember.computed({get:function(){return!0},set:function(e,t){return t}}),validationMsg:Ember.computed("hotline.ui.validationMessage",{get:function(){return this.get("hotline.ui.validationMessage")}}),channelResponseTime:Ember.computed("channelId","hotline.ui.rspTime",{get:function(){var e,t,s=this.get("hotline.ui.rspTime.channelResponseTime"),n=this.get("hotline.ui.rspTime.channelResponseTimesFor7Days"),a=this.channelId,i=[]
return s&&s.length&&(e=s.find(function(e){return e.channelId===a})),n&&n.length&&(t=n.find(function(e){return e.channelId===a})),e?(this.set("responseTime30Mins",!0),i=e):t&&(this.set("responseTime7Days",!0),i=t),i}}),customResponseTime:Ember.computed("channelId","hotline.ui.rspTime",{get:function(){var e,t=this.get("hotline.ui.rspTime.channelCustomResponse"),s=this.channelId
return t&&t.length&&(e=t.findBy("channelId",s)),e}}),checkIfRtlIE:Ember.computed("hotline.ui.browser",{get:function(){var e=this.get("hotline.ui.browser.name"),t=document.body.attributes.dir
return"rtl"===(t&&t.value)&&("Trident"===e||"Microsoft Internet Explorer"===e)}}),showAgentProfile:Ember.computed("currentAgent.{firstName,lastName}","hideName",{get:function(){var e=Ember.get(this,"currentAgent")
return!!e&&((Ember.get(e,"firstName")||Ember.get(e,"lastName"))&&!this.hideName)}}),isSocialLinkPresent:Ember.computed("currentAgent.socialInfo.{twitter,facebook,linkedIn,skype}",{get:function(){var e=Ember.get(this,"currentAgent.socialInfo")
return!!e&&(e.twitter||e.facebook||e.linkedIn||e.skype)}}),onScroll:function(e){var t=e&&e.target
this.set("isAgentProfileExpand",!1),t&&t.scrollTop<=0?u.default.addCSSInline(this.element.querySelector(".box_shadow"),"box-shadow","none"):u.default.addCSSInline(this.element.querySelector(".box_shadow"),"box-shadow","0 2px 4px 0 rgba(156, 156, 156, .2)")},scrollCallback:Ember.computed({get:function(){return this.onScroll.bind(this)}}),willDestroyElement:function(){this._super.apply(this,arguments),this.hotline.off("conversationsLoadedEvent",this.conversationsLoadedEventCB),u.default.unbindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback),this.get("hotline.ui.isDesktop")||(u.default.unbindEvent(this.element.querySelector("#app-conversation-editor"),"focus"),u.default.unbindEvent(this.element.querySelector("#app-conversation-editor"),"blur"),u.default.unbindEvent(window,"resize")),this.isJWTStrictMode&&this.jwt.off("didAuthenticateUser",this.didAuthUserCB)},currentAgent:Ember.computed("lastAgentMessage.messageId",{get:function(){var e=this.lastAgentMessage,t=e&&e.get("messageUserAlias")
return t&&e.get("messageType")===this.get("CONVERSATION.MESSAGE_TYPE.BOT")?Ember.Object.create({firstName:e.get("userFirstName"),lastName:e.get("userLastName"),id:e.get("messageUserId"),alias:t,profilePicUrl:e.get("messageUserProfilePic")||"https://assetscdn-wchat.freshchat.com/static/assets/images/ic_bot_dp-c445c55370a172afaf13bc02ce7c075d.svg"}):!!t&&this.agentService.getAgentInfo(t)}}),getResponseMinutes:function(e){var t=this.get("session.config.content.headers.channel_response.online")
if(t&&t.minutes){if(t.minutes.one&&1===e)return this.replaceWithResponseTime(t.minutes.one,e)
if(t.minutes.more&&e>1)return this.replaceWithResponseTime(t.minutes.more,e)}return null},getResponseHours:function(e){var t=this.get("session.config.content.headers.channel_response.online")
if(t&&t.hours){if(t.hours.one&&1===e)return this.replaceWithResponseTime(t.hours.one,e)
if(t.hours.more&&e>1)return this.replaceWithResponseTime(t.hours.more,e)}return null},responseTime:Ember.computed("channelResponseTime",{get:function(){var e,t=this.channelResponseTime,s=t&&t.responseTime,n=this.get("session.config.content.headers.channel_response.online"),a=this.responseTime30Mins,i=this.customResponseTime
if(i)return i.customRespMsg
if(s){if(s<3600){if((s=Math.ceil(s/60))>10){if((e=5*Math.ceil(s/5))<60){var r=this.getResponseMinutes(e)
return r||(a?this.intl.t("conversation.response_time.minutes",{count:e}):this.intl.t("conversation.response_time_7days.minutes",{count:e}))}return n&&n.hours&&n.hours.one?n.hours.one:a?this.intl.t("conversation.response_time.hours",{count:1}):this.intl.t("conversation.response_time_7days.hours",{count:1})}var o=this.getResponseMinutes(s)
return o||(a?this.intl.t("conversation.response_time.minutes",{count:s}):this.intl.t("conversation.response_time_7days.minutes",{count:s}))}if(s>=3600){if((s=Math.ceil(s/3600))<=2){var l=this.getResponseHours(s)
return l||(a?this.intl.t("conversation.response_time.hours",{count:s}):this.intl.t("conversation.response_time_7days.hours",{count:s}))}return n&&n.hours&&n.hours.more?this.replaceWithResponseTime(n.hours.more,s):a?this.intl.t("conversation.response_time.more"):this.intl.t("conversation.response_time_7days.more")}return s=Math.ceil(s),n&&n.minutes&&n.minutes.one?n.minutes.one:a?this.intl.t("conversation.response_time.minutes",{count:1}):this.intl.t("conversation.response_time_7days.minutes",{count:1})}return n&&n.default}}),conversationDescription:Ember.computed("isChannelOutsideBusinessHour","session.config.content.headers.channel_response.offline","responseTime","isChannelOffline",{get:function(){var e=this.isChannelOutsideBusinessHour,t=this.responseTime,s=this.intl,n=this.get("session.config.content.headers.channel_response.offline"),a=this.isChannelOffline
return e?a?s.t("channel.offline_message"):n?this.sanitizeHTML(n,"strict"):s.t("channel.away_message"):t||null}}),shouldHideReplyEditor:Ember.computed("lastMessage",{get:function(){var e=this.lastMessage
return!(!e||!e.get("offlineMessage"))||!(!e||!e.get("flowStepId")||e.get("messageType")!==t.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.SENT_BY_AGENT)}}),isChannelOffline:Ember.computed("isChannelOutsideBusinessHour","offlineExperienceEnabledChannel","model.offlineExperience.offlineExpEnabled",{get:function(){return!!(this.get("model.offlineExperience.offlineExpEnabled")&&this.offlineExperienceEnabledChannel&&this.isChannelOutsideBusinessHour)}}),isAwayExperienceEligible:function(){if(this.get("hotline.ui.triggerTimerForBusinessHours")===t.default.messengerVisibilityOptions.businessHours)return!1
if(this.isChannelOffline&&this.offlineExperienceEnabledChannel&&this.get("model.offlineExperience.offlineExpEnabled")){var e=this.conversation,s=this.currentConversationhasPendingCsat,n=this.isLastUserMessageTimeExceeded(),a=this.repliedToLastOfflineMessage,i=this.currentConversationStatus,r=this.conversationOfflineMessagesCount
if(!e)return!0
if(e&&r<1&&e&&!e.conversationId)return!0
if(!s&&(n||i===t.default.CONVERSATION.CONVERSATION_STATUS.RESOLVED)&&(a||0===r))return!0}return!1},beforeChannelEnter:function(){var e=this
this.isDestroyed||this.isDestroying||this.parentView&&!this.parentView.get("isOpen")||this.get("hotline.ui.isConversationsLoaded")&&Ember.run.later(function(){e.channelEnter()},1)},updateUnrepliedFlowMsgs:function(){var e=this.messages&&this.messages.filter(function(e){return Ember.get(e,"flowId")&&!Ember.get(e,"messageId")&&!Ember.get(e,"hasBeenRepliedTo")})
this.session&&this.session.user&&this.session.user.alias&&!this.messagesCountWithMessageId&&e.forEach(function(e){Ember.set(e,"needsUpdation",!1)})},channelEnter:function(){this.hasUnrepliedFlowMessages?this.canTriggerFlow()?this.triggerChannelEnter():this.updateUnrepliedFlowMsgs():this.isOngoingFlow||(this.hasUnrepliedOfflineMessage?this.triggerChannelEnter():this.currentConversationStatus!==t.default.CONVERSATION.CONVERSATION_STATUS.RESOLVED&&this.messagesCountWithMessageId?this.isAwayExperienceEligible()&&(this.hasUnrepliedOfflineMessage&&this.removelastOfflineMessage(),this.showAwayExperience()):this.triggerChannelEnter())},triggerChannelEnter:function(){this.hasUnrepliedFlowMessages&&this.removeFlowMessages(),this.hasUnrepliedOfflineMessage&&this.removelastOfflineMessage(),this.isAwayExperienceEligible()?this.showAwayExperience():this.channelInfo&&this.get("channelInfo.flowId")&&this.canShowChannelFlowForBusinessHourSetting&&this.triggerChannelFlow()},triggerChannelFlow:function(){var e=this,s=this.get("channelInfo.flowMessages"),n=this.get("channelInfo.serviceAccount")
s&&s.forEach(function(s){e.send("updateMessage",{flowId:e.get("channelInfo.flowId"),flowVersionId:e.get("channelInfo.flowVersionId"),campaignMessageId:s.campaignMessageId,flowStepId:s.flowStepId,hasBeenRepliedTo:!1,needsUpdation:e.getNeedUpdationValue(s),messageFragments:s.messageFragments,replyFragments:s.replyFragments,messageUserName:n.firstName,userFirstName:n.firstName,messageUserType:1,internalMeta:s.internalMeta,messageType:s.messageType||t.default.CONVERSATION.MESSAGE_TYPE.FREDDY_BOT,messageUserId:n.id,messageUserAlias:n.alias,read:!1,createdMillis:(new Date).getTime(),messageUserProfilePic:n.profilePicUrl})})},offlineExperienceEnabledChannel:Ember.computed("model.offlineExperience.channelIds.[]","channel.channelId",{get:function(){var e=this.get("model.offlineExperience.channelIds"),t=this.get("channel.channelId")
return e&&e.find(function(e){return e===t})}}),isChannelOutsideBusinessHour:Ember.computed("hotline.ui.awayMessage","channel.operatingHoursId",{get:function(){var e=this.get("hotline.ui.awayMessage"),t=this.get("channel.operatingHoursId"),s=e&&e.findBy("operatingHoursId",t)
return(!s||s&&!s.enabled)&&(s=e&&e.findBy("defaultBhr",!0)),s&&s.awayMessage}}),showAwayExperience:function(){var e=this.get("model.offlineExperience.awayMessage.messageFragments"),t=this.get("CONVERSATION.MESSAGE_SOURCE.OFFLINE")
this.send("updateMessage",{messageFragments:e,messageUserType:1,messageType:1,read:!1,needsUpdation:!0,source:t,createdMillis:(new Date).getTime(),offlineMessage:!0,hasBeenRepliedToOffline:!1})},createText:function(e){var t=document.createElement("p")
t.innerHTML="\r\n"===e||"\n"===e?"<br>":e,this.insertContentToEditor(t),this.set("height",this.$().height())},channelEventReminder:Ember.computed("upcomingCalendarEventMessage",{get:function(){var e=this.upcomingCalendarEventMessage
if(e){var t=e.internalMeta&&e.internalMeta.calendarMessageMeta&&e.internalMeta.calendarMessageMeta.calendarEventLink,s=e.messageFragments&&e.messageFragments[0],n=s&&s.startMillis
return{eventLink:t,eventDateTime:n&&(0,o.default)(n).format("LLL")}}return null}}),insertContentToEditor:function(e){var t=this.mediumEditor,s=t.elements[0]
s&&(e&&s.appendChild(e),t.events.updateInput(s,{target:s,currentTarget:s}))},emptyContentEditor:function(){var e=this.mediumEditor,t=e&&e.elements[0]
t&&(t.innerHTML="",e.events.updateInput(t,{target:t,currentTarget:t})),this.set("height",this.$().height())},prepopulateText:Ember.observer("hotline.ui.channelReplyText",function(){var e=this.get("hotline.ui.channelReplyText"),t=this.get("hotline.ui.channelSendMessage")
e&&(this.emptyContentEditor(),this.createText(e),this.set("hotline.ui.channelReplyText",null),t&&(this.set("hotline.ui.channelSendMessage",!1),this.send("beforeSendMessage")))}),didAuthUserCB:Ember.computed({get:function(){return this.didAuthenticateUser.bind(this)}}),didAuthenticateUser:function(){!this.hasUserToCreate||this.isJwtExpired()||this.get("session.user.alias")||this.getItemLS("isUserCreateSent")||this.send("createNewUser"),this.jwt.auth.expired?(this.disableReplyContainer(),this.send("updateMessageAsNotAuthenticated")):this.jwt.auth.expiredAt||this.jwt.auth.scheduled?this.enableReplyContainer():this.jwt.auth.user&&(this.enableReplyContainer(),this.get("hotline.ui.offlineMessagesFragments")&&(this.send("sendOfflineMessages",this.get("hotline.ui.offlineMessagesFragments")),this.set("hotline.ui.offlineMessagesFragments",null)),this.send("updateMessageAsPending"),this.send("sendPendingMessagesAfterAuthenticated"))},userHeader:function(e){this.set("isFocusInput",e),e?u.default.addCSSInline(this.element.querySelector(".fc-agent-profile"),"display","none"):u.default.addCSSInline(this.element.querySelector(".fc-agent-profile"),"display","block")},didInsertElement:function(){var e=this
if(this.hotline.on("conversationsLoadedEvent",this.conversationsLoadedEventCB),this.isJWTStrictMode&&this.jwt.on("didAuthenticateUser",this.didAuthUserCB),Ember.run.scheduleOnce("afterRender",this,this.renderFunction),u.default.bindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback),!this.get("hotline.ui.isDesktop")){u.default.bindEvent(this.element.querySelector("#app-conversation-editor"),"focus",function(){e.userHeader(!0)}),u.default.bindEvent(this.element.querySelector("#app-conversation-editor"),"blur",function(){e.userHeader(!1)})
var t=window.outerHeight
u.default.bindEvent(window,"resize",function(){e.$(window)&&e.userHeader(e.$(window).height()!==t)})}},renderFunction:function(){this.scrollToBottom(),this.send("toggleView",this),"phone"!==this.hotline.device()&&this.focusOnTextarea(),this.prepopulateText()},willMessageSent:Ember.observer("session.didMessage",function(){this.scrollToBottom()}),didMessageSent:function(){var e=this
if(!this.doesUserExists){var s=t.default.EmberModelUrl.conversations,n=this.session,a=n&&n.user,i=n&&n.siteId,r=a&&a.alias,o=n&&n.token,l=this.notification,c=this.localds,u=c&&c.get("messageAfter"),d={src:t.default.CONVERSATION.FETCH.USER_CREATED},m=s.url.replace("{token}",o).replace("{userAlias}",r)
u&&(d.messageAfter=u),i&&(m+="?siteId=".concat(i)),this.set("doesUserExists",!0),this.store.getRequest(s.model,m,d).then(function(t){if(!t||!t.errorCode){var s=t&&t.conversations,n=s&&s[0],a=n&&n.messages
if(a){l.playSound()
for(var i=0,r=a.length;i<r;i++)e.send("updateMessage",a[i])}}})}this.parentView&&!this.parentView.get("isOpen")&&this.parentView.send("toggleChat",this)},init:function(){var e=this
this._super.apply(this,arguments)
this.set("mediumEditorEditCB",function(){e.mediumEditor.saveSelection()}),this.set("mediumEditorFocusCB",function(){setTimeout(function(){return e.mediumEditor.restoreSelection()},1)}),this.set("conversationsLoadedEventCB",function(){e.beforeChannelEnter()}),this.beforeChannelEnter()},scrollToBottom:function(){var e=this.$(".body .h-chat-window .h-conv-chat")
e&&e.length&&(e.animate({scrollTop:e[e.length-1].scrollHeight},1),setTimeout(function(){e.animate({scrollTop:e[e.length-1].scrollHeight},100)},1e3))},focusOnTextarea:function(){var e=this
this.element.querySelector(".editable")?this.focusTextArea():Ember.run.later(this,function(){e.focusTextArea()},0)},focusTextArea:function(){var e=document.createRange(),t=window.getSelection(),s=this.element.querySelector(".editable p:last-child")
if(s&&s[0])e.setStart(s[0],1),e.collapse(!0),t.removeAllRanges(),t.addRange(e)
else if(this.isJWTStrictMode&&this.jwt.auth.expired);else{var n=this.element.querySelector(".editable")
n&&n.focus()}},disableReplyContainer:function(){var e=this.element.querySelector(".editable"),t=this.element.querySelector(".away-experience-form")
window.getSelection().removeAllRanges(),u.default.addCSSInline(this.element.querySelector(".h-reply"),"pointer-events","none"),e&&(e.blur(),u.default.addCSSInline(e,"background-color","grey"),u.default.addCSSInline(e,"pointer-events","none")),t&&(t.blur(),u.default.addCSSInline(t,"pointer-events","none"))},enableReplyContainer:function(){var e=this.element.querySelector(".editable"),t=this.element.querySelector(".away-experience-form")
u.default.addCSSInline(this.element.querySelector(".h-reply"),"pointer-events","auto"),e&&(u.default.addCSSInline(e,"background-color",""),u.default.addCSSInline(e,"pointer-events","auto"),e.focus()),t&&u.default.addCSSInline(t,"pointer-events","auto")},replaceWithResponseTime:function(e,t){return e=(e=e.replace("{{time}}",t)).replace("{!time!}",t)},calculatePosition:function(e,t){var s=document.getElementsByClassName("fc-emoji-picker ")[0],n=e.getBoundingClientRect(),a=n.top,i=n.left,r=n.width,o=n.height,l=t.getBoundingClientRect().height,c=document.getElementsByTagName("body")[0],u=i+e.parentElement.offsetWidth-s.offsetWidth,d={width:r,top:a-(l-o)-5}
return"rtl"===c.getAttribute("dir")?d.right=u:d.left=u,{style:d}},actions:{setIsTextLimitExceeded:function(e){this.set("isTextLimitExceeded",e)},hasValueInEditor:function(e){this.set("isValueInEditor",e)},toggleProfileSize:function(){this.hideBio||this.toggleProperty("isAgentProfileExpand")},onOpen:function(){var e=this
this.beforeChannelEnter(),setTimeout(function(){e.scrollToBottom(),e.setFocus()},this.transitionDelays)},toggleView:function(e){this.parentView&&this.parentView.send("updateView",e)},toggleBack:function(){var e=this
Ember.run.later(function(){e.send("toggleView",void 0),e.gotoHome()},0)},sendButtonMessage:function(e,t){this.send("resizeChatWindow",!0),this.send("beforeSendMessage",e,t)},resizeChatWindow:function(e){var t=document.querySelector(".h-chat-window"),s=document.querySelector(".custom-reply-composer").offsetHeight,n=t.style
Ember.isEmpty(s)||e||!s?n.removeProperty("height"):n.height="calc(100% - "+s+"px)"},sendMessageFromMobile:function(){this.set("isValueInEditor",!1)
var e=this.element.querySelector(".medium-editor-element")
e.blur(),this.send("beforeSendMessage")},sendOfflineMessage:function(e){this.send("sendOfflineMessages",e)},openCalendarPickerMaximized:function(e){Ember.setProperties(this,{slotsData:e&&e.slotsData,meetingLength:e&&e.meetingLength,showCalPicker:!0,calendarMessage:e&&e.message})},closeCalendarPicker:function(){this.set("showCalPicker",!1)},openConfirmationScreenForCalPicker:function(e,t){Ember.set(t,"internalMeta.meetingStartTime",e&&e.from),this.send("closeCalendarPicker")},setConfig:function(e){var t=this.mediumEditor,s=e.actions
t.subscribe("editableClick",this.mediumEditorEditCB),t.subscribe("focus",this.mediumEditorFocusCB),this.set("dropdownActions",s)},updateEditorContent:function(e){var t=this.mediumEditor
t.setContent("<p>".concat(e,"</p>")),t.importSelection({start:e.length,end:e.length}),this.dropdownActions.close()},focusMediumEditor:function(){var e=this.mediumEditor
e.elements[0].click(),e.unsubscribe("focus",this.mediumEditorFocusCB)}}})
e.default=m}),define("hotline-web/components/app-conversation/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"i8J8M1WC",block:'{"symbols":["dd"],"statements":[[7,"div",true],[10,"class","fc-conversation-view"],[8],[0,"\\n  "],[7,"div",true],[11,"class",[29,["h-header ",[28,"if",[[24,["isChannelOffline"]],"offline-header"],null]," ",[28,"if",[[24,["isSingleChannel"]],"single-channel-header"],null]," ",[28,"if",[[28,"not",[[24,["conversationDescription"]]],null],"single-channel-no-desc"],null]]]],[8],[0,"\\n    "],[7,"div",true],[11,"class",[29,["title fadeIn ",[24,["hotline","ui","config","headerProperty","headerStyle"]]]]],[8],[0,"\\n"],[4,"if",[[24,["isSingleChannel"]]],null,{"statements":[[0,"        "],[7,"div",true],[10,"class","logo"],[8],[0,"\\n"],[4,"if",[[24,["hotline","ui","config","widgetLogoUrl"]]],null,{"statements":[[0,"            "],[7,"img",true],[10,"class","animated zoomIn faster"],[11,"src",[24,["hotline","ui","config","widgetLogoUrl"]]],[10,"alt","Freshchat"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"img",true],[10,"class","animated zoomIn faster"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/freshchat-line-1cc53925eae96a19142ee7b807093272.svg"],[10,"alt","Freshchat"],[8],[9],[0,"\\n"]],"parameters":[]}],[0,"        "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div",false],[12,"class","ic-back animated fadeIn faster"],[3,"action",[[23,0,[]],"toggleBack"]],[8],[0,"\\n          "],[7,"i",true],[10,"class","icon icon-ic_back"],[8],[9],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]}],[0,"      "],[7,"div",true],[10,"class","channel-info animated fadeIn faster"],[8],[0,"\\n        "],[7,"h1",true],[11,"class",[29,["channel-title\\n        ",[28,"if",[[28,"not",[[24,["conversationDescription"]]],null],"no-desc"],null],"\\n        ",[28,"if",[[28,"and",[[24,["isChannelOffline"]],[28,"and",[[28,"not",[[24,["showAgentProfile"]]],null]],null]],null],"offline"],null]]]],[8],[0,"\\n          "],[1,[28,"sanitize-html",[[24,["channel","name"]],"strict"],null],false],[0,"\\n        "],[9],[0,"\\n"],[4,"if",[[24,["isChannelOffline"]]],null,{"statements":[[0,"          "],[7,"span",true],[10,"class","away-icon"],[8],[0,"\\n            "],[7,"img",true],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_offline-2ba96002b738a49d340002ab84587a3a.svg"],[8],[9],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[24,["conversationDescription"]]],null,{"statements":[[0,"          "],[7,"p",true],[11,"class",[29,["channel-desc ",[28,"if",[[24,["isChannelOffline"]],"offline-description"],null]]]],[8],[1,[22,"conversationDescription"],false],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n  "],[7,"div",true],[11,"class",[29,["body\\n    ",[28,"if",[[28,"not",[[24,["isFAQAvailable"]]],null],"no-articles"],null]," ",[28,"if",[[24,["isSingleChannel"]],"single-channel-section"],null]," ",[28,"if",[[28,"not",[[24,["conversationDescription"]]],null],"single-channel-no-desc"],null]]]],[8],[0,"\\n"],[0,"    "],[7,"div",true],[11,"class",[29,["h-chat-window ",[22,"chatWindowClass"]]]],[8],[0,"\\n"],[0,"      "],[7,"div",true],[11,"class",[29,["cal-picker-maximized ",[28,"unless",[[24,["showCalPicker"]],"hide-cal-picker"],null]]]],[8],[0,"\\n        "],[5,"ui-calendar-picker-max",[],[["@slotsData","@meetingLength","@calendarMessage","@openConfirmationScreenForCalPicker","@closeCalendarPicker"],[[22,"slotsData"],[22,"meetingLength"],[22,"calendarMessage"],[28,"action",[[23,0,[]],"openConfirmationScreenForCalPicker"],null],[28,"action",[[23,0,[]],"closeCalendarPicker"],null]]]],[0,"\\n      "],[9],[0,"\\n"],[4,"if",[[28,"and",[[24,["showAgentProfile"]],[28,"not",[[24,["isFocusInput"]]],null]],null]],null,{"statements":[[0,"        "],[7,"div",true],[11,"class",[29,["expand ",[28,"if",[[24,["showCalPicker"]],"hide"],null]]]],[8],[0,"\\n          "],[7,"div",true],[11,"class",[29,["fc-agent-profile shadow ",[28,"if",[[24,["isAgentProfileExpand"]],"profile-expand"],null]]]],[8],[0,"\\n            "],[7,"div",true],[10,"class","u-profile-info"],[8],[0,"\\n              "],[7,"div",false],[12,"class",[29,["user-details ",[22,"agentProfileClass"]]]],[3,"action",[[23,0,[]],"toggleProfileSize"]],[8],[0,"\\n                "],[7,"div",true],[10,"class","u-agent-avatar"],[8],[0,"\\n"],[4,"if",[[28,"and",[[24,["currentAgent","profilePicUrl"]],[28,"not",[[24,["hidePic"]]],null]],null]],null,{"statements":[[0,"                    "],[7,"span",true],[10,"class","avatar-content-wrap agent-circle"],[8],[0,"\\n                      "],[7,"img",true],[11,"src",[24,["currentAgent","profilePicUrl"]]],[8],[9],[0,"\\n                    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"and",[[24,["hideName"]],[24,["session","appDisplayName"]]],null]],null,{"statements":[[0,"                    "],[7,"span",true],[10,"class","avatar-content-wrap agent-circle"],[8],[0,"\\n                      "],[7,"span",true],[11,"class",[29,["theme-bg ",[28,"choose-theme",[[24,["session","appDisplayName"]]],null]]]],[8],[0,"\\n                        "],[7,"span",true],[10,"class","avatar-content"],[8],[0,"\\n                          "],[1,[28,"avatar-content",[[24,["session","appDisplayName"]]],null],false],[0,"\\n                        "],[9],[0,"\\n                      "],[9],[0,"\\n                    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["currentAgent","displayName"]]],null,{"statements":[[0,"                    "],[7,"span",true],[10,"class","avatar-content-wrap agent-circle"],[8],[0,"\\n                      "],[7,"span",true],[11,"class",[29,["theme-bg ",[28,"choose-theme",[[24,["currentAgent","displayName"]]],null]]]],[8],[0,"\\n                        "],[7,"span",true],[10,"class","avatar-content"],[8],[0,"\\n                          "],[1,[28,"avatar-content",[[24,["currentAgent","displayName"]]],null],false],[0,"\\n                        "],[9],[0,"\\n                      "],[9],[0,"\\n                    "],[9],[0,"\\n                  "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}],[0,"                "],[9],[0,"\\n                "],[7,"div",true],[10,"class","u-agent-info"],[8],[0,"\\n                  "],[7,"p",true],[10,"class","u-agent-name"],[8],[0,"\\n                    "],[1,[28,"sanitize-html",[[24,["currentAgent","firstName"]],"strict"],null],false],[0,"\\n                  "],[9],[0,"\\n"],[4,"if",[[24,["currentAgent","title"]]],null,{"statements":[[0,"                    "],[7,"p",true],[10,"class","u-agent-designation"],[8],[0,"\\n                      "],[7,"img",true],[10,"class","designation-icon"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/briefcase-regular-22e176d7e55374896af42b92904bb769.svg"],[8],[9],[0,"\\n                      "],[1,[28,"sanitize-html",[[24,["currentAgent","title"]],"strict"],null],false],[0,"\\n                    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"                "],[9],[0,"\\n              "],[9],[0,"\\n"],[4,"if",[[28,"and",[[24,["currentAgent","bio"]],[28,"not",[[24,["hideBio"]]],null]],null]],null,{"statements":[[0,"                "],[7,"div",true],[10,"class","bio-details"],[8],[0,"\\n                  "],[7,"div",true],[10,"class","u-agent-bio"],[8],[0,"\\n                    "],[7,"p",true],[8],[1,[28,"sanitize-html",[[24,["currentAgent","bio"]],"strict"],null],false],[9],[0,"\\n                  "],[9],[0,"\\n"],[4,"unless",[[24,["hideBio"]]],null,{"statements":[[4,"if",[[24,["isSocialLinkPresent"]]],null,{"statements":[[0,"                      "],[7,"div",true],[10,"class","u-social-network"],[8],[0,"\\n"],[4,"if",[[24,["currentAgent","socialInfo","twitter"]]],null,{"statements":[[0,"                          "],[7,"a",true],[11,"href",[29,["https://twitter.com/",[24,["currentAgent","socialInfo","twitter"]]]]],[10,"target","_blank"],[10,"rel","noopener noreferrer"],[8],[0,"\\n                            "],[7,"div",true],[10,"class","u-twitter"],[8],[0,"\\n                              "],[7,"i",true],[10,"class","icon-ic_logo_twitter social-icon"],[8],[9],[0,"\\n                            "],[9],[0,"\\n                          "],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[24,["currentAgent","socialInfo","facebook"]]],null,{"statements":[[0,"                          "],[7,"a",true],[11,"href",[29,["https://facebook.com/",[24,["currentAgent","socialInfo","facebook"]]]]],[10,"target","_blank"],[10,"rel","noopener noreferrer"],[8],[0,"\\n                            "],[7,"div",true],[10,"class","u-fb"],[8],[0,"\\n                              "],[7,"i",true],[10,"class","icon-ic_logo_facebook social-icon"],[8],[9],[0,"\\n                            "],[9],[0,"\\n                          "],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[24,["currentAgent","socialInfo","linkedIn"]]],null,{"statements":[[0,"                          "],[7,"a",true],[11,"href",[29,["https://linkedin.com/",[24,["currentAgent","socialInfo","linkedIn"]]]]],[10,"target","_blank"],[10,"rel","noopener noreferrer"],[8],[0,"\\n                            "],[7,"div",true],[10,"class","u-linked-in"],[8],[0,"\\n                              "],[7,"i",true],[10,"class","icon-ic_logo_linkedin social-icon"],[8],[9],[0,"\\n                            "],[9],[0,"\\n                          "],[9],[0,"\\n"]],"parameters":[]},null],[0,"                      "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"                "],[9],[0,"\\n"]],"parameters":[]},null],[0,"            "],[9],[0,"\\n          "],[9],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[24,["channelEventReminder","eventDateTime"]]],null,{"statements":[[0,"        "],[7,"div",true],[11,"class",[29,["calendar-event-reminder ",[28,"if",[[24,["showCalPicker"]],"hide"],null]]]],[8],[0,"\\n          "],[7,"div",true],[10,"class","reminder-details"],[8],[0,"\\n            "],[7,"i",true],[10,"class","ic-calendar icon-ic_schedule_meeting"],[8],[9],[0,"\\n            "],[7,"span",true],[10,"class","reminder-time-date"],[8],[0,"\\n              "],[1,[24,["channelEventReminder","eventDateTime"]],false],[0,"\\n            "],[9],[0,"\\n          "],[9],[0,"\\n          "],[7,"div",true],[10,"class","invite-more-icon"],[8],[0,"\\n"],[4,"if",[[24,["channelEventReminder","eventLink"]]],null,{"statements":[[0,"              "],[7,"a",true],[10,"target","_blank"],[10,"rel","noreferrer noopener"],[11,"href",[24,["channelEventReminder","eventLink"]]],[8],[1,[28,"t",["calendar.view_details"],null],false],[9],[0,"\\n"]],"parameters":[]},null],[0,"          "],[9],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[7,"div",true],[11,"class",[29,["h-conv-chat h-theme-bg-",[24,["hotline","ui","config","backgroundImage"]]," animated fadeInUp speed scroll-section ",[22,"chatSectionClass"]," ",[28,"if",[[24,["showCalPicker"]],"hide"],null]]]],[8],[0,"\\n        "],[5,"app-conversation-message",[],[["@model","@updateReadReceipt","@isOpen","@extraParams","@sendOfflineMessage","@sendMessage","@resendMessage","@openCalendarPickerMaximized"],[[22,"model"],[28,"action",[[23,0,[]],"updateReadReceipt"],null],[24,["parentView","isOpen"]],[22,"extraParams"],[28,"action",[[23,0,[]],"sendOfflineMessage"],null],[28,"action",[[23,0,[]],"sendMessage"],null],[28,"action",[[23,0,[]],"resendMessage"],null],[28,"action",[[23,0,[]],"openCalendarPickerMaximized"],null]]]],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n    "],[5,"app-csat-form",[],[["@model","@agent"],[[22,"model"],[22,"currentAgent"]]]],[0,"\\n"],[4,"unless",[[24,["conversation","hasPendingCsat"]]],null,{"statements":[[0,"      "],[7,"div",true],[11,"class",[29,["h-reply-wrapper ",[22,"replyWrapperClass"]]]],[8],[0,"\\n"],[0,"        "],[7,"div",true],[11,"class",[29,["h-reply ",[22,"replyEditorClass"]]]],[8],[0,"\\n"],[4,"if",[[28,"or",[[24,["validationMsg"]],[24,["exampletextMessage"]]],null]],null,{"statements":[[0,"            "],[7,"div",true],[11,"class",[29,["h-reply-validation ",[28,"if",[[24,["validationMsg"]],"validation-error"],null]]]],[8],[0,"\\n"],[4,"if",[[24,["validationMsg"]]],null,{"statements":[[0,"                "],[7,"span",true],[8],[0,"\\n                  "],[1,[22,"validationMsg"],false],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[7,"span",true],[8],[0,"\\n                  "],[1,[22,"exampletextMessage"],false],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]}],[0,"            "],[9],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[24,["shouldHideReplyEditor"]]],null,{"statements":[[4,"unless",[[24,["hideFileUpload"]]],null,{"statements":[[4,"if",[[24,["uploadFilesEnabled"]]],null,{"statements":[[0,"                "],[5,"file-upload",[],[["@value","@id","@blockedFileTypes"],[[22,"fileReset"],[22,"fileId"],[22,"blockedFileTypes"]]]],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[5,"file-upload",[],[["@value","@id","@allowedFileTypes"],[[22,"fileReset"],[22,"fileId"],".png,.jpg,.jpeg,.gif"]]],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[4,"if",[[24,["hotline","ui","isDesktop"]]],null,{"statements":[[4,"unless",[[28,"or",[[28,"eq",[[24,["lastAgentMessage","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","BOT"]]],null],[28,"eq",[[24,["lastAgentMessage","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","FREDDY_BOT"]]],null]],null]],null,{"statements":[[4,"unless",[[24,["checkIfRtlIE"]]],null,{"statements":[[0,"                  "],[5,"basic-dropdown",[],[["@calculatePosition","@onClose"],[[22,"calculatePosition"],[28,"action",[[23,0,[]],"focusMediumEditor"],null]]],{"statements":[[0,"\\n                    "],[6,[23,1,["Trigger"]],[],[[],[]],{"statements":[[0,"\\n                      "],[7,"a",false],[12,"href","#"],[12,"class",[29,["h-reply-smiley\\n                                  ",[28,"if",[[24,["isTextLimitExceeded"]],"text-preview-message"],null],"\\n                                  ",[28,"if",[[24,["data","fileData","name"]],"fileAttached"],null]]]],[3,"action",[[23,0,[]],"setConfig",[23,1,[]]]],[8],[0,"\\n                        "],[7,"i",true],[10,"class","icons icon-ic_smiley"],[8],[9],[0,"\\n                      "],[9],[0,"\\n                    "]],"parameters":[]}],[0,"\\n                    "],[6,[23,1,["Content"]],[],[[],[]],{"statements":[[0,"\\n                      "],[5,"emoji-picker",[],[["@selector","@updateAction","@filePath"],["#app-conversation-editor",[28,"action",[[23,0,[]],"updateEditorContent"],null],[22,"cdnUrl"]]]],[0,"\\n                    "]],"parameters":[]}],[0,"\\n                  "]],"parameters":[1]}],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[24,["hideFileUpload"]]],null,{"statements":[[0,"                  "],[7,"a",false],[12,"href","#"],[3,"action",[[23,0,[]],"imageSelect"]],[8],[0,"\\n                    "],[7,"div",true],[11,"class",[29,[[28,"if",[[24,["checkIfRtlIE"]],"h-reply-attach no-emoji","h-reply-attach"],null],"\\n\\n                      ",[28,"if",[[24,["isTextLimitExceeded"]],"text-preview-message"],null]," ",[28,"if",[[24,["data","fileData","name"]],"fileAttached"],null]]]],[8],[0,"\\n                      "],[7,"i",true],[10,"class","icons icon-ic_attachment"],[8],[9],[0,"\\n                    "],[9],[0,"\\n                  "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"              "],[7,"a",false],[12,"class",[29,["h-reply-container ",[28,"if",[[24,["hasValueInEditor"]],"active","disabled"],null]]]],[12,"href","#"],[3,"action",[[23,0,[]],"sendMessageFromMobile"]],[8],[0,"\\n                "],[7,"div",true],[11,"class",[29,["h-reply-send ",[28,"if",[[24,["isTextLimitExceeded"]],"text-preview-message"],null]," ",[28,"if",[[24,["data","fileData","name"]],"fileAttached"],null]]]],[8],[0,"\\n                  "],[7,"i",true],[10,"class","icons icon-ic_send"],[8],[9],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"],[4,"unless",[[24,["hideFileUpload"]]],null,{"statements":[[0,"                "],[7,"a",false],[12,"href","#"],[3,"action",[[23,0,[]],"imageSelect"]],[8],[0,"\\n                  "],[7,"div",true],[11,"class",[29,["h-reply-attach ",[28,"if",[[24,["isTextLimitExceeded"]],"text-preview-message"],null]," ",[28,"if",[[24,["data","fileData","name"]],"fileAttached"],null]]]],[8],[0,"\\n                    "],[7,"i",true],[10,"class","icons icon-ic_attachment"],[8],[9],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[4,"if",[[24,["isTextLimitExceeded"]]],null,{"statements":[[0,"              "],[7,"div",true],[11,"class",[29,["size-exceed-msg position-message-over\\n                ",[28,"if",[[24,["disableHugeMessageSending"]],"disable-send"],null]]]],[8],[0,"\\n                "],[7,"i",true],[10,"class","icon-ic_alert"],[8],[9],[0,"\\n"],[4,"if",[[24,["disableHugeMessageSending"]]],null,{"statements":[[0,"                  "],[1,[28,"t",["size_exceeded_msg.info_msg_sprout"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[1,[28,"t",["size_exceeded_msg.info_msg"],null],true],[0,"\\n"]],"parameters":[]}],[0,"              "],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[24,["data","fileData","name"]]],null,{"statements":[[0,"              "],[7,"div",true],[10,"class","file-meta animated fadeInUp faster"],[8],[0,"\\n                "],[7,"span",true],[10,"class","file-name"],[8],[0,"\\n                  "],[7,"i",true],[11,"class",[29,["icons ",[28,"if",[[28,"eq",[[24,["data","fileType"]],[24,["fileType","IMAGE"]]],null],"icon-ic_image","icon-ic_attachment"],null]]]],[10,"aria-hidden","true"],[8],[9],[0," "],[1,[28,"sanitize-html",[[24,["data","fileData","name"]],"strict"],null],false],[0,"\\n                "],[9],[0,"\\n"],[4,"if",[[24,["data","fileContent"]]],null,{"statements":[[0,"                  "],[7,"span",false],[12,"class","edit"],[3,"action",[[23,0,[]],"imageSelect"]],[8],[0,"\\n                    "],[7,"i",true],[10,"class","icons icon-ic_pencil"],[8],[9],[0,"\\n                  "],[9],[0,"\\n"]],"parameters":[]},null],[0,"                "],[7,"span",false],[12,"class","close"],[3,"action",[[23,0,[]],"clearImage"]],[8],[0,"\\n                  "],[7,"i",true],[10,"class","icon-ic_close_small"],[8],[9],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]},null],[0,"            "],[5,"ui-unity-medium-editor",[],[["@mediumEditor","@options","@onBlur","@onFocus","@onKeyDown","@content","@isValidationError","@isTextLimitExceeded","@exceedAction","@hasValueInEditor","@id"],[[22,"mediumEditor"],[22,"mediumEditorOptions"],[28,"action",[[23,0,[]],"focusOut"],null],[28,"action",[[23,0,[]],"focusIn"],null],[28,"action",[[23,0,[]],"keyPressDown"],null],[22,"content"],[22,"validationMsg"],[22,"isTextLimitExceeded"],[28,"action",[[23,0,[]],"setIsTextLimitExceeded"],null],[28,"action",[[23,0,[]],"hasValueInEditor"],null],[24,["DOM_ID","appConversationEditor"]]]]],[0,"\\n"]],"parameters":[]},null],[0,"        "],[9],[0,"\\n"],[4,"unless",[[24,["defaultComposer"]]],null,{"statements":[[0,"          "],[5,"app-reply-composer",[],[["@message","@sendButtonMessage","@resizeChatWindow"],[[22,"lastMessage"],[28,"action",[[23,0,[]],"sendButtonMessage"],null],[28,"action",[[23,0,[]],"resizeChatWindow"],null]]]],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n"]],"parameters":[]},null],[0,"  "],[9],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-conversation/template.hbs"}})
e.default=t}),define("hotline-web/components/app-csat-form/component",["exports","jquery","hotline-web/utils/constants","hotline-web/mixins/conversation","hotline-web/mixins/channel","hotline-web/mixins/datastore","hotline-web/mixins/jwt","hotline-web/mixins/message"],function(e,t,s,n,a,i,r,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var l=Ember.Component.extend(n.default,a.default,i.default,r.default,o.default,{tagName:"",feedbackSubmitted:!1,allowCsatSubmit:!0,disableCsatVoting:!1,showCsatForm:Ember.computed.or("conversation.{resolvedConversationYes,resolvedConversationNo}","showCsat","feedbackSubmitted"),init:function(){this._super.apply(this,arguments),this.paramsOfPendingCsat={flag:null,cross:null}},isJwtAuthInProgressing:Ember.computed("paramsOfPendingCsat.{flag,cross}",{get:function(){return null!=this.get("paramsOfPendingCsat.flag")&&null!=this.get("paramsOfPendingCsat.cross")}}),enableSubmitButtonForResolvedConversationNo:Ember.computed("allowCsatSubmit","csatRatings.comment",{get:function(){return this.allowCsatSubmit&&!Ember.isBlank(this.get("csatRatings.comment"))}}),enableSubmitButtonForResolvedConversationYes:Ember.computed("allowCsatSubmit","csatRatings.star",{get:function(){return this.allowCsatSubmit&&this.get("csatRatings.star")>0}}),csatComments:Ember.computed("session.config.content.placeholders.csat_reply",{get:function(){return this.get("session.config.content.placeholders.csat_reply")||this.intl.t("csat.enter_comments")}}),csatRatings:Ember.computed({get:function(){return this.store.createRecord("csatValues",{star:0,comment:""})}}),ratingObserve:Ember.observer("rating_value",function(){var e=this.csatRatings,t=this.rating_value
Ember.set(e,"star",t)}),showCsat:Ember.computed("conversation.hasPendingCsat",{get:function(){var e=this.conversation,t=e&&e.get("hasPendingCsat"),s=this.get("hotline.ui.config"),n=s&&s.csatSettings,a=(new Date).getTime(),i=e&&e.get("csat"),r=n&&n.maximumUserSurveyViewMillis
return n&&n.userCsatViewTimer?!!i&&(a-i.get("initiated")<r?(t&&this.postMessage({action:"csat_received",status:200,success:!0,data:{csatId:i.get("csatId")}}),t):(e&&(Ember.set(e,"hasPendingCsat",!1),Ember.set(e,"csat",null),this.send("save")),!1)):(t&&this.postMessage({action:"csat_received",status:200,success:!0,data:{csatId:i.get("csatId")}}),t)}}),didInsertElement:function(){this.isJWTStrictMode&&this.jwt.on("didAuthenticateUser",this.didAuthUserCB)},willDestroyElement:function(){this.isJWTStrictMode&&this.jwt.off("didAuthenticateUser",this.didAuthUserCB)},didAuthUserCB:Ember.computed({get:function(){return this.didAuthenticateUser.bind(this)}}),didAuthenticateUser:function(){this.set("disableCsatVoting",!this.jwt.auth.user),this.isJwtAuthInProgressing&&(this.jwt.auth.user&&this.send("submitCsatRating",this.get("paramsOfPendingCsat.flag"),this.get("paramsOfPendingCsat.cross")),this.resetParamsOfPendingCsat())},resetParamsOfPendingCsat:function(){this.set("paramsOfPendingCsat.flag",null),this.set("paramsOfPendingCsat.cross",null)},canVoteForCsat:function(){return this.jwt.auth.expiredAt||this.jwt.auth.scheduled||this.jwt.auth.expired?(this.set("disableCsatVoting",!0),!1):!this.isJwtExpired()||(this.initiateSendingMode(),this.set("disableCsatVoting",!0),!1)},actions:{setCsatStars:function(e){var t=this.csatRatings
Ember.set(t,"star",e)},submitCsatRating:function(e){var n=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
if(this.isJWTStrictMode&&!this.canVoteForCsat())return this.set("paramsOfPendingCsat.flag",e),void this.set("paramsOfPendingCsat.cross",a)
this.set("allowCsatSubmit",!1)
var i=this.conversation,r=this.csatRatings,o=i.get("csat"),l=this.session,c=l&&l.siteId,u=this.localds,d=s.default.EmberModelUrl.csatRating.url.replace("{token}",l.token).replace("{conversationId}",i.get("conversationId")).replace("{csatId}",o.get("csatId")),m={csatResponse:{issueResolved:e}}
a||(Ember.set(m.csatResponse,"stars",r.get("star")),Ember.set(m.csatResponse,"response",r.get("comment"))),c&&(d+="?siteId=".concat(c)),t.default.ajax({type:"POST",url:d,data:JSON.stringify(m),dataType:"json",contentType:"application/json"}).then(function(e){n.set("allowCsatSubmit",!0),e&&e.errorCode||(a?(Ember.set(i,"hasPendingCsat",!1),Ember.set(i,"resolvedConversationYes",!1),Ember.set(i,"resolvedConversationNo",!1),Ember.set(r,"star",0),Ember.set(r,"comment",""),u.save(),Ember.set(i,"csat",null)):(n.set("feedbackSubmitted",!0),Ember.set(i,"resolvedConversationYes",!1),Ember.set(i,"resolvedConversationNo",!1),setTimeout(function(){n.set("feedbackSubmitted",!1),Ember.set(i,"hasPendingCsat",!1),Ember.set(r,"star",0),Ember.set(r,"comment",""),u.save(),Ember.set(i,"csat",null)},2e3)),n.resetParamsOfPendingCsat(),Ember.set(m.csatResponse,"csatId",o.get("csatId")),Ember.set(m.csatResponse,"conversationId",i.get("conversationId")),n.postMessage({action:"csat_updated",status:200,success:!0,data:{message:m}}))},function(e){n.set("allowCsatSubmit",!0),n.logger.log(e),Ember.set(r,"star",0),Ember.set(r,"comment",""),n.set("feedbackSubmitted",!1),Ember.set(i,"hasPendingCsat",!1),Ember.set(i,"resolvedConversationYes",!1),Ember.set(i,"resolvedConversationNo",!1),Ember.set(i,"csat",null),n.resetParamsOfPendingCsat(),n.postMessage({action:"csat_updated",status:400,success:!1,data:{message:e}}),u.save()})},csatVotingNo:function(){this.isJWTStrictMode&&this.canVoteForCsat(),this.conversation.set("resolvedConversationNo",!0)},csatVotingYes:function(){this.isJWTStrictMode&&this.canVoteForCsat(),this.conversation.set("resolvedConversationYes",!0)}}})
e.default=l}),define("hotline-web/components/app-csat-form/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"CZ1va9fC",block:'{"symbols":[],"statements":[[4,"if",[[24,["showCsatForm"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","csat-rating animated fadeIn speed"],[8],[0,"\\n"],[4,"if",[[24,["conversation","resolvedConversationYes"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","vote-yes-outer animated delay-1 slideInUp speed"],[8],[0,"\\n        "],[7,"div",true],[10,"class","vote-yes-wrapper"],[8],[0,"\\n          "],[7,"div",true],[10,"class","vote-yes"],[8],[0,"\\n            "],[7,"div",true],[10,"class","comment-header"],[8],[0,"\\n              "],[7,"span",true],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","csat_yes_question"]]],null,{"statements":[[0,"                  "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","csat_yes_question"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["conversation","csat","question"]]],null,{"statements":[[0,"                  "],[1,[28,"sanitize-html",[[24,["conversation","csat","question"]],"strict"],null],false],[0,"\\n                "]],"parameters":[]},null]],"parameters":[]}],[0,"              "],[9],[0,"\\n              "],[7,"div",false],[12,"class",[29,["csat-minimize ",[28,"if",[[28,"not",[[24,["allowCsatSubmit"]]],null],"disabled"],null]]]],[3,"action",[[23,0,[]],"submitCsatRating",true,true,true]],[8],[0,"\\n                "],[7,"i",true],[10,"class","close_search_input icon-ic_close_small mild"],[8],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n            "],[7,"div",true],[10,"class","align-middle"],[8],[0,"\\n              "],[7,"div",true],[10,"class","voting-section"],[8],[0,"\\n                "],[7,"div",true],[10,"class","user-logo"],[8],[0,"\\n"],[4,"if",[[28,"and",[[24,["agent","profilePicUrl"]],[28,"not",[[24,["hidePic"]]],null]],null]],null,{"statements":[[0,"                    "],[7,"span",true],[10,"class","avatar-content-wrap agent-circle"],[8],[0,"\\n                      "],[7,"img",true],[11,"src",[24,["agent","profilePicUrl"]]],[8],[9],[0,"\\n                    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["agent","displayName"]]],null,{"statements":[[0,"                    "],[7,"span",true],[10,"class","avatar-content-wrap agent-circle"],[8],[0,"\\n                      "],[7,"span",true],[11,"class",[29,["theme-bg ",[28,"choose-theme",[[24,["agent","displayName"]]],null]]]],[8],[0,"\\n                        "],[7,"span",true],[10,"class","avatar-content"],[8],[0,"\\n                          "],[1,[28,"avatar-content",[[24,["agent","displayName"]]],null],false],[0,"\\n                        "],[9],[0,"\\n                      "],[9],[0,"\\n                    "],[9],[0,"\\n                  "]],"parameters":[]},null]],"parameters":[]}],[0,"                "],[9],[0,"\\n                "],[7,"div",true],[10,"class","rate"],[8],[0,"\\n                  "],[7,"h2",true],[8],[1,[28,"t",["csat.rate_here"],null],false],[9],[0,"\\n                  "],[7,"fieldset",true],[10,"class","rating"],[8],[0,"\\n                    "],[5,"radio-button",[],[["@id","@name","@value","@group","@onchange"],["star5","rating","5",[24,["csatRatings","star"]],[28,"action",[[23,0,[]],"setCsatStars"],null]]]],[0,"\\n                    "],[7,"label",true],[10,"for","star5"],[10,"title",""],[8],[9],[0,"\\n                    "],[5,"radio-button",[],[["@id","@name","@value","@group","@onchange"],["star4","rating","4",[24,["csatRatings","star"]],[28,"action",[[23,0,[]],"setCsatStars"],null]]]],[0,"\\n                    "],[7,"label",true],[10,"for","star4"],[10,"title",""],[8],[9],[0,"\\n                    "],[5,"radio-button",[],[["@id","@name","@value","@group","@onchange"],["star3","rating","3",[24,["csatRatings","star"]],[28,"action",[[23,0,[]],"setCsatStars"],null]]]],[0,"\\n                    "],[7,"label",true],[10,"for","star3"],[10,"title",""],[8],[9],[0,"\\n                    "],[5,"radio-button",[],[["@id","@name","@value","@group","@onchange"],["star2","rating","2",[24,["csatRatings","star"]],[28,"action",[[23,0,[]],"setCsatStars"],null]]]],[0,"\\n                    "],[7,"label",true],[10,"for","star2"],[10,"title",""],[8],[9],[0,"\\n                    "],[5,"radio-button",[],[["@id","@name","@value","@group","@onchange"],["star1","rating","1",[24,["csatRatings","star"]],[28,"action",[[23,0,[]],"setCsatStars"],null]]]],[0,"\\n                    "],[7,"label",true],[10,"for","star1"],[10,"title",""],[8],[9],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n                "],[7,"div",true],[10,"class","comment"],[8],[0,"\\n                  "],[7,"div",true],[8],[0,"\\n"],[4,"if",[[24,["conversation","csat","mobileUserCommentsAllowed"]]],null,{"statements":[[0,"                      "],[5,"textarea",[[12,"class","csat-comments"],[12,"placeholder",[22,"csatComments"]]],[["@value","@rows","@autofocus","@maxlength"],[[24,["csatRatings","comment"]],"3",true,200]]],[0,""]],"parameters":[]},null],[0,"                  "],[9],[0,"\\n                "],[9],[0,"\\n                "],[7,"div",true],[10,"class","submit-rating"],[8],[0,"\\n"],[4,"if",[[28,"and",[[24,["enableSubmitButtonForResolvedConversationYes"]],[28,"not",[[24,["disableCsatVoting"]]],null]],null]],null,{"statements":[[0,"                    "],[7,"span",false],[12,"class","btn submit"],[3,"action",[[23,0,[]],"submitCsatRating",true]],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","actions","csat_submit"]]],null,{"statements":[[0,"                        "],[1,[28,"sanitize-html",[[24,["session","config","content","actions","csat_submit"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[1,[28,"t",["csat.submit"],null],false],[0,"\\n"]],"parameters":[]}],[0,"                    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[7,"span",true],[10,"class","btn submit disabled"],[8],[0,"\\n"],[4,"if",[[24,["isJwtAuthInProgressing"]]],null,{"statements":[[0,"                        "],[1,[28,"t",["common.button.submitting"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["session","config","content","actions","csat_submit"]]],null,{"statements":[[0,"                        "],[1,[28,"sanitize-html",[[24,["session","config","content","actions","csat_submit"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[1,[28,"t",["csat.submit"],null],false],[0,"\\n                      "]],"parameters":[]}]],"parameters":[]}],[0,"                    "],[9],[0,"\\n"]],"parameters":[]}],[0,"                "],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n          "],[9],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["conversation","resolvedConversationNo"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","vote-yes-outer animated delay-1 slideInUp speed"],[8],[0,"\\n        "],[7,"div",true],[10,"class","vote-yes-wrapper"],[8],[0,"\\n          "],[7,"div",true],[10,"class","vote-yes"],[8],[0,"\\n            "],[7,"div",true],[10,"class","comment-header"],[8],[0,"\\n              "],[7,"span",true],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","csat_no_question"]]],null,{"statements":[[0,"                  "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","csat_no_question"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[1,[28,"t",["csat.csat_no_comment"],null],false],[0,"\\n"]],"parameters":[]}],[0,"              "],[9],[0,"\\n              "],[7,"div",false],[12,"class",[29,["csat-minimize ",[28,"if",[[28,"not",[[24,["allowCsatSubmit"]]],null],"disabled"],null]]]],[3,"action",[[23,0,[]],"submitCsatRating",false,true,true]],[8],[0,"\\n                "],[7,"i",true],[10,"class","close_search_input icon-ic_close_small mild"],[8],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n            "],[7,"div",true],[10,"class","align-middle"],[8],[0,"\\n              "],[7,"div",true],[10,"class","voting-section"],[8],[0,"\\n                "],[7,"div",true],[10,"class","comment"],[8],[0,"\\n                  "],[7,"div",true],[8],[0,"\\n                    "],[5,"textarea",[[12,"class","csat-comments"],[12,"placeholder",[22,"csatComments"]]],[["@value","@rows","@autofocus","@maxlength"],[[24,["csatRatings","comment"]],"3",true,200]]],[0,"                  "],[9],[0,"\\n                "],[9],[0,"\\n                "],[7,"div",true],[10,"class","submit-rating"],[8],[0,"\\n"],[4,"if",[[28,"and",[[24,["enableSubmitButtonForResolvedConversationNo"]],[28,"not",[[24,["disableCsatVoting"]]],null]],null]],null,{"statements":[[0,"                    "],[7,"span",false],[12,"class","btn submit"],[3,"action",[[23,0,[]],"submitCsatRating",false]],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","actions","csat_submit"]]],null,{"statements":[[0,"                        "],[1,[28,"sanitize-html",[[24,["session","config","content","actions","csat_submit"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[1,[28,"t",["csat.submit"],null],false],[0,"\\n"]],"parameters":[]}],[0,"                    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[7,"span",true],[10,"class","btn submit disabled"],[8],[0,"\\n"],[4,"if",[[24,["isJwtAuthInProgressing"]]],null,{"statements":[[0,"                        "],[1,[28,"t",["common.button.submitting"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["session","config","content","actions","csat_submit"]]],null,{"statements":[[0,"                        "],[1,[28,"sanitize-html",[[24,["session","config","content","actions","csat_submit"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                        "],[1,[28,"t",["csat.submit"],null],false],[0,"\\n                      "]],"parameters":[]}]],"parameters":[]}],[0,"                    "],[9],[0,"\\n"]],"parameters":[]}],[0,"                "],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n          "],[9],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"and",[[24,["showCsat"]],[28,"not",[[24,["conversation","resolvedConversationYes"]]],null],[28,"not",[[24,["conversation","resolvedConversationNo"]]],null]],null]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","csat-inner animated delay-1 slideInUp speed"],[8],[0,"\\n        "],[7,"span",true],[10,"class","text"],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","csat_question"]]],null,{"statements":[[0,"            "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","csat_question"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[28,"t",["csat.csat_question"],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[9],[0,"\\n        "],[7,"div",true],[10,"class","btn-csat-wrapper"],[8],[0,"\\n          "],[7,"span",false],[12,"class","btn-csat btn-csat-yes"],[3,"action",[[23,0,[]],"csatVotingYes"]],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","actions","csat_yes"]]],null,{"statements":[[0,"              "],[1,[28,"sanitize-html",[[24,["session","config","content","actions","csat_yes"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[28,"t",["conversation.push_notification.yes"],null],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[9],[0,"\\n          "],[7,"span",false],[12,"class","btn-csat btn-csat-no"],[3,"action",[[23,0,[]],"csatVotingNo"]],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","actions","csat_no"]]],null,{"statements":[[0,"              "],[1,[28,"sanitize-html",[[24,["session","config","content","actions","csat_no"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[28,"t",["conversation.push_notification.no"],null],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[9],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["feedbackSubmitted"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","csat-inner animated slideInUp speed"],[8],[0,"\\n        "],[7,"div",true],[10,"class","thank-you-feedback"],[8],[0,"\\n          "],[7,"div",true],[10,"class","thank-you-content"],[8],[0,"\\n            "],[7,"div",true],[10,"class","user-logo"],[8],[0,"\\n"],[4,"if",[[28,"and",[[24,["agent","profilePicUrl"]],[28,"not",[[24,["hidePic"]]],null]],null]],null,{"statements":[[0,"                "],[7,"span",true],[10,"class","avatar-content-wrap agent-circle"],[8],[0,"\\n                  "],[7,"img",true],[11,"src",[24,["agent","profilePicUrl"]]],[8],[9],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["agent","displayName"]]],null,{"statements":[[0,"                "],[7,"span",true],[10,"class","avatar-content-wrap agent-circle"],[8],[0,"\\n                  "],[7,"span",true],[11,"class",[29,["theme-bg ",[28,"choose-theme",[[24,["agent","displayName"]]],null]]]],[8],[0,"\\n                    "],[7,"span",true],[10,"class","avatar-content"],[8],[0,"\\n                      "],[1,[28,"avatar-content",[[24,["agent","displayName"]]],null],false],[0,"\\n                    "],[9],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n              "]],"parameters":[]},null]],"parameters":[]}],[0,"            "],[9],[0,"\\n            "],[7,"h2",true],[8],[1,[28,"t",["csat.submitted"],null],false],[9],[0,"\\n            "],[7,"span",true],[10,"class","thank-you"],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","csat_thankyou"]]],null,{"statements":[[0,"                "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","csat_thankyou"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[28,"t",["csat.thank_you"],null],false],[0,"\\n"]],"parameters":[]}],[0,"            "],[9],[0,"\\n          "],[9],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n    "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-csat-form/template.hbs"}})
e.default=t}),define("hotline-web/components/app-faq-list/component",["exports","hotline-web/mixins/datastore","hotline-web/mixins/faq","hotline-web/mixins/sanitize"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Component.extend(t.default,s.default,n.default,{tagName:"",isShowMoreCategories:Ember.computed.gt("faqCategories.length",3),isCategoriesPresent:Ember.computed.gt("faqCategories.length",0),faqCategories:Ember.computed("categories","categories.[]","session.faqTags",{get:function(){var e=this.categories,t=this.get("session.faqTags")
return this.filterFAQCategories(e,t)}}),sliceCategories:Ember.computed("faqCategories",{get:function(){return this.faqCategories&&this.faqCategories.length>3?this.faqCategories.slice(0,3):this.faqCategories}}),actions:{gotoCategory:function(e){this.router.send("gotoFAQCategory",e.categoryId)}}})
e.default=a}),define("hotline-web/components/app-faq-list/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"RaRHOSWZ",block:'{"symbols":["obj","index"],"statements":[[4,"if",[[24,["isCategoriesPresent"]]],null,{"statements":[[0,"  "],[7,"div",true],[11,"class",[29,["faq-list animated fadeInUp delay faster ",[28,"if",[[24,["isShowMoreCategories"]],"show-more"],null]]]],[8],[0,"\\n    "],[7,"div",true],[10,"class","faq-header"],[8],[0,"\\n      "],[7,"div",true],[10,"class","title-header"],[8],[0,"\\n        "],[7,"div",true],[10,"class","list-sub-title"],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","faq"]]],null,{"statements":[[0,"            "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","faq"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[28,"t",["faqs.faq_title"],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[9],[0,"\\n      "],[9],[0,"\\n      "],[7,"div",true],[10,"class","search-category"],[8],[0,"\\n        "],[5,"link-to",[[12,"class","link-to"]],[["@route","@replace","@query"],["home.faqs",true,[28,"hash",null,[["isDeepLinkFAQ","isDeepLinkCategory"],["false","false"]]]]],{"statements":[[0,"\\n          "],[7,"i",true],[10,"class","icon-ic_search"],[8],[9],[0,"\\n        "]],"parameters":[]}],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n    "],[7,"div",true],[10,"class","faq-categories"],[8],[0,"\\n      "],[7,"ul",true],[10,"class","categories-list"],[8],[0,"\\n"],[4,"each",[[24,["sliceCategories"]]],null,{"statements":[[0,"          "],[7,"li",false],[3,"action",[[23,0,[]],"gotoCategory",[23,1,[]]]],[8],[0,"\\n            "],[7,"div",true],[10,"class","category-item"],[8],[0,"\\n              "],[7,"div",true],[10,"class","category-icon"],[8],[0,"\\n"],[4,"if",[[23,1,["icon"]]],null,{"statements":[[0,"                  "],[7,"img",true],[11,"src",[23,1,["icon"]]],[10,"class","img-circle avatar-image"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[7,"span",true],[11,"class",[29,["category-content-wrap ",[28,"choose-theme",[[23,1,["title"]]],null]]]],[8],[0,"\\n                    "],[1,[28,"avatar-content",[[23,1,["title"]]],null],false],[0,"\\n                  "],[9],[0,"\\n"]],"parameters":[]}],[0,"              "],[9],[0,"\\n              "],[7,"div",true],[10,"class","category-name"],[8],[0,"\\n                "],[7,"div",true],[10,"class","faq-title"],[8],[0,"\\n                  "],[1,[28,"sanitize-html",[[23,1,["title"]],"strict"],null],false],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n            "],[7,"div",true],[10,"class","border-bottom"],[8],[9],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[1,2]},null],[0,"      "],[9],[0,"\\n"],[4,"if",[[24,["isShowMoreCategories"]]],null,{"statements":[[0,"        "],[7,"div",true],[10,"class","see_more_faqs"],[8],[0,"\\n          "],[5,"link-to",[[12,"class","link-to show-more-link"]],[["@route","@replace","@query"],["home.faqs",true,[28,"hash",null,[["isDeepLinkFAQ","isDeepLinkCategory"],["false","false"]]]]],{"statements":[[0,"\\n            "],[1,[28,"t",["faqs.show_more_categories"],null],false],[0,"\\n          "]],"parameters":[]}],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-faq-list/template.hbs"}})
e.default=t}),define("hotline-web/components/app-home/component",["exports","hotline-web/mixins/activity","hotline-web/mixins/brand-check-mixin","hotline-web/mixins/datastore","hotline-web/utils/dom-utils"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Component.extend(t.default,s.default,n.default,{classNames:["h-channel"],isRoutedFromFAQ:Ember.computed.reads("model.isRoutedFromFAQ"),onScroll:function(e){var t=e&&e.target
t&&(t.scrollHeight-t.scrollTop-t.clientHeight<=0?a.default.addCSSInline(this.element.querySelector(".bottom-gradient"),"visibility","hidden"):a.default.addCSSInline(this.element.querySelector(".bottom-gradient"),"visibility","visible"),t.scrollTop<=0?a.default.addCSSInline(this.element.querySelector(".dummy-bar"),"height","1.5rem"):a.default.addCSSInline(this.element.querySelector(".dummy-bar"),"height","0"))},scrollCallback:Ember.computed({get:function(){return this.onScroll.bind(this)}}),didInsertElement:function(){this._super.apply(this,arguments),a.default.bindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback),this.onScroll({target:this.element.querySelector(".scroll-section")})},willDestroyElement:function(){this._super.apply(this,arguments),this.set("model.isRoutedFromFAQ",!1),a.default.unbindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback)}})
e.default=i}),define("hotline-web/components/app-home/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"kZe6cYZL",block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","home-content"],[8],[0,"\\n  "],[7,"div",true],[10,"class","h-header"],[8],[0,"\\n    "],[7,"div",true],[11,"class",[29,["title fadeIn ",[28,"if",[[24,["isRoutedFromFAQ"]],"home-header"],null]," ",[24,["hotline","ui","config","headerProperty","headerStyle"]]]]],[8],[0,"\\n      "],[7,"div",true],[10,"class","logo"],[8],[0,"\\n"],[4,"if",[[24,["hotline","ui","config","widgetLogoUrl"]]],null,{"statements":[[0,"          "],[7,"img",true],[11,"class",[28,"if",[[24,["isRoutedFromFAQ"]],"home-logo","animated zoomIn faster"],null]],[11,"src",[24,["hotline","ui","config","widgetLogoUrl"]]],[10,"alt","Freshchat"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"img",true],[11,"class",[28,"if",[[24,["isRoutedFromFAQ"]],"home-logo","animated zoomIn faster"],null]],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/freshchat-line-1cc53925eae96a19142ee7b807093272.svg"],[10,"alt","Freshchat"],[8],[9],[0,"\\n"]],"parameters":[]}],[0,"      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n  "],[7,"div",true],[11,"class",[29,["body sections faq-body ",[28,"if",[[24,["hidePoweredBy"]],"no-footer"],null]]]],[8],[0,"\\n"],[0,"    "],[7,"div",true],[11,"class",[29,["dummy-bar ",[24,["hotline","ui","config","headerProperty","headerStyle"]]," ",[28,"if",[[24,["isRoutedFromFAQ"]],"dummyBar"],null]]]],[8],[9],[0,"\\n    "],[7,"div",true],[10,"class","card-layout scroll-section"],[8],[0,"\\n"],[0,"      "],[5,"app-channels-list",[],[[],[]]],[0,"\\n"],[4,"if",[[24,["isFAQAvailable"]]],null,{"statements":[[0,"        "],[5,"app-faq-list",[],[[],[]]],[0,"\\n"]],"parameters":[]},null],[0,"      "],[7,"div",true],[10,"class","bottom-gradient"],[8],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"],[4,"unless",[[24,["hidePoweredBy"]]],null,{"statements":[[0,"  "],[5,"ui-footer-note",[],[[],[]]],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-home/template.hbs"}})
e.default=t}),define("hotline-web/components/app-loader/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({classNames:["app-loader"]})
e.default=t}),define("hotline-web/components/app-loader/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"TQPy0XAi",block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","loader-frame"],[8],[0,"\\n  "],[7,"div",true],[10,"class","loader-wrap"],[8],[0,"\\n    "],[7,"div",true],[10,"class","lds-ring"],[8],[0,"\\n      "],[7,"div",true],[8],[9],[0,"\\n      "],[7,"div",true],[8],[9],[0,"\\n      "],[7,"div",true],[8],[9],[0,"\\n      "],[7,"div",true],[8],[9],[0,"\\n    "],[9],[0,"\\n    "],[7,"h4",true],[10,"class","loader-text"],[8],[0,"\\n      "],[1,[28,"t",["help_text.loading"],null],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-loader/template.hbs"}})
e.default=t}),define("hotline-web/components/app-offline-form/component",["exports","hotline-web/utils/utils","hotline-web/utils/constants"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Component.extend({CONVERSATION:s.default.CONVERSATION,classNames:["away-experience-form"],classNameBindings:["isIOS:ios-device"],isIOS:Ember.computed.readOnly("hotline.ui.isIOS"),init:function(){this._super.apply(this,arguments),this.setProperties({invalidContactInfo:!1,invalidUserMessage:!1,showValidationMark:!1,offlineFormSubmitted:!1}),this.set("extraParams.isOfflineSendingFailed",!1)
var e=this.get("session.user.email")||this.get("session.user.workEmail"),s=this.get("session.user.phone")||this.get("session.user.workNumber")
this.get("hotline.ui.offlineExperience.contactInfo")===this.CONVERSATION.CONTACT_INFO.EMAIL&&e?((0,t.checkReplyValidation)("email",e)&&this.set("showValidationMark",!0),this.set("contactDetail",e)):this.get("hotline.ui.offlineExperience.contactInfo")===this.CONVERSATION.CONTACT_INFO.PHONE&&s&&((0,t.checkReplyValidation)("phone",s)&&this.set("showValidationMark",!0),this.set("contactDetail",s))},contactInfo:Ember.computed("hotline.ui.offlineExperience.contactInfo",{get:function(){return 0===this.get("hotline.ui.offlineExperience.contactInfo")?"email":"phone"}}),contactInfoPlaceholder:Ember.computed("contactInfo",{get:function(){return"email"===this.contactInfo?this.intl.t("away_experience.your_email"):this.intl.t("away_experience.your_phone")}}),createMessageFragment:function(e){return{fragmentType:this.CONVERSATION.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:e.trim()}},validateOfflineForm:function(e,s){var n=this.contactInfo,a=(0,t.checkReplyValidation)(n,e)
return s||a?s?!!a||(this.set("invalidContactInfo",!0),!1):(this.set("invalidUserMessage",!0),this.element.querySelector(".user-message-reply").focus(),!1):(this.set("invalidUserMessage",!0),this.set("invalidContactInfo",!0),this.element.querySelector(".user-message-reply").focus(),!1)},actions:{validateContactInfo:function(){var e=this.contactInfo,s=this.contactDetail,n=(0,t.checkReplyValidation)(e,s)
this.set("showValidationMark",n),n&&this.set("invalidContactInfo",!1)},validateUserMessage:function(){this.userMessage&&this.invalidUserMessage&&this.set("invalidUserMessage",!1)},sendMessages:function(){var e=this.contactDetail,t=this.userMessage
if(this.validateOfflineForm(e,t)){this.set("offlineFormSubmitted",!0),"email"===this.contactInfo&&this.set("session.user.email",e)
var s=this.createMessageFragment(e),n=this.createMessageFragment(t),a=[]
a.push(s),a.push(n),this.sendOfflineMessage(a)}}}})
e.default=n}),define("hotline-web/components/app-offline-form/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"GgKIpubY",block:'{"symbols":[],"statements":[[7,"div",true],[11,"class",[29,["email-input ",[28,"if",[[24,["invalidContactInfo"]],"has-error"],null]]]],[8],[0,"\\n  "],[5,"input",[[12,"class","contact-detail"],[12,"placeholder",[22,"contactInfoPlaceholder"]]],[["@value","@type","@key-up","@autofocus"],[[22,"contactDetail"],"text",[28,"action",[[23,0,[]],"validateContactInfo"],null],"autofocus"]]],[0,"\\n"],[4,"if",[[24,["showValidationMark"]]],null,{"statements":[[0,"    "],[7,"img",true],[10,"class","input-state"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/valid_input-375d1df1cef423cb3ea25cd88465bb11.svg"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["invalidContactInfo"]]],null,{"statements":[[0,"    "],[7,"img",true],[10,"class","input-state"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/invalid_input-2cadbd02ffc4ba1a1248dbe3d281bec8.svg"],[8],[9],[0,"\\n  "]],"parameters":[]},null]],"parameters":[]}],[9],[0,"\\n"],[7,"div",true],[11,"class",[29,["user-comment ",[28,"if",[[24,["invalidUserMessage"]],"has-error"],null]]]],[8],[0,"\\n  "],[5,"textarea",[[12,"class","user-message-reply"],[12,"placeholder",[28,"t",["away_experience.offline_reply"],null]]],[["@value","@type","@key-up","@rows"],[[22,"userMessage"],"text",[28,"action",[[23,0,[]],"validateUserMessage"],null],"15"]]],[0,""],[9],[0,"\\n"],[4,"if",[[24,["extraParams","isOfflineSendingFailed"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","error-text"],[8],[0,"\\n    "],[7,"span",true],[8],[0,"\\n      "],[7,"img",true],[10,"class","error-state"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_not_sent-2ef514e2b8b5b5bf7c51e49a6d366b41.svg"],[8],[9],[0,"\\n    "],[9],[0,"\\n    "],[1,[28,"t",["away_experience.sending_failed"],null],false],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null],[7,"div",true],[10,"class","send-offline-reply"],[8],[0,"\\n  "],[7,"button",false],[12,"class",[29,["send-message\\n      ",[28,"if",[[28,"and",[[24,["offlineFormSubmitted"]],[28,"not",[[24,["extraParams","isOfflineSendingFailed"]]],null]],null],"disabled"],null]]]],[3,"action",[[23,0,[]],"sendMessages"]],[8],[0,"\\n"],[4,"if",[[28,"and",[[24,["offlineFormSubmitted"]],[28,"not",[[24,["extraParams","isOfflineSendingFailed"]]],null]],null]],null,{"statements":[[0,"      "],[1,[28,"t",["message.pending"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["extraParams","isOfflineSendingFailed"]]],null,{"statements":[[0,"      "],[1,[28,"t",["away_experience.resend"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[28,"t",["away_experience.send"],null],false],[0,"\\n    "]],"parameters":[]}]],"parameters":[]}],[0,"  "],[9],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-offline-form/template.hbs"}})
e.default=t}),define("hotline-web/components/app-reply-composer/component",["exports","hotline-web/utils/constants","hotline-web/mixins/conversation","hotline-web/mixins/actions"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Component.extend(s.default,n.default,{PLACEHOLDERS:t.default.CONVERSATION.PLACEHOLDERS,CONVERSATION:t.default.CONVERSATION,DOM_ID:t.default.DOM_ID,classNames:["h-reply-button"],classNameBindings:["dropdownOptions.length:h-reply-dropdown"],mediumEditorOptions:Ember.computed({get:function(){return{toolbar:!1,imageDragging:!1,placeholder:{hideOnClick:!1},paste:{forcePlainText:!0,cleanPastedHTML:!1,cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[]}}}}),customButtonComposer:Ember.computed("message",{get:function(){var e=this,t=this.getReplyFragments()
return t&&t.filter(function(t){return t.fragmentType!==e.CONVERSATION.FRAGMENT_TYPE.TEXT?t:null})}}),customTextComposer:Ember.computed({get:function(){var e=this,t=this.getReplyFragments()
return t&&t.filter(function(t){return t.fragmentType===e.CONVERSATION.FRAGMENT_TYPE.TEXT?t:null})}}),articleFeedbackComposer:Ember.computed("message",{get:function(){var e=this,t=this.getArticleFeedbackFragments()
return t&&t.filter(function(t){return t.fragmentType!==e.CONVERSATION.FRAGMENT_TYPE.TEXT?t:null})}}),dropdownOptions:Ember.computed("message",{get:function(){var e=this.message
if(e&&this.isDropDownMessage(e.get("replyFragments"))){var t=e.get("replyFragments")[0]
return t.sections&&t.sections[0]&&t.sections[0].fragments}return[]}}),getArticleFeedbackFragments:function(){var e=this.message
if(e&&e.get("messageFragments")&&e.get("messageFragments").length>0&&e.get("messageFragments.lastObject.fragments")){var t=e.get("messageFragments.lastObject.fragments")
return t.length>0?t:null}},getReplyFragments:function(){var e=this.message
if(e&&e.get("replyFragments")&&e.get("replyFragments").length>0){var t=e.get("replyFragments")
return t.length>0?t[0].fragments:null}},didInsertElement:function(){var e=this
Ember.run.later(function(){e.setChatWindowHeight(!1)})},willDestroyElement:function(){this.setChatWindowHeight(!0)},didRender:function(){this.resizeChatWindow()},calculatePosition:function(e,t){var s=e.getBoundingClientRect(),n=s.top,a=s.left,i=s.width,r=s.height
return{style:{left:a,width:i,top:n-(t.getBoundingClientRect().height-r)-5}}},carousel:Ember.computed("message",{get:function(){var e={title:null,cards:[]},t=this.message
if(t&&this.isCarouselMessage(t.get("replyFragments"))){var s=t.get("replyFragments")[0]
e.title=s.sections&&s.sections[0]&&s.sections[0].fragments,e.cards=s.sections&&s.sections[1]&&s.sections[1].fragments}return e}}),actions:{dropdownSelectionHandler:function(e){this.set("disableDropdown",!0)
var t=[e],s={replyTo:{originalMessageId:this.message.messageId}}
this.sendButtonMessage(t,s)},carouselSelectionHandler:function(e){var t=[e],s={replyTo:{originalMessageId:this.message.messageId}}
this.sendButtonMessage(t,s)},sendButtonMessage:function(e,t){this.sendButtonMessage(e,t)},keyPressDownLocal:function(e,t){switch(t.which){case 13:t.preventDefault(),this.sendButtonMessage()}},setIsTextLimitExceeded:function(){}}})
e.default=a}),define("hotline-web/components/app-reply-composer/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"hiY1GW1d",block:'{"symbols":["dd","option","index","button","index","button","index"],"statements":[[4,"if",[[24,["customButtonComposer"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","button-region"],[8],[0,"\\n"],[4,"each",[[24,["customButtonComposer"]]],null,{"statements":[[0,"      "],[5,"ui-button-composer",[],[["@sendButtonMessage","@model"],[[28,"action",[[23,0,[]],[24,["sendButtonMessage"]]],null],[23,6,[]]]]],[0,"\\n"]],"parameters":[6,7]},null],[0,"  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["articleFeedbackComposer"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","button-region"],[8],[0,"\\n"],[4,"each",[[24,["articleFeedbackComposer"]]],null,{"statements":[[0,"      "],[5,"ui-button-composer",[],[["@sendButtonMessage","@model","@message"],[[28,"action",[[23,0,[]],[24,["sendButtonMessage"]]],null],[23,4,[]],[22,"message"]]]],[0,"\\n"]],"parameters":[4,5]},null],[0,"  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["dropdownOptions","length"]]],null,{"statements":[[0,"  "],[5,"basic-dropdown",[],[["@disabled","@calculatePosition"],[[22,"disableDropdown"],[22,"calculatePosition"]]],{"statements":[[0,"\\n    "],[6,[23,1,["Trigger"]],[],[[],[]],{"statements":[[0,"\\n      "],[7,"div",true],[10,"class","dropdown-placeholder"],[8],[0,"\\n        "],[1,[28,"t",["common.labels.click_here_to_select"],null],false],[0,"\\n        "],[7,"img",true],[10,"class","dropdown-icon"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/dropdown_arrow-dac108d9c6b01df8fc64b9d2af36d6ad.svg"],[8],[9],[0,"\\n      "],[9],[0,"\\n    "]],"parameters":[]}],[0,"\\n    "],[6,[23,1,["Content"]],[[3,"action",[[23,0,[]],[23,1,["actions","close"]]]]],[[],[]],{"statements":[[0,"\\n      "],[7,"ul",true],[10,"class","channel-list"],[8],[0,"\\n"],[4,"each",[[24,["dropdownOptions"]]],null,{"statements":[[0,"          "],[7,"li",false],[3,"action",[[23,0,[]],"dropdownSelectionHandler",[23,2,[]]]],[8],[1,[23,2,["label"]],false],[9],[0,"\\n"]],"parameters":[2,3]},null],[0,"      "],[9],[0,"\\n    "]],"parameters":[]}],[0,"\\n  "]],"parameters":[1]}],[0,"\\n\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["carousel","cards","length"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","fc-carousel-wrapper"],[8],[0,"\\n    "],[5,"ui-carousel",[],[["@title","@cards","@onSelect"],[[24,["carousel","title","firstObject"]],[24,["carousel","cards"]],[28,"action",[[23,0,[]],"carouselSelectionHandler"],null]]]],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[4,"if",[[24,["customTextComposer"]]],null,{"statements":[[0,"  "],[7,"div",true],[11,"class",[29,["h-reply h-custom-composer ",[28,"unless",[[24,["hotline","ui","onLine"]],"is-disabled"],null]]]],[8],[0,"\\n"],[4,"unless",[[24,["hotline","ui","isDesktop"]]],null,{"statements":[[0,"      "],[7,"a",false],[12,"class",[29,["h-reply-container\\n          ",[28,"unless",[[24,["showPlaceholderText"]],"show-highlight"],null]]]],[12,"href","#"],[3,"action",[[23,0,[]],"beforeSendMessage"]],[8],[0,"\\n        "],[7,"div",true],[10,"class","h-reply-send"],[8],[0,"\\n          "],[7,"i",true],[10,"class","icons icon-ic_send"],[8],[9],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},null],[0,"    "],[5,"ui-unity-medium-editor",[],[["@mediumEditor","@options","@onBlur","@onFocus","@emojiSupport","@onKeyDown","@content","@exceedAction","@id"],[[22,"mediumEditor"],[22,"mediumEditorOptions"],[28,"action",[[23,0,[]],"focusOut"],null],[28,"action",[[23,0,[]],"focusIn"],null],true,[28,"action",[[23,0,[]],"keyPressDownLocal"],null],[22,"content"],[28,"action",[[23,0,[]],"setIsTextLimitExceeded"],null],[24,["DOM_ID","appReplyComposerEditor"]]]]],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-reply-composer/template.hbs"}})
e.default=t}),define("hotline-web/components/app-reply-dialog-carousel/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({actions:{openChatWidget:function(){this.openChatWidget&&this.openChatWidget()}}})
e.default=t}),define("hotline-web/components/app-reply-dialog-carousel/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"hyCh18YD",block:'{"symbols":[],"statements":[[7,"div",false],[12,"class","section campaign-section"],[3,"action",[[23,0,[]],"openChatWidget"]],[8],[0,"\\n  "],[7,"div",true],[10,"class","content"],[8],[0,"\\n    "],[7,"div",true],[10,"class","fc-carousel-sent-msg"],[8],[0,"\\n      "],[7,"div",true],[10,"class","fc-carousel-sent-msg__inner"],[8],[0,"\\n        "],[7,"div",true],[10,"class","fc-carousel-sent-msg__image"],[8],[0,"\\n          "],[7,"img",true],[10,"class","fc-carousel-sent-msg__icon"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/fc-carousel-sent-26d858d3110855ed07e578cd0b230ef2.svg"],[8],[9],[0,"\\n        "],[9],[0,"\\n        "],[7,"div",true],[10,"class","fc-carousel-sent-msg__text"],[8],[0,"\\n          "],[1,[22,"message"],false],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-reply-dialog-carousel/template.hbs"}})
e.default=t}),define("hotline-web/components/app-reply-dialog-selection/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({actions:{openChatWidget:function(){this.openChatWidget&&this.openChatWidget()}}})
e.default=t}),define("hotline-web/components/app-reply-dialog-selection/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"AvqSQIHb",block:'{"symbols":[],"statements":[[7,"div",false],[12,"class","section campaign-section"],[3,"action",[[23,0,[]],"openChatWidget"]],[8],[0,"\\n  "],[7,"div",true],[10,"class","content"],[8],[0,"\\n    "],[7,"div",true],[10,"class","h-comment"],[8],[0,"\\n      "],[7,"div",true],[10,"class","fc-ui-unity-message-bubble"],[8],[0,"\\n        "],[7,"div",true],[10,"class","h-message-text "],[8],[0,"\\n          "],[1,[22,"message"],false],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-reply-dialog-selection/template.hbs"}})
e.default=t}),define("hotline-web/components/app-reply-dialog/component",["exports","jquery","hotline-web/mixins/actions","hotline-web/utils/constants","hotline-web/mixins/user","hotline-web/mixins/conversation"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Component.extend(s.default,i.default,a.default,{FRAGMENT:n.default.CONVERSATION.FRAGMENT_TYPE,BUBBLE_CONFIG:n.default.BUBBLE_CONFIG,MESSAGE_CATEGORIES:n.default.MESSAGE_CATEGORIES,PLACEHOLDERS:n.default.CONVERSATION.PLACEHOLDERS,CONVERSATION:n.default.CONVERSATION,DOM_ID:n.default.DOM_ID,transitionDelays:100,toggleDelays:500,wrapperID:n.default.DOM_ID.previewWrapper,mediumEditorOptions:Ember.computed({get:function(){return{toolbar:!1,imageDragging:!1,placeholder:{hideOnClick:!1},paste:{forcePlainText:!0,cleanPastedHTML:!1,cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[]}}}}),fileId:"fileUploadInputDialog",classNames:["d_preview preview-container"],classNameBindings:["showNotify:appear","hideNotify:disappear","l2r:l2r","hideChatButton:hideChatButton","scrollMessage:scroll"],hideChatButton:Ember.computed.alias("session.config.headerProperty.hideChatButton"),messageStacker:Ember.inject.service(),isTextLimitExceeded:!1,isTabletView:Ember.computed.alias("hotline.ui.isTablet"),init:function(){this.setProperties({showMaskImage:!1,scrollMessage:!1}),this.postMessage({action:"stack_max_height"}),this._super()},replyFragment:Ember.computed.alias("stackedMessages.lastObject.replyFragments.firstObject"),destroy:function(){this._super.apply(this,arguments),Ember.run.cancel(this._stackedHeight)},stackedMessages:Ember.computed("messageStacker.lastAgentMessages.[]",{get:function(){var e=this,t=[],s=null,n=!0,a=this.get("messageStacker.lastAgentMessages")
return a.forEach(function(i){if(s&&(void 0===s.messageCategoryId||s.messageCategoryId===e.MESSAGE_CATEGORIES.text||i.messageUserType&&i.messageUserType!==e.CONVERSATION.USER_TYPE.USER)){var r=a.firstObject.messageCategoryId||e.MESSAGE_CATEGORIES.text
s.messageCategoryId&&s.messageCategoryId!==e.MESSAGE_CATEGORIES.text&&n&&r!==e.MESSAGE_CATEGORIES.text?(Ember.set(i,"isSameAgent",!1),n=!1):Ember.set(i,"isSameAgent",i.messageUserId==s.messageUserId)}s&&i.messageCategoryId&&i.messageCategoryId!==e.MESSAGE_CATEGORIES.text&&i.messageUserId.toString()!==s.messageUserId&&(n=!0),i.messageType===e.get("CONVERSATION.MESSAGE_TYPE.BOT")||i.messageType===e.get("CONVERSATION.MESSAGE_TYPE.FREDDY_BOT")?Ember.set(i,"user",Ember.Object.create({firstName:i.messageUserName,displayName:i.messageUserName,profilePicUrl:i.messageUserProfilePic?i.messageUserProfilePic:"https://assetscdn-wchat.freshchat.com/static/assets/images/ic_bot_dp-c445c55370a172afaf13bc02ce7c075d.svg"})):Ember.set(i,"user",e.agentService.getAgentInfo(i.messageUserAlias)),s=i,e.get("hotline.ui.isDesktop")||t.length!==e.get("BUBBLE_CONFIG.stackViewCountInMobile")||t.shift(),e.get("hotline.ui.isDesktop")||Ember.set(i,"isSameAgent",!1),t.push(s)}),t}}),wrapperElement:Ember.computed({get:function(){return(0,t.default)(".preview-wrapper-scroll")}}),channelId:Ember.computed("stackedMessages.[]",{get:function(){return this.get("stackedMessages.lastObject.channelId")}}),shouldHideReplyEditor:Ember.computed("customFlowCalendarInvite",{get:function(){return this.customFlowCalendarInvite}}),showDropDownFragmentSelection:Ember.computed("stackedMessages.length",{get:function(){return this.isDropDownMessage(this.stackedMessages.lastObject.replyFragments)}}),showCarouselFragmentSelection:Ember.computed("stackedMessages.length",{get:function(){return this.isCarouselMessage(this.stackedMessages.lastObject.replyFragments)}}),customFlowCalendarInvite:Ember.computed("stackedMessages.length",{get:function(){return this.get("stackedMessages.lastObject.flowStepId")&&this.get("stackedMessages.lastObject.messageType")===n.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.SENT_BY_AGENT}}),checkIfRtlIE:Ember.computed("hotline.ui.browser",{get:function(){var e=this.get("hotline.ui.browser.name")
return"rtl"===document.body.attributes.dir.value&&("Trident"===e||"Microsoft Internet Explorer"===e)}}),setWidgetPreviewHeight:function(e){var t=this
if(!this.isDestroyed||!this.isDestroying){var s=document.querySelector("#".concat(n.default.DOM_ID.previewWrapper)).offsetHeight,a=document.querySelector(".close-campaign").offsetHeight,i=this.defaultComposer?document.querySelector(".replay-section")&&document.querySelector(".replay-section").offsetHeight||0:document.querySelector(".reply-options").offsetHeight
s&&this.postMessage({action:"set_bubble_height",height:s+this.BUBBLE_CONFIG.widgetBubbleHeight}),this.get("hotline.ui.isDesktop")&&s&&Ember.run.later(function(){if(!t.isDestroying){var n=t.stackMaxHeight-t.BUBBLE_CONFIG.widgetBubbleHeight
s>n&&!t.isDestroyed&&(t.wrapperElement.css({maxHeight:n-a-i+"px"}),t.set("scrollMessage",!0)),t.get("messageStacker.showUnreadMessage")||t.isDestroyed||t.send("scrollToBottom",e?t.get("BUBBLE_CONFIG.scrollToBottomSpeed.low"):t.get("BUBBLE_CONFIG.scrollToBottomSpeed.medium")),t.checkScrollToBottom(t.wrapperElement)}},500),this.addBlurForTextExceeding()}},addBlurForTextExceeding:function(){(0,t.default)("div.campaign-section").each(function(e,s){var n=(0,t.default)(s).find(".content"),a=(0,t.default)(s).find(".h-comment  ")
n&&n.length&&a&&a.length&&n[0].offsetHeight<a[0].offsetHeight&&!(0,t.default)(s).hasClass("campaign-text-exceeding")&&(0,t.default)(s).addClass("campaign-text-exceeding")})},scrollCallback:Ember.computed({get:function(){return this.onScroll.bind(this)}}),checkScrollToBottom:function(e){var t=this.messageStacker
Ember.run.later(function(){e.prop("scrollHeight")-e.prop("scrollTop")-e.prop("clientHeight")<=0?(t.toggleShowUnreadMessage(),t.toggleUnreadMessagesCount()):t.toggleShowUnreadMessage(!0)},100)},onScroll:function(e){var t=e&&e.target
t&&t.scrollTop<=0?Ember.set(this,"showMaskImage",!1):Ember.set(this,"showMaskImage",!0),this.checkScrollToBottom(this.wrapperElement)},didInsertElement:function(){var e=this
Ember.run.later(function(){e.set("showNotify",!0),e.get("hotline.ui.isDesktop")&&e.wrapperElement.on("scroll",e.scrollCallback)},this.toggleDelays)},didRender:function(){this.setWidgetPreviewHeight()},willDestroyElements:function(){this.set("showNotify",!1),this.set("hideNotify",!1),this.get("hotline.ui.isDesktop")&&this.wrapperElement.off("scroll",this.scrollCallback)},didReadReceiptSent:function(){this.set("hotline.ui.lockAgentMessage",!0)},didMessageSent:function(){this.send("closeNotification",!0)},willMessageSend:function(e){this.openChatWidget(),this.messageSendOnEnter&&this.messageSendOnEnter(e)},willMessageSent:function(){var e=this
this.set("hideNotify",!0),Ember.run.later(function(){e.parentView.send("toggleNotification",n.default.DialogState.CLOSE)},1e3)},actions:{quickReplyOptionSelected:function(e){this.willMessageSend&&this.willMessageSend({id:this.channelId,send:!0,replyText:e.customReplyText||e.label})},setIsTextLimitExceeded:function(e){this.set("isTextLimitExceeded",e)},closeNotification:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]
this.set("hideNotify",!0),this.set("previewMessages",[]),Ember.run.later(function(){t?e.openChatWidget():(e.parentView.send("closeNotification"),e.parentView.send("toggleDialog",!1)),e.messageStacker.resetLastAgentMessages()},this.toggleDelays)},enlargeImage:function(e){this.openChatWidget(),this.enlargeImage&&this.enlargeImage(e)},keyPressUp:function(){var e=this,t=document.querySelector("#".concat(n.default.DOM_ID.previewWrapper)).offsetHeight
Ember.run.later(function(){var s=e.stackMaxHeight-e.BUBBLE_CONFIG.widgetBubbleHeight
t<s&&t!==s&&(e.wrapperElement.css({maxHeight:"unset"}),e.set("scrollMessage",!1)),e.setWidgetPreviewHeight(!0)},10)},openChatWidget:function(e){var t=this
this.openChatWidget(),e&&Ember.run.later(function(){t.setChatWindowHeight(!1)},1)},scrollToBottom:function(e){var t=this.wrapperElement
this.messageStacker.toggleUnreadMessagesCount(),t.animate({scrollTop:t.prop("scrollHeight")},e)}}})
e.default=r}),define("hotline-web/components/app-reply-dialog/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"ITBuetlH",block:'{"symbols":["fragment","msg"],"statements":[[7,"div",true],[11,"class",[29,["preview-wrapper ",[28,"if",[[24,["isTabletView"]],"tablet-view"],null]]]],[11,"id",[22,"wrapperID"]],[8],[0,"\\n  "],[7,"div",true],[10,"class","close-campaign scroll-shake-avoid"],[8],[0,"\\n"],[4,"if",[[24,["scrollMessage"]]],null,{"statements":[[0,"      "],[7,"div",false],[12,"class","close-text"],[3,"action",[[23,0,[]],"closeNotification"]],[8],[0,"\\n        "],[7,"span",true],[10,"aria-hidden","true"],[10,"class","icon-ic_close"],[8],[0," "],[1,[28,"t",["common.button.close"],null],false],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"span",false],[12,"aria-hidden","true"],[12,"class","icon-ic_close"],[3,"action",[[23,0,[]],"closeNotification"]],[8],[9],[0,"\\n"]],"parameters":[]}],[0,"  "],[9],[0,"\\n  "],[7,"div",true],[11,"class",[29,["preview-wrapper-scroll ",[28,"if",[[24,["showMaskImage"]],"mask-image"],null]," ",[28,"if",[[24,["messageStacker","showUnreadMessage"]],"unread-message"],null]]]],[8],[0,"\\n    "],[7,"div",true],[10,"class","scroll-shake-avoid"],[8],[0,"\\n"],[4,"each",[[24,["stackedMessages"]]],null,{"statements":[[4,"if",[[28,"eq",[[23,2,["messageCategoryId"]],[24,["MESSAGE_CATEGORIES","image"]]],null]],null,{"statements":[[0,"          "],[7,"div",true],[10,"class","section campaign-header"],[8],[0,"\\n            "],[7,"img",false],[12,"width","320"],[12,"height","180"],[12,"src",[23,2,["messageFragments","firstObject","content"]]],[3,"action",[[23,0,[]],"enlargeImage",[23,2,["messageFragments","firstObject","content"]]]],[8],[9],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[23,2,["messageCategoryId"]],[24,["MESSAGE_CATEGORIES","video"]]],null]],null,{"statements":[[0,"          "],[7,"div",true],[10,"class","section campaign-header"],[8],[0,"\\n            "],[7,"iframe",true],[10,"width","320"],[10,"height","180"],[11,"src",[23,2,["messageFragments","firstObject","content"]]],[10,"allowfullscreen","true"],[10,"webkitallowfullscreen","true"],[10,"mozallowfullscreen","true"],[8],[9],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"contain-valid-text-fragment",[[23,2,[]]],null]],null,{"statements":[[0,"            "],[7,"div",false],[12,"class",[29,["section campaign-section ",[28,"unless",[[23,2,["isSameAgent"]],"top-border"],null]]]],[3,"action",[[23,0,[]],"openChatWidget"]],[8],[0,"\\n"],[4,"if",[[28,"not",[[23,2,["isSameAgent"]]],null]],null,{"statements":[[0,"                "],[7,"div",true],[10,"class","profile-pic"],[8],[0,"\\n"],[4,"if",[[28,"and",[[23,2,["user","displayName"]],[28,"not",[[24,["hideName"]]],null]],null]],null,{"statements":[[4,"if",[[28,"and",[[23,2,["user","profilePicUrl"]],[28,"not",[[24,["hidePic"]]],null]],null]],null,{"statements":[[0,"                      "],[7,"img",true],[11,"src",[23,2,["user","profilePicUrl"]]],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                      "],[7,"span",true],[10,"class","avatar-content-wrap agent-circle pad-0"],[8],[0,"\\n                        "],[7,"span",true],[11,"class",[29,["theme-bg pad-0 ",[28,"choose-theme",[[23,2,["user","displayName"]]],null]]]],[8],[0,"\\n                          "],[7,"span",true],[10,"class","avatar-content pad-0"],[8],[1,[28,"avatar-content",[[23,2,["user","displayName"]]],null],false],[9],[0,"\\n                        "],[9],[0,"\\n                      "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"                  "],[7,"span",true],[10,"class","agent-name"],[8],[0,"\\n"],[4,"if",[[24,["hideName"]]],null,{"statements":[[4,"if",[[24,["session","appDisplayName"]]],null,{"statements":[[0,"                        "],[1,[28,"sanitize-html",[[24,["session","appDisplayName"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,2,["user","firstName"]]],null,{"statements":[[0,"                        "],[1,[28,"sanitize-html",[[23,2,["user","firstName"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"                  "],[9],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},null],[0,"              "],[7,"div",true],[10,"class","content"],[8],[0,"\\n"],[4,"if",[[23,2,["messageFragments","length"]]],null,{"statements":[[4,"if",[[24,["isArticleListType"]]],null,{"statements":[[0,"                    "],[5,"ui-unity-message-fragment",[],[["@message","@isbubble","@isListView"],[[23,2,[]],"true","true"]]],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[5,"ui-unity-message-fragment",[],[["@message","@isbubble"],[[23,2,[]],"true"]]],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"              "],[9],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},null],[0,"        "]],"parameters":[]}]],"parameters":[]}]],"parameters":[2]},null],[4,"if",[[24,["showDropDownFragmentSelection"]]],null,{"statements":[[0,"        "],[5,"app-reply-dialog-selection",[],[["@message","@openChatWidget"],[[28,"t",["common.labels.click_here_to_select"],null],[28,"action",[[23,0,[]],"openChatWidget"],null]]]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["showCarouselFragmentSelection"]]],null,{"statements":[[0,"        "],[5,"app-reply-dialog-carousel",[],[["@message","@openChatWidget"],[[28,"t",["common.labels.fc_carousel_view_options"],null],[28,"action",[[23,0,[]],"openChatWidget"],null]]]],[0,"\\n      "]],"parameters":[]},null]],"parameters":[]}],[0,"    "],[9],[0,"\\n"],[4,"if",[[28,"and",[[24,["messageStacker","showUnreadMessage"]],[28,"gt",[[24,["messageStacker","unreadMessagesCount"]],0],null]],null]],null,{"statements":[[0,"      "],[7,"span",false],[12,"class","unread-message-bar"],[3,"action",[[23,0,[]],"scrollToBottom",[24,["BUBBLE_CONFIG","scrollToBottomSpeed","high"]]]],[8],[0,"\\n        "],[1,[28,"t",["conversation.chat_headers.new_msg"],[["count"],[[24,["messageStacker","unreadMessagesCount"]]]]],false],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},null],[0,"  "],[9],[0,"\\n\\n  "],[7,"div",true],[10,"class","scroll-shake-avoid"],[8],[0,"\\n"],[4,"if",[[24,["defaultComposer"]]],null,{"statements":[[4,"unless",[[24,["shouldHideReplyEditor"]]],null,{"statements":[[0,"        "],[7,"div",true],[10,"class","replay-section h-reply-wrapper"],[8],[0,"\\n"],[4,"if",[[24,["hotline","ui","isDesktop"]]],null,{"statements":[[0,"            "],[7,"div",true],[11,"class",[29,["h-reply ",[28,"unless",[[24,["hotline","ui","onLine"]],"is-disabled"],null]]]],[8],[0,"\\n"],[4,"unless",[[24,["hotline","ui","isDesktop"]]],null,{"statements":[[0,"                "],[7,"a",false],[12,"class",[29,["h-reply-container ",[28,"unless",[[24,["showPlaceholderText"]],"show-highlight"],null]]]],[12,"href","#"],[3,"action",[[23,0,[]],"beforeSendMessage"]],[8],[0,"\\n                  "],[7,"div",true],[10,"class","h-reply-send"],[8],[7,"i",true],[10,"class","icons icon-ic_send"],[8],[9],[9],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[24,["isTextLimitExceeded"]]],null,{"statements":[[0,"                "],[7,"div",true],[10,"class","size-exceed-msg closed-state-message"],[8],[0,"\\n                  "],[7,"i",true],[10,"class","icon-ic_alert"],[8],[9],[1,[28,"t",["size_exceeded_msg.infoMsg"],null],false],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},null],[0,"              "],[5,"ui-unity-medium-editor",[],[["@mediumEditor","@options","@onBlur","@onFocus","@onKeyDown","@onKeyUp","@content","@isTextLimitExceeded","@exceedAction","@id"],[[22,"mediumEditor"],[22,"mediumEditorOptions"],[28,"action",[[23,0,[]],"focusOut"],null],[28,"action",[[23,0,[]],"focusIn"],null],[28,"action",[[23,0,[]],"keyPressDown"],null],[28,"action",[[23,0,[]],"keyPressUp"],null],[22,"content"],[22,"isTextLimitExceeded"],[28,"action",[[23,0,[]],"setIsTextLimitExceeded"],null],[24,["DOM_ID","appReplyEditor"]]]]],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},null],[0,"        "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"      "],[7,"div",true],[10,"class","reply-options"],[8],[0,"\\n"],[4,"each",[[24,["replyFragment","fragments"]]],null,{"statements":[[0,"          "],[7,"span",false],[12,"class","reply-option-button"],[3,"action",[[23,0,[]],"quickReplyOptionSelected",[23,1,[]]]],[8],[0,"\\n            "],[1,[23,1,["label"]],false],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[9],[0,"\\n"]],"parameters":[]}],[0,"  "],[9],[0,"\\n\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-reply-dialog/template.hbs"}})
e.default=t}),define("hotline-web/components/app-widget/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({classNames:["h-channel"],didInsertElement:function(){var e=this,t=this.delay
t&&setTimeout(function(){e.parentView.send("loadWidget",e.session)},t)}})
e.default=t}),define("hotline-web/components/app-widget/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"lQ0dZpV/",block:'{"symbols":[],"statements":[[7,"div",true],[8],[0,"\\n  "],[5,"app-loader",[],[[],[]]],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/app-widget/template.hbs"}})
e.default=t}),define("hotline-web/components/basic-dropdown-content",["exports","ember-basic-dropdown/components/basic-dropdown-content"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/components/basic-dropdown-trigger",["exports","ember-basic-dropdown/components/basic-dropdown-trigger"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/components/basic-dropdown",["exports","ember-basic-dropdown/components/basic-dropdown"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/components/code-snippet",["exports","hotline-web/snippets"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=self.require("highlight.js"),n=Ember.Component.extend({tagName:"pre",classNameBindings:["language"],unindent:!0,_unindent:function(e){if(!this.get("unindent"))return e
for(var t,s,n=e.split("\n").filter(function(e){return""!==e}),a=0;a<n.length;a++)(t=/^[ \t]*/.exec(n[a]))&&(void 0===s||s>t[0].length)&&(s=t[0].length)
return void 0!==s&&s>0&&(e=e.replace(new RegExp("^[ \t]{"+s+"}","gm"),"")),e},source:Ember.computed("name",function(){var e=this.get("name").split("/").reduce(function(e,t){return e&&e[t]},t.default)
return this._unindent((e||"").replace(/^(\s*\n)*/,"").replace(/\s*$/,""))}),didInsertElement:function(){s.highlightBlock(this.get("element"))},language:Ember.computed("name",function(){var e=/\.(\w+)$/i.exec(this.get("name"))
if(e)switch(e[1].toLowerCase()){case"js":return"javascript"
case"coffee":return"coffeescript"
case"hbs":return"htmlbars"
case"css":return"css"
case"scss":return"scss"
case"less":return"less"
case"emblem":return"emblem"
case"ts":return"typescript"}})})
e.default=n}),define("hotline-web/components/content-viewport/component",["exports","jquery","hotline-web/snippets","hotline-web/config/environment","hotline-web/mixins/datastore","hotline-web/mixins/message","hotline-web/mixins/subscription","hotline-web/mixins/user-locate","hotline-web/mixins/widget-load","hotline-web/mixins/user","hotline-web/mixins/jwt","hotline-web/helpers/event-conditions","hotline-web/mixins/actions","hotline-web/mixins/conversation","hotline-web/mixins/handle-event","hotline-web/mixins/localstorage","hotline-web/utils/constants","hotline-web/mixins/sanitize","hotline-web/utils/utils"],function(e,t,s,n,a,i,r,o,l,c,u,d,m,h,f,g,p,v,b){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var E=Ember.Component.extend(m.default,h.default,a.default,i.default,r.default,c.default,u.default,o.default,l.default,f.default,g.default,v.default,{screenshare:Ember.inject.service(),ruleEngine:Ember.inject.service(),notification:Ember.inject.service(),messageStacker:Ember.inject.service(),classNameBindings:["isIOS:ios-device","isAndroid:android-device","showBusinessClosedBanner:show-business-closed-banner"],isAndroid:Ember.computed.readOnly("hotline.ui.isAndroid"),isIOS:Ember.computed.readOnly("hotline.ui.isIOS"),showBusinessClosedBanner:Ember.computed.readOnly("hotline.ui.showBusinessClosedBanner"),cssProp:"chat-style.html",bgc:"#45A4EC",fgc:"white",jwtfgc:"#44412e",jwtbgc:"#ffac00",defaultFontName:"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Cantarell', 'Helvetica Neue', sans-serif",defaultFontUrl:"",isLocked:!1,replaceTags:Ember.computed("session.config.headerProperty.{backgroundColor,foregroundColor,fontName,fontUrl}","session.config.headerProperty.jwtInvalidBanner.{foregroundColor,backgroundColor}",{get:function(){var e=[],t=this.config,s=this.get("session.config.headerProperty"),n=this.get("session.config.headerProperty.jwtInvalidBanner"),a=t&&t.headerProperty,i=a&&a.jwtInvalidBanner,r=s&&s.backgroundColor||a&&a.backgroundColor||this.bgc,o=s&&s.foregroundColor||a&&a.foregroundColor||this.fgc,l=n&&n.backgroundColor||i&&i.backgroundColor||this.jwtbgc,c=n&&n.foregroundColor||i&&i.foregroundColor||this.jwtfgc,u=s&&s.backgroundImage||t&&t.backgroundImage||"1",d=this.fontProperties
switch(s&&s.fontName?(d.name=s.fontName+", "+d.name,d.url=s&&s.fontUrl?s.fontUrl:d.url):a&&a.fontName&&(d.name=a.fontName+", "+d.name,d.url=a&&a.fontUrl?a.fontUrl:d.url),e.push({id:"{{HD_BG_COLOR}}",value:this.sanitizeHTML(r,"strict")}),e.push({id:"{{HD_FG_COLOR}}",value:this.sanitizeHTML(o,"strict")}),e.push({id:"{{JWT_BG_COLOR}}",value:this.sanitizeHTML(l,"strict")}),e.push({id:"{{JWT_FG_COLOR}}",value:this.sanitizeHTML(c,"strict")}),u){case"1":u=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_1-9f6bed8189e4c854889928d5517fc21c.png"})
break
case"2":u=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_2-98acd88cf429d46bc42d29471b845cad.png"})
break
case"3":u=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_3-e684cf5792516635aed583411d5f297b.png"})
break
case"4":u=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_4-8498aa2c0cd3e46d681c34a90c75d4f8.png"})
break
case"5":u=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_5-0af10fa2e783b2622f80196efb40ee5a.png"})
break
case"6":u=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_6-ca2d52aa6cd4569edab77ad115c6d76b.png"})
break
case"7":u=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_7-ae135f46a2b87f96f552d144b00fedb9.png"})
break
case"8":u=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_8-746558f7c091c7c69f979fa49ab4f6d2.png"})
break
case"9":u=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_9-8498aa2c0cd3e46d681c34a90c75d4f8.png"})
break
case"10":u=e.push({id:"{{ICON_URL}}",value:"https://assetscdn-wchat.freshchat.com/static/assets/images/texture_background_10-660b83bfe4153398c06a1596f9b9cdab.png"})
break
default:u=e.push({id:"{{ICON_URL}}",value:u})}return e.push({id:"{{FONT_URL_IMPORT}}",value:d&&d.url?"@import url('".concat(d.url,"');"):""}),e.push({id:"{{FONT_NAME}}",value:d.name}),e}}),cssTemplate:Ember.computed({get:function(){return s.default[this.cssProp]}}),customCSS:Ember.computed("replaceTags",{get:function(){var e=this.cssTemplate,t=this.replaceTags
return e&&t?(t.forEach(function(t){e=e.replace(new RegExp(t.id,"g"),t.value)}),e):null}}),fontProperties:Ember.computed({get:function(){var e=this.defaultFontUrl
return{name:this.defaultFontName,url:e}}}),isOpen:Ember.computed({get:function(){return!1},set:function(e,t){return t}}),isDialogOpen:Ember.computed({get:function(){return!1},set:function(e,t){return t}}),isFullscreen:Ember.computed("session.config.fullscreen",{get:function(){return this.get("session.config.fullscreen")}}),showMinimizeIconInsideWidget:Ember.computed("isFullscreen","isMobileView","session.config.headerProperty.hideHeader","currentRouteName",{get:function(){var e=this.get("session.config.headerProperty.hideHeader"),t=this.currentRouteName,s=t&&-1!==t.indexOf("channel")
return(!e||!s)&&(this.isFullscreen||this.isMobileView)}}),currentRouteName:Ember.computed("router.currentRouteName",{get:function(){return this.get("router.currentRouteName")}}),didInsertElement:function(){var e=this.get("hotline.ui.config")
e&&e.appId?this.addMessagingEvents():this.postMessage({action:"push_subscribe_destroy_response"}),this.get("hotline.ui.isDesktop")||this.get("hotline.ui.isTablet")||(this.postMessage({action:"notify_frame",data:"mobile-view"}),Ember.set(this,"isMobileView",!0))},willDestroyElements:function(){this.removeMessagingEvents()},messageCB:Ember.computed({get:function(){return this.onMessage.bind(this)}}),lastAgentMessages:Ember.computed.alias("messageStacker.lastAgentMessages"),displayNotification:Ember.computed("isOpen","lastAgentMessages.[]",{get:function(){var e=this.isOpen,t=this.get("lastAgentMessages.lastObject"),s=!e&&t
return s&&(s=s&&-1===[p.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ACCEPTED,p.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ENDED,p.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.CANCELLD].indexOf(t.messageType),this.send("toggleNotification")),s}}),addMessagingEvents:function(){window.addEventListener?window.addEventListener("message",this.messageCB,!1):window.detachEvent&&window.attachEvent("onmessage",this.messageCB),this.postMessage({action:"frame_state_change",settingsPayload:this.get("hotline.ui.config"),data:{frameState:p.default.FrameState.INITIALIZED}})},removeMessagingEvents:function(){window.removeEventListener?window.removeEventListener("message",this.messageCB):window.detachEvent&&window.detachEvent("onmessage",this.messageCB)},processFrame:function(){var e=this.get("hotline.ui.config.appSubDomain")||this.get("hotline.ui.config.appId"),t=this.get("hotline.ui.config.appLogoPath")||"",s=n.default.webpush,a=s.domain[n.default.hotlineEnv.type].replace("{appName}",e)+"/index.html",i=this.getItemLS("subDomainName"),r=this.intl.get("locale")&&this.intl.get("locale").length>0?this.intl.get("locale")&&this.intl.get("locale")[0]:"",o=this.get("hotline.ui.config.sales360App")
o&&-1!==window.location.host.indexOf(p.default.CRM.DOMAIN_PATH)&&(a=s.domain.crm[n.default.hotlineEnv.type].replace("{appName}",e)+"/index.html"),i!==e&&this.send("clearSubscription"),this.processPushNotifications(),a=s.protocol+a,this.postMessage({action:"widget_loaded",pushDomain:a,appLogoPath:t,locale:r,sales360App:o})},updateLocation:function(e){var t=this.localds,s=(new Date).getTime()
if(e.newValue){var n=t.get("userBehaviour"),a=n&&n.get("locations"),i=e.newValue&&e.newValue||"",r=a&&a.findBy("pageUrl",i),o={url:i,title:e.title,force:e.force}
this.reportVisit(),r?r.set("viewCount",r.get("viewCount")+1):(r=this.store.createRecord("userLocation",{pageUrl:i,viewCount:1}),a.pushObject(r)),this.send("save",!1),Ember.setProperties(this.get("hotline.ui.userBehaviour"),{currentUrl:i}),this.updateEvent("fc_page",o,s)}},processPushNotifications:function(e){var t,s=this,n=this.get("session.user"),a=n&&n.alias,i=this.notification,r=this.get("hotline.ui.config.appSubDomain")||this.get("hotline.ui.config.appId")
this.setItemLS("subDomainName",r),e?(this.setItemLS("subscriptionInfo",e),t=e):t=this.getItemLS("subscriptionInfo"),null!==t&&t&&t.subscription||!a||this.logger.log("subscriptionInfo missing"),this.set("hotline.ui.push",t),i.bindPushEvents(),setTimeout(function(){s.get("hotline.ui.focussed")||s.get("hotline.ui.widgetFocussed")?i.sendUnsubscribeToServer():i.sendSubscriptionToServer()},1e3)},onMessage:function(e){var s=this,n=e.origin||e.originalEvent.origin,a=this.get("session.user"),i=a&&a.alias,r=this.origin,o=this.notification,l=this.localds,c=l&&l.get("userBehaviour"),u=this.get("session.token"),m=e.data
if(m){if(m.isWebViewMessage?b.default.isTrustedDomain(n,this.get("hotline.ui.whiteListedDomains")):n===r)switch(m.action?m.action:m.event_id){case"push_subscribe_destroy":o.sendSubscribeOnUnload(),this.postMessage({action:"push_subscribe_destroy_response"})
break
case"widget_blur":this.set("hotline.ui.widgetFocussed",!1),this.set("hotline.ui.parentTitle",m.payload.title),this.set("hotline.ui.parentLocation",m.payload.location),o.sendSubscriptionToServer()
break
case"widget_focus":this.set("hotline.ui.widgetFocussed",!0),o.sendUnsubscribeToServer()
break
case"widget_location":this.set("hotline.ui.parentTitle",m.payload.title),this.set("hotline.ui.parentLocation",m.payload.location)
break
case"load_widget":o.playEmptySound(),this.send("loadWidget",m.payload)
break
case"push_user_meta":this.processPushNotifications(m.data)
break
case"update_cookie":this.send("updateCookie",m.payload)
break
case"restore_cookie":this.send("restoreCookie",m.payload)
break
case"open_chat":this.send("triggerOpenClose",!0)
break
case"close_chat":this.send("triggerOpenClose",!1)
break
case"show_chat":this.send("triggerShowHide",!0)
break
case"hide_chat":this.send("triggerShowHide",!1)
break
case"set_tags":this.send("setTags",m.payload)
break
case"set_prop":this.send("setProp",m.payload)
break
case"set_faq_tags":this.send("setFaqTags",m.payload)
break
case"load_rules":d.default.create({scope:this}).populate(),this.send("save",!1)
var h=(new Date).getTime(),f=!0
c&&(c.get("hasLocationRule")||c.get("hasLocationKeyInRuleContent"))&&(!c.get("userGeolocation")||h-c.get("locationRuleFetchMillis")>p.default.GeolocationCacheDuration)&&(f=!1,t.default.ajax({type:"GET",url:p.default.EmberModelUrl.geolocation.url.replace("{token}",u)}).then(function(e){Ember.set(c,"locationRuleFetchMillis",(new Date).getTime()),Ember.set(c,"userGeolocation",e),s.send("save",!1),s.postMessage({action:"rules_loaded"})})),f&&this.postMessage({action:"rules_loaded"})
var g=this.cache.decache("track_events")
g&&g.forEach(function(e){s.updateEvent(e.eventName,e.eventProperties)})
break
case"set_external_id":this.send("setExternalId",m.payload,function(e,t,n){s.postMessage({action:m.action+"_ack",success:e,status:t,data:n})})
break
case"user_exists":this.send("isUserCreated",function(e,t,n){s.postMessage({action:m.action+"_ack",success:e,status:t,data:n})})
break
case"set_user_properties":this.send("setUserProperties",m.payload,function(e,t,n){s.postMessage({action:m.action+"_ack",success:e,status:t,data:n})})
break
case"set_custom_config":this.send("loadConfig",m.payload)
break
case"get_user":i?this.postMessage({action:m.action+"_ack",success:!0,status:200,data:a}):this.postMessage({action:m.action+"_ack",success:!1,status:401})
break
case"update_user":var v=m&&m.payload
i?v?this.send("updateUser",v):this.postMessage({action:m.action+"_ack",success:!1,status:400}):this.postMessage({action:m.action+"_ack",success:!1,status:401})
break
case"reset_user":this.send("resetSession",function(e,t){e&&s.send("userCleared"),s.postMessage({action:m.action+"_ack",success:e,status:t})})
break
case"create_user":this.send("createUser",m.payload,function(e,t,n){s.postMessage({action:m.action+"_ack",success:e,status:t,data:n})})
break
case"clone_user":this.send("loadUserByAlias",m.payload,function(e,t,n){s.postMessage({action:m.action+"_ack",success:e,status:t,data:n})})
break
case"authenticate_user":if(this.jwt.isEnabled){var E=m&&m.payload,y=E&&this.getJWTMeta(E),w=y&&y.reference_id
i||this.jwt.auth.app?this.send("verifyJWT",{jwtAuthToken:m.payload},function(e){s.jwt.isStrict&&s.jwt.auth.user&&e&&e.success&&(s.cache.findBy("post_message","widget_loaded")||s.send("trackActivity"))}):null===this.jwt.auth.app||null===this.jwt.auth.user||(!1===this.jwt.auth.app||!1===this.jwt.auth.user)&&w?(this.jwt.auth.app=!1,Ember.set(this.jwt.auth,"user",!1),Ember.set(this,"session.jwtAuthToken",m.payload),this.send("getUser")):this.send("verifyJWT",{jwtAuthToken:m.payload},function(e){s.jwt.isStrict&&s.jwt.auth.app&&e&&e.success&&s.send("trackActivity"),s.postMessage(e)})}break
case"get_user_uuid":this.jwt.isEnabled?this.send("getUserUUID",function(e){s.postMessage({action:m.action+"_ack",success:!0,status:200,data:{uuid:e}})}):this.postMessage({action:m.action+"_ack",success:!1,status:401})
break
case"generate_user_uuid":this.jwt.isEnabled?this.send("generateUserUUID",function(e){s.postMessage({action:m.action+"_ack",success:!0,status:200,data:{uuid:e}})}):this.postMessage({action:m.action+"_ack",success:!1,status:401})
break
case"open_channel":this.send("triggerOpenClose",!0),this.gotoChannel(m.payload)
break
case"track_location":this.updateLocation(m.payload.pageUrl)
break
case"track_event":this.updateEvent(m.payload.eventName,m.payload.data)
break
case"track_activity":this.send("triggerActivity",m.payload)
break
case"startScreenShare":var T=m.cb_data
T&&this.screenshare.startCoBrowsing(T)
break
case"endScreenShare":this.screenshare.endCoBrowsing(m)
break
case"acceptedAudioCall":this.screenshare.acceptAudioCall(m)
break
case"deniedAudioCall":this.screenshare.denyAudioCall(m)
break
case"stacked_max_height":this.set("stackMaxHeight",m.payload.height)
break
case"collapse_all":var S=this.get("hotline.ui")
S.modal&&(Ember.set(S,"modalOpen",!1),Ember.set(S,"openArticleFromMessage",!1),(0,t.default)("html").removeClass("expanded-modal"),this.postMessage({action:"collapse_all"}))}}},unreadObserver:Ember.observer("totalUnreadCount",function(){var e=this.totalUnreadCount
e!==this.lastUnreadCount&&(this.send("notifyUnread"),this.set("lastUnreadCount",e))}),removeOfflineMessagesOutsideBusinessHours:function(e){var t=this,s=this.conversations,n=this.localds
e&&e.forEach(function(e){if(!e.awayMessage){var a=s&&s.findBy("channelId",e.channelId),i=a&&a.get("messages").toArray(),r=i&&i.filterBy("offlineMessage",!0).filterBy("hasBeenRepliedToOffline",!1)
if(r&&r.length>0)if(i&&i.forEach(function(e){e&&e.get("offlineMessage")&&!1===e.get("hasBeenRepliedToOffline")&&(i.removeObject(e),e.destroyRecord())}),i&&i.length)a&&a.set("messages",i)
else{var o=t.conversations
o&&o.removeObject(a)}n&&n.save()}})},checkChannelsOutsideBusinessHours:function(){var e=this.get("hotline.ui.awayMessage"),t=this.get("hotline.ui.channels"),s=[]
t&&t.forEach(function(t){var n=e&&e.findBy("operatingHoursId",t.operatingHoursId);(!n||n&&!n.enabled)&&(n=e&&e.findBy("defaultBhr",!0))
var a={channelId:t&&t.channelId,awayMessage:n&&n.awayMessage}
s.push(a)}),this.removeOfflineMessagesOutsideBusinessHours(s)},actions:{onEnlargeImage:function(e){var t=this
Ember.run.later(function(){var s=t.get("hotline.ui")
Ember.set(s,"modalOpen",!0),Ember.set(s,"modal",{imageUrl:e}),parent.focus(),t.postMessage({action:"expand_all",picUrl:e})},500)},setTags:function(e){var t=this.session,s=e&&e.tags,n=e&&e.force
t&&s&&s.length?Ember.set(t,"tags",s):Ember.set(t,"tags",void 0),n&&this.home()},sendMessageOnEnter:function(e){this.gotoChannel(e)},setFaqTags:function(e){var t=this.session,s=e&&e.faqTags,n=e&&e.force
t&&s?Ember.set(t,"faqTags",s):Ember.set(t,"faqTags",void 0),n&&this.reloadRoute()},setProp:function(e){var t=this.localds,s=e&&e.prop
t&&(s&&Object.keys(s).length>0?t.set("properties",this.store.createRecord("properties",s)):t.set("properties",void 0),this.send("save",!1))},loadHomeView:function(){this.processFrame()
var e=this.displayChannels,t=e.length,s=this.hotline.ui.categories,n=this.get("session.faqTags"),a=Ember.isPresent(s)
if(n&&"category"===n.filterType&&(a=Ember.isPresent(s&&s.find(function(e){return b.default.subsetOfArray(e.tags,n.tags)}))),e&&t>1)this.session&&this.session.config&&this.session.config.showFAQOnOpen&&a?this.router.replaceWith("home.faqs"):this.router.replaceWith("home")
else if(1===t)if(a){var i=this.session&&this.session.config
i&&i.showFAQOnOpen?this.router.replaceWith("home.faqs"):i&&i.hideFAQ?this.router.replaceWith("home.channel",e[0].channelId):this.router.replaceWith("home")}else this.router.replaceWith("home.channel",e[0].channelId)},toggleChat:function(){if(this.isOpen){var e=document.querySelectorAll("iframe")
e&&e.forEach(function(e){var t=e.src
e.src="",e.src=t})}var t=this.hotline.ui.modal
t&&t.thirdPartyURL&&Ember.set(this.hotline.ui,"modalOpen",!this.isOpen),this.send("triggerOpenClose",!this.isOpen)},updateView:function(e){this.set("currentView",e),this.send("checkJWTExpiry"),this.checkChannelsOutsideBusinessHours()},toggleNotification:function(e){var t=e===p.default.DialogState.CLOSE
t||this.isDialogOpen||this.send("toggleDialog",!0),this.set("isDialogOpen",!t),this.postMessage({action:"notify_frame",data:e})},toggleDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]
this.postMessage({action:"toggle_dialog",data:e})},closeNotification:function(){var e=this.get("hotline.ui"),t=this.messageStacker
t.hasMessages&&(this.send("toggleNotification",p.default.DialogState.CLOSE),t.resetLastAgentMessages(),Ember.setProperties(e,{lockAgentMessage:void 0}))},triggerActivity:function(e){var s=this,n=this.session,a=n&&n.user,i=n&&n.siteId,r=a&&a.alias
if(r){var o=p.default.EmberModelUrl.heartbeat.url
o=o.replace("{token}",n.token).replace("{userAlias}",r),i&&(o+="?siteId=".concat(i)),t.default.ajax({type:"POST",url:o,data:JSON.stringify(e),contentType:"application/json; charset=UTF-8"}).then(function(){},function(e){s.logger.log(e)})}},triggerShowHide:function(e){this.postMessage({action:"toggle_frame",show:e})},updateCookie:function(e){var t=this.localds
this.set("session.omniCookie",e.omniCookie),t.set("alias",this.getUUID()),this.send("save",!1)},restoreCookie:function(e){var t=this.localds
this.set("session.omniCookie",e.alias),t.set("alias",this.getUUID()),this.send("save",!1)},triggerOpenClose:function(e){var t=this,s={action:"resize_frame",isOpen:e},n=this.currentView,a=this.get("messageStacker.lastAgentMessages.lastObject.channelId")
this.send("closeNotification"),e?(this.send("checkJWTExpiry"),this.checkChannelsOutsideBusinessHours(),a&&this.router.replaceWith("home.channel",a),this.set("isOpen",!0),n&&n.send("onOpen"),setTimeout(function(){t.set("startAnimate",!0)},1),this.postMessage(s)):(this.set("startAnimate",!1),setTimeout(function(){t.set("isOpen",!1),t.postMessage(s)},1))},notifyUnread:function(){this.postMessage({action:"unread_count_notify",data:{count:this.totalUnreadCount}})},reloadWidget:function(){document.location.href=this.router.generate("widget",this.get("session.token"),this.get("session.referrer"))}}})
e.default=E})
define("hotline-web/components/content-viewport/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"+/99PBmp",block:'{"symbols":[],"statements":[[4,"if",[[24,["isOpen"]]],null,{"statements":[[0,"  "],[7,"div",false],[12,"class",[29,["d_hotline minimize ",[28,"if",[[24,["showMinimizeIconInsideWidget"]],"fc-mobile-close"],null]]]],[3,"action",[[23,0,[]],"toggleChat"]],[8],[0,"\\n    "],[7,"i",true],[10,"class","icon icon-ic_close mild"],[8],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null],[7,"div",true],[11,"class",[29,["hotline-launcher ",[28,"if",[[24,["l2r"]],"l2r"],null]," ",[28,"if",[[24,["isOpen"]],"h-open"],null],"  ",[28,"if",[[24,["isFullscreen"]],"fc-fullscreen"],null]," ",[28,"if",[[24,["isMobileView"]],"fc-mobile-view"],null]]]],[8],[0,"\\n  "],[7,"div",true],[11,"class",[29,["viewport h-chat-custom ",[28,"if",[[24,["startAnimate"]],"h-open"],null]]]],[8],[0,"\\n    "],[7,"div",true],[10,"class","widget-status animated fadeInUp faster"],[8],[0,"\\n      "],[5,"ui-help-note",[],[["@reloadRoute","@gotoHome"],[[28,"action",[[23,0,[]],[24,["reloadRoute"]]],null],[28,"action",[[23,0,[]],[24,["home"]]],null]]]],[0,"\\n    "],[9],[0,"\\n"],[0,"    "],[1,[22,"outlet"],false],[0,"\\n  "],[9],[0,"\\n"],[4,"if",[[24,["showBusinessClosedBanner"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","business-closed-banner"],[8],[0,"\\n      "],[7,"div",true],[10,"class","business-closed-content"],[8],[0,"\\n        "],[1,[28,"t",["business_closed_banner"],null],false],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[9],[0,"\\n\\n"],[4,"if",[[28,"and",[[24,["displayNotification"]],[28,"not",[[24,["session","config","isFCSDKWebView"]]],null]],null]],null,{"statements":[[0,"  "],[5,"app-reply-dialog",[],[["@openChatWidget","@enlargeImage","@messageSendOnEnter","@stackMaxHeight"],[[28,"action",[[23,0,[]],"toggleChat"],null],[28,"action",[[23,0,[]],"onEnlargeImage"],null],[28,"action",[[23,0,[]],"sendMessageOnEnter"],null],[22,"stackMaxHeight"]]]],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div",false],[12,"class",[29,["d-hotline h-btn animated zoomIn faster ",[28,"if",[[24,["l2r"]],"l2r"],null]," ",[28,"if",[[28,"or",[[24,["hideChatButton"]],[24,["isOpen"]]],null],"dn"],null]," ",[28,"if",[[24,["isOpen"]],"h-open"],null]]]],[3,"action",[[23,0,[]],"toggleChat"]],[8],[0,"\\n  "],[7,"div",true],[10,"class","chat-content"],[8],[0,"\\n    "],[7,"i",true],[10,"class","icon-ic_chat_icon"],[8],[9],[0,"\\n  "],[9],[0,"\\n"],[4,"unless",[[24,["displayNotification"]]],null,{"statements":[[0,"    "],[7,"div",true],[11,"class",[29,[[28,"if",[[24,["yet2BRead"]],"h-btn-notify animated zoomIn "],null]," ",[28,"if",[[28,"gt",[[24,["totalUnreadCount"]],9],null],"unread-greater-than-9"],null]]]],[8],[0,"\\n      "],[1,[28,"if",[[24,["yet2BRead"]],[24,["displayUnreadCount"]]],null],false],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[9],[0,"\\n\\n"],[1,[22,"customCSS"],true]],"hasEval":false}',meta:{moduleName:"hotline-web/components/content-viewport/template.hbs"}})
e.default=t}),define("hotline-web/components/emoji-picker/component",["exports","freshchat-component-library/components/emoji-picker/component"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/components/file-upload/component",["exports","hotline-web/utils/constants","hotline-web/utils/regex-utils"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.TextField.extend({type:"file",attributeBindings:["accept"],accept:"file",multiple:!1,init:function(){this._super.apply(this,arguments)
var e=this.allowedFileTypes
e&&Ember.set(this,"accept",e)},getFileType:function(e){var n,a=this.isAttachment,i=this.allowedFileTypes,r=this.blockedFileTypes,o=i&&i.split(",")||[],l=r&&r.split(",")||[],c=e&&e.lastIndexOf("."),u=e&&c>=0&&e.substr(c)||""
return u=u.toLowerCase(),s.default.checkValidFileExtension(u)&&e&&u?(n=t.default.SupportedImageFileExtensions[u]?t.default.FILETYPE.IMAGE:t.default.FILETYPE.FILE,n=a?t.default.FILETYPE.FILE:n,i?o.indexOf(u)>=0?n:t.default.FILETYPE.INVALID:r&&l.indexOf(u)>=0?t.default.FILETYPE.INVALID:n):t.default.FILETYPE.INVALID},isSupportedFileSize:function(e,s){var n=this.attr||{},a=n&&n.size||(s===t.default.FILETYPE.IMAGE?t.default.ImageAttr.size:t.default.FileAttr.size),i=e.size<=a
return i||this.set("parentView.content",{error:this.intl.t("file_attachment_errors.invalid_file_size",{attributeSize:a/1048576}),timestamp:(new Date).getTime()}),i},processFile:function(e,t){var s={fileType:t,fileData:e,timestamp:(new Date).getTime(),isShared:this.isShared,markForQuickAccess:this.markForQuickAccess}
this.set("parentView.content",s),this.set("imageData",s)},processImageFile:function(e,t){var s=this,n=this.attr||{},a=new FileReader,i=new Image
a.onload=function(a){var r,o=a.target.result;(n.width||n.height)&&(i.src=o,i.onload=function(){(this.width>n.width||this.height>n.height)&&s.set("parentView.content",{error:s.get("intl").t("file_attachment_errors.invalid_image_resolution",{width:n.width,height:n.height}),timestamp:(new Date).getTime()})}),r={fileType:t,fileData:e,timestamp:(new Date).getTime(),data:o,attr:{width:this.width,height:this.height}},s.set("parentView.content",r),s.set("imageData",r)},a.readAsDataURL(e)},change:function(e){for(var s=e&&e.target&&e.target.files||[],n=s.length||0,a=0;a<n;a++){var i=s[a],r=this.getFileType(i.name)
r!==t.default.FILETYPE.INVALID?this.isSupportedFileSize(i,r)&&(r===t.default.FILETYPE.FILE?this.processFile(i,r):r===t.default.FILETYPE.IMAGE&&this.processImageFile(i,r)):this.set("parentView.content",{error:this.intl.t("file_attachment_errors.invalid_file_extension"),timestamp:(new Date).getTime()})}e.target.value=""}})
e.default=n}),define("hotline-web/components/radio-button/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({tagName:"input",type:"radio",attributeBindings:["type","id","name","value","checked"],checked:Ember.computed("group","value",{get:function(){return this.group===this.value}}),change:function(){this.group!==this.value&&Ember.run.once(this,"changed")},changed:function(){this.onchange(this.value)}})
e.default=t}),define("hotline-web/components/ui-agent-typing-indicator/component",["exports","hotline-web/utils/constants","jquery"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Component.extend({classNames:["ui-agent-typing-indicator"],classNameBindings:["isAgentTyping::hidden"],init:function(){this._super(),this.setProperties({isAgentTyping:!1,agentThread:void 0,freddyThread:void 0,chatWindow:(0,s.default)(".h-conv-chat"),onRTSMessageCB:this.onRTSMessage.bind(this)})},didInsertElement:function(){this.rts.on("didRTSMessage",this.onRTSMessageCB)},willDestroyElement:function(){this.rts.off("didRTSMessage",this.onRTSMessageCB)},hideTypingIndicator:function(){var e=this.agentThread,t=this.freddyThread
this.set("isAgentTyping",!1),e&&clearTimeout(e),t&&clearTimeout(t)},showTypingIndicator:function(e){var t=this,s=this.chatWindow,n=this.agentThread
this.set("isAgentTyping",!0),s&&s.prop("scrollTop")>=s.prop("scrollHeight")-s.prop("offsetHeight")-30&&!document.querySelector(".h-conv-chat .notification-container")&&s.animate({scrollTop:s.prop("scrollHeight")},1500),n&&clearTimeout(n),this.set("agentThread",setTimeout(function(){t.isDestroying||t.isDestroyed||t.set("isAgentTyping",!1)},e))},onRTSMessage:function(e){var s=this,n=e&&e.userId,a=this.channelId,i=this.session.user.id
if("is_typing"===e.action&&e.channelId&&e.channelId===a&&i&&i!==parseInt(n,10))this.showTypingIndicator(3e3)
else if("MESSAGE_RECEIVED"===e.type&&e.conversation&&e.conversation.channelId===a){i===(e.conversation&&e.conversation.messages&&e.conversation.messages.length&&e.conversation.messages[0].messageUserId)?e.conversation&&e.conversation.status===t.default.CONVERSATION.CONVERSATION_STATUS.FREDDY_BOT&&(this.hideTypingIndicator(),this.freddyThread=setTimeout(function(){s.showTypingIndicator(4e3)},1e3)):this.hideTypingIndicator()}}})
e.default=n}),define("hotline-web/components/ui-agent-typing-indicator/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"XZi5UNh4",block:'{"symbols":[],"statements":[[7,"span",true],[10,"class","indicator-dot"],[8],[9],[0,"\\n"],[7,"span",true],[10,"class","indicator-dot"],[8],[9],[0,"\\n"],[7,"span",true],[10,"class","indicator-dot"],[8],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-agent-typing-indicator/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-article-modal/component",["exports","hotline-web/utils/dom-utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend({classNames:["h-conv"],isLoading:!0,isEmptyState:!1,externalArticle:Ember.inject.service("external-article"),didInsertElement:function(){var e=this,t=this.get("hotline.ui.modal.template.templateID"),s=this.get("hotline.ui.modal.template.placeholderId")
this.externalArticle.getArticleInfo(t,s).then(function(t){t&&(Ember.set(e,"model",t),Ember.set(e,"isLoading",!1),Ember.run.later(e,e.updateBodyHeight,0))},function(t){e.logger.log(t),Ember.set(e,"isLoading",!1),Ember.set(e,"isEmptyState",!0)})},title:Ember.computed({get:function(){return this.get("hotline.ui.modal.template.articleTitle")}}),emptyStatemessage:Ember.computed({get:function(){return Ember.String.htmlSafe(this.intl.t("external_faqs.article_empty_message"))}}),description:Ember.computed({get:function(){return this.getContentByProperty("description")}}),link:Ember.computed({get:function(){return this.getContentByProperty("link")}}),buttonActions:Ember.computed({get:function(){return this.getContentByProperty("callbacks")}}),getContentByProperty:function(e){var t=this.get("model.templateContentPayloads")
if(t&&t[e]){var s=t[e]
return e&&"callbacks"===e.toLowerCase()?t[e]:!Ember.isBlank(s)&&Ember.String.htmlSafe(s[0].content)}},updateBodyHeight:function(){var e=this.element.querySelector(".articles-list .article-content .modal-footer").offsetHeight
t.default.addCSSInline(this.element.querySelector(".articles-list .article-content .h-modal-notes"),"height","calc(100% - ".concat(e,"px")),t.default.bindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback)},onScroll:function(e){var s=e&&e.target
s.scrollHeight-s.scrollTop-s.clientHeight<=0?t.default.addCSSInline(this.element.querySelector(".bottom-gradient"),"visibility","hidden"):t.default.addCSSInline(this.element.querySelector(".bottom-gradient"),"visibility","visible")},scrollCallback:Ember.computed({get:function(){return this.onScroll.bind(this)}}),willDestroyElement:function(){this._super.apply(this,arguments),t.default.unbindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback)},actions:{sendButtonAction:function(e){var t=this,s=this.get("hotline.ui.modal.template")
e.messageAlias=s?s.messageAlias:"",e.referenceId=s?s.templateID:"",this.externalArticle.postArticleFeedback(e).then(function(){t.flash.showMessage(t.intl.t("faqs.thank_you_for_feedback"))},function(){t.flash.showMessage(t.intl.t("status_messages.access_denied.line1"))}),this.closeModal&&this.closeModal()},openExternalLink:function(e){window.open(e,"_blank")}}})
e.default=s}),define("hotline-web/components/ui-article-modal/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"nvvXdqla",block:'{"symbols":["btnAction"],"statements":[[4,"if",[[24,["isLoading"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","loading-article"],[8],[0,"\\n    "],[5,"app-loader",[],[[],[]]],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div",true],[10,"class","faq-content"],[8],[0,"\\n    "],[7,"div",true],[10,"class","h-header"],[8],[0,"\\n      "],[7,"div",true],[10,"class","article-view-header header fadeIn"],[8],[0,"\\n        "],[7,"div",true],[10,"class","logo header-section"],[8],[0,"\\n          "],[7,"div",false],[12,"class","ic-back"],[3,"action",[[23,0,[]],[24,["closeModal"]]]],[8],[0,"\\n            "],[7,"i",true],[10,"class","icon icon-ic_back"],[8],[9],[0,"\\n          "],[9],[0,"\\n          "],[7,"div",true],[10,"class","category-title"],[8],[0,"\\n            "],[7,"div",true],[10,"class","title"],[8],[1,[22,"title"],false],[9],[0,"\\n          "],[9],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n    "],[7,"div",true],[10,"class","body sections faq-body-nobg  no-footer article-lists-section article-view-section"],[8],[0,"\\n      "],[7,"div",true],[10,"class","articles-list hide-footer"],[8],[0,"\\n        "],[7,"ul",true],[11,"class",[29,["article-list-items animated fadeInUp faster ",[28,"if",[[24,["isEmptyState"]],"empty-state"],null]]]],[8],[0,"\\n"],[4,"if",[[24,["isEmptyState"]]],null,{"statements":[[0,"            "],[7,"div",true],[10,"class","empty-content"],[8],[0,"\\n              "],[7,"img",true],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/page-not-found-f6dec2a088c375c54cdf8fa6abb4789c.svg"],[8],[9],[0,"\\n              "],[7,"div",true],[10,"class","info"],[8],[1,[22,"emptyStatemessage"],false],[9],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"div",true],[10,"class","article-content animated fadeIn fast"],[8],[0,"\\n              "],[7,"div",true],[10,"class","fc_web_modal_closed"],[8],[0,"\\n                "],[7,"div",true],[10,"class","article-header-section"],[8],[0,"\\n                  "],[7,"div",true],[10,"class","header shadow"],[8],[0,"\\n                    "],[7,"div",true],[10,"class","article-name"],[8],[0,"\\n                      "],[1,[22,"title"],false],[0,"\\n                    "],[9],[0,"\\n                  "],[9],[0,"\\n                  "],[7,"div",true],[10,"class","progress-container"],[8],[0,"\\n                    "],[7,"div",true],[10,"class","progress-bar"],[10,"id","myBar"],[8],[9],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n                "],[7,"div",true],[10,"class","animated fadeIn article-preview"],[8],[0,"\\n                  "],[7,"div",true],[10,"class","h-modal-notes scroll-section with-footer "],[8],[0,"\\n                    "],[7,"div",true],[10,"class","modal-body "],[8],[0,"\\n                      "],[7,"div",true],[10,"class","article-description"],[8],[1,[22,"description"],false],[9],[0,"\\n"],[4,"if",[[24,["link"]]],null,{"statements":[[0,"                        "],[7,"div",true],[10,"class","article-external-link"],[8],[0,"\\n                          "],[7,"span",true],[8],[1,[28,"t",["external_faqs.view_article"],null],false],[9],[0,"\\n                          "],[7,"img",false],[12,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/external-link-df921b17a8f9cdd9ca89d252d703caa7.svg"],[3,"action",[[23,0,[]],"openExternalLink",[24,["link"]]]],[8],[9],[0,"\\n                        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[9],[0,"\\n                    "],[7,"div",true],[10,"class","bottom-gradient"],[8],[9],[0,"\\n                  "],[9],[0,"\\n"],[4,"if",[[24,["buttonActions"]]],null,{"statements":[[0,"                    "],[7,"div",true],[10,"class","modal-footer"],[8],[0,"\\n                      "],[7,"div",true],[10,"class","article_vote_outer"],[8],[0,"\\n                        "],[7,"span",true],[10,"class","article_vote_content"],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","custom_template_article_useful"]]],null,{"statements":[[0,"                            "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","custom_template_article_useful"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                            "],[1,[28,"t",["external_faqs.article_useful"],null],false],[0,"\\n"]],"parameters":[]}],[0,"                        "],[9],[0,"\\n                        "],[7,"div",true],[10,"class","voter-buttons"],[8],[0,"\\n"],[4,"each",[[24,["buttonActions"]]],null,{"statements":[[0,"                            "],[7,"span",false],[12,"class","article_vote"],[3,"action",[[23,0,[]],"sendButtonAction",[23,1,[]]]],[8],[0,"\\n"],[4,"if",[[23,1,["icon"]]],null,{"statements":[[0,"                                "],[7,"img",true],[11,"src",[23,1,["icon"]]],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                                "],[1,[23,1,["label"]],false],[0,"\\n"]],"parameters":[]}],[0,"                            "],[9],[0,"\\n"]],"parameters":[1]},null],[0,"                        "],[9],[0,"\\n                      "],[9],[0,"\\n                    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"                "],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]}],[0,"        "],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-article-modal/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-button-composer/component",["exports","jquery","hotline-web/utils/utils","hotline-web/utils/constants","hotline-web/mixins/datastore","freshchat-component-library/utils/convert-emoji-to-html","hotline-web/config/environment"],function(e,t,s,n,a,i,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=n.default.CONVERSATION,l=Ember.Component.extend(s.default,n.default,a.default,{tagName:"button",classNames:["h-img-button"],generatedHTML:Ember.computed({get:function(){var e=this.model,t=this.get("hotline.ui.isDesktop")?(0,i.default)(e.label,r.default.EmberENV.cdnUrl):e.label
return Ember.String.htmlSafe(t)}}),click:function(e){e.preventDefault()
var t=this.model
switch(t.fragmentType){case o.FRAGMENT_TYPE.QUICKREPLY:this.send("sendReplyMessage",t.customReplyText||t.label)
break
case o.FRAGMENT_TYPE.CALLBACK:this.performArticleFeedbackCallback(t),this.send("sendReplyMessage",t.label,o.MESSAGE_TYPE.FEEDBACK_RESPONSE)
break
case o.FRAGMENT_TYPE.BUTTON:"_blank"===t.target?this.send("openExternalTab",t.content):"_self"===t.target?this.send("openExternalLink",t.content):this.send("openInternalLink",t.content)}},actions:{openExternalTab:function(e){window.open(e,"_blank")},openInternalLink:function(e){var t,n=this.get("faqs.content").serialize()
n&&(t=s.default.getArticleToShow(n.dsCategories,e))&&this.router.send("gotoFAQ",t)},openExternalLink:function(e){var t=this.get("hotline.ui")
Ember.set(t,"modalOpen",!0),Ember.set(t,"modal",{thirdPartyURL:e,title:""}),Ember.set(t,"openArticleFromMessage",!0)},sendReplyMessage:function(e,t){var s=[{fragmentType:o.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:e}]
this.sendButtonMessage(s,t?{messageType:t}:null)}},performArticleFeedbackCallback:function(e){var s=this,a=this.message&&this.get("message.alias"),i=n.default.EmberModelUrl.getTemplateArticle.postBackURL
i=i.replace("{token}",this.get("session.token")).replace("{messageAlias}",a).replace("/{referenceId}",""),t.default.ajax({type:"POST",url:i,contentType:"application/json",data:JSON.stringify(e)}).then(function(e){s.logger.log(e)},function(e){s.logger.log(e)})}})
e.default=l}),define("hotline-web/components/ui-button-composer/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"k6ZCX/q0",block:'{"symbols":[],"statements":[[7,"span",true],[10,"class","btn-content"],[8],[0,"\\n  "],[1,[22,"generatedHTML"],false],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-button-composer/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-calendar-day-quads/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({daysWithSlotsAsQuads:Ember.computed("model",{get:function(){for(var e=[],t=this.model,s=t&&t.get("length"),n=0;n<s;n++){var a=t.objectAt(n),i=a&&Ember.get(a,"morningSlots"),r=a&&Ember.get(a,"afternoonSlots"),o=a&&Ember.get(a,"eveningSlots"),l=a&&Ember.get(a,"nightSlots"),c={date:Ember.get(a,"date"),weekday:Ember.get(a,"weekday")}
i&&(c.morningSlots=this.convertSlotsIntoQuads(i),c.morningSlotsCount=i.length),r&&(c.afternoonSlots=this.convertSlotsIntoQuads(r),c.afternoonSlotsCount=r.length),o&&(c.eveningSlots=this.convertSlotsIntoQuads(o),c.eveningSlotsCount=o.length),l&&(c.nightSlots=this.convertSlotsIntoQuads(l),c.nightSlotsCount=l.length),e.push(c)}return e}}),convertSlotsIntoQuads:function(e){for(var t=e&&e.length,s=[],n=0;n<t;n+=4)t>=n+4?s.push([e[n],e[n+1],e[n+2],e[n+3]]):t===n+3?s.push([e[n],e[n+1],e[n+2]]):t===n+2?s.push([e[n],e[n+1]]):s.push([e[n]])
return s},actions:{openConfirmationView:function(e){this.openConfirmationScreen(e)}}})
e.default=t}),define("hotline-web/components/ui-calendar-day-quads/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"4Ml9udX3",block:'{"symbols":["day"],"statements":[[4,"each",[[24,["daysWithSlotsAsQuads"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","cal-weekday-details"],[8],[0,"\\n    "],[7,"span",true],[10,"class","cal-weekday-name"],[8],[0,"\\n      "],[1,[23,1,["weekday"]],false],[0,"\\n    "],[9],[0,"\\n    "],[7,"span",true],[10,"class","cal-weekday-date bolder"],[8],[0,"\\n      "],[1,[23,1,["date"]],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[4,"if",[[23,1,["morningSlots"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","cal-time-slots pad-quad"],[8],[0,"\\n      "],[7,"div",true],[10,"class","session-name picker-max"],[8],[0,"\\n        "],[7,"i",true],[10,"class","ic-calendar-session morning icon-ic_morning"],[8],[9],[0,"\\n        "],[7,"span",true],[10,"class","session-name-text"],[8],[1,[28,"t",["calendar.morn"],null],false],[0,"("],[1,[23,1,["morningSlotsCount"]],false],[0,")"],[9],[0,"\\n      "],[9],[0,"\\n      "],[5,"ui-calendar-session-view",[],[["@slots","@viewTriplets","@openConfirmationView"],[[23,1,["morningSlots"]],"",[28,"action",[[23,0,[]],"openConfirmationView"],null]]]],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,1,["afternoonSlots"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","cal-time-slots pad-quad"],[8],[0,"\\n      "],[7,"div",true],[10,"class","session-name picker-max"],[8],[0,"\\n        "],[7,"i",true],[10,"class","ic-calendar-session afternoon icon-ic_afternoon"],[8],[9],[0,"\\n        "],[7,"span",true],[10,"class","session-name-text"],[8],[1,[28,"t",["calendar.afternoon"],null],false],[0,"("],[1,[23,1,["afternoonSlotsCount"]],false],[0,")"],[9],[0,"\\n      "],[9],[0,"\\n      "],[5,"ui-calendar-session-view",[],[["@slots","@viewTriplets","@openConfirmationView"],[[23,1,["afternoonSlots"]],"",[28,"action",[[23,0,[]],"openConfirmationView"],null]]]],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,1,["eveningSlots"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","cal-time-slots pad-quad"],[8],[0,"\\n      "],[7,"div",true],[10,"class","session-name picker-max"],[8],[0,"\\n        "],[7,"i",true],[10,"class","ic-calendar-session evening icon-ic_evening"],[8],[9],[0,"\\n        "],[7,"span",true],[10,"class","session-name-text"],[8],[1,[28,"t",["calendar.evening"],null],false],[0,"("],[1,[23,1,["eveningSlotsCount"]],false],[0,")"],[9],[0,"\\n      "],[9],[0,"\\n      "],[5,"ui-calendar-session-view",[],[["@slots","@viewTriplets","@openConfirmationView"],[[23,1,["eveningSlots"]],"",[28,"action",[[23,0,[]],"openConfirmationView"],null]]]],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,1,["nightSlots"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","cal-time-slots pad-quad"],[8],[0,"\\n      "],[7,"div",true],[10,"class","session-name picker-max"],[8],[0,"\\n        "],[7,"i",true],[10,"class","ic-calendar-session night icon-ic_night"],[8],[9],[0,"\\n        "],[7,"span",true],[10,"class","session-name-text"],[8],[1,[28,"t",["calendar.night"],null],false],[0,"("],[1,[23,1,["nightSlotsCount"]],false],[0,")"],[9],[0,"\\n      "],[9],[0,"\\n      "],[5,"ui-calendar-session-view",[],[["@slots","@viewTriplets","@openConfirmationView"],[[23,1,["nightSlots"]],"",[28,"action",[[23,0,[]],"openConfirmationView"],null]]]],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-calendar-day-quads/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-calendar-day-triplets/component",["exports","hotline-web/utils/constants","hotline-web/mixins/calendar-mixin"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Component.extend(s.default,{classNames:["cal-picker-weekday"],CALENDAR:t.default.CALENDAR,mockSlots:Ember.computed("isLoading",{get:function(){return[[1,2,3],[4,5]]}}),tripletSessionWithCount:Ember.computed("slotsForMinifiedView.{session,slots}",{get:function(){var e=this.slotsForMinifiedView,s=e&&e.session,n="",a=(e&&e.slots).length
return s===t.default.CALENDAR.SESSIONS.MORNING?n=this.intl.t("calendar.morn"):s===t.default.CALENDAR.SESSIONS.AFTERNOON?n=this.intl.t("calendar.afternoon"):s===t.default.CALENDAR.SESSIONS.EVENING?n=this.intl.t("calendar.evening"):s===t.default.CALENDAR.SESSIONS.NIGHT&&(n=this.intl.t("calendar.night")),n+"("+a+")"}}),tripletSessionIconClass:Ember.computed("slotsForMinifiedView.session",{get:function(){var e=this.slotsForMinifiedView.session
return e&&this.getCSSClassForSession(e)}}),slotsAsTriplets:Ember.computed("slotsForMinifiedView.slots",{get:function(){for(var e=this.get("slotsForMinifiedView.slots"),t=e&&e.length,s=[],n=0;n<t;n+=3)t>=n+3?s.push([e[n],e[n+1],e[n+2]]):t===n+2?s.push([e[n],e[n+1]]):s.push([e[n]])
return s}}),slotsForMinifiedView:Ember.computed("model",{get:function(){return this.getFirstAvailableSessionFromDayObject(this.model)}}),getFirstAvailableSessionFromDayObject:function(e){var s
if(e)return e.morningSlots?s={session:t.default.CALENDAR.SESSIONS.MORNING,slots:e.morningSlots}:e.afternoonSlots?s={slots:e.afternoonSlots,session:t.default.CALENDAR.SESSIONS.AFTERNOON}:e.eveningSlots?s={slots:e.eveningSlots,session:t.default.CALENDAR.SESSIONS.EVENING}:e.nightSlots&&(s={slots:e.nightSlots,session:t.default.CALENDAR.SESSIONS.NIGHT}),s.slots&&s.slots.length>6&&(s.slots=s.slots.slice(0,6)),s},actions:{bookSlot:function(e){this.setSlot(e)}}})
e.default=n}),define("hotline-web/components/ui-calendar-day-triplets/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"rCmigvtp",block:'{"symbols":["slotsTriplet"],"statements":[[7,"div",true],[10,"class","cal-weekday-details"],[8],[0,"\\n"],[4,"if",[[24,["isLoadingSlots"]]],null,{"statements":[[0,"    "],[7,"span",true],[10,"class","is-loading-weekday"],[8],[0,"\\n    "],[9],[0,"\\n    "],[7,"span",true],[10,"class","is-loading-weekday-name"],[8],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"span",true],[10,"class","cal-weekday-name"],[8],[0,"\\n      "],[1,[24,["model","weekday"]],false],[0,"\\n    "],[9],[0,"\\n    "],[7,"span",true],[10,"class","cal-weekday-date"],[8],[0,"\\n      "],[1,[24,["model","date"]],false],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]}],[9],[0,"\\n"],[7,"div",true],[10,"class","cal-time-slots"],[8],[0,"\\n"],[4,"if",[[24,["isLoadingSlots"]]],null,{"statements":[[4,"each",[[24,["mockSlots"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","cal-time-slot-group cal-time-slot-triplet loading"],[8],[0,"\\n"],[4,"each",[[23,1,[]]],null,{"statements":[[0,"          "],[7,"span",true],[10,"class","cal-time-slot"],[8],[0,"\\n            "],[7,"span",true],[10,"class","is-loading-timeslot"],[8],[0,"\\n            "],[9],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]},{"statements":[[0,"    "],[7,"div",true],[10,"class","session-name"],[8],[0,"\\n      "],[7,"i",true],[11,"class",[22,"tripletSessionIconClass"]],[8],[9],[0,"\\n      "],[7,"span",true],[10,"class","session-name-text"],[8],[1,[22,"tripletSessionWithCount"],false],[9],[0,"\\n    "],[9],[0,"\\n    "],[5,"ui-calendar-session-view",[],[["@slots","@viewTriplets","@bookSlot"],[[22,"slotsAsTriplets"],"true",[28,"action",[[23,0,[]],"bookSlot"],null]]]],[0,"\\n"]],"parameters":[]}],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-calendar-day-triplets/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-calendar-picker-max/component",["exports","hotline-web/mixins/calendar-mixin"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend(t.default,{classNames:["maximized-slots"],actions:{closeCalendarPickerMaxMode:function(){this.closeCalendarPicker()},openConfirmationScreen:function(e){this.openConfirmationScreenForCalPicker(e,this.calendarMessage)}}})
e.default=s}),define("hotline-web/components/ui-calendar-picker-max/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"Of2NJ9TD",block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","cal-picker-nav"],[8],[0,"\\n  "],[7,"span",true],[10,"class","cal-nav-left"],[8],[0,"\\n    "],[7,"i",false],[12,"class","ic-cal-back clickable icon-ic_back_calendar"],[3,"action",[[23,0,[]],"closeCalendarPickerMaxMode"]],[8],[9],[0,"\\n  "],[9],[0,"\\n  "],[7,"span",true],[10,"class","cal-picker-title"],[8],[0,"\\n    "],[1,[28,"t",["calendar.schedule_a_demo"],null],false],[0,"\\n  "],[9],[0,"\\n  "],[7,"span",true],[10,"class","cal-meeting-length"],[8],[0,"\\n    "],[1,[22,"meetingLengthAsString"],false],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"],[7,"div",true],[10,"class","cal-timings-scroll"],[8],[0,"\\n  "],[5,"ui-calendar-day-quads",[],[["@openConfirmationScreen","@model"],[[28,"action",[[23,0,[]],"openConfirmationScreen"],null],[22,"slotsData"]]]],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-calendar-picker-max/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-calendar-picker/component",["exports","hotline-web/utils/timezone","hotline-web/utils/dayjs","hotline-web/mixins/store-url","hotline-web/utils/regex-utils","hotline-web/utils/constants","hotline-web/mixins/calendar-mixin","hotline-web/mixins/conversation"],function(e,t,s,n,a,i,r,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var l=Ember.Component.extend(r.default,o.default,n.default,{classNames:["cal-picker"],init:function(){this._super.apply(this,arguments),this.set("isLoadingSlots",!0),this.set("userEmailSubmitted",!1)
var e=this.get("session.user.email")||this.get("session.user.workEmail")
e&&this.set("userInputEmail",e)},noSlotsAvailable:Ember.computed("isLoadingSlots","firstFreeTimeSlots",{get:function(){return!this.isLoadingSlots&&!this.firstFreeTimeSlots}}),getCalendarData:function(){var e=this,t=this.get("messageMetaData.calendarMessageMeta"),s=t&&t.calendarAgentAlias,n=t&&t.calendarProviderType
this.store.findRecord("calendarAvailInfo",s,{adapterOptions:{calendarProviderType:n}},{reload:!0}).then(function(t){Ember.setProperties(e,{isLoadingSlots:!1,freeSlots:t.get("calendarTimeSlots"),meetingLength:t.get("meetingLength"),bufferTime:t.get("bufferTime"),minNoticeTime:t.get("minNoticeTime"),calendarType:t.get("calendarType")})})},agentData:Ember.computed("messageMetaData","messageMetaData.calendarMessageMeta.calendarAgentAlias",{get:function(){var e=this.get("messageMetaData.calendarMessageMeta"),t=e&&e.calendarAgentAlias,s=this.hidePic
return t&&!s?this.agentService.getAgentInfo(t):null}}),userPicUrl:Ember.computed("session.user.{profilePicThumbUrl.isNameGenerated}",{get:function(){return this.get("session.user.isNameGenerated")?null:this.get("session.user.profilePicThumbUrl")}}),userInputEmailIsValid:Ember.computed.match("userInputEmail",a.default._EMAIL_REGEX),timeSlotToBeBooked:Ember.computed("message","message.internalMeta.meetingStartTime","meetingLength","userTimeZoneToUse",{get:function(){var e=this.userTimeZoneToUse,n=this.get("message.internalMeta.meetingStartTime"),a=this.meetingLengthAsMillis
if(n&&a){var i=(0,s.default)(t.default.convert(n+a,e)).format("LT")
return(0,s.default)(t.default.convert(n,e)).format("LT")+" - "+i}return""}}),dateToBeBooked:Ember.computed("message","message.internalMeta.meetingStartTime","userTimeZoneToUse",{get:function(){var e=this.get("message.internalMeta.meetingStartTime"),n=this.userTimeZoneToUse
return e&&(0,s.default)(t.default.convert(e,n)).format("dddd")+", "+(0,s.default)(t.default.convert(e,n)).format("LL")}}),createCalendarBookingFrag:function(e,t){var s=this.meetingLengthAsMillis+e,n=this.calendarType
return{fragmentType:i.default.CONVERSATION.FRAGMENT_TYPE.MEETING,startMillis:e,endMillis:s,eventProviderType:n,userTimeZone:t,isPendingCreation:!0}},createCalendarCancelledFrag:function(){return{fragmentType:i.default.CONVERSATION.FRAGMENT_TYPE.TEXT,content:this.intl.t("calendar.user_cancelled")}},markCalendarInviteAsBooked:function(e){Ember.set(e,"isCalendarInviteBooked",!0),e.save()},allTimeZones:Ember.computed({get:function(){return t.default.listTimeZones()}}),filteredTimeZones:Ember.computed("timeZoneFilterValue",{get:function(){var e=this.timeZoneFilterValue,t=this.allTimeZones
if(e){var s=[],n=t&&t.length
e=e.toLowerCase()
for(var a=0;a<n;a++){var i=t[a]&&t[a].toLowerCase()
i&&i.indexOf(e)>-1&&s.push(t[a])}return s}return t}}),emailIconClass:Ember.computed("userInputEmailIsValid","showValidationCrossMarkExplicit","userInputEmail",{get:function(){return this.userInputEmailIsValid?"ic-goto-next-screen icon-chevron_right_regular":this.showValidationCrossMarkExplicit?"ic-invalid-input icon-times_circle_solid":"ic-empty-input icon-chevron_right_solid"}}),emailTooltip:Ember.computed("userInputEmailIsValid","showValidationCrossMarkExplicit","userInputEmail",{get:function(){return this.userInputEmailIsValid?this.intl.t("calendar.tooltips.valid_email"):this.showValidationCrossMarkExplicit?this.intl.t("calendar.tooltips.invalid_email"):this.intl.t("calendar.tooltips.no_email")}}),updateUserEmail:function(){var e=this,t=i.default.EmberModelUrl.updateUser,s=this.store,n={user:{email:this.userInputEmail,id:this.get("session.user.id"),alias:this.get("session.user.alias")}}
s.putRequest(t.model,this.getUserUpdateURL({url:t.url,token:this.get("session.token"),alias:this.get("session.user.alias")}),n).then(function(t){e.set("session.user.email",t.email),e.getCalendarData(),e.scrollToLastCalendarPicker(20)}).catch(function(){})},shouldUpdateUserEmail:Ember.computed("session.user.email","userInputEmail",{get:function(){return(this.get("session.user.email")||this.get("session.user.workEmail"))!==this.userInputEmail}}),userCustomTimeZone:Ember.computed.alias("hotline.ui.userCustomTz"),actions:{maximizeCalendarPicker:function(){this.send("resetSlot")
var e={slotsData:this.sessionalizedCalendarSlots,meetingLength:this.meetingLength,message:this.message}
this.openCalendarPickerMaximized(e)},resetSlot:function(){var e=this.message
Ember.set(e,"internalMeta.meetingStartTime",null),e.save()},cancelInvite:function(){var e=[]
e.push(this.createCalendarCancelledFrag()),this.markCalendarInviteAsBooked(this.message),this.sendMessageFromAppConversation(e,{internalMeta:this.messageMetaData,messageType:i.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.CANCELLED_BY_USER})},setSlot:function(e){var t=this.message
Ember.set(t,"internalMeta.meetingStartTime",e.from),t.save()},userEmailNextPress:function(){this.userInputEmail&&this.send("userEmailEnterPress")},userEmailEnterPress:function(){this.userInputEmailIsValid?(this.set("showValidationCheckMark",!0),this.set("userEmailSubmitted",!0),this.shouldUpdateUserEmail?this.updateUserEmail(this.userInputEmail):(this.getCalendarData(),this.scrollToLastCalendarPicker(20))):this.set("showValidationCrossMarkExplicit",!0)},bookSlot:function(){var e=this.userInputEmail
e!=this.get("session.user.email")&&this.set("session.user.email",e)
var t=this.messageMetaData,s=this.get("message.internalMeta.meetingStartTime"),n=e||this.get("session.user.email"),a=this.userTimeZoneToUse,i=[]
t&&t.calendarMessageMeta&&n&&(t.calendarMessageMeta.calendarBookingEmail=n),i.push(this.createCalendarBookingFrag(s,a)),this.markCalendarInviteAsBooked(this.message),this.sendMessageFromAppConversation(i,{internalMeta:t}),this.scrollToBottomWithDelay(20)},setUserCustomTimezone:function(e){this.set("hotline.ui.userCustomTz",e),this.set("isTimeZoneSelectMode",!1)},switchToTimeZoneSelectMode:function(){this.set("isTimeZoneSelectMode",!0)},closeTimeZoneSelectMode:function(){this.set("isTimeZoneSelectMode",!1)}}})
e.default=l}),define("hotline-web/components/ui-calendar-picker/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"yw7OGkos",block:'{"symbols":["filterResult"],"statements":[[7,"div",true],[10,"class","h-chat"],[8],[0,"\\n  "],[7,"div",true],[10,"class","h-conv multiple"],[8],[0,"\\n    "],[7,"ul",true],[8],[0,"\\n      "],[7,"li",true],[8],[0,"\\n        "],[7,"div",true],[10,"class","h-comment calendar-picker-container"],[8],[0,"\\n"],[4,"if",[[24,["isTimeZoneSelectMode"]]],null,{"statements":[[0,"            "],[7,"div",true],[10,"class","timezone-picker"],[8],[0,"\\n              "],[7,"div",true],[10,"class","timezone-picker-header"],[8],[0,"\\n                "],[7,"span",false],[12,"class","cal-nav-left"],[3,"action",[[23,0,[]],"closeTimeZoneSelectMode"]],[8],[0,"\\n                  "],[7,"i",true],[10,"class","ic-cal-back clickable icon-ic_back_calendar"],[8],[9],[0,"\\n                "],[9],[0,"\\n                "],[7,"span",true],[10,"class","cal-tz-existing"],[8],[0,"\\n"],[4,"if",[[24,["userCustomTimeZone"]]],null,{"statements":[[0,"                    "],[1,[22,"userCustomTimeZone"],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[1,[22,"userDefaultTimeZone"],false],[0,"\\n"]],"parameters":[]}],[0,"                "],[9],[0,"\\n              "],[9],[0,"\\n"],[0,"              "],[7,"div",true],[10,"class","timezone-picker-body"],[8],[0,"\\n                "],[7,"div",true],[10,"class","time-zone-search-bar"],[8],[0,"\\n                  "],[1,[28,"input",null,[["class","value","placeholder"],["time-zone-input",[24,["timeZoneFilterValue"]],[28,"t",["calendar.search_tz"],null]]]],false],[0,"\\n                "],[9],[0,"\\n                "],[7,"div",true],[10,"class","time-zones-container"],[8],[0,"\\n                  "],[7,"ul",true],[10,"class","time-zones-list"],[8],[0,"\\n"],[4,"each",[[24,["filteredTimeZones"]]],null,{"statements":[[0,"                      "],[7,"li",false],[12,"class","time-zone-list-item"],[3,"action",[[23,0,[]],"setUserCustomTimezone",[23,1,[]]]],[8],[0,"\\n                        "],[1,[23,1,[]],false],[0,"\\n                      "],[9],[0,"\\n"]],"parameters":[1]},null],[0,"                  "],[9],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"],[0,"            "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"div",true],[10,"class","calendar-picker-minified"],[8],[0,"\\n              "],[7,"div",true],[11,"class",[29,["calendar-picker-header ",[28,"unless",[[24,["userEmailSubmitted"]],"email-input-view"],null]]]],[8],[0,"\\n                "],[7,"div",true],[10,"class","cal-header-left"],[8],[0,"\\n\\n                  "],[7,"i",true],[10,"class","ic-calendar cp-mini icon-ic_schedule_meeting"],[8],[9],[0,"\\n                  "],[7,"span",true],[10,"class","schedule-a-demo-text"],[8],[0,"\\n                    "],[1,[28,"t",["calendar.schedule_a_demo"],null],false],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n                "],[7,"div",true],[10,"class","cal-header-tw"],[8],[0,"\\n                  "],[1,[22,"meetingLengthAsString"],false],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"],[4,"if",[[28,"not",[[24,["userEmailSubmitted"]]],null]],null,{"statements":[[0,"                "],[7,"div",true],[10,"class","cal-picker-email-view"],[8],[0,"\\n                  "],[7,"div",true],[10,"class","email-input-container"],[8],[0,"\\n                    "],[7,"div",true],[11,"class",[29,["email-input ",[28,"if",[[28,"and",[[28,"not",[[24,["userInputEmailIsValid"]]],null],[24,["showValidationCrossMarkExplicit"]]],null],"invalid-email"],null]]]],[8],[0,"\\n                      "],[1,[28,"input",null,[["class","enter","value","placeholder"],["email-input-field",[28,"action",[[23,0,[]],"userEmailEnterPress"],null],[24,["userInputEmail"]],[28,"t",["calendar.email_placeholder"],null]]]],false],[0,"\\n                    "],[9],[0,"\\n                    "],[7,"div",false],[12,"class","email-action"],[3,"action",[[23,0,[]],[28,"if",[[24,["userInputEmailIsValid"]],"userEmailEnterPress",""],null]]],[8],[0,"\\n                      "],[7,"i",true],[11,"class",[22,"emailIconClass"]],[8],[0,"\\n                      "],[9],[0,"\\n                    "],[9],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["message","internalMeta","meetingStartTime"]]],null,{"statements":[[0,"                "],[7,"div",true],[10,"class","cal-picker-conf-view"],[8],[0,"\\n                  "],[7,"div",true],[10,"class","participants"],[8],[0,"\\n                    "],[7,"div",true],[10,"class","agent-segment"],[8],[0,"\\n                      "],[7,"div",true],[10,"class","cal-agent-pic"],[8],[0,"\\n"],[4,"if",[[24,["agentData","profilePicThumbUrl"]]],null,{"statements":[[0,"                          "],[7,"img",true],[11,"src",[24,["agentData","profilePicThumbUrl"]]],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                          "],[7,"img",true],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/agent_default-7bd621a5141a4884b54a59ed0d98ebfe.svg"],[8],[9],[0,"\\n"]],"parameters":[]}],[0,"                      "],[9],[0,"\\n"],[4,"if",[[24,["agentData","firstName"]]],null,{"statements":[[0,"                        "],[7,"div",true],[10,"class","cal-agent-name"],[8],[1,[24,["agentData","firstName"]],false],[9],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[9],[0,"\\n                    "],[7,"div",true],[10,"class","user-segment"],[8],[0,"\\n                      "],[7,"div",true],[10,"class","cal-user-pic"],[8],[0,"\\n"],[4,"if",[[24,["userPicUrl"]]],null,{"statements":[[0,"                          "],[7,"img",true],[11,"src",[22,"userPicUrl"]],[10,"class","event-participant-avatar"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                          "],[7,"img",true],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/cal_user-0c304ff1d4ae62ff06afb157fcba771b.svg"],[10,"class","event-participant-avatar"],[8],[9],[0,"\\n"]],"parameters":[]}],[0,"                      "],[9],[0,"\\n                      "],[7,"div",true],[10,"class","cal-user-name"],[8],[0,"\\n                        "],[1,[28,"t",["calendar.you"],null],false],[0,"\\n                      "],[9],[0,"\\n                    "],[9],[0,"\\n                  "],[9],[0,"\\n                  "],[7,"div",true],[10,"class","meeting-date"],[8],[0,"\\n                    "],[1,[22,"dateToBeBooked"],false],[0,"\\n                  "],[9],[0,"\\n                  "],[7,"div",false],[12,"class","meeting-time"],[3,"action",[[23,0,[]],"resetSlot"]],[8],[0,"\\n                    "],[1,[22,"timeSlotToBeBooked"],false],[0,"\\n                  "],[9],[0,"\\n                  "],[7,"div",true],[10,"class","time-zone"],[8],[0,"\\n                    "],[1,[22,"userTimeZoneToUse"],false],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n"],[0,"                "],[7,"div",false],[12,"class",[29,["cal-confirmation-div ",[28,"if",[[24,["message","isCalendarInviteBooked"]],"disabled"],null]]]],[3,"action",[[23,0,[]],"bookSlot"]],[8],[0,"\\n                  "],[1,[28,"t",["calendar.confirm"],null],false],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["noSlotsAvailable"]]],null,{"statements":[[0,"                  "],[7,"div",true],[10,"class","calendar-slots-not-av"],[8],[0,"\\n                    "],[1,[28,"t",["calendar.no_slots"],null],false],[0,"\\n                  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                  "],[7,"div",true],[10,"class","calendar-picker-body"],[8],[0,"\\n                    "],[5,"ui-calendar-day-triplets",[],[["@isLoadingSlots","@setSlot","@model"],[[22,"isLoadingSlots"],[28,"action",[[23,0,[]],"setSlot"],null],[22,"firstFreeTimeSlots"]]]],[0,"\\n                    "],[7,"div",true],[11,"class",[29,["calendar-picker-actions ",[28,"if",[[24,["isLoadingSlots"]],"is-loading"],null]]]],[8],[0,"\\n"],[4,"unless",[[24,["isLoadingSlots"]]],null,{"statements":[[0,"                        "],[7,"div",false],[12,"class","calendar-show-more"],[3,"action",[[23,0,[]],"maximizeCalendarPicker"]],[8],[0,"\\n                          "],[1,[28,"t",["calendar.show_more"],null],false],[0,"\\n                        "],[9],[0,"\\n                        "],[7,"div",false],[12,"class","calendar-tz-action"],[3,"action",[[23,0,[]],"switchToTimeZoneSelectMode"]],[8],[0,"\\n"],[4,"if",[[24,["userCustomTimeZone"]]],null,{"statements":[[0,"                            "],[1,[22,"userCustomTimeZone"],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                            "],[1,[22,"userDefaultTimeZone"],false],[0,"\\n"]],"parameters":[]}],[0,"                        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"                    "],[9],[0,"\\n                  "],[9],[0,"\\n"]],"parameters":[]}],[0,"\\n"],[0,"                "],[7,"div",false],[12,"class","calendar-cancel-action"],[3,"action",[[23,0,[]],"cancelInvite"]],[8],[0,"\\n                  "],[1,[28,"t",["calendar.cancel"],null],false],[0,"\\n                "],[9],[0,"\\n"],[0,"              "]],"parameters":[]}]],"parameters":[]}],[0,"            "],[9],[0,"\\n"]],"parameters":[]}],[0,"        "],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-calendar-picker/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-calendar-session-view/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({actions:{bookSlot:function(e){this.bookSlot(e)},openConfirmationView:function(e){this.openConfirmationView(e)}}})
e.default=t}),define("hotline-web/components/ui-calendar-session-view/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"qYUnWSJb",block:'{"symbols":["slotQuad","index","slot","slotsTriplet","index","slot"],"statements":[[4,"if",[[24,["viewTriplets"]]],null,{"statements":[[4,"each",[[24,["slots"]]],null,{"statements":[[0,"    "],[7,"div",true],[11,"class",[29,["cal-time-slot-group cal-time-slot-triplet ",[28,"maximize-calendar-slot",[[23,5,[]],[23,4,["length"]],true],null]]]],[8],[0,"\\n"],[4,"each",[[23,4,[]]],null,{"statements":[[0,"        "],[7,"span",false],[12,"class","cal-time-slot maximize-slot"],[3,"action",[[23,0,[]],"bookSlot",[23,6,[]]]],[8],[0,"\\n          "],[1,[23,6,["fromAsTime"]],false],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[6]},null],[0,"    "],[9],[0,"\\n"]],"parameters":[4,5]},null]],"parameters":[]},{"statements":[[4,"each",[[24,["slots"]]],null,{"statements":[[0,"    "],[7,"div",true],[11,"class",[29,["cal-time-slot-group cal-time-slot-quad ",[28,"maximize-calendar-slot",[[23,2,[]],[23,1,["length"]],false],null]]]],[8],[0,"\\n"],[4,"each",[[23,1,[]]],null,{"statements":[[0,"        "],[7,"span",false],[12,"class","cal-time-slot maximize-slot"],[3,"action",[[23,0,[]],"openConfirmationView",[23,3,[]]]],[8],[0,"\\n          "],[1,[23,3,["fromAsTime"]],false],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[3]},null],[0,"    "],[9],[0,"\\n"]],"parameters":[1,2]},null]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-calendar-session-view/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-carousel-card/component",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend({tagName:"",FRAGMENT:t.default.CONVERSATION.FRAGMENT_TYPE,init:function(){this._super.apply(this,arguments),this.set("imageError",null)},actions:{handleImgError:function(){this.set("imageError",!0)},handleOnSelect:function(){this.onCarouselSelect(this.carouselCard)},openExternalLink:function(e){var t=this.get("hotline.ui")
Ember.set(t,"modalOpen",!0),Ember.set(t,"modal",{thirdPartyURL:e&&e.string,title:""}),Ember.set(t,"openArticleFromMessage",!0)}}})
e.default=s}),define("hotline-web/components/ui-carousel-card/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"9smJ2TMC",block:'{"symbols":["cardSections","section","card"],"statements":[[4,"with",[[24,["carouselCard","sections"]]],null,{"statements":[[0,"  "],[7,"div",true],[11,"class",[29,["fc-carousel-card ",[28,"if",[[23,0,["isActive"]],"fc-carousel-card--active"],null]," ",[28,"if",[[24,["isSelected"]],"fc-carousel-card--selected"],null]]]],[8],[0,"\\n"],[4,"each",[[23,1,[]]],null,{"statements":[[4,"with",[[23,2,["fragments","firstObject"]]],null,{"statements":[[4,"if",[[28,"eq",[[23,3,["fragmentType"]],[24,["FRAGMENT","IMAGE"]]],null]],null,{"statements":[[0,"          "],[7,"div",true],[11,"class",[29,["fc-carousel-card__image-container ",[28,"if",[[28,"or",[[23,0,["imageError"]],[28,"not",[[23,3,["content"]]],null]],null]," fc-carousel-card__image-container--error"],null]]]],[8],[0,"\\n"],[4,"if",[[28,"or",[[23,0,["imageError"]],[28,"not",[[23,3,["content"]]],null]],null]],null,{"statements":[[0,"              "],[7,"div",true],[10,"class","fc-carousel-card__image-error"],[8],[0,"\\n                "],[7,"img",true],[10,"class","fc-carousel-card__error-img"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/fc-carousel-card-image-error-12c81ef92ea59a31ce0de01706827e25.svg"],[8],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"img",true],[10,"class","fc-carousel-card__image"],[11,"src",[28,"sanitize-html",[[23,3,["content"]],"strict"],null]],[11,"onerror",[28,"action",[[23,0,[]],"handleImgError"],null]],[8],[9],[0,"\\n"]],"parameters":[]}],[0,"          "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[23,3,["fragmentType"]],[24,["FRAGMENT","TEXT"]]],null]],null,{"statements":[[4,"if",[[28,"eq",[[23,2,["name"]],"title"],null]],null,{"statements":[[0,"            "],[7,"div",true],[10,"class","fc-carousel-card__title"],[11,"title",[28,"sanitize-html",[[23,3,["content"]],"strict"],null]],[8],[0,"\\n              "],[1,[28,"sanitize-html",[[23,3,["content"]],"strict"],null],false],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[23,2,["name"]],"description"],null]],null,{"statements":[[0,"            "],[7,"div",true],[10,"class","fc-carousel-card__text"],[11,"title",[28,"sanitize-html",[[23,3,["content"]],"strict"],null]],[8],[0,"\\n              "],[1,[28,"sanitize-html",[[23,3,["content"]],"strict"],null],false],[0,"\\n            "],[9],[0,"\\n          "]],"parameters":[]},null]],"parameters":[]}],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[23,3,["fragmentType"]],[24,["FRAGMENT","BUTTON"]]],null]],null,{"statements":[[4,"unless",[[24,["isSelected"]]],null,{"statements":[[4,"if",[[28,"or",[[28,"eq",[[23,3,["target"]],"_self"],null],[28,"not",[[23,3,["target"]]],null]],null]],null,{"statements":[[0,"              "],[7,"a",false],[12,"href",[28,"sanitize-html",[[23,3,["content"]],"strict"],null]],[12,"target",[28,"sanitize-html",[[23,3,["target"]],"strict"],null]],[12,"class","fc-carousel-card__button fc-carousel-card__link"],[12,"title",[28,"sanitize-html",[[23,3,["label"]],"strict"],null]],[3,"action",[[23,0,[]],"openExternalLink",[28,"sanitize-html",[[23,3,["content"]],"strict"],null]]],[8],[0,"\\n                "],[7,"span",true],[10,"class","fc-carousel-card__link-text"],[8],[1,[28,"sanitize-html",[[23,3,["label"]],"strict"],null],false],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"a",true],[11,"href",[28,"sanitize-html",[[23,3,["content"]],"strict"],null]],[11,"target",[28,"sanitize-html",[[23,3,["target"]],"strict"],null]],[10,"class","fc-carousel-card__button fc-carousel-card__link"],[11,"title",[28,"sanitize-html",[[23,3,["label"]],"strict"],null]],[10,"rel","noopener noreferrer"],[8],[0,"\\n                "],[7,"span",true],[10,"class","fc-carousel-card__link-text"],[8],[1,[28,"sanitize-html",[[23,3,["label"]],"strict"],null],false],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[23,3,["fragmentType"]],[24,["FRAGMENT","CALLBACK"]]],null]],null,{"statements":[[4,"unless",[[24,["isSelected"]]],null,{"statements":[[0,"            "],[7,"button",true],[10,"class","fc-carousel-card__button"],[11,"onclick",[28,"action",[[23,0,[]],"handleOnSelect"],null]],[8],[0,"\\n              "],[1,[28,"sanitize-html",[[23,3,["label"]],"strict"],null],false],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},null],[0,"        "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[3]},null]],"parameters":[2]},null],[4,"if",[[24,["isSelected"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","fc-carousel-card__selected-icon"],[8],[0,"\\n        "],[7,"img",true],[10,"class","fc-carousel-card__selected-img"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/fc-carousel-card-selected-1738635a847002a7dd04190b45f0b5b9.svg"],[8],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},null],[0,"  "],[9],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-carousel-card/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-carousel/component",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend({tagName:"div",classNames:["fc-carousel"],TEMPLATE_TYPE:t.default.TemplateType,init:function(){this._super.apply(this,arguments),this.set("focusedCardIndex",0),this.cards.length<=1?this.set("showRightArrow",!1):this.set("showRightArrow",!0),this.set("showLeftArrow",!1)},animate:function(e){var t=e.duration,s=void 0===t?350:t,n=e.timing,a=void 0===n?function(e){return e}:n,i=e.draw,r=performance.now()
requestAnimationFrame(function e(t){var n=(t-r)/s
n>1&&(n=1)
var o=a(n)
i(o),n<1&&requestAnimationFrame(e)})},slideCarousel:function(e){var t=this.element.querySelector(".fc-carousel-cards")
"right"===e?this.set("focusedCardIndex",this.focusedCardIndex+1):"left"===e&&this.set("focusedCardIndex",this.focusedCardIndex-1)
var s=t.children[this.focusedCardIndex]
if(s){var n=t.scrollLeft,a=Math.max(0,s.offsetLeft-(t.offsetWidth-s.offsetWidth)/2)-n
this.animate({draw:function(e){return t.scrollLeft=n+e*a}}),this.focusedCardIndex===this.cards.length-1?this.set("showRightArrow",!1):this.set("showRightArrow",!0),0===this.focusedCardIndex?this.set("showLeftArrow",!1):this.set("showLeftArrow",!0)}},actions:{slideLeft:function(){0!==this.focusedCardIndex&&this.slideCarousel("left")},slideRight:function(){this.focusedCardIndex!==this.cards.length-1&&this.slideCarousel("right")},onCarouselSelect:function(e){this.onSelect(e)}}})
e.default=s}),define("hotline-web/components/ui-carousel/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"XypTbFqz",block:'{"symbols":["card","index"],"statements":[[7,"h3",true],[10,"class","fc-carousel__title"],[11,"title",[28,"sanitize-html",[[24,["title","content"]],"strict"],null]],[8],[1,[28,"sanitize-html",[[24,["title","content"]],"strict"],null],false],[9],[0,"\\n"],[7,"div",true],[10,"class","fc-carousel__viewport"],[8],[0,"\\n  "],[7,"div",true],[10,"class","fc-carousel__navigations"],[8],[0,"\\n"],[4,"if",[[23,0,["showLeftArrow"]]],null,{"statements":[[0,"      "],[7,"button",true],[10,"class","fc-carousel__navigation fc-carousel__navigation--left"],[11,"onclick",[28,"action",[[23,0,[]],"slideLeft"],null]],[8],[0,"\\n        "],[7,"img",true],[10,"class","fc-carousel__navigation--left-icon"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/fc-carousel-nav-left-9e45b65ed2c648ef0a778912b505a6e0.svg"],[8],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,0,["showRightArrow"]]],null,{"statements":[[0,"      "],[7,"button",true],[10,"class","fc-carousel__navigation fc-carousel__navigation--right"],[11,"onclick",[28,"action",[[23,0,[]],"slideRight"],null]],[8],[0,"\\n        "],[7,"img",true],[10,"class","fc-carousel__navigation--right-icon"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/fc-carousel-nav-left-9e45b65ed2c648ef0a778912b505a6e0.svg"],[8],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},null],[0,"  "],[9],[0,"\\n  "],[7,"div",true],[10,"class","fc-carousel-cards"],[8],[0,"\\n"],[4,"each",[[24,["cards"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","fc-carousel-card__wrapper"],[8],[0,"\\n"],[4,"if",[[28,"eq",[[23,1,["templateType"]],[24,["TEMPLATE_TYPE","CAROUSEL_CARD","DEFAULT"]]],null]],null,{"statements":[[0,"          "],[5,"ui-carousel-card",[],[["@carouselCard","@isActive","@onCarouselSelect"],[[23,1,[]],[28,"if",[[28,"eq",[[23,2,[]],[23,0,["focusedCardIndex"]]],null],true],null],[28,"action",[[23,0,[]],"onCarouselSelect"],null]]]],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n"]],"parameters":[1,2]},null],[0,"  "],[9],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-carousel/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-emoji-text/component",["exports","hotline-web/mixins/sanitize","freshchat-component-library/utils/convert-emoji-to-html","hotline-web/config/environment"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Component.extend(t.default,{tagName:"",generatedHTML:Ember.computed("text",{get:function(){var e,t=this.sanitizeHTML(this.text,"strict")
return t&&(e=this.linkify(t),e=this.get("hotline.ui.isDesktop")?(0,s.default)(e,n.default.EmberENV.cdnUrl):e),Ember.String.htmlSafe(e)}}),exactRegexMatch:function(e,t){var s=e.match(t)
return null!=s&&e===s[0]},linkify:function(e){for(var t,s=e.split(" "),n=/(\r\n|\n|\r)/g,a=0,i=s.length;a<i;a++)if(s[a].match(n)){for(var r=s[a].split(n),o=0,l=r.length;o<l;o++)r[o]=this.generateLink(r[o])
s[a]=r.join("")}else s[a]=this.generateLink(s[a])
return t=(t=s.join(" ")).replace(n,"<br>"),t=this.addRelToHref(t)},generateLink:function(e){return e?this.exactRegexMatch(e,/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;\[\]]*[-A-Z0-9+&@#\/%=~_|\[\],])/gim)?'<a href="'.concat(e,'" target="_blank">').concat(e,"</a>"):this.exactRegexMatch(e,/(^|[^\/])(www\.[\S]+(\b|$))/gim)?'<a href="http://'.concat(e,'" target="_blank">').concat(e,"</a>"):this.exactRegexMatch(e,/(([-a-zA-Z0-9.'’&_%+]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,10})+)/gim)?'<a href="mailto:'.concat(e,'" target="_blank">').concat(e,"</a>"):e:e},addRelToHref:function(e){return e.replace(new RegExp("<a href","g"),'<a rel="noreferrer noopener" href')}})
a.reopenClass({positionalParams:["text"]})
var i=a
e.default=i}),define("hotline-web/components/ui-emoji-text/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"tMffljFZ",block:'{"symbols":[],"statements":[[1,[22,"generatedHTML"],true]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-emoji-text/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-footer-note/component",["exports","hotline-web/mixins/brand-check-mixin"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend(t.default,{classNames:"footer-note animated slideInUp faster",classNameBindings:["hidePoweredBy:hide-footer"]})
e.default=s}),define("hotline-web/components/ui-footer-note/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"wlR7prn9",block:'{"symbols":[],"statements":[[4,"unless",[[24,["hidePoweredBy"]]],null,{"statements":[[0,"  "],[1,[28,"t",["by_in_powered_by"],null],false],[0,"  "],[7,"img",true],[10,"class","icon"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/powered_by-0c8153a271e35c5276c4d386d7cdda30.png"],[8],[9],[0,"  \\n"],[0,"  "],[7,"a",true],[11,"href",[29,["https://www.freshworks.com/live-chat-software/freshchat/?utm_source=messenger&utm_medium=referral&utm_campaign=chat&app_id=",[24,["session","appId"]],"&app_name=",[24,["session","appName"]]]]],[10,"class","product"],[10,"target","_blank"],[10,"rel","noopener nofollow"],[8],[0,"\\n    Freshworks\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"img",true],[10,"src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="],[10,"width","0"],[10,"height","0"],[10,"alt","Freshchat"],[8],[9],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-footer-note/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-help-note/component",["exports","hotline-web/mixins/message"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend(t.default,{jwt:Ember.inject.service(),session:Ember.inject.service(),classNames:["help-text"],classNameBindings:["hidden:dn","hasFlashMessage:flash-message"],hidden:Ember.computed("hotline.ui.{onLine,helpNote}","isReconnecting","isConnecting","isDisconnected","hasFlashMessage","isUserNotAuthenticated",{get:function(){return this.get("hotline.ui.onLine")&&!(this.get("hotline.ui.helpNote")||this.isReconnecting||this.isConnecting||this.isDisconnected||this.hasFlashMessage||this.isUserNotAuthenticated)}}),isUserNotAuthenticated:Ember.computed("jwt.auth.{expired,user}",{get:function(){return!!Ember.get(this,"jwt.auth.expired")||(Ember.get(this,"jwt.auth.user"),!1)}}),jwtAuthErrorMsg:Ember.computed("session.config.headerProperty.jwtInvalidBanner.msg",{get:function(){return this.get("session.config.headerProperty.jwtInvalidBanner.msg")||this.intl.t("jwt.invalid")}}),hasFlashMessage:Ember.computed("flash.message",{get:function(){return!!this.get("flash.message")}}),isReconnecting:Ember.computed({get:function(){return!1},set:function(e,t){return t}}),willReconnectCB:Ember.computed({get:function(){return this.willReconnect.bind(this)}}),didReconnectCB:Ember.computed({get:function(){return this.didReconnect.bind(this)}}),isConnecting:Ember.computed({get:function(){return!1},set:function(e,t){return t}}),willConnectCB:Ember.computed({get:function(){return this.willConnect.bind(this)}}),didConnectCB:Ember.computed({get:function(){return this.didConnect.bind(this)}}),isDisconnected:Ember.computed({get:function(){return!1},set:function(e,t){return t}}),didDisconnectCB:Ember.computed({get:function(){return this.didDisconnect.bind(this)}}),didInsertElement:function(){this.rts.on("willConnect",this.willConnectCB),this.rts.on("didClose",this.unbindAllRTSEventsCB),this.rts.on("scriptLoadFailed",this.didDisconnectCB),this.bindAllRTSEvents(),this.rts.rtsScriptFailed&&this.didDisconnect()},willDestroyElement:function(){this.rts.off("willConnect",this.willConnectCB),this.rts.off("didClose",this.unbindAllRTSEventsCB),this.rts.off("scriptLoadFailed",this.didDisconnectCB),this.unbindAllRTSEvents()},willConnect:function(){var e=this
this.connectTimer||(this.connectTimer=setInterval(function(){e.set("isConnecting",!0),e.clearTimer()},1e4)),this.bindAllRTSEvents()},clearTimer:function(){this.connectTimer&&(clearInterval(this.connectTimer),this.connectTimer=null)},didConnect:function(){this.clearTimer(),this.resetAllRTSFlags(),this.postMessage({action:"rts_connected",status:200,success:!0,data:{connected:!0}})},willReconnect:function(){this.set("isReconnecting",!0)},didReconnect:function(){this.clearTimer(),this.resetAllRTSFlags()},didDisconnect:function(){this.set("isConnecting",!1),this.set("isReconnecting",!1),this.set("isDisconnected",!0)},unbindAllRTSEventsCB:Ember.computed({get:function(){return this.unbindAllRTSEvents.bind(this)}}),resetAllRTSFlags:function(){this.set("isConnecting",!1),this.set("isReconnecting",!1),this.set("isDisconnected",!1)},unbindAllRTSEvents:function(){this.rts.hasConnectionInitialized()&&(this.rts.off("didConnect",this.didConnectCB),this.rts.off("willReconnect",this.willReconnectCB),this.rts.off("didReconnect",this.didReconnectCB),this.rts.off("didDisconnect",this.didDisconnectCB)),this.resetAllRTSFlags(),this.clearTimer()},bindAllRTSEvents:function(){this.rts.hasConnectionInitialized()&&(this.rts.on("didConnect",this.didConnectCB),this.rts.on("willReconnect",this.willReconnectCB),this.rts.on("didReconnect",this.didReconnectCB),this.rts.on("didDisconnect",this.didDisconnectCB))},actions:{refreshRoute:function(){var e=this.router.currentRouteName
e&&"home.faqs"===e?this.gotoHome():this.reloadRoute()}}})
e.default=s}),define("hotline-web/components/ui-help-note/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"E2Jy5JfT",block:'{"symbols":[],"statements":[[4,"if",[[28,"not",[[24,["hotline","ui","onLine"]]],null]],null,{"statements":[[0,"  "],[7,"i",true],[10,"class","icon-ic_nointernet"],[8],[9],[1,[28,"t",["help_text.offline"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["isDisconnected"]]],null,{"statements":[[0,"  "],[7,"i",true],[10,"class","icon-ic_alert"],[8],[9],[1,[28,"t",["help_text.error"],null],false],[0,"\\n  "],[7,"br",true],[8],[9],[0,"\\n  "],[7,"a",false],[12,"href","#"],[12,"class","refresh-btn"],[3,"action",[[23,0,[]],"refreshRoute"]],[8],[0,"\\n    "],[7,"i",true],[10,"class","icon-ic_refresh"],[8],[9],[0," "],[1,[28,"t",["help_text.refresh"],null],false],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["hotline","ui","helpNote"]]],null,{"statements":[[0,"  "],[1,[24,["hotline","ui","helpNote"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["isReconnecting"]]],null,{"statements":[[0,"  "],[1,[28,"t",["help_text.reconnect"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["isConnecting"]]],null,{"statements":[[0,"  "],[1,[28,"t",["help_text.connect"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["hasFlashMessage"]]],null,{"statements":[[0,"  "],[1,[24,["flash","message"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["isUserNotAuthenticated"]]],null,{"statements":[[0,"  "],[1,[22,"jwtAuthErrorMsg"],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-help-note/template.hbs"}})
e.default=t})
define("hotline-web/components/ui-input/component",["exports","hotline-web/mixins/focus-field"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.TextField.extend(t.default,{init:function(){this._super(arguments)},classNames:["form-control"],attributeBindings:["autofocus"],autofocus:"autofocus"})
e.default=s}),define("hotline-web/components/ui-input/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"sKrqX4PK",block:'{"symbols":["&default"],"statements":[[14,1]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-input/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-meeting-message-fragment/component",["exports","hotline-web/utils/constants","hotline-web/mixins/calendar-mixin","hotline-web/mixins/conversation","hotline-web/utils/dayjs","hotline-web/utils/timezone"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Component.extend(s.default,n.default,{EVENT_STATUS:t.default.CALENDAR.EVENT_STATUS,eventDetails:Ember.computed("fragment.{startMillis,endMillis,userTimeZone}",{get:function(){var e=this.get("fragment.startMillis"),t=this.get("fragment.userTimeZone"),s=this.get("fragment.endMillis")
if(e&&s&&s>e){var n=s-e,r=n&&n/1e3,o=(0,a.default)(i.default.convert(e,t)).format("LT")+" - "+(0,a.default)(i.default.convert(s,t)).format("LT"),l=(0,a.default)(i.default.convert(e,t)).format("LL")
return{duration:this.intl.t("calendar.duration")+": "+this.getTimeDiffAsString(r),timeSlot:o,date:this.convertMillisToWeekday(e,this.get("fragment.userTimeZone"))+", "+l,userTimeZone:this.get("fragment.userTimeZone")}}return null}}),userPicUrl:Ember.computed("session.user.{profilePicThumbUrl,isNameGenerated}",{get:function(){return this.get("session.user.isNameGenerated")?null:this.get("session.user.profilePicThumbUrl")}}),agentData:Ember.computed("hidePic","messageMeta.calendarMessageMeta.calendarAgentAlias",{get:function(){var e=this.get("messageMeta.calendarMessageMeta.calendarAgentAlias"),t=this.shouldHideAgentPic
return e&&!t?this.agentService.getAgentInfo(e):null}}),eventCreationStatus:Ember.computed("fragment.{isPendingCreation,eventId}",{get:function(){return this.get("fragment.eventId")?t.default.CALENDAR.EVENT_STATUS.CREATED:this.get("fragment.isPendingCreation")?t.default.CALENDAR.EVENT_STATUS.PENDING:t.default.CALENDAR.EVENT_STATUS.FAILED}}),calendarEventLink:Ember.computed.alias("messageMeta.calendarMessageMeta.calendarEventLink")})
e.default=r}),define("hotline-web/components/ui-meeting-message-fragment/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"+mtHWSQW",block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","event-fragment"],[8],[0,"\\n  "],[7,"div",true],[10,"class","event-header"],[8],[0,"\\n    "],[7,"div",true],[10,"class","event-status"],[8],[0,"\\n      "],[7,"i",true],[10,"class","ic-calendar-scheduled icon-ic_scheduled cp-mini"],[8],[9],[0,"\\n      "],[7,"span",true],[10,"class","event-status-text"],[8],[0,"\\n"],[4,"if",[[28,"eq",[[24,["eventCreationStatus"]],[24,["EVENT_STATUS","FAILED"]]],null]],null,{"statements":[[0,"          "],[1,[28,"t",["calendar.status.failed"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["eventCreationStatus"]],[24,["EVENT_STATUS","CREATED"]]],null]],null,{"statements":[[0,"          "],[1,[28,"t",["calendar.status.scheduled"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[28,"t",["calendar.status.scheduling"],null],false],[0,"\\n        "]],"parameters":[]}]],"parameters":[]}],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n    "],[7,"div",true],[10,"class","event-duration"],[8],[0,"\\n      "],[1,[24,["eventDetails","duration"]],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n  "],[7,"div",true],[10,"class","event-body"],[8],[0,"\\n    "],[7,"div",true],[10,"class","event-participants"],[8],[0,"\\n      "],[7,"div",true],[10,"class","agent-segment"],[8],[0,"\\n        "],[7,"div",true],[10,"class","cal-agent-pic"],[8],[0,"\\n"],[4,"if",[[24,["agentData","profilePicThumbUrl"]]],null,{"statements":[[0,"            "],[7,"img",true],[11,"src",[24,["agentData","profilePicThumbUrl"]]],[10,"class","event-participant-avatar"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"img",true],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/agent_default-7bd621a5141a4884b54a59ed0d98ebfe.svg"],[10,"class","event-participant-avatar"],[8],[9],[0,"\\n"]],"parameters":[]}],[4,"if",[[24,["agentData","firstName"]]],null,{"statements":[[0,"            "],[7,"div",true],[10,"class","cal-agent-name"],[8],[1,[24,["agentData","firstName"]],false],[9],[0,"\\n"]],"parameters":[]},null],[0,"        "],[9],[0,"\\n      "],[9],[0,"\\n      "],[7,"div",true],[10,"class","user-segment"],[8],[0,"\\n        "],[7,"div",true],[10,"class","cal-user-pic"],[8],[0,"\\n"],[4,"if",[[24,["userPicUrl"]]],null,{"statements":[[0,"            "],[7,"img",true],[11,"src",[22,"userPicUrl"]],[10,"class","event-participant-avatar"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"img",true],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/cal_user-0c304ff1d4ae62ff06afb157fcba771b.svg"],[10,"class","event-participant-avatar"],[8],[9],[0,"\\n"]],"parameters":[]}],[0,"        "],[9],[0,"\\n        "],[7,"div",true],[10,"class","cal-user-name"],[8],[1,[28,"t",["calendar.you"],null],false],[9],[0,"\\n      "],[9],[0,"\\n\\n    "],[9],[0,"\\n    "],[7,"div",true],[10,"class","event-date"],[8],[0,"\\n      "],[1,[24,["eventDetails","date"]],false],[0,"\\n    "],[9],[0,"\\n    "],[7,"div",true],[11,"class",[29,["event-timings ",[28,"if",[[24,["calendarEventLink"]],"actionable"],null]]]],[8],[0,"\\n"],[4,"if",[[24,["calendarEventLink"]]],null,{"statements":[[0,"        "],[7,"a",true],[10,"target","_blank"],[10,"rel","noopener noreferrer"],[11,"href",[22,"calendarEventLink"]],[8],[1,[24,["eventDetails","timeSlot"]],false],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[1,[24,["eventDetails","timeSlot"]],false],[0,"\\n"]],"parameters":[]}],[0,"    "],[9],[0,"\\n    "],[7,"div",true],[10,"class","event-footer"],[8],[0,"\\n      "],[1,[24,["eventDetails","userTimeZone"]],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-meeting-message-fragment/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-message/component",["exports","hotline-web/utils/dayjs","jquery","hotline-web/mixins/message","hotline-web/utils/constants","hotline-web/config/environment","hotline-web/mixins/datastore","hotline-web/mixins/actions","hotline-web/mixins/calendar-mixin","hotline-web/mixins/live-translation","hotline-web/mixins/file-upload-helper-mixin"],function(e,t,s,n,a,i,r,o,l,c,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var d=Ember.Component.extend(n.default,r.default,o.default,u.default,l.default,c.default,{CONVERSATION:a.default.CONVERSATION,MESSAGE_STATUS:a.default.MESSAGE_STATUS,classNames:["fc-ui-message","message-container"],screenshare:Ember.inject.service(),classNameBindings:["userMessage:odd"],init:function(){this._super.apply(this,arguments),Ember.setProperties(this,{showTranslatedText:!1,isMuted:!1})},userMessage:Ember.computed("model","model.messageUserType",{get:function(){return 0===this.get("model.messageUserType")}}),isMessagePending:Ember.computed("model","model.status",{get:function(){var e=this.get("model.status")
return e===a.default.MESSAGE_STATUS.PENDING||e===a.default.MESSAGE_STATUS.READY_TO_SEND}}),isCalendarInviteMessage:Ember.computed.equal("model.messageType",a.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.SENT_BY_AGENT),isFlowCalendarInviteMessage:Ember.computed("isCalendarInviteMessage",{get:function(){return this.isCalendarInviteMessage&&this.get("model.flowStepId")}}),messageMetaData:Ember.computed("isCalendarInviteMessage",{get:function(){return this.isCalendarInviteMessage?this.get("model.internalMeta"):null}}),isLastMessageFailed:Ember.computed("model","model.status","wrapedMessage",{get:function(){var e=this.wrapedMessage,t=e&&e.objectAt(e.length-1)||void 0
return(t&&t.get("status"))===a.default.MESSAGE_STATUS.NOT_SENT}}),shouldDisplayCalendarPicker:Ember.computed("isCalendarInviteMessage",{get:function(){return!!this.isCalendarInviteMessage&&(!this.get("model.isCalendarInviteBooked")&&!this.iscalendarMessageResponded)}}),flowCalendarResponded:Ember.computed("shouldDisplayCalendarPicker","isFlowCalendarInviteMessage",{get:function(){return!this.shouldDisplayCalendarPicker&&this.isFlowCalendarInviteMessage}}),iscalendarMessageResponded:Ember.computed("shouldDisplayCalendarPicker","calendarMessages",{get:function(){var e=this.calendarMessages,t=this.get("model.internalMeta.calendarInviteId")
if(t){var s=e&&e.filterBy("internalMeta.calendarInviteId",t)
if(s&&s.length>1)return!0}return!1}}),isRetryingLastMessage:Ember.computed("model","model.status","wrapedMessage",{get:function(){var e=this.wrapedMessage,t=e&&e.objectAt(e.length-1)||void 0
return(t&&t.get("status"))===a.default.MESSAGE_STATUS.RETRYING}}),isMessageUnauthenticated:Ember.computed("wrapedMessage.[]",{get:function(){return this.get("model.status")===a.default.MESSAGE_STATUS.UNAUTHENTICATED}}),showOfflineForm:Ember.computed("model","model.{hasBeenRepliedToOffline,offlineMessage}",{get:function(){var e=this.model,t=e&&e.get("hasBeenRepliedToOffline")
return!(!e||!e.get("offlineMessage")||t)}}),deliveredMillis:Ember.computed("wrapedMessage.[]",{get:function(){var e=this.wrapedMessage,t=e&&e.objectAt(e.length-1)||void 0
return t&&t.get("createdMillis")}}),yesterdayMillis:Ember.computed({get:function(){return(0,t.default)().subtract(1,"day").startOf("day").valueOf()}}),hideName:Ember.computed.alias("session.config.agent.hideName"),hidePic:Ember.computed.or("session.config.agent.hideName","session.config.agent.hidePic"),agentName:Ember.computed("model","model.messageUserType","hideName",{get:function(){var e=this.get("model.messageUserType"),t=this.get("session.appDisplayName"),s=this.get("model.messageUserFirstName"),n=e&&e===a.default.CONVERSATION.USER_TYPE.CHANNEL,i=e&&e!==a.default.CONVERSATION.USER_TYPE.USER,r=this.hideName
return n?t:i?r?t:s:null}}),agentPic:Ember.computed("model","model.{messageUserId,messageUserAlias}","hideName","hidePic","session.config.headerProperty.appLogo",{get:function(){var e=this.get("model.messageUserAlias"),t=this.get("hotline.ui.config.appId"),s=this.get("hotline.ui.config.appSubDomain")||t,n=this.get("hotline.ui.config.appLogoPath"),a=this.get("session.config.headerProperty.appLogo"),r=i.default.webpush.protocol+i.default.webpush.domain[i.default.hotlineEnv.type].replace("{appName}",s)+n,o=this.hidePic
return e&&!o?this.agentService.getAgentInfo(e):a?Ember.Object.create({profilePicThumbUrl:a}):n?Ember.Object.create({profilePicThumbUrl:r}):Ember.Object.create({profilePicThumbUrl:""})}}),agentMessagePic:Ember.computed("model.messageUserProfilePic",{get:function(){var e=this.get("model.messageUserProfilePic")
return e||"https://assetscdn-wchat.freshchat.com/static/assets/images/ic_bot_dp-c445c55370a172afaf13bc02ce7c075d.svg"}}),screenshareControl:Ember.computed("model.messageFragments.[]",{get:function(){var e=this.model
return(e.get("messageFragments")&&e.get("messageFragments").length&&e.get("messageFragments")[0]&&e.get("messageFragments")[0].content)!==this.intl.t("screenShare.screen_share_compare").toString()}}),isArticleView:Ember.computed("wrapedMessage",{get:function(){var e=this.wrapedMessage,t=e&&e.length
if(t>0)for(var s=0;s<t;s++){var n=e[s]&&e[s].messageFragments,a=n&&n.length
if(a>0)for(var i=0;i<a;i++){var r=n[i]
if(r&&r.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.COLLECTION)return!0}return!1}return!1}}),actions:{resendMessage:function(e){this.resendMessage(e)},sendOfflineMessage:function(e){this.sendOfflineMessage(e)},enlargeImage:function(e){var t=this.get("hotline.ui")
Ember.set(t,"modalOpen",!0),Ember.set(t,"modal",{imageUrl:e}),parent.focus(),this.postMessage({action:"expand_all",picUrl:e})},allowScreenShare:function(){var e=this
if(this.get("session.config.isFCSDKWebView"))return this.flash.showMessage(this.intl.t("screenShare.not_supported_mobile")),!1
var t=a.default.EmberModelUrl.cobrowsingSettings,n=this.get("model.messageId"),i=this.get("model.cobrowsingId"),r=this.get("model.channelId"),o=this.get("session.user"),l=this.agentPic,c=l&&l.get("profilePicThumbUrl"),u=o.appId,d=o.name,m=o.id,h=this.get("model.conversationId"),f=this.get("model.messageUserId"),g=o.cobrowsingSessionData,p=this.get("model.messageUserName"),v=t.url.replace("{token}",this.get("session.token")),b={messageId:n,app_alias:u,name:d,role:"visitor",viewerId:m,conversationId:h,sdata:g,messageUserId:f,agentName:p,isMuted:!1,cobrowsingId:i,channelId:r,pic:c},E=function(t){b.cobrowsingSettings=t,e.postMessage({action:"startScreenShare",cbData:b})}
s.default.ajax({type:"GET",url:v,contentType:"application/json; charset=UTF-8"}).then(E,E)},denyScreensShare:function(){var e=this.get("model.conversationId"),t=this.get("session.token"),s=this.get("session.user").appId,n=this.get("model.messageId")
this.screenshare.deny({token:t,messageId:n,app_alias:s,conversationId:e})},openCalendarPickerMaximized:function(e){this.openCalendarPickerMaximized(e)},sendMessage:function(e,t){this.sendMessage(e,t)},toggleTranslatedTextView:function(){this.isLiveTranslationEnabled&&this.toggleProperty("showTranslatedText")}}})
e.default=d}),define("hotline-web/components/ui-message/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"6NMajh8w",block:'{"symbols":["individualMessage"],"statements":[[4,"if",[[28,"and",[[28,"eq",[[24,["model","messageType"]],5000],null],[24,["model","dayBreak"]]],null]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","h-divide"],[8],[0,"\\n    "],[7,"ul",true],[8],[0,"\\n      "],[7,"li",true],[8],[0,"\\n        "],[7,"div",true],[10,"class","d-line-left"],[8],[9],[0,"\\n      "],[9],[0,"\\n      "],[7,"li",true],[8],[0,"\\n        "],[7,"span",true],[10,"class","date"],[8],[0,"\\n"],[4,"if",[[28,"is-same",[[24,["model","dayBreak"]],"now"],[["precision"],["day"]]]],null,{"statements":[[0,"            "],[1,[28,"t",["conversation.chat_headers.today"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"is-same",[[24,["model","dayBreak"]],[24,["yesterdayMillis"]]],[["precision"],["day"]]]],null,{"statements":[[0,"            "],[1,[28,"t",["conversation.chat_headers.yesterday"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[28,"format-time",[[24,["model","dayBreak"]],"D MMM YYYY"],null],false],[0,"\\n          "]],"parameters":[]}]],"parameters":[]}],[0,"        "],[9],[0,"\\n      "],[9],[0,"\\n      "],[7,"li",true],[8],[0,"\\n        "],[7,"div",true],[10,"div",""],[10,"class","d-line-right"],[8],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"or",[[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","REQUESTED"]]],null],[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","ACCEPTED"]]],null],[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","DENIED"]]],null]],null]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","h-chat h-fc-co-browse-pad"],[8],[0,"\\n    "],[7,"div",true],[10,"class","agent-pic"],[8],[0,"\\n"],[4,"if",[[24,["agentPic","profilePicThumbUrl"]]],null,{"statements":[[0,"        "],[7,"img",true],[11,"src",[24,["agentPic","profilePicThumbUrl"]]],[10,"height","24px"],[10,"width","24px"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"and",[[24,["hideName"]],[24,["session","appDisplayName"]]],null]],null,{"statements":[[0,"        "],[7,"span",true],[10,"class","avatar-content-wrap"],[8],[0,"\\n          "],[7,"span",true],[11,"class",[29,["theme-bg ",[28,"choose-theme",[[24,["session","appDisplayName"]]],null]]]],[8],[0,"\\n            "],[7,"span",true],[10,"class","avatar-content"],[8],[0,"\\n              "],[1,[28,"avatar-content",[[24,["session","appDisplayName"]]],null],false],[0,"\\n            "],[9],[0,"\\n          "],[9],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["model","messageUserName"]]],null,{"statements":[[0,"        "],[7,"span",true],[10,"class","avatar-content-wrap"],[8],[0,"\\n          "],[7,"span",true],[11,"class",[29,["theme-bg ",[28,"choose-theme",[[24,["model","messageUserName"]]],null]]]],[8],[0,"\\n            "],[7,"span",true],[10,"class","avatar-content"],[8],[0,"\\n              "],[1,[28,"avatar-content",[[24,["model","messageUserName"]]],null],false],[0,"\\n            "],[9],[0,"\\n          "],[9],[0,"\\n        "],[9],[0,"\\n      "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}],[0,"    "],[9],[0,"\\n    "],[7,"div",true],[10,"class","h-conv multiple"],[8],[0,"\\n      "],[7,"h3",true],[10,"class","agent-name"],[8],[0,"\\n"],[4,"if",[[28,"eq",[[24,["model","messageUserType"]],[24,["CONVERSATION","USER_TYPE","CHANNEL"]]],null]],null,{"statements":[[0,"          "],[1,[24,["session","appDisplayName"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"not",[[28,"eq",[[24,["model","messageUserType"]],[24,["CONVERSATION","USER_TYPE","USER"]]],null]],null]],null,{"statements":[[4,"if",[[24,["hideName"]]],null,{"statements":[[0,"            "],[1,[24,["session","appDisplayName"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[24,["model","messageUserFirstName"]],false],[0,"\\n"]],"parameters":[]}],[0,"        "]],"parameters":[]},null]],"parameters":[]}],[0,"      "],[9],[0,"\\n      "],[7,"ul",true],[8],[0,"\\n        "],[7,"li",true],[8],[0,"\\n          "],[7,"div",true],[10,"class","h-fc-cobrowse"],[8],[0,"\\n"],[4,"if",[[24,["screenshareControl"]]],null,{"statements":[[0,"              "],[7,"div",true],[10,"class","sc-visitor-header"],[8],[0,"\\n                "],[1,[28,"t",["screenShare.header_vc"],[["agentName"],[[24,["model","messageUserFirstName"]]]]],false],[0,"\\n              "],[9],[0,"\\n              "],[7,"div",true],[10,"class","sc-visitor-footer"],[8],[0,"\\n                "],[1,[28,"t",["screenShare.footer_vc"],[["agentName"],[[24,["model","messageUserFirstName"]]]]],false],[0,"\\n                "],[7,"a",true],[10,"href","https://support.freshchat.com/support/solutions/articles/236349-important-note-about-co-browsing-for-users"],[10,"target","_blank"],[10,"rel","noopener noreferrer"],[8],[0,"\\n                  "],[1,[28,"t",["screenShare.read_more_link"],null],false],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"div",true],[10,"class","sc-visitor-header"],[8],[0,"\\n                "],[1,[28,"t",["screenShare.header"],[["agentName"],[[24,["model","messageUserFirstName"]]]]],false],[0,"\\n              "],[9],[0,"\\n              "],[7,"div",true],[10,"class","sc-visitor-footer"],[8],[0,"\\n                "],[1,[28,"t",["screenShare.footer"],[["agentName"],[[24,["model","messageUserFirstName"]]]]],false],[0,"\\n                "],[7,"a",true],[10,"href","https://support.freshchat.com/support/solutions/articles/236349-important-note-about-co-browsing-for-users"],[10,"target","_blank"],[10,"rel","noopener noreferrer"],[8],[0,"\\n                  "],[1,[28,"t",["screenShare.read_more_link"],null],false],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]}],[4,"if",[[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","DENIED"]]],null]],null,{"statements":[[0,"              "],[7,"div",true],[10,"class","sc-visitor-tailer-control"],[8],[0,"\\n                "],[7,"span",true],[10,"class","sc-btn-container last-btn"],[8],[0,"\\n                  "],[7,"button",true],[10,"class","sc-deny-btn"],[8],[0,"\\n                    "],[7,"i",true],[10,"class","icon icon-ic_cobrowse_close"],[8],[9],[0,"\\n                    "],[1,[28,"t",["screenShare.denied"],null],false],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","ACCEPTED"]]],null]],null,{"statements":[[0,"              "],[7,"div",true],[10,"class","sc-visitor-tailer-control"],[8],[0,"\\n                "],[7,"span",true],[10,"class","sc-btn-container last-btn"],[8],[0,"\\n                  "],[7,"button",true],[10,"class","sc-accept-btn"],[8],[0,"\\n                    "],[7,"i",true],[10,"class","icon icon-ic_cobrowse_tick"],[8],[9],[0,"\\n                    "],[1,[28,"t",["screenShare.approved"],null],false],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"div",true],[10,"class","sc-visitor-tailer-control"],[8],[0,"\\n                "],[7,"span",true],[10,"class","sc-btn-container"],[8],[0,"\\n                  "],[7,"button",false],[12,"class","sc-accept-btn"],[3,"action",[[23,0,[]],"allowScreenShare",true]],[8],[0,"\\n                    "],[1,[28,"t",["screenShare.allow"],null],false],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n                "],[7,"span",true],[10,"class","sc-btn-container last-btn"],[8],[0,"\\n                  "],[7,"button",false],[12,"class","sc-deny-btn"],[3,"action",[[23,0,[]],"denyScreensShare"]],[8],[0,"\\n                    "],[1,[28,"t",["screenShare.deny"],null],false],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n            "]],"parameters":[]}]],"parameters":[]}],[0,"          "],[9],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"or",[[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","CANCELLD"]]],null],[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","ENDED"]]],null]],null]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","h-chat"],[8],[0,"\\n"],[4,"if",[[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","SCREEN_SHARING","CANCELLD"]]],null]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","h-fc-cb-status-messge"],[8],[0," "],[1,[28,"t",["screenShare.req_cancelled"],null],false],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div",true],[10,"class","h-fc-cb-status-messge"],[8],[0," "],[1,[28,"t",["screenShare.session_end"],null],false],[9],[0,"\\n"]],"parameters":[]}],[0,"  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","CALENDAR","CANCELLED_BY_USER"]]],null]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","h-chat"],[8],[0,"\\n    "],[7,"div",true],[10,"class","h-calendar-status-message-container"],[8],[0,"\\n      "],[7,"div",true],[10,"class","h-calendar-cancelled-message-text"],[8],[0,"\\n        "],[1,[28,"t",["calendar.user_cancelled"],null],false],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["model","messageType"]],5001],null]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","h-divide"],[8],[0,"\\n    "],[7,"ul",true],[8],[0,"\\n      "],[7,"li",true],[8],[0,"\\n        "],[7,"div",true],[10,"class","line"],[8],[9],[0,"\\n      "],[9],[0,"\\n      "],[7,"li",true],[8],[0,"\\n        "],[7,"span",true],[10,"class","text"],[8],[0,"\\n          "],[1,[28,"t",["conversation.chat_headers.new"],null],false],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n      "],[7,"li",true],[8],[0,"\\n        "],[7,"div",true],[10,"div",""],[10,"class","line"],[8],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div",true],[11,"class",[29,["h-chat ",[28,"if",[[24,["isArticleView"]],"h-article-view"],null]," ",[28,"if",[[24,["flowCalendarResponded"]],"dn"],null]]]],[8],[0,"\\n"],[4,"if",[[28,"not",[[28,"eq",[[24,["model","messageUserType"]],[24,["CONVERSATION","USER_TYPE","USER"]]],null]],null]],null,{"statements":[[4,"if",[[28,"or",[[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","BOT"]]],null],[28,"eq",[[24,["model","messageType"]],[24,["CONVERSATION","MESSAGE_TYPE","FREDDY_BOT"]]],null]],null]],null,{"statements":[[4,"if",[[24,["agentMessagePic"]]],null,{"statements":[[0,"          "],[7,"div",true],[11,"class",[29,["agent-pic ",[28,"if",[[28,"not",[[24,["agentName"]]],null],"no-agent-name"],null]]]],[8],[0,"\\n            "],[7,"img",true],[11,"src",[22,"agentMessagePic"]],[10,"height","24px"],[10,"width","24px"],[8],[9],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"        "],[7,"div",true],[11,"class",[29,["agent-pic ",[28,"if",[[28,"not",[[24,["agentName"]]],null],"no-agent-name"],null]]]],[8],[0,"\\n"],[4,"if",[[24,["agentPic","profilePicThumbUrl"]]],null,{"statements":[[0,"            "],[7,"img",true],[11,"src",[24,["agentPic","profilePicThumbUrl"]]],[10,"height","24px"],[10,"width","24px"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["agentPic","firstName"]]],null,{"statements":[[0,"            "],[7,"span",true],[10,"class","avatar-content-wrap"],[8],[0,"\\n              "],[7,"span",true],[11,"class",[29,["theme-bg ",[28,"choose-theme",[[24,["agentPic","firstName"]]],null]]]],[8],[0,"\\n                "],[7,"span",true],[10,"class","avatar-content"],[8],[0,"\\n                  "],[1,[28,"avatar-content",[[24,["agentPic","firstName"]]],null],false],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"and",[[24,["hideName"]],[24,["session","appDisplayName"]]],null]],null,{"statements":[[0,"            "],[7,"span",true],[10,"class","avatar-content-wrap"],[8],[0,"\\n              "],[7,"span",true],[11,"class",[29,["theme-bg ",[28,"choose-theme",[[24,["session","appDisplayName"]]],null]]]],[8],[0,"\\n                "],[7,"span",true],[10,"class","avatar-content"],[8],[0,"\\n                  "],[1,[28,"avatar-content",[[24,["session","appDisplayName"]]],null],false],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["model","messageUserName"]]],null,{"statements":[[0,"            "],[7,"span",true],[10,"class","avatar-content-wrap"],[8],[0,"\\n              "],[7,"span",true],[11,"class",[29,["theme-bg ",[28,"choose-theme",[[24,["model","messageUserName"]]],null]]]],[8],[0,"\\n                "],[7,"span",true],[10,"class","avatar-content"],[8],[0,"\\n                  "],[1,[28,"avatar-content",[[24,["model","messageUserName"]]],null],false],[0,"\\n                "],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n          "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"        "],[9],[0,"\\n        "],[7,"span",true],[10,"class","time"],[8],[0,"\\n"],[4,"if",[[24,["deliveredMillis"]]],null,{"statements":[[4,"if",[[28,"is-same",[[24,["deliveredMillis"]],"now"],[["precision"],["hour"]]]],null,{"statements":[[0,"              "],[1,[28,"format-time",[[24,["deliveredMillis"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"is-same",[[24,["deliveredMillis"]],"now"],[["precision"],["week"]]]],null,{"statements":[[0,"              "],[1,[28,"format-time",[[24,["deliveredMillis"]],"ddd, LT"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"is-same",[[24,["deliveredMillis"]],"now"],[["precision"],["year"]]]],null,{"statements":[[0,"              "],[1,[28,"format-time",[[24,["deliveredMillis"]],"MMM D, LT"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[28,"format-time",[[24,["deliveredMillis"]],"ll, LT"],null],false],[0,"\\n            "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},null],[0,"        "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"    "],[7,"div",true],[10,"class","h-conv multiple"],[8],[0,"\\n"],[4,"if",[[24,["agentName"]]],null,{"statements":[[0,"        "],[7,"h3",true],[10,"class","agent-name"],[8],[0,"\\n          "],[1,[28,"sanitize-html",[[24,["agentName"]],"strict"],null],false],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[7,"ul",true],[8],[0,"\\n"],[4,"each",[[24,["wrapedMessage"]]],null,{"statements":[[4,"if",[[28,"and",[[28,"contain-valid-text-fragment",[[23,1,[]]],null],[28,"not",[[24,["isFlowCalendarInviteMessage"]]],null]],null]],null,{"statements":[[0,"            "],[7,"li",true],[8],[0,"\\n              "],[5,"ui-unity-message-fragment",[],[["@message","@isMessageUnauthenticated","@containsTranslations","@showInBothLocales","@isOpen"],[[23,1,[]],[22,"isMessageUnauthenticated"],[22,"containsTranslations"],[22,"showTranslatedText"],[22,"isOpen"]]]],[0,"\\n"],[4,"if",[[28,"eq",[[23,1,["status"]],[24,["MESSAGE_STATUS","NOT_SENT"]]],null]],null,{"statements":[[0,"                "],[7,"div",false],[12,"class","fc-resend"],[3,"action",[[23,0,[]],"resendMessage",[23,1,[]]]],[8],[0,"\\n                  "],[7,"i",true],[10,"class","fc-ic-resend"],[8],[9],[0,"\\n                  "],[1,[28,"t",["message.resend_action"],null],false],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[23,1,["status"]],[24,["MESSAGE_STATUS","RETRYING"]]],null]],null,{"statements":[[0,"                "],[7,"div",true],[10,"class","time"],[8],[0,"\\n                  "],[7,"div",true],[8],[0,"\\n                    "],[1,[28,"t",["message.pending"],null],false],[0,"\\n                  "],[9],[0,"\\n                "],[9],[0,"\\n              "]],"parameters":[]},null]],"parameters":[]}],[0,"            "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null],[0,"      "],[9],[0,"\\n"],[4,"if",[[24,["containsTranslations"]]],null,{"statements":[[0,"        "],[7,"span",false],[12,"class","translated-message-options-text"],[3,"action",[[23,0,[]],"toggleTranslatedTextView"]],[8],[0,"\\n"],[4,"if",[[24,["showTranslatedText"]]],null,{"statements":[[0,"            "],[1,[28,"t",["live_translate.hide_original"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[28,"t",["live_translate.show_original"],null],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[28,"eq",[[24,["model","messageUserType"]],[24,["CONVERSATION","USER_TYPE","USER"]]],null]],null,{"statements":[[0,"        "],[7,"div",true],[10,"class","time"],[8],[0,"\\n"],[4,"if",[[24,["isMessagePending"]]],null,{"statements":[[0,"            "],[7,"div",true],[8],[1,[28,"t",["message.pending"],null],false],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"and",[[28,"not",[[24,["isLastMessageFailed"]]],null],[28,"not",[[24,["isRetryingLastMessage"]]],null]],null]],null,{"statements":[[4,"if",[[28,"is-same",[[24,["deliveredMillis"]],"now"],[["precision"],["hour"]]]],null,{"statements":[[0,"              "],[1,[28,"format-time",[[24,["deliveredMillis"]]],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"is-same",[[24,["deliveredMillis"]],"now"],[["precision"],["week"]]]],null,{"statements":[[0,"              "],[1,[28,"format-time",[[24,["deliveredMillis"]],"ddd, LT"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"is-same",[[24,["deliveredMillis"]],"now"],[["precision"],["year"]]]],null,{"statements":[[0,"              "],[1,[28,"format-time",[[24,["deliveredMillis"]],"MMM D, LT"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[28,"format-time",[[24,["deliveredMillis"]],"ll, LT"],null],false],[0,"\\n            "]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}],[0,"          "]],"parameters":[]},null]],"parameters":[]}],[0,"        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"    "],[9],[0,"\\n  "],[9],[0,"\\n"],[4,"if",[[24,["showOfflineForm"]]],null,{"statements":[[0,"    "],[5,"app-offline-form",[],[["@extraParams","@sendOfflineMessage"],[[22,"extraParams"],[28,"action",[[23,0,[]],"sendOfflineMessage"],null]]]],[0,"\\n"]],"parameters":[]},null],[4,"if",[[24,["shouldDisplayCalendarPicker"]]],null,{"statements":[[0,"    "],[5,"ui-calendar-picker",[],[["@message","@sendMessageFromAppConversation","@openCalendarPickerMaximized","@messageMetaData"],[[22,"model"],[28,"action",[[23,0,[]],"sendCalendarMessage"],null],[28,"action",[[23,0,[]],"openCalendarPickerMaximized"],null],[22,"messageMetaData"]]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-message/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-modal/component",["exports","jquery","hotline-web/mixins/message","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/handle-event","hotline-web/mixins/localstorage","hotline-web/utils/regex-utils","hotline-web/mixins/datastore","hotline-web/utils/dom-utils"],function(e,t,s,n,a,i,r,o,l,c){function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var d=Ember.Component.extend(s.default,a.default,i.default,r.default,l.default,{migrateArticlesVotedToNewFormat:function(e,t){e&&"object"!==u(e[0])&&(e.forEach(function(e,t,s){if(!isNaN(e)){var n=e
s[t]={articleId:n,lastVotedAt:Date.now()}}}),this.setItemLS(t,JSON.stringify(e)))},modalOpen:Ember.computed.bool("hotline.ui.modalOpen"),isIframeModal:Ember.computed.bool("hotline.ui.modal.thirdPartyURL"),isExternalTemplate:Ember.computed.bool("hotline.ui.modal.template"),classNameBindings:["modalOpen:fc_web_modal","isIframeModal:inside-widget","isExternalTemplate:h-chat-custom","isExternalTemplate:external-article","isMobileView:mobile-view","hiddenFAQ:no-tabs"],classNames:["fc_web_modal_closed"],init:function(){this._super.apply(this,arguments),this.setProperties({upvoted:!1,downvoted:!1,isExpandIcon:!0,isFrameLoaded:!1,votedSuccessfully:!1})},isMobileView:Ember.computed({get:function(){return!this.get("hotline.ui.isDesktop")&&!this.get("hotline.ui.isTablet")}}),didInsertElement:function(){var e=this.get("hotline.ui.modal"),t=document.getElementsByClassName("article-header-section"),s=document.getElementsByClassName("modal-header")
Ember.isEmpty(t)||(t[0].style.height=t[0].offsetHeight+"px",document.getElementsByClassName("article-preview")[0].style.height="calc(100% - "+t[0].offsetHeight+"px)"),Ember.isEmpty(s)||(s[0].style.height=s[0].offsetHeight+"px",document.getElementsByClassName("modal-body")[0].style.height="calc(100% - "+s[0].offsetHeight+"px)"),window.addEventListener?window.addEventListener("keydown",this.keyDownCB,!0):window.attachEvent("keydown",this.keyDownCB,!0),c.default.bindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback),e&&this.updateEvent("fc_read_article",{articleId:e.articleId,categoryId:e.categoryId,title:e.title})},keyDownCB:Ember.computed({get:function(){return this.didKeyDown.bind(this)}}),iframeDomainURL:Ember.computed("hotline.ui.modal.thirdPartyURL",{get:function(){var e=this.get("hotline.ui.modal.thirdPartyURL")
return o.default.getDomainName(e)}}),iframeHTTPS:Ember.computed("hotline.ui.modal.thirdPartyURL",{get:function(){var e=this.get("hotline.ui.modal.thirdPartyURL")
return o.default.checkHTTPSurl(e)}}),iframeURL:Ember.computed("hotline.ui.modal.thirdPartyURL",{get:function(){var e=this.get("hotline.ui.modal.thirdPartyURL"),t=document.location.origin,s={fc_user_id:this.get("session.user.alias"),fc_origin_url:t}
return a.default.addQueryParams(e,s)}}),hiddenFAQ:Ember.computed("isFAQAvailable",{get:function(){return!this.isFAQAvailable}}),willDestroyElement:function(){window.removeEventListener?window.removeEventListener("keydown",this.keyDownCB,!0):window.detachEvent("keydown",this.keyDownCB),c.default.unbindEvent(this.element.querySelector(".scroll-section"),"scroll",this.scrollCallback)},onScroll:function(e){var t=e&&e.target
t&&t.scrollTop<=0?c.default.addCSSInline(this.element.querySelector(".shadow"),"box-shadow","none"):c.default.addCSSInline(this.element.querySelector(".shadow"),"box-shadow","0 2px 4px 0 rgba(156, 156, 156, .2)"),t.scrollHeight-t.scrollTop-t.clientHeight<=0?c.default.addCSSInline(this.element.querySelector(".bottom-gradient"),"visibility","hidden"):c.default.addCSSInline(this.element.querySelector(".bottom-gradient"),"visibility","visible")
var s=t.scrollTop/(t.scrollHeight-t.clientHeight)*100
c.default.addCSSInline(this.element.querySelector("#myBar"),"width","".concat(s,"%"))},scrollCallback:Ember.computed({get:function(){return this.onScroll.bind(this)}}),didKeyDown:function(){27===event.keyCode&&this.send("closeModal")},votedAlready:Ember.computed({get:function(){var e=this.getItemLS("articles"),t=e&&JSON.parse(e),s=this.get("hotline.ui"),n=s&&s.modal
if(this.migrateArticlesVotedToNewFormat(t,"articles"),t){var a=t.findBy("articleId",n.articleId)
if(a){var i=a.lastVotedAt,r=n.lastUpdatedAt
return!(!isNaN(i)&&!isNaN(r)&&r>i)}}return!1}}),actions:{closeModal:function(){var e=this.get("hotline.ui")
if(e.modal){if(Ember.set(e,"modalOpen",!1),Ember.set(e,"openArticleFromMessage",!1),Ember.set(e,"modal",void 0),this.get("session.config.faqPopupView")){var t=this.element.querySelector(".search-input-text")
t&&t.focus()}document.querySelector("html").classList.remove("expanded-modal"),this.postMessage({action:"collapse_all"})}},gotoMessages:function(){this.home(),this.send("closeModal")},upvoteDownvoteArticle:function(e){var s=this,a=this.get("hotline.ui"),i=a&&a.modal,r={},o=this.get("session.token"),l=this.get("session.siteId"),c=a&&a.lastLocaleId,u=n.default.EmberModelUrl.upvoteDownvote.url.replace("{token}",o).replace("{categoryId}",i.categoryId).replace("{articleId}",i.articleId).replace("{localeId}",c)
e?r.upvote=1:r.downvote=1,l&&(u+="&siteId=".concat(l))
var d=this.getItemLS("articles"),m=d&&JSON.parse(d)
d||(m=[]),t.default.ajax({type:"PUT",url:u,data:JSON.stringify(r),contentType:"application/json; charset=UTF-8"}).then(function(t){if(!t||!t.errorCode){var n=Date.now(),a=i.articleId,r=m.findBy("articleId",a)
r?r.lastVotedAt=n:m.push({articleId:a,lastVotedAt:n}),s.setItemLS("articles",JSON.stringify(m)),e?s.set("upvoted",!0):s.set("downvoted",!0),s.set("votedSuccessfully",!0)}},function(){})},expandArticle:function(){this.toggleProperty("isExpandIcon"),document.querySelector("html").classList.toggle("expanded-article-view"),this.postMessage({action:"expand_article_view"})},frameLoaded:function(){this.set("isFrameLoaded",!0)}}})
e.default=d}),define("hotline-web/components/ui-modal/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"DcDsJCGl",block:'{"symbols":[],"statements":[[4,"if",[[24,["hotline","ui","modal","imageUrl"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","image-wrapper"],[8],[0,"\\n    "],[7,"div",false],[12,"class","close icon icon-ic_close"],[3,"action",[[23,0,[]],"closeModal"]],[8],[9],[0,"\\n    "],[7,"div",true],[10,"class","image-cell"],[8],[0,"\\n      "],[7,"img",true],[11,"src",[24,["hotline","ui","modal","imageUrl"]]],[8],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["hotline","ui","modal","thirdPartyURL"]]],null,{"statements":[[0,"  "],[7,"div",true],[11,"class",[29,["animated fadeIn iframe-modal ",[28,"if",[[24,["isMobileView"]],"mobile-view"],null]]]],[8],[0,"\\n    "],[7,"div",true],[10,"class","h-modal-notes"],[8],[0,"\\n      "],[7,"div",true],[10,"class","modal-header"],[8],[0,"\\n        "],[7,"div",false],[12,"class","ic-back"],[3,"action",[[23,0,[]],"closeModal"]],[8],[0,"\\n          "],[7,"i",true],[10,"class","icon icon-ic_back"],[8],[9],[0,"\\n        "],[9],[0,"\\n        "],[7,"span",true],[10,"class","frame-title"],[8],[0,"\\n"],[4,"if",[[24,["iframeHTTPS"]]],null,{"statements":[[0,"            "],[7,"img",true],[10,"class","proto-logo"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/lock-bd52a80b078ad5b587519266491c726d.png"],[8],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[7,"img",true],[10,"class","proto-logo"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/info-circle-12d00979977edcba64dc3422b285d844.png"],[8],[9],[0,"\\n"]],"parameters":[]}],[0,"          "],[1,[22,"iframeDomainURL"],false],[0,"\\n        "],[9],[0,"\\n      "],[9],[0,"\\n      "],[7,"div",true],[10,"class","modal-body"],[8],[0,"\\n"],[4,"unless",[[24,["isFrameLoaded"]]],null,{"statements":[[0,"          "],[5,"app-loader",[],[[],[]]],[0,"\\n"]],"parameters":[]},null],[0,"        "],[7,"iframe",true],[10,"class","external-iframe"],[11,"onload",[28,"action",[[23,0,[]],"frameLoaded"],null]],[11,"src",[22,"iframeURL"]],[8],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["hotline","ui","modal","template"]]],null,{"statements":[[0,"  "],[5,"ui-article-modal",[],[["@closeModal"],[[28,"action",[[23,0,[]],"closeModal"],null]]]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["hotline","ui","modal","articleId"]]],null,{"statements":[[4,"if",[[28,"not",[[24,["hotline","ui","modalOpen"]]],null]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","article-header-section"],[8],[0,"\\n      "],[7,"div",true],[10,"class","header"],[8],[0,"\\n        "],[7,"div",true],[10,"class","article-name"],[8],[0,"\\n          "],[1,[28,"sanitize-html",[[24,["hotline","ui","modal","title"]],"strict"],null],false],[0,"\\n        "],[9],[0,"\\n"],[4,"if",[[28,"or",[[24,["hotline","ui","isDesktop"]],[24,["hotline","ui","isTablet"]]],null]],null,{"statements":[[0,"          "],[7,"div",false],[12,"class","h-expand-modal-icon"],[3,"action",[[23,0,[]],"expandArticle"]],[8],[0,"\\n            "],[7,"i",true],[11,"class",[29,["icon black ",[28,"if",[[24,["isExpandIcon"]],"icon-ic_expand_faq","icon-ic_shrink_faq"],null]]]],[8],[9],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n      "],[7,"div",true],[10,"class","progress-container shadow"],[8],[0,"\\n        "],[7,"div",true],[10,"class","progress-bar"],[10,"id","myBar"],[8],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},null],[0,"  "],[7,"div",true],[11,"class",[29,["animated fadeIn article-preview ",[28,"if",[[24,["hotline","ui","modalOpen"]],"article-modal"],null]]]],[8],[0,"\\n    "],[7,"div",true],[11,"class",[29,["h-modal-notes ",[28,"if",[[28,"not",[[24,["hotline","ui","modalOpen"]]],null],"scroll-section"],null]," ",[28,"if",[[28,"not",[[24,["votedAlready"]]],null],"with-footer"],null]," ",[28,"if",[[24,["hotline","ui","modalOpen"]],"expandedModal"],null]]]],[8],[0,"\\n"],[4,"if",[[24,["hotline","ui","modalOpen"]]],null,{"statements":[[0,"        "],[7,"div",true],[10,"class","modal-header shadow"],[8],[0,"\\n          "],[7,"span",true],[10,"class","modal-title"],[8],[0,"\\n            "],[1,[28,"sanitize-html",[[24,["hotline","ui","modal","title"]],"strict"],null],false],[0,"\\n          "],[9],[0,"\\n          "],[7,"span",false],[12,"class","h-close"],[3,"action",[[23,0,[]],"closeModal"]],[8],[0,"\\n            "],[7,"i",true],[10,"class","icon icon-ic_shrink_faq black"],[8],[9],[0,"\\n          "],[9],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[7,"div",true],[11,"class",[29,["modal-body ",[28,"if",[[24,["hotline","ui","modalOpen"]],"scroll-section"],null]]]],[8],[0,"\\n"],[0,"        "],[1,[24,["hotline","ui","modal","content"]],true],[0,"\\n"],[4,"if",[[24,["hotline","ui","modalOpen"]]],null,{"statements":[[0,"          "],[7,"div",true],[11,"class",[29,["bottom-gradient ",[28,"if",[[24,["votedAlready"]],"fix_btm"],null]]]],[8],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n"],[4,"if",[[28,"not",[[24,["hotline","ui","modalOpen"]]],null]],null,{"statements":[[0,"        "],[7,"div",true],[11,"class",[29,["bottom-gradient ",[28,"if",[[24,["votedAlready"]],"fix_btm"],null]]]],[8],[9],[0,"\\n"]],"parameters":[]},null],[0,"    "],[9],[0,"\\n"],[4,"unless",[[24,["votedAlready"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","modal-footer"],[8],[0,"\\n        "],[7,"div",true],[11,"class",[29,["article_vote_outer ",[28,"if",[[24,["downvoted"]],"downVoted"],null]]]],[8],[0,"\\n"],[4,"if",[[28,"not",[[24,["votedSuccessfully"]]],null]],null,{"statements":[[0,"            "],[7,"div",true],[10,"class","article_vote_content"],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","faq_useful"]]],null,{"statements":[[0,"                "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","faq_useful"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[28,"t",["faqs.useful_question"],null],false],[0,"\\n"]],"parameters":[]}],[0,"            "],[9],[0,"\\n            "],[7,"div",true],[10,"class","like_dislike_vote"],[8],[0,"\\n              "],[7,"span",false],[12,"class","article_vote article_like"],[3,"action",[[23,0,[]],"upvoteDownvoteArticle",true]],[8],[0,"\\n                "],[7,"i",true],[10,"class","icon-ic_thumps_up"],[8],[9],[0,"\\n              "],[9],[0,"\\n              "],[7,"span",false],[12,"class","article_vote article_dislike"],[3,"action",[[23,0,[]],"upvoteDownvoteArticle",false]],[8],[0,"\\n                "],[7,"i",true],[10,"class","icon-ic_thumps_down"],[8],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[24,["votedSuccessfully"]]],null,{"statements":[[0,"            "],[7,"span",true],[10,"class","thank_you animated fadeIn"],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","faq_thankyou"]]],null,{"statements":[[0,"                "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","faq_thankyou"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                "],[1,[28,"t",["faqs.thank_you_for_feedback"],null],false],[0,"\\n"]],"parameters":[]}],[0,"            "],[9],[0,"\\n"]],"parameters":[]},null],[4,"if",[[28,"and",[[28,"not",[[24,["hotline","ui","openArticleFromMessage"]]],null],[24,["downvoted"]]],null]],null,{"statements":[[0,"            "],[7,"div",false],[12,"class","h-message-us animated fadeIn"],[3,"action",[[23,0,[]],"gotoMessages"]],[8],[0,"\\n              "],[7,"div",true],[10,"class","h-message-us-btn"],[8],[0,"\\n                "],[7,"i",true],[10,"class","chat_double icon-ic_chat_icon"],[10,"aria-hidden","true"],[8],[9],[0,"\\n                "],[7,"span",true],[8],[0,"\\n"],[4,"if",[[24,["session","config","content","headers","faq_message_us"]]],null,{"statements":[[0,"                    "],[1,[28,"sanitize-html",[[24,["session","config","content","headers","faq_message_us"]],"strict"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[1,[28,"t",["faqs.message_us_link"],null],false],[0,"\\n"]],"parameters":[]}],[0,"                "],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},null],[0,"        "],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},null],[0,"  "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-modal/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-unity-medium-editor/component",["exports","jquery","hotline-web/mixins/direction","hotline-web/config/environment","hotline-web/utils/constants","hotline-web/mixins/file-upload-helper-mixin"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Component.extend(s.default,i.default,{Config:n.default,tagName:"div",attributeBindings:["contenteditable"],editable:!0,isUserTyping:!1,plaintext:!1,classNames:["editable","ce-textarea","emoji"],classNameBindings:["isValidationError:validation-error","hideFileUpload:fc-file-upload-hidden","isIOS:ios-device","isSafari:safari-browser","isDesktop:desktop-browser"],mediumEditor:void 0,isIOS:Ember.computed.readOnly("hotline.ui.isIOS"),isSafari:Ember.computed.equal("hotline.ui.browser.name","Safari"),isDesktop:Ember.computed.readOnly("hotline.ui.isDesktop"),triggerChange:function(){var e=(0,t.default)(this.element)
Ember.run.next(this,function(){e.trigger("change")})},defaultContent:function(){var e=document.createElement("p")
e.appendChild(document.createElement("br"))
if(this.mediumEditor.elements[0]){var t=this.mediumEditor.elements[0]
t.appendChild(e),this.mediumEditor.events.updateInput(t,{target:t,currentTarget:t})}},insertContentToEditor:function(e){if(this.mediumEditor.elements[0]){var t=this.mediumEditor.elements[0]
e&&(t.lastChild&&/^(\s+|<br\/?>)?$/i.test(t.lastChild.innerHTML)&&t.removeChild(t.lastChild),t.appendChild(e)),this.mediumEditor.events.updateInput(t,{target:t,currentTarget:t})}},didInsertElement:function(){return Ember.run.scheduleOnce("afterRender",this,this.renderFunction),this.setContent()},renderFunction:function(){var e=this,s=this.options
s.paste.handlePasteBinPaste=this.handlePaste(),s.paste.handlePaste=this.handlePaste(),this.get("session.config.content.placeholders.reply_field")?s.placeholder.text=this.get("session.config.content.placeholders.reply_field"):s.placeholder.text=this.intl.t("conversation.ce.placeholders.default")
var n=new MediumEditor(this.$(),s)
this.editable?this.set("contenteditable",!0):this.set("contenteditable",!1),this.set("mediumEditor",n)
var i=(0,t.default)(this.element)
if(i.bind("blur keyup paste copy cut input",this.triggerChangeCB),"Chrome"===this.get("hotline.ui.browser.name")){var r=this
i.bind("paste",function(t){var s=t.originalEvent.clipboardData
if(t.originalEvent.preventDefault(),s&&s.types){if(-1!==s.types.indexOf("Files")&&(-1!==s.types.indexOf("text/html")||e.hideFileUpload))return
for(var n=0,i=s.types.length;i>n;n++)if(s.types[n].match(/image.*/)||s.items&&s.items[n].type.match(/image.*/)){var o,l=void 0
o=s.items[n].getAsFile(),(l=new FileReader).onload=function(e,t,s){return function(n){e.set("content",{data:n.target.result,fileData:t,fileType:s,attr:{height:200,width:200}})}}(r,o,a.default.FILETYPE.IMAGE),l.readAsDataURL(o)}}})}this.defaultContent()
var o=this.mediumEditor.elements[0]
o.innerHTML="",this.mediumEditor.events.updateInput(o,{target:o,currentTarget:o})},triggerChangeCB:Ember.computed({get:function(){return this.triggerChange.bind(this)}}),hideFileUpload:Ember.computed.alias("session.config.hideFileUpload"),placeCaretAtEnd:function(){var e=(0,t.default)(this.element)?(0,t.default)(this.element)[0]:null
if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var s=document.createRange()
s.selectNodeContents(e),s.collapse(!1),MediumEditor.selection.moveCursor(document,this.$(this.element).find("p:last-child")[0])
var n=window.getSelection()
n.removeAllRanges(),n.addRange(s)}else if(void 0!==document.body.createTextRange){var a=document.body.createTextRange()
a.moveToElementText(e),a.collapse(!1),a.select()}},willDestroyElement:function(){var e=(0,t.default)(this.element)
e.unbind("blur keyup paste copy cut input",this.triggerChangeCB),e.unbind("paste")
var s=this.mediumEditor,n=s&&s.events
n&&n.lastMousedownTarget&&delete n.lastMousedownTarget,s&&s.origElements&&delete s.origElements,s.destroy()},change:function(){return this.plaintext?this.set("value",this.$().text()):this.set("value",this.$().html())},focusOut:function(){this.onBlur&&this.onBlur()},focusIn:function(){this.onFocus&&this.onFocus()},keyDown:function(e){var t=MediumEditor.selection.getSelectionStart(document)
switch(("DIV"===t.tagName&&t.classList.contains("editable")||"SPAN"===t.tagName)&&document.execCommand("formatBlock",!1,"p"),e.which){case 13:e.shiftKey||(e.preventDefault(),this.onKeyDown&&this.onKeyDown(this.value,e))
break
default:this.onKeyDown&&this.onKeyDown(this.value,e)}},keyUp:function(e){var s=(0,t.default)(".editable")?(0,t.default)(".editable")[0]:null,n=s?this.$(s).text():null,a=s?(0,t.default)(s).find("img").length:null
!Ember.isBlank(n)||a?this.hasValueInEditor&&this.hasValueInEditor(!0):this.hasValueInEditor&&this.hasValueInEditor(!1),this.onKeyUp&&this.onKeyUp(e),this.checkIfTextLengthExceedsLimit()},valueDidChange:Ember.observer("value",function(){this.set("height",this.$().height()),this.$()&&this.value!==this.$().html()&&this.setContent()}),handlePaste:function(){var e=this
return function(s){var n,i,r="",o="text/html",l="text/plain"
this.window&&this.window.clipboardData&&void 0===s.clipboardData&&(s.clipboardData=this.window.clipboardData,o="Text",l="Text"),MediumEditor.extensions.paste.prototype.removePasteBin.call(this)
var c=navigator.userAgent
if(-1===s.clipboardData.types.indexOf("Files")||-1!==c.indexOf("Chrome")&&!e.get("hideFileUpload")){if(s.clipboardData&&s.clipboardData.getData&&s.clipboardData.types&&(-1===s.clipboardData.types.indexOf("Files")||-1!==s.clipboardData.types.indexOf("Files")&&-1!==s.clipboardData.types.indexOf("text/html"))&&!s.defaultPrevented){if(s.preventDefault(),n=s.clipboardData.getData(o),i=s.clipboardData.getData(l),this.cleanPastedHTML&&n)return this.cleanPaste(n)
r=MediumEditor.util.htmlEntities(i),Ember.isBlank(r)?e.hasValueInEditor&&e.hasValueInEditor(!1):e.hasValueInEditor&&e.hasValueInEditor(!0),MediumEditor.util.insertHTMLCommand(this.document,"<P>"+r+"</P>")}else(0,t.default)(this.base.elements[0]).trigger(t.default.Event(s))
e.getTextFromEditorForClosedOrOpenWidgetState().length>=a.default.MessageSpecs.maxLength&&!e.get("isTextLimitExceeded")&&e.exceedAction(!0)}else s.preventDefault()}},setContent:function(){this.$()&&this.mediumEditor&&this.mediumEditor.setContent(this.value)},checkIfTextLengthExceedsLimit:function(){var e=this.getTextFromEditorForClosedOrOpenWidgetState()
Ember.isBlank(e)||e&&e.length<a.default.MessageSpecs.maxLength?this.exceedAction(!1):this.exceedAction(!0)}})
e.default=r}),define("hotline-web/components/ui-unity-message-bubble/component",["exports","jquery","hotline-web/mixins/message","hotline-web/utils/constants","hotline-web/mixins/datastore","hotline-web/utils/utils"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Component.extend(s.default,a.default,{classNames:["fc-ui-unity-message-bubble"],FRAGMENT:n.default.CONVERSATION.FRAGMENT_TYPE,TEMPLATE_TYPE:n.default.TemplateType,MESSAGE_TYPE:n.default.CONVERSATION.MESSAGE_TYPE,fileName:Ember.computed("fragment.fileName",{get:function(){return this.get("fragment.fileName")||"[File Attachment]"}}),fileSize:Ember.computed("fragment.fileSize",{get:function(){return i.default.formatBytes(this.get("fragment.fileSize"))}}),fileExtension:Ember.computed("fragment.fileExtension",{get:function(){return(this.get("fragment.fileExtension")||"").toUpperCase()}}),imageUnicode:Ember.computed({get:function(){return Ember.String.htmlSafe("&#128247")}}),faqUnicode:Ember.computed({get:function(){return Ember.String.htmlSafe("&#128196")}}),fileUnicode:Ember.computed({get:function(){return Ember.String.htmlSafe("&#128206")}}),fileSecurityStatus:Ember.computed.alias("fileSecurityData.fileSecurityStatus"),fileSecurityWarning:Ember.computed.equal("fileSecurityStatus",n.default.FileSecurityStatus.AVPending),fileSecurityError:Ember.computed.equal("fileSecurityStatus",n.default.FileSecurityStatus.MalwareFile),fileSecurityInfoTitle:Ember.computed("fileSecurityStatus",{get:function(){var e=this.fileSecurityStatus
return this.intl.t("conversation.fragment.securityStatus."+e+".title")}}),fileSecurityInfoDesc:Ember.computed("fileSecurityStatus",{get:function(){var e=this.fileSecurityStatus
return this.intl.t("conversation.fragment.securityStatus."+e+".desc")}}),customFlowCalendarInvite:Ember.computed("message",{get:function(){return this.get("message.flowStepId")&&this.get("message.messageType")===n.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.SENT_BY_AGENT}}),articleCollection:Ember.computed("fragment.fragments",{get:function(){var e=this.get("fragment.fragments")
return e&&e.length>3?e.slice(0,3):e}}),showMoreArticles:Ember.computed("fragment.fragments",{get:function(){var e=this.get("fragment.fragments")
return e&&e.length>3}}),isFlowCalendarInviteMessage:Ember.computed("isCalendarInviteMessage",{get:function(){return this.isCalendarInviteMessage&&this.get("model.flowStepId")}}),isFAQFragment:Ember.computed("fragment",{get:function(){var e=this.fragment
return!!e&&(e.content&&e.content.indexOf("freshchat://")>-1)}}),downloadFileHelper:function(e){if(this.get("hotline.ui.isIOS"))window.open(e,"_blank")
else{var t=document.createElement("a")
t.href=e,t.id=n.default.DownloadFileIframeId,document.body.appendChild(t),t.click(),document.body.removeChild(t)}this.postMessage({action:"download_file",status:200,success:!0,data:{url:e}})},click:function(){var e=event&&event.target
e&&e.tagName&&"a"===e.tagName.toLowerCase()&&e.href!==e.baseURI+"#"&&(this.get("session.config.isFCSDKWebView")&&event.preventDefault(),this.postMessage({action:"anchor_link_clicked",status:200,success:!0,data:{url:e.href}}))},actions:{downloadFile:function(){var e=this,s=this.fileSecurityData,a=(new Date).getTime()
if(s&&a-s.fetchTime<n.default.FileUrlValidityTimeout)s.fileSecurityStatus!==n.default.FileSecurityStatus.MalwareFile&&this.downloadFileHelper(s.url)
else{var i=this.get("session.token"),r=this.get("session.user.alias"),o=n.default.EmberModelUrl.fileDownload.url.replace("{token}",i).replace("{userAlias}",r).replace("{fileHash}",this.get("fragment.fileHash"))
t.default.ajax({type:"GET",url:o}).then(function(t){t&&(t.fetchTime=(new Date).getTime(),e.set("fileSecurityData",t),t.fileSecurityStatus!==n.default.FileSecurityStatus.SafeFile&&t.fileSecurityStatus!==n.default.FileSecurityStatus.LargeFile||e.downloadFileHelper(t.url))},function(t){e.logger.log(t)})}},enlargeImage:function(e){var t=this.get("hotline.ui")
Ember.set(t,"modalOpen",!0),Ember.set(t,"modal",{imageUrl:e}),parent.focus(),this.postMessage({action:"expand_all",picUrl:e})},openArticle:function(e,t){var s,n=this.get("faqs.content").serialize()
if(n&&(s=i.default.getArticleToShow(n.dsCategories,e))){var a=this.get("message.channelId")
this.router.send("gotoFAQ",s,a)}},performClickAction:function(e,t){if(e){if(e.content&&t&&(this.postMessage({action:"faq_clicked",status:200,success:!0,data:{url:e.content}}),this.get("session.config.isFCSDKWebView")))return!1
if(e.fragmentType===this.FRAGMENT.TEMPLATE){var s=this.get("hotline.ui")
Ember.set(s,"modalOpen",!0),Ember.set(s,"modal",{template:{templateID:e.referenceId,placeholderId:e.placeholderReferenceId,messageAlias:this.get("message.alias"),articleTitle:e.label}}),Ember.set(s,"openArticleFromMessage",!0)}else e.content&&e.content.indexOf("freshchat://")>-1?this.send("openArticle",e.content,t):e.target&&"_blank"===e.target?window.open(e.content,"_blank"):e.target&&"_self"===e.target&&this.send("openExternalLink",e.content)}},openExternalLink:function(e){var t=this.get("hotline.ui")
Ember.set(t,"modalOpen",!0),Ember.set(t,"modal",{thirdPartyURL:e,title:""}),Ember.set(t,"openArticleFromMessage",!0)},showMoreArticles:function(){var e=this,s=this.get("fragment.fragments"),n=this.articleCollection
n=n.concat(s.slice(3,s.length)),this.set("articleCollection",n),this.set("showMoreArticle",!1)
var a=(0,t.default)(".body .h-chat-window"),i=this.element.querySelector(".articles-listview").offsetHeight,r=a[0].scrollTop
Ember.run.later(function(){var t=e.element.querySelector(".articles-listview").offsetHeight-i
a.animate({scrollTop:r+t},1)})}}})
e.default=r}),define("hotline-web/components/ui-unity-message-bubble/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"3f7qMc5b",block:'{"symbols":["fragment","fragment"],"statements":[[4,"if",[[28,"eq",[[24,["messageType"]],[24,["MESSAGE_TYPE","SCREEN_SHARING","CANCELLD"]]],null]],null,{"statements":[[0,"  "],[1,[28,"t",["screenShare.reqCancelled"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["messageType"]],[24,["MESSAGE_TYPE","SCREEN_SHARING","ENDED"]]],null]],null,{"statements":[[0,"  "],[1,[28,"t",["screenShare.sessionEnd"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["fragment","fragmentType"]],[24,["FRAGMENT","DYNAMIC_TEMPLATE_CONTENT"]]],null]],null,{"statements":[[4,"if",[[28,"eq",[[24,["fragment","templateType"]],[24,["TEMPLATE_TYPE","CAROUSEL_CARD","DEFAULT"]]],null]],null,{"statements":[[0,"    "],[5,"ui-carousel-card",[],[["@carouselCard","@isSelected"],[[22,"fragment"],true]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["fragment","fragmentType"]],[24,["FRAGMENT","QUICKREPLY"]]],null]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","h-message-text"],[8],[4,"if",[[24,["fragment","customReplyText"]]],null,{"statements":[[1,[28,"ui-emoji-text",[[24,["fragment","customReplyText"]]],null],false]],"parameters":[]},{"statements":[[1,[28,"ui-emoji-text",[[24,["fragment","label"]]],null],false]],"parameters":[]}],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["fragment","fragmentType"]],[24,["FRAGMENT","TEXT"]]],null]],null,{"statements":[[0,"  "],[7,"div",true],[11,"class",[29,["h-message-text ",[28,"if",[[24,["msgFragmentIndex"]],"not-first-fragment"],null]]]],[8],[4,"if",[[24,["fragmentContent"]]],null,{"statements":[[1,[28,"ui-emoji-text",[[24,["fragmentContent"]]],null],false]],"parameters":[]},{"statements":[[4,"if",[[24,["customFlowCalendarInvite"]]],null,{"statements":[[7,"div",true],[10,"class","bubble-attachment"],[8],[7,"i",true],[10,"class","ic-calendar icon-ic_schedule_meeting"],[10,"aria-hidden","true"],[8],[9],[7,"span",true],[8],[1,[28,"t",["common.labels.calendar_attached"],null],false],[9],[9]],"parameters":[]},{"statements":[[1,[28,"ui-emoji-text",[[24,["fragment","content"]]],null],false]],"parameters":[]}]],"parameters":[]}],[9],[0,"\\n"],[4,"if",[[24,["isbubble"]]],null,{"statements":[[4,"if",[[24,["message","replyFragments"]]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","h-message-text"],[8],[0,"\\n"],[4,"each",[[24,["message","replyFragments","firstObject","fragments"]]],null,{"statements":[[0,"          "],[1,[28,"ui-emoji-text",[[23,2,["label"]]],null],false],[0,"\\n"]],"parameters":[2]},null],[0,"      "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["fragment","fragmentType"]],[24,["FRAGMENT","IMAGE"]]],null]],null,{"statements":[[4,"if",[[24,["isbubble"]]],null,{"statements":[[0,"    "],[7,"div",true],[11,"class",[29,["h-message-text ",[28,"if",[[24,["msgFragmentIndex"]],"not-first-fragment"],null]]]],[8],[0,"\\n      "],[7,"div",true],[10,"class","bubble-attachment"],[8],[0,"\\n        "],[7,"i",true],[10,"class","icon-ic_image icons"],[10,"aria-hidden","true"],[8],[9],[0,"\\n        "],[7,"span",true],[8],[1,[28,"t",["common.labels.image_attached"],null],false],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div",true],[11,"class",[29,["chat_img_wrp ",[28,"if",[[28,"gt",[[24,["message","messageFragments","length"]],1],null],"file-with-text"],null]]]],[8],[0,"\\n      "],[7,"img",false],[12,"src",[24,["fragment","content"]]],[12,"width",[24,["fragment","width"]]],[12,"height","132"],[12,"class","chat_img chat_frame"],[12,"alt",""],[3,"action",[[23,0,[]],"enlargeImage",[24,["fragment","content"]]]],[8],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["fragment","fragmentType"]],[24,["FRAGMENT","BUTTON"]]],null]],null,{"statements":[[4,"if",[[24,["isbubble"]]],null,{"statements":[[0,"    "],[7,"div",true],[11,"class",[29,["h-message-text ",[28,"if",[[24,["msgFragmentIndex"]],"not-first-fragment"],null]]]],[8],[0,"\\n      "],[7,"div",true],[10,"class","bubble-attachment"],[8],[0,"\\n        "],[7,"i",true],[10,"class","faq_black icon-ic_message"],[10,"aria-hidden","true"],[8],[9],[0,"\\n        "],[7,"span",true],[8],[1,[28,"t",["common.labels.FAQ_attached"],null],false],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div",true],[10,"class","img-content"],[8],[0,"\\n      "],[7,"a",false],[12,"href","#"],[12,"target","new"],[12,"class","chat-btn"],[3,"action",[[23,0,[]],"performClickAction",[24,["fragment"]],true]],[8],[0,"\\n"],[4,"if",[[28,"and",[[24,["fragment","label"]],[28,"not",[[24,["isFAQFragment"]]],null]],null]],null,{"statements":[[0,"          "],[1,[24,["fragment","label"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[28,"t",["conversation.ce.viewFAQ"],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["fragment","fragmentType"]],[24,["FRAGMENT","FILE"]]],null]],null,{"statements":[[4,"if",[[24,["isbubble"]]],null,{"statements":[[0,"    "],[7,"div",true],[11,"class",[29,["h-message-text ",[28,"if",[[24,["msgFragmentIndex"]],"not-first-fragment"],null]]]],[8],[0,"\\n      "],[7,"div",true],[10,"class","bubble-attachment"],[8],[0,"\\n        "],[7,"i",true],[10,"class","icon-ic_attachment"],[10,"aria-hidden","true"],[8],[9],[0,"\\n        "],[7,"span",true],[8],[1,[28,"t",["common.labels.File_attached"],null],false],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"and",[[24,["fragment","filePreview"]],[24,["fragment","filePreview","content"]]],null]],null,{"statements":[[0,"      "],[7,"div",true],[10,"class","text-file-preview"],[8],[0,"\\n        "],[7,"div",true],[10,"class","text-haze-holder"],[8],[0,"\\n          "],[1,[24,["fragment","filePreview","content"]],false],[0,"\\n          "],[7,"div",true],[10,"class","bottom-gradient"],[8],[9],[0,"\\n        "],[9],[0,"\\n        "],[7,"div",true],[10,"class","file-haze"],[8],[9],[0,"\\n        "],[7,"div",true],[11,"class",[29,["file-details-holder ",[28,"if",[[28,"gt",[[24,["message","messageFragments","length"]],1],null],"file-with-text"],null]]]],[8],[0,"\\n          "],[7,"span",true],[10,"class","file-size-holder"],[8],[0,"\\n            "],[1,[28,"sanitize-html",[[24,["fileSize"]],"strict"],null],false],[0," • "],[1,[28,"sanitize-html",[[24,["fileExtension"]],"strict"],null],false],[0,"\\n          "],[9],[0,"\\n"],[4,"if",[[24,["fragment","fileHash"]]],null,{"statements":[[0,"            "],[7,"span",true],[10,"class","file-download-button-holder"],[8],[0,"\\n              "],[7,"a",false],[3,"action",[[23,0,[]],"downloadFile",[24,["fragment","fileHash"]],[24,["fileName"]]]],[8],[0,"\\n                "],[7,"i",true],[10,"class","icon-download"],[8],[9],[0,"\\n              "],[9],[0,"\\n            "],[9],[0,"\\n"]],"parameters":[]},null],[0,"        "],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div",true],[11,"class",[29,["file-attachment ",[28,"if",[[24,["fileSecurityWarning"]],"warning"],null]," ",[28,"if",[[24,["fileSecurityError"]],"error"],null]," ",[28,"if",[[28,"gt",[[24,["message","messageFragments","length"]],1],null],"file-with-text"],null]]]],[8],[0,"\\n        "],[7,"div",true],[10,"class","file-data row"],[8],[0,"\\n          "],[7,"div",true],[10,"class","file-meta"],[8],[0,"\\n            "],[7,"div",true],[10,"class","file-name"],[8],[0,"\\n              "],[7,"img",true],[10,"class","file-icon"],[10,"src","https://assetscdn-wchat.freshchat.com/static/assets/images/ic_article-3b7945f82fbe666a6e2cceb4ffc244e6.svg"],[8],[9],[0,"\\n              "],[7,"div",true],[10,"class","name"],[8],[1,[28,"sanitize-html",[[24,["fileName"]],"strict"],null],false],[9],[0,"\\n            "],[9],[0,"\\n            "],[7,"div",true],[10,"class","file-size"],[8],[1,[28,"sanitize-html",[[24,["fileSize"]],"strict"],null],false],[0," • "],[1,[28,"sanitize-html",[[24,["fileExtension"]],"strict"],null],false],[9],[0,"\\n          "],[9],[0,"\\n          "],[7,"div",true],[10,"class","download-file"],[8],[0,"\\n"],[4,"if",[[24,["fileSecurityError"]]],null,{"statements":[[0,"              "],[7,"a",true],[10,"class","download-icon"],[8],[0,"\\n                "],[7,"i",true],[10,"class","icon-ic_close"],[8],[9],[0,"\\n              "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["fragment","fileHash"]]],null,{"statements":[[0,"                "],[7,"a",false],[12,"class","download-icon"],[3,"action",[[23,0,[]],"downloadFile"]],[8],[0,"\\n                  "],[7,"i",true],[10,"class","icon-download"],[8],[9],[0,"\\n                "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"          "],[9],[0,"\\n        "],[9],[0,"\\n"],[4,"if",[[28,"or",[[24,["fileSecurityWarning"]],[24,["fileSecurityError"]]],null]],null,{"statements":[[0,"          "],[7,"div",true],[10,"class","file-security-info"],[8],[0,"\\n            "],[7,"b",true],[8],[1,[22,"fileSecurityInfoTitle"],false],[9],[0," -\\n            "],[1,[22,"fileSecurityInfoDesc"],false],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["fragment","fragmentType"]],[24,["FRAGMENT","COLLECTION"]]],null]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","articles-listview"],[8],[0,"\\n    "],[7,"ul",true],[8],[0,"\\n"],[4,"each",[[24,["articleCollection"]]],null,{"statements":[[4,"if",[[28,"not-eq",[[23,1,["fragmentType"]],[24,["FRAGMENT","CALLBACK"]]],null]],null,{"statements":[[0,"          "],[7,"li",false],[12,"class","article-info"],[3,"action",[[23,0,[]],"performClickAction",[23,1,[]]]],[8],[0,"\\n            "],[7,"span",true],[11,"title",[23,1,["label"]]],[8],[1,[23,1,["label"]],false],[9],[0,"\\n            "],[7,"span",true],[10,"class","arrow-right"],[8],[9],[0,"\\n          "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null],[4,"if",[[24,["showMoreArticle"]]],null,{"statements":[[0,"        "],[7,"li",false],[12,"class","article-showmore"],[3,"action",[[23,0,[]],"showMoreArticles"]],[8],[0,"\\n          "],[7,"span",true],[8],[1,[28,"t",["conversation.fragment.showmore"],null],false],[9],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["fragment","fragmentType"]],[24,["FRAGMENT","AUDIO"]]],null]],null,{"statements":[],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["fragment","fragmentType"]],[24,["FRAGMENT","VIDEO"]]],null]],null,{"statements":[[4,"if",[[24,["isbubble"]]],null,{"statements":[[0,"    "],[7,"div",true],[11,"class",[29,["h-message-text ",[28,"if",[[24,["msgFragmentIndex"]],"not-first-fragment"],null]]]],[8],[0,"\\n      "],[7,"div",true],[10,"class","bubble-attachment"],[8],[0,"\\n        "],[7,"i",true],[10,"class","fa-video-camera icons"],[10,"aria-hidden","true"],[8],[9],[0,"\\n        "],[7,"span",true],[8],[1,[28,"t",["common.labels.video_attached"],null],false],[9],[0,"\\n      "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div",true],[11,"class",[29,["chat_img_wrp ",[28,"if",[[28,"gt",[[24,["message","messageFragments","length"]],1],null],"file-with-text"],null]]]],[8],[0,"\\n"],[4,"if",[[24,["isOpen"]]],null,{"statements":[[0,"        "],[7,"iframe",true],[11,"src",[24,["fragment","content"]]],[10,"height","132"],[10,"class","chat_img chat_frame"],[10,"allowfullscreen","true"],[10,"webkitallowfullscreen","true"],[10,"mozallowfullscreen","true"],[8],[9],[0,"\\n"]],"parameters":[]},null],[0,"    "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[28,"eq",[[24,["fragment","fragmentType"]],[24,["FRAGMENT","MEETING"]]],null]],null,{"statements":[[0,"  "],[5,"ui-meeting-message-fragment",[],[["@messageMeta","@fragment"],[[22,"messageMeta"],[22,"fragment"]]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-unity-message-bubble/template.hbs"}})
e.default=t}),define("hotline-web/components/ui-unity-message-fragment/component",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Component.extend({CONVERSATION:t.default.CONVERSATION,MESSAGE_STATUS:t.default.MESSAGE_STATUS,checkFragmentTypes:function(e){var t=this.get("message.messageFragments")
if(t&&t.length>0)for(var s=0;s<t.length;s++){var n=t[s]
if("media"===e&&n&&(n.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.IMAGE||n.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.VIDEO))return!0
if("article"===e&&n&&n.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.COLLECTION)return!n.fragments||!n.fragments.length||n.fragments.firstObject.fragmentType!==this.CONVERSATION.FRAGMENT_TYPE.CALLBACK
if("file"===e&&n&&n.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.FILE)return!0}return!1},isArticleView:Ember.computed("message.messageFragments",{get:function(){return this.checkFragmentTypes("article")}}),isMedia:Ember.computed("message.messageFragments",{get:function(){return this.checkFragmentTypes("media")}}),isFileType:Ember.computed("message.messageFragments",{get:function(){return this.checkFragmentTypes("file")}}),meetingMessageFragment:Ember.computed("message.messageFragments",{get:function(){var e=this.get("message.messageFragments")
if(e&&e.length>0){var s=e[0]
if((s&&s.fragmentType)===t.default.CONVERSATION.FRAGMENT_TYPE.MEETING)return s}return!1}}),calendarSpecificFragment:Ember.computed("message.messageType",{get:function(){var e=this.get("message.messageType")
return e===t.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.FAILURE||e===t.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.SUCCESS||e===t.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.SENT_BY_AGENT}}),calendarSpecificFragmentContent:Ember.computed("calendarSpecificFragment",{get:function(){var e=this.get("message.messageType"),s=this.get("message.messageFragments"),n=s&&s[0]
if(this.calendarSpecificFragment){if(e===t.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.SENT_BY_AGENT)return this.get("message.internalMeta.calendarMessageMeta.retryCalendarEvent")?Ember.set(n,"content",this.intl.t("calendar.retry_calendar_message")):this.get("message.flowStepId")||Ember.set(n,"content",this.intl.t("calendar.invitation_message")),n
if(e===t.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.SUCCESS){var a=this.get("message.internalMeta.calendarMessageMeta.calendarBookingEmail")
return Ember.set(n,"content",this.intl.t("calendar.success_message_pre",{email:a})),n}return e===t.default.CONVERSATION.MESSAGE_TYPE.CALENDAR.FAILURE?(Ember.set(n,"content",this.intl.t("calendar.failure_message")),n):null}return null}}),isCarouselCardFragment:Ember.computed("message.messageFragments",{get:function(){var e=this.get("message.messageFragments")
if(e&&e.length>0){var s=e[0],n=s&&s.fragmentType,a=s&&s.templateType
return n===t.default.CONVERSATION.FRAGMENT_TYPE.DYNAMIC_TEMPLATE_CONTENT&&a===t.default.TemplateType.CAROUSEL_CARD.DEFAULT}return!1}}),emojisCountClassBinding:Ember.computed("message.emojisCount",{get:function(){var e=this.get("message.emojisCount")
return e>0&&e<=3?"emojis emojis-".concat(e):""}}),translatedContentAvailable:Ember.computed("containsTranslations","message.emojisCount",{get:function(){return this.containsTranslations&&!this.get("message.emojisCount")}}),notSingleMediaContent:Ember.computed("message.messageFragments",{get:function(){return!(1===this.get("message.messageFragments.length")&&this.get("message.messageFragments.firstObject.fragmentType")!==t.default.CONVERSATION.FRAGMENT_TYPE.TEXT)}}),translateStatus:Ember.computed.equal("message.shouldTranslate",t.default.liveTranslationSettings.translateStatusForMessage.yes),displayTranslatedContent:Ember.computed.and("showInBothLocales","translateStatus","notSingleMediaContent")})
e.default=s}),define("hotline-web/components/ui-unity-message-fragment/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"IsIkdcDV",block:'{"symbols":["fragment","fragment","index","fragment"],"statements":[[4,"if",[[24,["meetingMessageFragment"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","meeting-frag-holder"],[8],[0,"\\n    "],[5,"ui-meeting-message-fragment",[],[["@messageMeta","@fragment"],[[24,["message","internalMeta"]],[22,"meetingMessageFragment"]]]],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["isCarouselCardFragment"]]],null,{"statements":[[0,"  "],[7,"div",true],[10,"class","h-comment fc-carousel-message-bubble"],[8],[0,"\\n    "],[5,"ui-carousel-card",[],[["@carouselCard","@isSelected"],[[24,["message","messageFragments","firstObject"]],true]]],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div",true],[11,"class",[29,["h-comment ",[28,"if",[[24,["isArticleView"]],"h-wrapped-article"],null]," ",[28,"if",[[24,["isFileType"]],"file-attached"],null]," ",[28,"if",[[24,["isMedia"]],"media-message"],null]," ",[28,"if",[[24,["message","emojisCount"]],[24,["emojisCountClassBinding"]]],null]]]],[8],[0,"\\n"],[4,"if",[[24,["isMessageUnauthenticated"]]],null,{"statements":[[0,"      "],[7,"i",true],[10,"class","ic-unauthenticated custom-tooltip"],[8],[0,"\\n        "],[7,"span",true],[10,"class","tooltiptext"],[8],[1,[28,"t",["message.not_authenticated"],null],false],[9],[0,"\\n      "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"and",[[28,"or",[[28,"eq",[[24,["message","status"]],[24,["MESSAGE_STATUS","NOT_SENT"]]],null],[28,"eq",[[24,["message","status"]],[24,["MESSAGE_STATUS","NOT_UPLOADED"]]],null]],null],[28,"not",[[24,["isListView"]]],null]],null]],null,{"statements":[[0,"      "],[7,"i",true],[10,"class","fc-ic-not-sent custom-tooltip"],[8],[0,"\\n        "],[7,"span",true],[10,"class","tooltiptext"],[8],[1,[28,"t",["message.not_sent"],null],false],[9],[0,"\\n      "],[9],[0,"\\n    "]],"parameters":[]},null]],"parameters":[]}],[0,"\\n"],[4,"if",[[24,["isListView"]]],null,{"statements":[[0,"      "],[5,"ui-unity-message-bubble",[],[["@message","@fragment","@messageType","@isbubble"],[[22,"message"],[24,["message","messageFragments","firstObject"]],[24,["message","messageType"]],"true"]]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[24,["calendarSpecificFragment"]]],null,{"statements":[[0,"      "],[5,"ui-unity-message-bubble",[],[["@message","@fragment","@messageType","@isbubble"],[[22,"message"],[22,"calendarSpecificFragmentContent"],[24,["message","messageType"]],[22,"isbubble"]]]],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[28,"or",[[24,["userMessage"]],[28,"not",[[24,["translatedContentAvailable"]]],null]],null]],null,{"statements":[[4,"each",[[24,["message","messageFragments"]]],null,{"statements":[[4,"unless",[[28,"contains-only-end-of-line",null,[["content","isbubble"],[[23,4,["content"]],[24,["isbubble"]]]]]],null,{"statements":[[0,"            "],[5,"ui-unity-message-bubble",[],[["@message","@fragment","@messageType","@isbubble","@isOpen"],[[22,"message"],[23,4,[]],[24,["message","messageType"]],[22,"isbubble"],[22,"isOpen"]]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[4]},null]],"parameters":[]},{"statements":[[4,"each",[[24,["message","messageFragments"]]],null,{"statements":[[4,"unless",[[28,"contains-only-end-of-line",null,[["content","isbubble"],[[23,2,["content"]],[24,["isbubble"]]]]]],null,{"statements":[[0,"            "],[5,"ui-unity-message-bubble",[],[["@message","@msgFragmentIndex","@fragment","@messageType","@isbubble","@fragmentContent","@secondaryLocale","@showInBothLocales","@isOpen"],[[22,"message"],[23,3,[]],[23,2,[]],[24,["message","messageType"]],[22,"isbubble"],[23,2,["translatedContent"]],"false",[22,"showInBothLocales"],[22,"isOpen"]]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[2,3]},null],[0,"\\n"],[4,"if",[[24,["displayTranslatedContent"]]],null,{"statements":[[0,"          "],[7,"div",true],[10,"class","original-content"],[8],[0,"\\n            "],[7,"hr",true],[8],[9],[0,"\\n"],[4,"each",[[24,["message","messageFragments"]]],null,{"statements":[[4,"unless",[[28,"contains-only-end-of-line",null,[["content","isbubble"],[[23,1,["content"]],[24,["isbubble"]]]]]],null,{"statements":[[0,"                "],[5,"ui-unity-message-bubble",[],[["@message","@fragment","@messageType","@isbubble","@fragmentContent","@secondaryLocale","@showInBothLocales","@isOpen"],[[22,"message"],[23,1,[]],[24,["message","messageType"]],[22,"isbubble"],[23,1,["content"]],"true",[22,"showInBothLocales"],[22,"isOpen"]]]],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null],[0,"          "],[9],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"\\n    "]],"parameters":[]}]],"parameters":[]}],[0," "],[0,"\\n"],[0,"  "],[9],[0,"\\n"]],"parameters":[]}]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"hotline-web/components/ui-unity-message-fragment/template.hbs"}})
e.default=t}),define("hotline-web/controllers/application",["exports","hotline-web/mixins/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Controller.extend(t.default,{actions:{restoreConversation:function(){var e=this.target
"home.index"!==(e&&e.currentRouteName)&&this.replaceRoute("home")},gotoHome:function(){var e=this.displayChannels,t=e&&e.length
this.isFAQAvailable||t&&t>1?this.replaceRoute("home"):t&&1===t&&this.replaceRoute("home.channel",e[0].channelId)},gotoChannel:function(e){var t=this.displayChannels,s=e&&e.id,n=e&&e.name,a=e&&!!e.send||!1,i=e&&e.replyText||"",r=s||n?t.findBy("channelId",s)||t.findBy("name",n):this.defaultChannel,o=t&&t.length
"string"==typeof i&&(i=i.trim())&&(this.set("hotline.ui.channelSendMessage",a),this.set("hotline.ui.channelReplyText",i)),o&&o>1&&r&&this.replaceRoute("home.channel",r.channelId)},reloadRoute:function(){var e=this.target&&this.target.currentRouteName
if(e){e.indexOf("home")>-1&&(e="home")
var t=Ember.getOwner(this).lookup("route:".concat(e))
t&&t.refresh()}}}})
e.default=s}),define("hotline-web/controllers/array",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Controller
e.default=t}),define("hotline-web/controllers/home/channel",["exports","hotline-web/controllers/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({})
e.default=s}),define("hotline-web/controllers/object",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Controller
e.default=t}),define("hotline-web/formats",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={time:{hhmmss:{hour:"numeric",minute:"numeric",second:"numeric"}},date:{hhmmss:{hour:"numeric",minute:"numeric",second:"numeric"}},number:{EUR:{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2},USD:{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}}}}),define("hotline-web/helpers/-element",["exports","ember-element-helper/helpers/-element"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/and",["exports","ember-truth-helpers/helpers/and"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"and",{enumerable:!0,get:function(){return t.and}})}),define("hotline-web/helpers/app-version",["exports","hotline-web/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,s){function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.default.APP.version,i=n.versionOnly||n.hideSha,r=n.shaOnly||n.hideVersion,o=null
return i&&(n.showExtended&&(o=a.match(s.versionExtendedRegExp)),o||(o=a.match(s.versionRegExp))),r&&(o=a.match(s.shaRegExp)),o?o[0]:a}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=n,e.default=void 0
var a=Ember.Helper.helper(n)
e.default=a}),define("hotline-web/helpers/avatar-content",["exports"],function(e){function t(e){var t=e&&e[0]
if(t)return t.substr(0,1).capitalize()}Object.defineProperty(e,"__esModule",{value:!0}),e.avatarContent=t,e.default=void 0
var s=Ember.Helper.helper(t)
e.default=s}),define("hotline-web/helpers/choose-theme",["exports"],function(e){function t(e){var t=e&&e[0]&&e[0].toUpperCase().charAt(0)
return"A"===t||"I"===t||"J"===t||"Q"===t||"Z"===t?"theme-1":"B"===t||"K"===t||"O"===t||"R"===t?"theme-2":"C"===t||"G"===t||"L"===t||"S"===t?"theme-3":"D"===t||"M"===t||"T"===t||"F"===t?"theme-4":"E"===t||"H"===t||"N"===t||"X"===t?"theme-5":"U"===t||"V"===t||"W"===t||"P"===t||"Y"===t?"theme-6":"theme-7"}Object.defineProperty(e,"__esModule",{value:!0}),e.chooseTheme=t,e.default=void 0
var s=Ember.Helper.helper(t)
e.default=s}),define("hotline-web/helpers/collate",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Object.extend({interval:1e3,ready:!1,initialize:function(e,t,s){this.interval=t,this.promise=e,this.scope=s,this.ready=!0,Ember.run.later(this,this.run,this.interval)},run:function(){this.ready?(this.promise.call(this.scope),this.promise=void 0,this.scope=void 0):this.promise&&(this.ready=!0,Ember.run.later(this,this.run,this.interval))},delay:function(){return!!this.promise&&(this.ready=!1,!0)},reset:function(){this.promise=void 0,this.scope=void 0,this.ready=!1},queued:function(){return this.promise&&!this.ready}})
e.default=t}),define("hotline-web/helpers/command",["exports","jquery","hotline-web/helpers/timer-event","hotline-web/helpers/wakeup-worker","hotline-web/utils/constants"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Object.extend({init:function(){this.count=0,this.cache={},this.worker=null
var e=this.scope
e.timer.on("didTrigger",this.didTrigger.bind(this)),e.timer.on("didClear",this.didClear.bind(this)),e.timer.on("didFail",this.didFail.bind(this))},messageStacker:Ember.inject.service(),sendMetrics:function(e,s,n){var i,r,o=this.scope,l=a.default.EmberModelUrl.tattletale,c=o&&o.get("session.token"),u=o&&o.get("session.siteId")
s===a.default.EventState.OPENED&&(r=a.default.RuleMetricKeys.uniqueSent,n>1&&(r=a.default.RuleMetricKeys.sent),i=l.url.replace("{token}",c).replace("{ruleId}",e).replace("{keys}",r),u&&(i+="&siteId=".concat(u)),t.default.ajax({type:"PUT",url:i,cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){}))},updateExecutedRules:function(e,t){var s=this.scope,n=s.get("localds"),i=n&&n.get("userBehaviour"),r=i&&i.get("executedRules"),o=r.findBy("ruleId",e),l=o&&o.get("sentCount"),c=o&&o.get("sentCountSession")||0
t===a.default.EventState.OPENED&&(l=l?l+1:1,o?(o.set("sentCount",l),o.set("sentCountSession",c+1)):(o=s.get("store").createRecord("executedRule",{ruleId:e,sentCountSession:1,sentCount:1,openedCount:0}),r.pushObject(o)),s.send("save",!1),this.sendMetrics(e,t,o.get("sentCount")))},updateState:function(e,t){var s=this.fetchAll("timer").findBy("type",e),n=this.getRuleId(e)
s&&Ember.set(s,"state",t),this.updateExecutedRules(n,t)},didTrigger:function(e){this.scope.logger.log("Triggered "+e),this.updateState(e,a.default.EventState.SENT)},didClear:function(e){this.scope.logger.log("Cleared "+e),this.updateState(e,a.default.EventState.CLEARED)},didFail:function(e){this.scope.logger.log("Failed "+e),this.updateState(e,a.default.EventState.ERROR)},didSleep:function(){var e=this,t=this.cache
Object.keys(t).map(function(e){return t[e]}).forEach(function(t){t.timer.state===a.default.EventState.SENT&&e.rerun(t)})},rerun:function(e){this.scope.timer.clear(e.timer),this.trigger(e.eventRule)},fetchAll:function(e){var t=this.cache
return Object.keys(t).map(function(s){return t[s][e]})},getRuleId:function(e){var t=this.cache,s=Object.keys(t).map(function(e){return t[e]}).filter(function(t){if(t&&t.timer&&t.timer.type===e)return!0})
if(s&&s.length)return s[0].eventRule.ruleId},trigger:function(e){var t=this,n=e&&e.command,i=n&&n.commandValue,r=this.scope,o=r&&r.store.peekAll("agent"),l=o&&o.findBy("alias",e.agent.alias),c=l&&l.get("firstName")||"",u=parseInt(i.channelId,10),d=s.default.create({type:a.default.EventType.TIMER+"_"+this.count++,state:a.default.EventState.SENT,handler:function(){r.set("channelId",u)
var s=r.get("lastMessage.messageType"),n=r.get("config.campaignSettings"),i=n&&n.shouldInterrupt,o=r.get("lastMessage.createdMillis"),l=r.get("lastMessage.autoRuleId"),d=r.get("displayChannels"),m=!0,h=!0;(d&&d.findBy("channelId",u)&&(h=!1),i&&!l)&&((new Date).getTime()-o<60*n.timeInterval*1e3&&(m=!1))
s===a.default.CONVERSATION.MESSAGE_TYPE.BOT||!m||h?r.set("channelId",void 0):r.get("hasUnrepliedFlowMessages")||r.get("hasUnrepliedOfflineMessage")?r.canTriggerFlow()&&t.triggerCampaigns(e,c):r.get("currentConversationStatus")!==a.default.CONVERSATION.CONVERSATION_STATUS.FREDDY_BOT&&t.triggerCampaigns(e,c)},delay:n.delay?1e3*n.delay:1})
this.cache[n.ruleId]={eventRule:e,timer:d},r.timer.push(d)},triggerCampaigns:function(e,t){var s=this.cache[e.ruleId],n=s&&s.timer,i=n&&n.type
this.updateState(i,a.default.EventState.OPENED)
var r=e&&e.command,o=r&&r.commandValue,l=this.scope
l.get("hasUnrepliedFlowMessages")&&l.removeFlowMessages(),l.get("hasUnrepliedOfflineMessage")&&l.removelastOfflineMessage(),o.campaignMessages&&o.campaignMessages.forEach(function(e){var t=e.messageFragments,s=e.placeholderMeta
if(s){var n=l.get("placeholderService").getPlaceholderStringWithValue(s)
t.forEach(function(e){var t=e.content,s=e.fragmentType
t&&s===a.default.CONVERSATION.FRAGMENT_TYPE.TEXT&&(e.content=l.get("placeholderService").replacePlaceholders(t,n))})}}),o.flowId?l.currentConversationStatus!==a.default.CONVERSATION.CONVERSATION_STATUS.RESOLVED&&l.messagesCountWithMessageId||(o.hasWelComeMessage&&this.displayMessages(e,t,o.campaignMessages),this.displayMessages(e,t,o.flowMessages)):this.displayMessages(e,t,o.campaignMessages)},displayMessages:function(e,t,s){var n=e&&e.command,i=e.serviceAccount,r=n&&n.commandValue,o=this.scope,l=parseInt(r.channelId,10)
s&&s.forEach(function(s){o.get("messageStacker").setLastAgentMessage({messageUserName:r.flowId?i.firstName:t,messageFragments:s.messageFragments,replyFragments:s.replyFragments,channelId:l,ruleId:n.ruleId,flowId:s.flowStepId?r.flowId:null,flowStepId:s.flowStepId,messageType:s.messageType||r.flowId?a.default.CONVERSATION.MESSAGE_TYPE.FREDDY_BOT:1,messageUserId:r.flowId?i.id:r.agentId,messageUserAlias:r.flowId?i.alias:e.agent.alias,campaignMessageId:s.campaignMessageId,messageCategoryId:s.messageCategoryId,messageUserProfilePic:r.flowId?i.profilePicUrl:""}),o.send("updateMessage",{campaignMessageId:s.campaignMessageId,autoRuleId:n.ruleId,flowId:s.flowStepId?r.flowId:null,flowStepId:s.flowStepId,flowVersionId:s.flowStepId?r.flowVersionId:null,autoRuleRead:!1,hasBeenRepliedTo:!1,needsUpdation:o.getNeedUpdationValue(s),messageFragments:s.messageFragments,replyFragments:s.replyFragments,messageUserName:r.flowId?i.firstName:t,userFirstName:r.flowId?i.firstName:t,messageUserType:1,internalMeta:s.internalMeta,messageType:s.messageType||r.flowId?a.default.CONVERSATION.MESSAGE_TYPE.FREDDY_BOT:1,messageUserId:r.flowId?i.id:r.agentId,messageUserAlias:r.flowId?i.alias:e.agent.alias,read:!1,createdMillis:(new Date).getTime(),messageUserProfilePic:r.flowId?i.profilePicUrl:""})})},execute:function(e,t){var s=this
t&&(this.scope.timer.clearAll(this.fetchAll("timer")),this.count=0,this.cache={}),this.worker||(this.worker=n.default.create()),this.worker.getWorker()&&this.worker.addCallback("rule_engine_commands",function(){s.didSleep()}),e.forEach(function(e){s.trigger(e)})}})
e.default=i}),define("hotline-web/helpers/contain-valid-text-fragment",["exports","hotline-web/utils/constants"],function(e,t){function s(e){if(Ember.isBlank(e)||Ember.isBlank(e[0]))return!1
var s=e[0],n=!Ember.isBlank(s)&&Ember.isArray(s)?s.map(function(e){return e}):null
Ember.isBlank(n)&&(n=[s])
for(var a=n.length;a>=0;a--){var i=n[a]&&n[a].messageFragments
if(!Ember.isBlank(i)){var r=i.filter(function(e){return e&&e.fragmentType===t.default.CONVERSATION.FRAGMENT_TYPE.TEXT})
if(r.length===i.length&&!Ember.isBlank(r)){var o=r.filter(function(e){return e.content&&!Ember.isBlank(e.content)})
Ember.isBlank(o)&&n.splice(a,1)}}}return n.length>0}Object.defineProperty(e,"__esModule",{value:!0}),e.containValidTextFragment=s,e.default=void 0
var n=Ember.Helper.helper(s)
e.default=n}),define("hotline-web/helpers/contains-only-end-of-line",["exports"],function(e){function t(e,t){return t.isbubble&&t.content&&"\r\n"===t.content}Object.defineProperty(e,"__esModule",{value:!0}),e.isContainsOnlyEndOfLine=t,e.default=void 0
var s=Ember.Helper.helper(t)
e.default=s}),define("hotline-web/helpers/eq",["exports","ember-truth-helpers/helpers/equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"equal",{enumerable:!0,get:function(){return t.equal}})}),define("hotline-web/helpers/event-conditions",["exports","hotline-web/utils/utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Object.extend({update:function(e){var t=Ember.A([])
return t.pushObject(e),this.populate(t,!1)},populate:function(e){var s,n,a,i,r,o,l,c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],u=this.scope,d=u.get("hotline.ui.userBehaviour"),m=d&&d.eventRules||[],h=u.get("userBehaviour"),f=e||h&&h.get("events"),g=h&&h.get("eventConditions"),p={}
return c&&g.clear(),Ember.set(h,"hasLocationRule",!1),Ember.set(h,"hasLocationKeyInRuleContent",!1),m&&m.forEach(function(e){if(l=e.ruleId,e&&e.segment&&e.segment.segments.forEach(function(e){s=e.eventConditions||[]
var c=e.userConditions||[]
if(c.length&&!h.get("hasLocationRule")){var d=c.filterBy("key","LOCATION"),m=c.filterBy("key","CITY");(d.length||m.length)&&Ember.set(h,"hasLocationRule",!0)}s.forEach(function(e){(n=(n=f.filterBy("name",e.eventName)).filter(function(s){return a=s.get("eventProperties"),!e.propertyConditions||!e.propertyConditions.length||(r=!0,e.propertyConditions.forEach(function(e){i=a.findBy("key",e.key),r=!!i&&(r&&t.default.checkCondition(e.dataType,e.conditionType,i.get("value"),e.value,!0))}),r)})).length&&(n=n.sortBy("createdMillis"),o=g.findBy("eventConditionId",e.eventConditionId),p[l]=!0,o?Ember.setProperties(o,{occurrenceCount:o.get("occurrenceCount")+n.length,lastOccurredMillis:n.objectAt(n.length-1).get("createdMillis")}):g.pushObject(u.get("store").createRecord("eventCondition",{eventConditionId:e.eventConditionId,eventName:e.eventName,occurrenceCount:n.length,firstOccurredMillis:n.objectAt(0).get("createdMillis"),lastOccurredMillis:n.objectAt(n.length-1).get("createdMillis")})))})}),!h.get("hasLocationKeyInRuleContent")&&u.get("placeholderService")){var c=e&&e.command,d=c&&c.commandValue,m=d&&d.campaignMessages
if(m)for(var v=m.length,b=0;b<v;b++){var E=m[b],y=E&&E.placeholderMeta
if(y&&u.get("placeholderService").hasLocationKeyInPlaceholderMeta(y)){Ember.set(h,"hasLocationKeyInRuleContent",!0)
break}}}}),p}})
e.default=s}),define("hotline-web/helpers/format-date",["exports","ember-intl/helpers/format-date"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})})
define("hotline-web/helpers/format-message",["exports","ember-intl/helpers/format-message"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/format-number",["exports","ember-intl/helpers/format-number"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/format-relative",["exports","ember-intl/helpers/format-relative"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/format-time",["exports","hotline-web/utils/dayjs"],function(e,t){function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return
var s=[],n=!0,a=!1,i=void 0
try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(s.push(r.value),!t||s.length!==t);n=!0);}catch(l){a=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(e,t,s){return(e-t)*(e-s)<=0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Helper.extend({compute:function(e,a){var i=this,r=s(e,2),o=r[0],l=r[1]
if(o&&!isNaN(o)){var c,u=0,d=(0,t.default)(o).diff((0,t.default)(),"seconds"),m=!0
if(a&&a.updateOnInterval&&(m=Boolean(a.updateOnInterval)),l)c=(0,t.default)(o).format(l)
else try{c=d<44?(0,t.default)(o).fromNow():(0,t.default)().fromNow()}catch(h){c=(0,t.default)(o).format("ddd, LT")}return m&&(this.clearTimer(),u=function(e){return n(e,-89,89)?3:n(e,-5340,5340)?120:n(e,-86400,86400)?1800:86400}(d),this.intervalTimer=setInterval(function(){Ember.run(function(){return i.recompute()})},parseInt(1e3*u,10))),c}return""},clearTimer:function(){clearInterval(this.intervalTimer)},destroy:function(){this.clearTimer()}})
e.default=a}),define("hotline-web/helpers/get-src",["exports","freshchat-component-library/helpers/get-src"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"getSrc",{enumerable:!0,get:function(){return t.getSrc}})}),define("hotline-web/helpers/gt",["exports","ember-truth-helpers/helpers/gt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"gt",{enumerable:!0,get:function(){return t.gt}})}),define("hotline-web/helpers/gte",["exports","ember-truth-helpers/helpers/gte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"gte",{enumerable:!0,get:function(){return t.gte}})}),define("hotline-web/helpers/guid",["exports","uuid/v4"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s={generate:function(){return(0,t.default)()}}
e.default=s}),define("hotline-web/helpers/is-array",["exports","ember-truth-helpers/helpers/is-array"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return t.isArray}})}),define("hotline-web/helpers/is-empty",["exports","ember-truth-helpers/helpers/is-empty"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/is-equal",["exports","ember-truth-helpers/helpers/is-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"isEqual",{enumerable:!0,get:function(){return t.isEqual}})}),define("hotline-web/helpers/is-same",["exports","hotline-web/utils/dayjs"],function(e,t){function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return
var s=[],n=!0,a=!1,i=void 0
try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(s.push(r.value),!t||s.length!==t);n=!0);}catch(l){a=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return s}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(e,n){var a=s(e,2),i=a[0],r=a[1],o="milliseconds"
if(i&&r)return i=(0,t.default)("now"===i?void 0:i),r=(0,t.default)("now"===r?void 0:r),n&&(o=n.precision?n.precision:o),i.isSame(r,o)}Object.defineProperty(e,"__esModule",{value:!0}),e.isSame=n,e.default=void 0
var a=Ember.Helper.helper(n)
e.default=a}),define("hotline-web/helpers/lt",["exports","ember-truth-helpers/helpers/lt"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"lt",{enumerable:!0,get:function(){return t.lt}})}),define("hotline-web/helpers/lte",["exports","ember-truth-helpers/helpers/lte"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"lte",{enumerable:!0,get:function(){return t.lte}})}),define("hotline-web/helpers/maximize-calendar-slot",["exports"],function(e){function t(e){var t=e[0],s=e[1],n=e[2]
return 0!=t&&1!=s?n?"maximize-triplet-slot":"maximize-quad-slot":""}Object.defineProperty(e,"__esModule",{value:!0}),e.canMaximizeSlots=t,e.default=void 0
var s=Ember.Helper.helper(t)
e.default=s}),define("hotline-web/helpers/not-eq",["exports","ember-truth-helpers/helpers/not-equal"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"notEq",{enumerable:!0,get:function(){return t.notEq}})}),define("hotline-web/helpers/not",["exports","ember-truth-helpers/helpers/not"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"not",{enumerable:!0,get:function(){return t.not}})}),define("hotline-web/helpers/odd-even",["exports"],function(e){function t(e){var t=e&&e[0]
if(t)return t%2==0?"even":"odd"}Object.defineProperty(e,"__esModule",{value:!0}),e.oddEven=t,e.default=void 0
var s=Ember.Helper.helper(t)
e.default=s}),define("hotline-web/helpers/or",["exports","ember-truth-helpers/helpers/or"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"or",{enumerable:!0,get:function(){return t.or}})}),define("hotline-web/helpers/pluralize",["exports","ember-inflector/lib/helpers/pluralize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default
e.default=s}),define("hotline-web/helpers/polling",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Object.extend({interval:5e3,schedule:function(e){var t=this
return setInterval(function(){e.apply(t)},this.interval)},stop:function(){clearInterval(this.timer)},start:function(e){this.set("caller",e),this.set("timer",this.schedule(this.onPoll))},onPoll:function(){}})
e.default=t}),define("hotline-web/helpers/sanitize-html",["exports","hotline-web/utils/sanitize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Helper.extend({compute:function(e){var s,n=e[1]
n&&(s=Ember.getOwner(this).lookup("sanitizer:"+n))
var a=(0,t.sanitize)(e[0],s)
return Ember.String.htmlSafe(a)}})
e.default=s}),define("hotline-web/helpers/singularize",["exports","ember-inflector/lib/helpers/singularize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default
e.default=s}),define("hotline-web/helpers/t",["exports","ember-intl/helpers/t"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/helpers/timer-event",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Object.extend({type:t.default.EventType.TIMER,state:t.default.EventType.SENT,handler:function(){},delay:3e4,trigger:function(){}})
e.default=s}),define("hotline-web/helpers/wakeup-worker",["exports","hotline-web/helpers/wakeup"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Object.extend({worker:void 0,wakeUpCallbacks:void 0,addCallback:function(e,t){void 0===this.wakeUpCallbacks&&(this.wakeUpCallbacks=Ember.Object.create()),Ember.set(this.wakeUpCallbacks,"WW_"+e,t)},removeCallback:function(e){Ember.set(this.wakeUpCallbacks,"WW_"+e,void 0)},getWorker:function(){return void 0===this.worker&&this.startWorker(this),this.worker},startWorker:function(e){try{var s,n="("+t.default.toString()+")();"
s=window.URL.createObjectURL(new Blob([n])),this.worker=new Worker(s),this.worker&&(this.worker.onmessage=function(t){t&&"wakeup"===t.data&&e.wakeUpHandler()})}catch(a){return null}},wakeUpHandler:function(){if(this.wakeUpCallbacks)for(var e,t,s=Object.keys(this.wakeUpCallbacks),n=0,a=s.length;n<a;n++)e=s[n],t=Ember.get(this.wakeUpCallbacks,e),e&&-1!==e.indexOf("WW_")&&t&&"function"==typeof t&&t()},stopWorker:function(){this.worker.terminate(),this.worker=void 0,this.wakeUpCallbacks=void 0}})
e.default=s}),define("hotline-web/helpers/wakeup",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=(new Date).getTime(),t=this
setInterval(function(){var s=(new Date).getTime()
s>e+1e4&&postMessage.call(t,"wakeup"),e=s},5e3)}}),define("hotline-web/helpers/xor",["exports","ember-truth-helpers/helpers/xor"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"xor",{enumerable:!0,get:function(){return t.xor}})}),define("hotline-web/index",["exports","ember-uuid"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return t.v4}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.v1}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}}),Object.defineProperty(e,"unparse",{enumerable:!0,get:function(){return t.unparse}})}),define("hotline-web/initializers/add-parent-route-name-to-route",["exports"],function(e){function t(){Ember.Route.reopen({getParentRouteName:function(){var e=this.routeName,t=e.lastIndexOf(".")
return e.slice(0,t)},getRootRouteName:function(){var e=this.routeName,t=e.indexOf(".")
return e.slice(0,t)}})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"add-parent-route-name-to-route",initialize:t}
e.default=s})
define("hotline-web/initializers/add-send-request-to-store",["exports","ember-data","hotline-web/utils/send-request"],function(e,t,s){function n(){t.default.Store.reopen({getRequest:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
return this.sendRequest(e,t,s,"GET").catch(function(e){return e})},postRequest:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
return this.sendRequest(e,t,s,"POST")},putRequest:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
return this.sendRequest(e,t,s,"PUT")},sendRequest:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET"
return(0,s.default)(this,e,t,{params:n,requestType:a})},cloneRecord:function(e,t){if(e&&t)for(var s in t)t.hasOwnProperty(s)&&"id"!==s&&Ember.set(e,s,t[s])}})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=n,e.default=void 0
var a={name:"add-send-request-to-store",initialize:n}
e.default=a}),define("hotline-web/initializers/agent",["exports"],function(e){function t(e){["component"].forEach(function(t){e.inject(t,"agentService","service:agent")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"agent",initialize:t}
e.default=s}),define("hotline-web/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","hotline-web/config/environment"],function(e,t,s){var n,a
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s.default.APP&&(n=s.default.APP.name,a=s.default.APP.version)
var i={name:"App Version",initialize:(0,t.default)(n,a)}
e.default=i}),define("hotline-web/initializers/batch",["exports"],function(e){function t(e){["component","controller","model","route","service:rts"].forEach(function(t){e.inject(t,"batch","service:batch")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"batch",initialize:t}
e.default=s}),define("hotline-web/initializers/cache",["exports"],function(e){function t(e){["component","route","service:notification","service:rts"].forEach(function(t){e.inject(t,"cache","service:cache")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"cache",initialize:t}
e.default=s}),define("hotline-web/initializers/component-router-injector",["exports"],function(e){function t(e){e.inject("component","router","router:main")}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"component-router-injector",initialize:t}
e.default=s}),define("hotline-web/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0]
e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}
e.default=s}),define("hotline-web/initializers/custom-inflector-rules",["exports","ember-inflector"],function(e,t){function s(){var e=t.default.inflector
e.uncountable("days"),e.uncountable("operating-hours")}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=s,e.default=void 0
var n={name:"custom-inflector-rules",initialize:s}
e.default=n}),define("hotline-web/initializers/ember-cli-mirage",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={name:"ember-cli-mirage",initialize:function(){}}}),define("hotline-web/initializers/ember-data",["exports","ember-data/setup-container","ember-data"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n={name:"ember-data",initialize:t.default}
e.default=n}),define("hotline-web/initializers/export-application-global",["exports","hotline-web/config/environment"],function(e,t){function s(){var e=arguments[1]||arguments[0]
if(!1!==t.default.exportApplicationGlobal){var s
if("undefined"!=typeof window)s=window
else if("undefined"!=typeof global)s=global
else{if("undefined"==typeof self)return
s=self}var n,a=t.default.exportApplicationGlobal
n="string"==typeof a?a:Ember.String.classify(t.default.modulePrefix),s[n]||(s[n]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete s[n]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=s,e.default=void 0
var n={name:"export-application-global",initialize:s}
e.default=n}),define("hotline-web/initializers/flash",["exports"],function(e){function t(e){["component","controller","model","route"].forEach(function(t){e.inject(t,"flash","service:flash")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"flash",initialize:t}
e.default=s}),define("hotline-web/initializers/hotline",["exports"],function(e){function t(e){["component","controller","adapter","route","service:ruleEngine","service:websocket","service:notification","service:rts"].forEach(function(t){e.inject(t,"hotline","service:hotline")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"hotline",initialize:t}
e.default=s}),define("hotline-web/initializers/i18n",["exports"],function(e){function t(e){["component","controller","model","route"].forEach(function(t){e.inject(t,"intl","service:intl")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"intl",initialize:t}
e.default=s}),define("hotline-web/initializers/inject-store",["exports"],function(e){function t(e){["component","controller","adapter","service:rts"].forEach(function(t){e.inject(t,"store","service:store")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"inject-store",initialize:t}
e.default=s}),define("hotline-web/initializers/jwt",["exports"],function(e){function t(e){["component","route","service:ruleEngine"].forEach(function(t){e.inject(t,"jwt","service:jwt")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"jwt",initialize:t}
e.default=s}),define("hotline-web/initializers/logger",["exports"],function(e){function t(e){["component","controller","route","service:websocket","service:notification","service:rts","service:batch"].forEach(function(t){e.inject(t,"logger","service:logger")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"logger",initialize:t}
e.default=s}),define("hotline-web/initializers/placeholder",["exports"],function(e){function t(e){["component"].forEach(function(t){e.inject(t,"placeholderService","service:placeholder")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"placeholder",initialize:t}
e.default=s}),define("hotline-web/initializers/queue",["exports"],function(e){function t(e){["component","controller","model","route","service:timer"].forEach(function(t){e.inject(t,"queue","service:queue")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"queue",initialize:t}
e.default=s}),define("hotline-web/initializers/record",["exports"],function(e){function t(e){["component","controller","model","route","adapter","serializer","service:ajaxQueue"].forEach(function(t){e.inject(t,"record","service:record")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"record",initialize:t}
e.default=s}),define("hotline-web/initializers/rts",["exports"],function(e){function t(e){["component","controller","model","route","service:jwt"].forEach(function(t){e.inject(t,"rts","service:rts")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"rts",initialize:t}
e.default=s}),define("hotline-web/initializers/session",["exports"],function(e){function t(e){["component","controller","adapter","route","service:ruleEngine","service:notification","service:rts","service:batch"].forEach(function(t){e.inject(t,"session","service:session")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"session",initialize:t}
e.default=s}),define("hotline-web/initializers/setup-sanitizers",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={name:"ember-sanitize-setup-sanitizers",initialize:function(e){e.registerOptionsForType?e.registerOptionsForType("sanitizer",{instantiate:!1}):e.optionsForType("sanitizer",{instantiate:!1})}}}),define("hotline-web/initializers/timer",["exports"],function(e){function t(e){["component","controller","model","route"].forEach(function(t){e.inject(t,"timer","service:timer")})}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=t,e.default=void 0
var s={name:"timer",after:"queue",initialize:t}
e.default=s}),define("hotline-web/instance-initializers/ember-data",["exports","ember-data/initialize-store-service"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s={name:"ember-data",initialize:t.default}
e.default=s}),define("hotline-web/mixins/actions",["exports","jquery","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/subscription","hotline-web/mixins/user-reset","hotline-web/mixins/message","hotline-web/mixins/user","hotline-web/mixins/jwt","hotline-web/mixins/file-upload-helper-mixin","hotline-web/mixins/message-mask-mixin"],function(e,t,s,n,a,i,r,o,l,c,u){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var d=s.default.CONVERSATION,m=Ember.Mixin.create(a.default,i.default,r.default,l.default,o.default,c.default,u.default,{imageAttr:s.default.ImageAttr,data:Ember.computed({get:function(){return Ember.Object.create()}}),fileName:Ember.computed("data.fileData.name",{get:function(){return this.get("data.fileData.name")}}),l2r:Ember.computed.equal("session.config.headerProperty.direction","ltr"),hideChatButton:Ember.computed.alias("session.config.headerProperty.hideChatButton"),fileUploadChange:Ember.observer("content",function(){var e=this.content,t=this.data,n=this.store
!e||e.error?(Ember.setProperties(t,{fileContent:null,fileData:null,fileType:null,attr:null}),this.set("fileReset",null),e&&e.error&&this.flash.showMessage(e.error)):e&&e.fileType===s.default.FILETYPE.IMAGE&&e.data&&e.fileData?Ember.setProperties(t,{fileData:e.fileData,fileType:e.fileType,attr:e.attr,fileContent:n.createRecord("picFile",{dataUrl:e.data})}):e.fileType===s.default.FILETYPE.FILE&&e.fileData&&Ember.setProperties(t,{fileData:e.fileData,fileType:e.fileType,attr:null,fileContent:null}),this.get("hotline.ui.isIOS")||this.element.querySelector(".ce-textarea").focus()}),showPlaceholderText:Ember.computed("ceText",{get:function(){var e=this.ceText||""
return 1===e.length&&"\n"===e&&(e=""),!e.length}}),ceTextHeight:Ember.computed("ceText","conversation.resolvedConversation",{get:function(){var e,t=this.$(".body .h-reply"),s=70
return this.ceText?t&&t.length&&(s=t.outerHeight()):s=70,e=this.get("conversation.resolvedConversation")?0:s,Ember.String.htmlSafe("bottom: "+e+"px")}}),uploadFile:function(e,n){var a,i,r=new FormData,o=this.session,l=o&&o.siteId,c=o&&o.user,u=s.default.EmberModelUrl
e&&e.fileType===s.default.FILETYPE.IMAGE?(a=u.imageUpload.url,r.append("image",e.file),r.append("source",s.default.ImageAttr.source)):e&&e.fileType===s.default.FILETYPE.FILE&&(a=u.fileUpload.url,e.fileName?r.append("file",e.file,e.fileName):r.append("file",e.file)),i=a.replace("{token}",o.token).replace("{userAlias}",c.alias),r.append("name",e.fileAlias),l&&(i+="?siteId=".concat(l)),t.default.ajax({type:"POST",url:i,data:r,cache:!1,contentType:!1,processData:!1}).then(function(e){return n(!e||!e.error,e)},function(e){return n(!1,e.responseJSON)})},updateMessageStatusUsingHopId:function(e,t){var s=e.messageChannelId&&this.get("localds.conversations").findBy("channelId",e.messageChannelId)||e.messageConversationId&&this.get("localds.conversations").findBy("conversationId",e.messageConversationId),n=s&&e.messageHopId&&s.get("messages").findBy("msgHopId",e.messageHopId)
n&&Ember.set(n,"status",t)},isResponseForBot:function(){var e=this.lastMessage,t=this.conversation
return!t||-1===t.get("conversationId")||e&&e.get("messageType")===d.MESSAGE_TYPE.BOT||e&&e.get("messageType")===d.MESSAGE_TYPE.FREDDY_BOT||e.get("messageType")===d.MESSAGE_TYPE.NORMAL&&!e.get("isResponseForBot")},isAllEmoji:function(e){var s,n=e.children()?e.children().length:0,a=0
return e.children().each(function(){if("IMG"!==(s=(0,t.default)(this)).prop("tagName")||!s.hasClass("emojiCe"))return!1
a++}),n===a},isAllBR:function(e){var s,n=e.children()?e.children().length:0,a=0
return e.children().each(function(){if("BR"!==(s=(0,t.default)(this)).prop("tagName")&&"IMG"!==s.prop("tagName")&&"STRONG"!==s.prop("tagName")&&"U"!==s.prop("tagName")&&"I"!==s.prop("tagName"))return!1
a++}),n===a},assertThatFragmentContentsAreNotNull:function(e){for(var t=0,s=e.length;t<s;t++)if("\r\n"===e[t].content)return!1
return!0},parseMessage:function(e){e=e&&e.replace(/<(?!img|br|a|\/a|h1|\/h1|h2|\/h2|u|\/u|i|\/i|b|\/b).*?>/gi,"")
var s=this.$("<div></div>").html(e)
return s?(s.children().each(function(){var e=(0,t.default)(this)
switch(e.prop("tagName")){case"IMG":e.replaceWith(e.attr("alt"))
break
case"BR":e.replaceWith("\r\n")
break
case"G":case"P":e.replaceWith(e.html())}}),s[0]&&s[0].innerHTML?s[0]&&"\r\n"===s[0].innerHTML?s[0].innerHTML:s[0].innerHTML.trim():""):null},emptyContentEditor:function(){if(this.mediumEditor&&this.mediumEditor.elements[0]){var e=this.mediumEditor.elements[0]
e.innerHTML="",this.mediumEditor.events.updateInput(e,{target:e,currentTarget:e})}},getcurrentTextMessage:function(){var e=this.$(".editable")?this.$(".editable"):null,s=this,n=[]
if(e)if(this.isAllEmoji(e)){var a=this.parseMessage(e.html())
a&&n.push({fragmentType:d.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:a})}else if(this.isAllBR(e)){var i=e.html(),r=i&&i.split("<br>")
if(r&&r.length)for(var o=0;o<r.length;o++){var l=s.parseMessage(r[o])
l&&n.push({fragmentType:d.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:l})}}else e.children().each(function(){var e=(0,t.default)(this),a=s.parseMessage(e.html())
if(a)n.push({fragmentType:d.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:a})
else if("IMG"===e.prop("tagName")){var i=s.parseMessage(e)
i&&n.push({fragmentType:d.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:i})}})
return n},postMessageAPI:function(e){var n=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
if(this.isJWTStrictMode){if(this.jwt.auth.expiredAt||this.jwt.auth.scheduled||this.jwt.auth.expired)return
if(this.isJwtExpired())return void this.initiateSendingMode()}var r=this.session,o=r&&r.user,l=r&&r.siteId,c=r&&r.faqTags,u=c&&c.tags,d=s.default.EmberModelUrl.message.url.replace("{token}",r.token).replace("{userAlias}",o.alias),m=this.messages,h=m&&m.toArray(),f=h&&h.length,g=(new Date).getTime()
if(e.faqTags=u,l&&(d+="?siteId=".concat(l)),o.alias){if(m&&(e.triggeredRuleIds=m.reduce(function(e,t){if((t.get("autoRuleId")||t.get("flowId"))&&!t.get("hasBeenRepliedTo")){var s=e&&(e.findBy("ruleId",t.get("autoRuleId"))||e.findBy("flowId",t.get("flowId")))
s&&e.removeObject(s)
var a={timeDiffInMillis:g-t.get("createdMillis")}
t.get("autoRuleId")&&(a.ruleId=t.get("autoRuleId")),t.get("flowId")&&(a.flowId=t.get("flowId"),a.flowVersionId=t.get("flowVersionId"),a.serviceAccountId=t.get("messageUserId")),Ember.get(n.lastMessage,"messageId")||e.push(a),t.set("hasBeenRepliedTo",!0)}return e},[])),m){for(var p=f-1;p>=0;p--){var v=h[p]
v.get("marketingId")&&0!==v.get("messageUserType")&&!v.get("hasBeenRepliedTo")&&(e.marketingReplyId||(e.marketingReplyId=v.get("marketingId")),v.set("hasBeenRepliedTo",!0))}e.marketingReplyId&&this.send("save",!1)}!a&&this.isResponseForBot()&&(e.isResponseForBot=!0),this.rts.healthCheck(),e.socketId=this.rts.getSocketId(),t.default.ajax({type:"POST",url:d,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",processData:!1}).then(function(e){i?n.send("updateMessage",e,!0):n.send("updateMessage",e),n.didMessageSent&&n.didMessageSent()},function(t){var a=t&&t.status||400,i=t&&t.responseJSON&&t.responseJSON.errorCode||null
410===a&&n.deleteUser(),412===a?26===i?n.initiateSendingMode():23===i&&(n.postMessage({action:"user_state_change",status:401,success:!1,data:{userState:s.default.userState.AUTH_INVALID}}),Ember.set(n.auth,"expired",!0),n.jwt.authenticateUser(!1)):n.updateMessageStatusUsingHopId({messageHopId:e.msgHopId,messageChannelId:e.channelId},s.default.MESSAGE_STATUS.NOT_SENT)})}},sendPendingMessages:function(){var e=this,t=this.get("localds.conversations").findBy("channelId",this.channelId)
t&&t.get("messages").forEach(function(t){if(t.get("status")===s.default.MESSAGE_STATUS.PENDING&&0===t.get("messageUserType")){e.jwt.auth.expiredAt||e.jwt.auth.scheduled||e.isJwtExpired()||Ember.set(t,"status",s.default.MESSAGE_STATUS.READY_TO_SEND),e.isJWTEnabled()&&e.isResponseForBot()&&Ember.set(t,"isResponseForBot",!0)
for(var n=t.serialize(),a=n.messageFragments?n.messageFragments:[],i=a.length-1;i>=0;i--)Ember.get(a[i],"fragmentType")===s.default.FILETYPE.IMAGE&&-1!==Ember.get(a[i],"content").indexOf("data:image")&&a.splice(i,1)
e.postMessageAPI(n,!0)}})},setFocus:function(){if(!this.isJWTStrictMode||!this.jwt.auth.expired){var e=this.get("hotline.ui.isDesktop"),t=this.element.querySelector(".ce-textarea")
t&&e&&t.focus()}},allFragmentsAreEmpty:function(e){return(e&&e.length?e:[]).every(function(e){return e.fragmentType===d.FRAGMENT_TYPE.MEETING?!e.startMillis:e.content&&""===e.content.trim()})},handleEventFragment:function(e,t){e&&e.messageFragments&&t&&e.messageFragments.push(t)},createMessageObject:function(e,t){var s=this.get("hotline.ui.parentLocation"),n=this.get("hotline.ui.parentTitle")
return{msgHopId:e+"_"+this.get("hotline.ui.hop"),messageType:t&&t.messageType||d.MESSAGE_TYPE.NORMAL,messageUserType:d.USER_TYPE.USER,location:JSON.stringify({url:s,title:n}),channelId:this.channelId,createdMillis:(new Date).getTime(),messageFragments:[],internalMeta:t&&t.internalMeta,replyTo:t&&t.replyTo}},createOfflineMessageObject:function(e,t){var s=(new Date).getTime(),n=this.createMessageObject(s),a={},i={},r=this.messages,o=[]
if(r&&(r.forEach(function(e){e.get("autoRuleId")&&!e.get("hasBeenRepliedTo")&&(o.push({ruleId:e.get("autoRuleId"),timeDiffInMillis:s-e.get("createdMillis")}),e.set("hasBeenRepliedTo",!0)),e.get("marketingId")&&0!==e.get("messageUserType")&&!e.get("hasBeenRepliedTo")&&(n.marketingReplyId||(n.marketingReplyId=e.get("marketingId")),e.set("hasBeenRepliedTo",!0))}),this.send("save",!1),n.triggeredRuleIds=[],o.forEach(function(e){n.triggeredRuleIds.findBy("ruleId",e.ruleId)||n.triggeredRuleIds.push(e)})),0===t){var l=this.lastOfflineMessageTriggeredTime
this.get("hotline.ui.offlineExperience.contactInfo")===d.CONTACT_INFO.EMAIL?a.offlineReplyType=d.OFFLINE_MESSAGE_TYPE.EMAIL:a.offlineReplyType=d.OFFLINE_MESSAGE_TYPE.PHONE,a.offlineEnabled=!0,i.timeDiffInMillis=(new Date).getTime()-l,i.offlineLocaleId=this.get("hotline.ui.offlineExperience.localeId")}else a.offlineEnabled=!0,i.offlineLocaleId=this.get("hotline.ui.offlineExperience.localeId"),n.msgHopId=(new Date).getTime()+2+"_"+this.get("hotline.ui.hop"),a.offlineReplyType=d.OFFLINE_MESSAGE_TYPE.COMMENT
return n.internalMeta=a,n.offlineTriggerInfo=i,n.messageFragments.push(e),n},offlineMessageAPI:function(e){var n=this
if(this.isJWTStrictMode){if(this.jwt.auth.expiredAt||this.jwt.auth.scheduled||this.jwt.auth.expired)return
if(this.isJwtExpired())return void this.initiateSendingMode()}var a=this.session,i=a&&a.user,r=a&&a.siteId,o=s.default.EmberModelUrl.offlineMessage.url.replace("{token}",a.token).replace("{userAlias}",i.alias)
r&&(o+="?siteId=".concat(r)),t.default.ajax({type:"POST",url:o,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",processData:!1}).then(function(e){var t=n.lastOfflineMessage
t&&t.set("hasBeenRepliedToOffline",!0),t.save(),e.forEach(function(e){n.send("updateMessage",e)})},function(e){n.set("extraParams.isOfflineSendingFailed",!0)
var t=e&&e.status||400,a=e&&e.responseJSON&&e.responseJSON.errorCode||null
410===t&&n.deleteUser(),412===t&&(26===a?n.initiateSendingMode():23===a&&(n.postMessage({action:"user_state_change",status:401,success:!1,data:{userState:s.default.userState.AUTH_INVALID}}),Ember.set(n.auth,"expired",!0),n.jwt.authenticateUser(!1)))})},hasFileAttachment:Ember.computed.equal("data.fileType",2),toggleBusinessClosedBanner:function(e){var t=this,n=this.get("hotline.ui.triggerTimerForBusinessHours")===s.default.messengerVisibilityOptions.businessHours;(this.get("hotline.ui.isIOS")||this.get("hotline.ui.isAndroid"))&&n&&Ember.run.later(function(){t.set("hotline.ui.showBusinessClosedBanner",e)},0)},actions:{sendReadManualCampaignReceipt:function(){var e=this.get("session.token"),n=this.get("session.user"),a=this.get("session.siteId"),i=this.messages,r=this
i&&i.filter(function(e){return e.get("marketingId")&&!e.get("manualCampaignRead")}).forEach(function(i){var o=s.default.EmberModelUrl.updateCampaign,l=i.get("marketingId"),c=0!==i.get("messageUserType")&&l&&o.url.replace("{token}",e).replace("{userAlias}",n.alias).replace("{marketingId}",l)
c&&(c+="?seen=1",a&&(c+="&siteId=".concat(a)),t.default.ajax({type:"PUT",url:c}).then(function(e){e&&e.errorCode||(i.set("manualCampaignRead",!0),r.send("save"))}))})},sendReadCampaignMetric:function(){var e=this,n=this.messages
n&&(n.reduce(function(e,t){t.get("autoRuleId")&&!t.get("autoRuleRead")&&(e.findBy("autoRuleId",t.get("autoRuleId"))||e.push(t))
return e},[]).forEach(function(n){if(n.get("autoRuleId")&&!n.get("autoRuleRead")){var a,i,r=n.get("autoRuleId"),o=e.localds,l=o&&o.get("userBehaviour"),c=(l&&l.get("executedRules")).findBy("ruleId",r),u=c&&c.get("openedCount"),d=s.default.EmberModelUrl,m=e.get("session.token"),h=e.get("session.siteId")
u=u?u+1:1,c&&c.set("openedCount",u),i=u>1?s.default.RuleMetricKeys.clicked:s.default.RuleMetricKeys.uniqueClicked,a=d.tattletale.url.replace("{token}",m).replace("{ruleId}",r).replace("{keys}",i),h&&(a+="&siteId=".concat(h)),t.default.ajax({type:"PUT",url:a,cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){}),n.set("autoRuleRead",!0)}}),this.send("save"))},keyPressDown:function(e,t){var a=this
switch(t.which){case 13:var i=this.data,r=i&&i.fileData,o=i&&i.fileType
!t.shiftKey&&(e||r&&o)&&(t.preventDefault(),t.target.id===s.default.DOM_ID.appReplyEditor?this.willMessageSend&&this.willMessageSend({id:this.channelId,send:!0,replyText:e}):this.send("beforeSendMessage"))
break
default:var l=Ember.get(this,"session.user"),c=l&&l.id
c&&n.default.isFeatureEnabled(Ember.get(this,"hotline.ui.config"),"TYPING_INDICATOR")&&!this.isTyping&&e&&e!==this.typedValue&&(this.rts.sendMessage({userId:c.toString(),channelId:this.channelId,action:"is_typing"}),this.set("typedValue",e),this.set("isTyping",setTimeout(function(){a.isDestroying||a.isDestroyed||a.set("isTyping",void 0)},2e3)))}},beforeSendMessage:function(e,t){if(!this.disableHugeMessageSending&&this.get("hotline.ui.onLine")){var s=this.getcurrentTextMessage(),a=n.default.singleMessageFromTextFragments(s),i=this.validations
if(i&&i.validations){var r=i.validations,o=i.validationtype
if(o&&!n.default.checkReplyValidation(o,a))return this.set("hotline.ui.validationMessage",r[0].validationErrorText),this.openChatWidget(),!1}this.set("hotline.ui.validationMessage",void 0),this.get("session.user.alias")||this.getItemLS("isUserCreateSent")?(this.didReadReceiptSent&&this.send("updateReadReceipt"),this.send("sendMessage",e,t)):(this.set("hasUserToCreate",!0),this.send("createUser",e))}},focusIn:function(){this.set("allowRR",!0),this.send("updateReadReceipt"),this.toggleBusinessClosedBanner(!1)},focusOut:function(){Ember.set(this,"allowRR",!1),this.toggleBusinessClosedBanner(!0)},createMessage:function(e,t){var n=this.localds,a=this.conversations,i=this.conversation,r=this.messages,o=this.messagesCount,l=this.store
if(this.isJWTStrictMode&&this.jwt.auth.expired?Ember.set(t,"status",s.default.MESSAGE_STATUS.UNAUTHENTICATED):Ember.set(t,"status",s.default.MESSAGE_STATUS.PENDING),o)r.pushObject(l.createRecord("message",t)),this.logger.log("Adding Message")
else{var c=Ember.A([])
if(c.pushObject(l.createRecord("message",t)),i=l.createRecord("conversation",{conversationId:-1,channelId:this.channelId,messages:c,readMillis:e}),a)a.pushObject(i)
else{var u=Ember.A([])
u.pushObject(i),n.set("conversations",u)}}this.send("save")},loadBulkEvents:function(){var e=this,n=this.get("session.siteId"),a=s.default.EmberModelUrl.newRecentEvent.url.replace("{token}",this.get("session.token"))
n&&(a+="?siteId=".concat(n)),t.default.ajax({type:"GET",url:a,contentType:"application/json; charset=UTF-8"}).then(function(t){t&&!t.errorCode&&e.logger.log(t)})},sendBulkEvents:function(){var e=this
if(!this.get("session.config.disableEvents")){var n=this.get("userBehaviour.events").map(function(t){var s={}
if(t.get("eventProperties").forEach(function(e){s[e.get("key")]=e.get("value")}),"fc_page"!==t.get("name")||!e.get("session.config.disablePageTransition")||s.force)return{occTime:t.get("createdMillis"),eventName:t.get("name"),properties:s}}),a=this.get("session.siteId"),i=s.default.EmberModelUrl.newMultiEvent.url.replace("{token}",this.get("session.token"))
a&&(i+="?siteId=".concat(a)),t.default.ajax({type:"POST",url:i,data:JSON.stringify(n),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){})}},sendMessage:function(e,t){var n=this,a=this.data,i=(new Date).getTime(),r=e||this.getcurrentTextMessage(),o=a&&a.fileType,l=a&&a.fileData,c=a&&a.attr,u=this.conversation,m=r.length,h=u&&-1!==u.get("conversationId"),f=this.session,g=f&&f.user,p=this.messages,v=this.createMessageObject(i,t)
if(!this.saving&&(l&&o||0!==m&&!this.allFragmentsAreEmpty(r)))if(Ember.set(this,"saving",!0),r[0]&&r[0].fragmentType===d.FRAGMENT_TYPE.MEETING)this.handleEventFragment(v,r[0]),this.postMessageAPI(v),Ember.set(this,"saving",!1)
else if(e&&e[0]&&e[0].fragmentType===d.FRAGMENT_TYPE.QUICKREPLY)v.messageFragments=e,this.postMessageAPI(v),Ember.set(this,"saving",!1)
else{var b=this.getTextFromEditorForClosedOrOpenWidgetState(),E=b&&b.length>=s.default.MessageSpecs.maxLength,y=""
if(l&&o){var w
if(E){var T=this.getTextFilePreviewFragment(b)
v.messageFragments.push(T),y=T.fileName}else m&&this.assertThatFragmentContentsAreNotNull(r)&&(v.messageFragments=this.maskTextForFragments(r))
var S="FILE_ALIAS_"+(new Date).getTime()
o===s.default.FILETYPE.FILE?w={fileAlias:S,fileContentType:l.type,fileName:l.name,fileSize:l.size,fragmentType:d.FRAGMENT_TYPE.FILE}:o===s.default.FILETYPE.IMAGE&&(w={fileAlias:S,contentType:"image/png",fragmentType:d.FRAGMENT_TYPE.IMAGE,content:this.get("data.fileContent.dataUrl"),height:c.height,width:c.width,thumbnail:{contentType:"image/png",content:this.get("data.fileContent.dataUrl"),height:200,width:200}}),v.messageFragments.splice(0,0,w),g&&g.alias?this.uploadFile({file:l,fileType:o,fileAlias:S},function(e,t){if(e)v=n.updateMessageFragmentsAfterFileUpload(v,t),!n.assertThatAllAttachmentsHaveBeenUploaded(v)||!h&&n.isFirstMsgInitiatedForChannel||(Ember.set(n,"isFirstMsgInitiatedForChannel",!0),v=n.updateNotAuthenticatedMessage(v),n.postMessageAPI(v))
else{var a=n.intl,i=a.t("file_attachment_errors.error_uploading_file")
t.error===s.default.FileSecurityStatus.MalwareFile&&(i=a.t("file_attachment_errors.file_contains_malware")),n.flash.showMessage(i),n.updateMessageStatusUsingHopId({messageHopId:v.msgHopId,messageChannelId:v.channelId},s.default.MESSAGE_STATUS.NOT_UPLOADED)}}):this.set("pendingFile",{file:l,fileType:o,fileAlias:S})}else{if(E){var _=this.getTextFilePreviewFragment(b)
v.messageFragments.push(_),y=_.fileName}else m&&(v.messageFragments=this.maskTextForFragments(r))
E||(this.set("isFirstMsgInitiatedForChannel",!0),v=this.updateNotAuthenticatedMessage(v),this.postMessageAPI(v))}v.msgHopId&&p&&p.findBy("msgHopId",v.msgHopId)||this.send("createMessage",i,v),E&&(g&&g.alias?this.uploadTextAndGetFileHash(b,v,y):this.set("pendingUploadTextFileObject",{text:b,fileName:y})),this.set("isTextLimitExceeded",!1),this.emptyContentEditor(),this.focusOnTextarea&&this.focusOnTextarea(),Ember.set(this,"saving",!1),this.send("clearImage"),this.willMessageSent&&this.willMessageSent()}},resendMessage:function(e){if(this.get("hotline.ui.onLine")){var t=this.session,n=t&&t.user,a=e.serialize(),i=this.assertThatAllAttachmentsHaveBeenUploaded(a)
n&&n.alias&&i?(this.updateMessageStatusUsingHopId({messageHopId:e.get("msgHopId"),messageChannelId:e.get("channelId"),messageConversationId:e.get("conversationId")},s.default.MESSAGE_STATUS.RETRYING),this.postMessageAPI(a,!1,!0)):this.logger.log("No user exists or files not uploaded, can't retry sending the message.")}},updateMessage:function(e){var t,a,i,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.localds,l=this.store,c=this.conversations,u=this.conversation,d=this.messages,m=this.messagesCount,h=e&&e.messageId,f=e&&e.msgHopId,g=!1
if(r&&(d=(u=e.conversationId&&this.get("localds.conversations").findBy("conversationId",e.conversationId)||e.conversationChannelId&&this.get("localds.conversations").findBy("channelId",e.conversationChannelId))&&u.get("messages")),!e||3!==e.messageType&&5!==e.messageType||n.default.resizeImage(e),m&&u){-1!==u.get("conversationId")&&u.get("conversationId")||(u.set("conversationId",e.conversationId),g=!0),u.get("status")===s.default.CONVERSATION.CONVERSATION_STATUS.RESOLVED&&e.messageUserType===s.default.CONVERSATION.USER_TYPE.USER&&u.set("status",0),Ember.set(e,"status",s.default.MESSAGE_STATUS.SENT),t=h&&d.findBy("messageId",h)||f&&d.findBy("msgHopId",f),a=d.reduce(function(t,s){var n=e.autoRuleId&&s.get("autoRuleId")===e.autoRuleId,a=e.campaignMessageId?s.get("campaignMessageId")===e.campaignMessageId:!e.flowStepId
return n&&a&&!s.get("hasBeenRepliedTo")&&(t=s),t},void 0),i=d.reduce(function(t,s){return e.stepId&&s.get("flowStepId")===e.flowStepId&&!s.get("hasBeenRepliedTo")&&(t=s),t},void 0)
var p=d.filterBy("offlineMessage",!0).filterBy("hasBeenRepliedToOffline",!1)
if(e&&e.autoRuleId&&p.length&&p[p.length-1].set("hasBeenRepliedToOffline",!0),t&&!r){var v=f&&d.findBy("msgHopId",f),b=e.conversationId&&e.messageId&&v&&v.conversationId!==e.conversationId&&v.messageId!==e.messageId,E=t.conversationId===e.conversationId&&t.messageId===e.messageId&&!t.msgHopId
b&&E&&(d.removeObject(v),this.logger.log("Deleted first message duplicated.")),l.cloneRecord(t,e),this.logger.log("Updating Message")}else if(a)d.removeObject(a),a.destroyRecord(),d.pushObject(l.createRecord("message",e)),this.logger.log("Adding Auto Rule Message")
else if(i)d.removeObject(i),i.destroyRecord(),d.pushObject(l.createRecord("message",e)),this.logger.log("Adding Flow Message")
else{r&&(d.removeObject(t),t.destroyRecord(),this.logger.log("Deleted old resent message."))
var y=l.createRecord("message",e),w=Ember.get(d,"lastObject")
if(w&&Ember.get(w,"messageId")){for(var T=d.length-1;T>=0;T--){var S=d.objectAt(T)
if(Ember.get(S,"createdMillis")<Ember.get(e,"createdMillis")){d.insertAt(T+1,y)
break}}T<0&&d.pushObject(y)}else d.pushObject(y)
this.logger.log("Adding Message")}}else{var _=Ember.A([])
if(Ember.set(e,"status",s.default.MESSAGE_STATUS.SENT),_.pushObject(l.createRecord("message",e)),u=l.createRecord("conversation",{conversationId:e.conversationId,channelId:this.channelId,messages:_,readMillis:e.autoRuleId?0:e.createdMillis}),c)c.pushObject(u)
else{var M=Ember.A([])
M.pushObject(u),o.set("conversations",M)}}e.autoRuleId||e.offlineMessage||o.set("messageAfter",e.createdMillis),this.send("save",!t||r),g&&this.sendPendingMessages(),this.notifyPropertyChange("totalUnreadCount")},sendPendingMessagesAfterAuthenticated:function(){this.sendPendingMessages()},updateMessageAsNotAuthenticated:function(){var e=this.get("localds.conversations").findBy("channelId",this.channelId)
e&&e.get("messages").forEach(function(e){e.get("status")!==s.default.MESSAGE_STATUS.PENDING&&e.get("status")!==s.default.MESSAGE_STATUS.READY_TO_SEND||Ember.set(e,"status",s.default.MESSAGE_STATUS.UNAUTHENTICATED)})},updateMessageAsPending:function(){var e=this.get("localds.conversations").findBy("channelId",this.channelId)
e&&e.get("messages").forEach(function(e){e.get("status")===s.default.MESSAGE_STATUS.READY_TO_SEND&&Ember.set(e,"status",s.default.MESSAGE_STATUS.PENDING)})},sendOfflineMessages:function(e){var t=this,s=Ember.A([])
this.get("session.user.alias")||this.getItemLS("isUserCreateSent")?(e.forEach(function(e,n){s.push(t.createOfflineMessageObject(e,n))}),this.offlineMessageAPI(s)):(this.set("hotline.ui.offlineMessagesFragments",e),this.send("createUser"))},sendCalendarMessage:function(e,t){this.get("session.user.alias")||this.getItemLS("isUserCreateSent")?this.sendMessage(e,t):(this.set("hotline.ui.calendarMessage",{customFragments:e,customMessageProperties:t}),this.send("createUser"))},updateReadReceipt:function(){var e,t=this,a=this.localds,i=this.conversation,r=this.lastServerSentMessage,o=this.lastAgentMessage,l=this.session,c=this.store,u=l&&l.user,d=l&&l.siteId,m=s.default.EmberModelUrl.read
if(this.send("sendReadCampaignMetric"),this.send("sendReadManualCampaignReceipt"),o&&n.default.isFeatureEnabled(this.get("hotline.ui.config"),"READ_RECEIPTS")){var h=i.get("channelId"),f=i.get("conversationId"),g=f&&i.get("readMillis")||0,p=o.get("createdMillis"),v=r&&r.get("createdMillis"),b=i.get("markedReadMillis")
if(this.allowRR&&(g<p||null===b||b!==p)){if(e={channelId:h,conversationId:f,userId:u.id,readUpto:p},f>0){var E=m.url.replace("{token}",l.token).replace("{userAlias}",u.alias)
d&&(E+="?siteId=".concat(d)),c.postRequest(m.model,E,e).then(function(){t.postMessage({action:"read_receipts_update",status:200,success:!0,data:{read:{channelId:h,conversationId:f,userId:u.id,readUpto:p}}})})}Ember.get(o,"needsUpdation")&&Ember.get(o,"flowStepId")?a.set("messageAfter",p-1e3):a.set("messageAfter",v),i.set("readMillis",p),i.set("markedReadMillis",p),this.send("save"),this.didReadReceiptSent&&this.didReadReceiptSent()}}},imageSelect:function(){this.$("#"+this.fileId).click()},clearImage:function(){this.set("fileReset",null),this.set("content",null)}}})
e.default=m}),define("hotline-web/mixins/activity",["exports","hotline-web/utils/dom-utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({onUnloadActivityCB:Ember.computed({get:function(){return this.onUnloadActivity.bind(this)}}),onUnloadActivity:function(){this.unbindEvents()},bindActivityEvents:function(){window&&(t.default.unbindEvent(window,"beforeunload",this.onUnloadActivityCB),t.default.bindEvent(window,"beforeunload",this.onUnloadActivityCB),this.logger.log("Activity Binding"))},unbindActivityEvents:function(){window&&(t.default.unbindEvent(window,"beforeunload",this.onUnloadActivityCB),this.logger.log("Activity Unbinding"))},unbindEvents:function(){var e=this.session,t=e&&e.user
t&&t.alias&&(Ember.set(e,"user",{}),this.logger.log("Session Cleared"))}})
e.default=s}),define("hotline-web/mixins/article-load",["exports","jquery","hotline-web/config/environment","hotline-web/utils/constants"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Mixin.create({loadFAQS:function(){var e=this.faqs
e&&e.get("lastModifiedAt")&&this.fetchFaqs||this.loadData()},loadLunrLanguage:function(e){if(e&&n.default.LunrLanguage[e]){var a=n.default.LunrLanguage[e]
t.default.ajax({method:"GET",url:s.default.EmberENV.cdnUrl+a,dataType:"script"})}},loadData:function(){var e=this,t=Ember.get(this,"localds.dsFaq"),s=t&&t.get("lastModifiedAt"),n=t&&t.get("contentLocale"),a=(new Date).getTime().toString()
s&&this.set("hotline.ui.lastModifiedFaqsAt",s),n&&(this.set("hotline.ui.lastLocaleId",n.localeId),this.loadLunrLanguage(n.displayCode)),this.store.findRecord("faq",a,{reload:!0}).then(function(t){var s=t.get("contentLocale"),a=s&&s.displayCode
n||(e.set("hotline.ui.lastLocaleId",s&&s.localeId),e.loadLunrLanguage(a)),204!==t.get("status")&&(e.set("fetchFaqs",!0),200===t.get("status")&&e.processData(t))})},processData:function(e){var t=this,s=e&&e.get("categories"),n=this.localds,a=Ember.get(this,"session.user"),i=Ember.A([])
Ember.set(e,"category",void 0),s.forEach(function(e){var s=e.serialize(),n=e.get("articles"),a=Ember.A([])
n.forEach(function(e){a.pushObject(t.store.createRecord("dsArticle",e.serialize()))}),s.dsArticles=a,i.pushObject(t.store.createRecord("dsCategory",s))}),Ember.set(n,"dsFaq",this.store.createRecord("dsFaq",{dsCategories:i,contentLocale:e.get("contentLocale"),lastModifiedAt:e.get("lastModifiedAt")})),Ember.set(a,"dontfetchFaqsAgain",!0),this.send("save",!1)}})
e.default=a}),define("hotline-web/mixins/brand-check-mixin",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({hidePoweredBy:Ember.computed("session.config.hidePoweredBy","hotline.ui.config.showPoweredBy",{get:function(){return!0!==Ember.get(this,"hotline.ui.config.showPoweredBy")||!0===Ember.get(this,"session.config.hidePoweredBy")}})})
e.default=t}),define("hotline-web/mixins/calendar-mixin",["exports","hotline-web/utils/dayjs","hotline-web/utils/timezone","hotline-web/utils/constants","hotline-web/mixins/conversation"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=n.default.CALENDAR.SESSIONS,r=Ember.Mixin.create(a.default,{firstFreeTimeSlots:Ember.computed("sessionalizedCalendarSlots",{get:function(){return this.sessionalizedCalendarSlots[0]}}),meetingLengthAsMillis:Ember.computed("meetingLength",{get:function(){return this.meetingLength&&1e3*this.meetingLength}}),userDefaultTimeZone:Ember.computed({get:function(){return s.default.guess()}}),userTimeZoneToUse:Ember.computed("userDefaultTimeZone","userCustomTimeZone",{get:function(){return this.userCustomTimeZone||this.userDefaultTimeZone}}),meetingLengthAsString:Ember.computed("meetingLength",{get:function(){var e=this.meetingLength,t=this.intl.t("calendar.duration")
return e?t+": "+this.getTimeDiffAsString(e):""}}),getTimeDiffAsString:function(e){var t=Math.floor(e/3600),s=e%3600,n=Math.floor(s/60),a=this.intl.t("calendar.mins"),i=this.intl.t("calendar.hrs")
return n>0&&t>0?t.toString()+" "+i+" "+n.toString()+" "+a:t>0?t.toString()+" "+i:n>0?n.toString()+" "+a:void 0},sessionalizedCalendarSlots:Ember.computed("serializedCalendarSlots","userTimeZoneToUse",{get:function(){var e=this.serializedCalendarSlots,t=this.userTimeZoneToUse
return e&&t?this.splitSlotsToSessions(e,t):[]}}),serializedCalendarSlots:Ember.computed("freeSlots","userTimeZoneToUse",{get:function(){var e=this.freeSlots,t=this.userTimeZoneToUse,s=this.meetingLengthAsMillis
return this.convertSlotsDaywise(e,s,t)}}),getDifferenceOfDaysOnMonthChange:function(e,t){var s=new Date(e),n=new Date(t)
return Math.round(Math.abs((s.getTime()-n.getTime())/864e5))},convertSlotsDaywise:function(e,n,a){for(var i=[],r=e&&e.get("length"),o=-1,l=0;l<r;l++){var c=e.objectAt(l),u=c.get("from"),d=c.get("to"),m=(0,t.default)(s.default.convert(u,a)).date(),h=(0,t.default)(s.default.convert(d,a)).date()
if(h<m){var f=this.getDifferenceOfDaysOnMonthChange(u,d)
this.splitMultipleDaysToTimeSlots(f,u,d,m,o,n,i,a)}else if(h===m){var g=this.getDaySlotsWithDate(i,u,a)
if(m===o&&g){var p=this.transformSlotToSubslots(u,d,n,a)
if(p&&p.length>0){var v=i[i.length-1],b=v.slots
v.slots=b.concat(p)}}else{var E=this.transformSlotToSubslots(u,d,n,a)
if(E&&E.length>0){var y={date:(0,t.default)(s.default.convert(u,a)).format("LL"),weekday:this.convertMillisToWeekday(u,a),slots:E}
i.push(y)}}}else{var w=h-m
this.splitMultipleDaysToTimeSlots(w,u,d,m,o,n,i,a)}o=h}return i},getDaySlotsWithDate:function(e,n,a){return e&&n?e.findBy("date",(0,t.default)(s.default.convert(n,a)).format("LL")):(this.logger.log("No given slot or date found to get calendar day for."),null)},splitMultipleDaysToTimeSlots:function(e,n,a,i,r,o,l,c){for(var u=-1,d=0;d<e;d++){if(0===d){var m=this.endOfDayInMillis(n,c)
if(i===r){var h=this.transformSlotToSubslots(n,m,o,c),f=this.getDaySlotsWithDate(l,n,c)
if(h&&h.length>0&&f){var g=l[l.length-1],p=g.slots
g.slots=p.concat(h)}else if(h&&h.length>0){var v={date:(0,t.default)(s.default.convert(n,c)).format("LL"),weekday:this.convertMillisToWeekday(n,c),slots:h}
l.push(v)}}else{var b=this.transformSlotToSubslots(n,m,o,c),E=this.getDaySlotsWithDate(l,n,c)
if(b&&b.length>0&&E){var y={date:(0,t.default)(s.default.convert(n,c)).format("LL"),weekday:this.convertMillisToWeekday(n,c),slots:b}
l.push(y)}else if(b&&b.length>0){var w={date:(0,t.default)(s.default.convert(n,c)).format("LL"),weekday:this.convertMillisToWeekday(n,c),slots:b}
l.push(w)}}u=m}if(d===e-1){var T=u+1,S=this.transformSlotToSubslots(T,a,o,c),_=this.getDaySlotsWithDate(l,T,c)
if(S&&S.length>0&&_){var M={date:(0,t.default)(s.default.convert(T,c)).format("LL"),weekday:this.convertMillisToWeekday(T,c),slots:S}
l.push(M)}else if(S&&S.length>0){var I={date:(0,t.default)(s.default.convert(T,c)).format("LL"),weekday:this.convertMillisToWeekday(T,c),slots:S}
l.push(I)}}else{var C=u+1,A=this.endOfDayInMillis(C,c),O=this.transformSlotToSubslots(C,A,o,c),x=this.getDaySlotsWithDate(l,C,c)
if(O&&O.length>0&&x){var N={date:(0,t.default)(s.default.convert(C,c)).format("LL"),weekday:this.convertMillisToWeekday(C,c),slots:O}
l.push(N)}else if(O&&O.length>0){var k={date:(0,t.default)(s.default.convert(C,c)).format("LL"),weekday:this.convertMillisToWeekday(C,c),slots:O}
l.push(k)}u=A}}},transformSlotToSubslots:function(e,n,a,i){e=this.roundOffMillisToNearestQuarter(e,!0),n=this.roundOffMillisToNearestQuarter(n,!1)
for(var r=[];e+a<=n;)r.push({from:e,fromAsTime:(0,t.default)(s.default.convert(e,i)).format("LT")}),e+=a
return r},roundOffMillisToNearestQuarter:function(e,t){var s=n.default.CALENDAR.TIMESLOT_ROUNDOFF,a=e%s
return a!==s-1&&(e-=a),t&&a?e+9e5:e},endOfDayInMillis:function(e,n){return new Date((0,t.default)(s.default.convert(e,n)).add(1,"days").format("MM DD YYYY")).getTime()-1},convertMillisToWeekday:function(e,n){return e?(0,t.default)().format("l")===(0,t.default)(s.default.convert(e,n)).format("l")?"Today":(0,t.default)().add(1,"days").format("l")===(0,t.default)(s.default.convert(e,n)).format("l")?"Tomorrow":(0,t.default)(s.default.convert(e,n)).format("dddd"):null},scrollToBottomWithDelay:function(e){var t=this
e||(e=0),setTimeout(function(){t.scrollToBottom()},e)},scrollToLastCalendarPicker:function(e){e||(e=0),setTimeout(function(){var e=document.getElementsByClassName("calendar-picker-minified"),t=e&&e.length
t>0&&e[t-1].scrollIntoView(!0)},e)},getSessionFromHour:function(e){if(e>=0&&e<=23)return e>=0&&e<=11?n.default.CALENDAR.SESSIONS.MORNING:e>=12&&e<=15?n.default.CALENDAR.SESSIONS.AFTERNOON:e>=16&&e<=19?n.default.CALENDAR.SESSIONS.EVENING:n.default.CALENDAR.SESSIONS.NIGHT},getCSSClassForSession:function(e){if(e){if(e===i.MORNING)return"ic-calendar-session morning icon-ic_morning"
if(e===i.AFTERNOON)return"ic-calendar-session afternoon icon-ic_afternoon"
if(e===i.EVENING)return"ic-calendar-session evening icon-ic_evening"
if(e===i.NIGHT)return"ic-calendar-session night icon-ic_night"}},createAndPushSlotIntoSession:function(e,t,s){return t&&e&&s&&(e===n.default.CALENDAR.SESSIONS.MORNING?(t.morningSlots=[],t.morningSlots.push(s)):e===n.default.CALENDAR.SESSIONS.AFTERNOON?(t.afternoonSlots=[],t.afternoonSlots.push(s)):e===n.default.CALENDAR.SESSIONS.EVENING?(t.eveningSlots=[],t.eveningSlots.push(s)):e===n.default.CALENDAR.SESSIONS.NIGHT&&(t.nightSlots=[],t.nightSlots.push(s))),t},pushSlotIntoSession:function(e,t,s){return e&&t&&s&&(e===n.default.CALENDAR.SESSIONS.MORNING?t.morningSlots.push(s):e===n.default.CALENDAR.SESSIONS.AFTERNOON?t.afternoonSlots.push(s):e===n.default.CALENDAR.SESSIONS.EVENING?t.eveningSlots.push(s):e===n.default.CALENDAR.SESSIONS.NIGHT&&t.nightSlots.push(s)),t},splitSlotsToSessions:function(e,n){if(e){for(var a=[],i=e.length,r=0;r<i;r++){for(var o=e[r],l=o&&o.slots,c=-1,u=l.length,d={date:o.date,weekday:o.weekday},m=0;m<u;m++){var h=l[m],f=h.from,g=(0,t.default)(s.default.convert(f,n)).hour(),p=this.getSessionFromHour(g)
!p||p===c&&0!==m?p&&(d=this.pushSlotIntoSession(p,d,h)):d=this.createAndPushSlotIntoSession(p,d,h),c=p}a.push(d)}return a}}})
e.default=r})
define("hotline-web/mixins/channel",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({channelId:Ember.computed("model.channelId",{get:function(){return parseInt(this.get("model.channelId"),10)}}),channel:Ember.computed("channelId","model.channels",{get:function(){var e=this.get("model.channels"),t=this.channelId
return e&&e.find(function(e){return e.channelId===t})}}),appDisplayName:Ember.computed("session.appDisplayName",{get:function(){return this.get("session.appDisplayName")}}),channelMessage:Ember.computed("channel","session.appDisplayName",{get:function(){var e=this.get("channel.welcomeMessage"),s=e&&this.store.createRecord("message",{messageFragments:e.messageFragments})
return s.set("messageUserName",this.get("session.appDisplayName")),s.set("messageUserType",t.default.CONVERSATION.USER_TYPE.CHANNEL),s}})})
e.default=s}),define("hotline-web/mixins/conversation-load",["exports","hotline-web/utils/utils","hotline-web/utils/constants","hotline-web/mixins/message"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=s.default.CONVERSATION.MESSAGE_TYPE.IMAGE,i=Ember.Mixin.create(n.default,{getOfflineMessage:function(e,t){return e.find(function(e){return e.get("source")===t.source&&0!==e.get("messageUserType")&&e.get("needsUpdation")})},messageStacker:Ember.inject.service(),loadConversation:function(e){var n,i,r,o,l,c,u,d,m,h,f,g,p,v,b,E,y,w,T=e&&e.length,S=this.conversations,_=this.totalCount,M=this.store,I=this.localds,C=this.session,A=C&&C.appId,O=C&&C.externalId,x=[],N=0
if(_)for(n=0;n<T;n++)if(h=(d=e[n])&&d.messages,u=(c=d&&d.readReceiptMobileUser)&&c.readUntil,f=h&&h.length,o=S.findBy("channelId",d.channelId),f){(m=h[f-1].createdMillis)>N&&(N=m)
var k=(l=o&&o.get("messages")||Ember.A([])).filterBy("offlineMessage",!0).filterBy("hasBeenRepliedToOffline",!1),R=k&&k.length,P=R&&k[R-1]?k[R-1].createdMillis:0
if(R){var j=h&&h.filterBy("messageUserType",s.default.CONVERSATION.USER_TYPE.AGENT),U=j&&j.length;(U&&j[U-1]?j[U-1].createdMillis:0)>P&&R&&k[R-1].set("hasBeenRepliedToOffline",!0)}for(i=0;i<f;i++){(E=h[i]).channelId=d.channelId,g=E&&E.messageId,p=E&&E.marketingId,v=E&&E.campaignMessageId,w=E&&E.msgHopId,-1!==a.indexOf(E.messageType)&&t.default.resizeImage(E)
var L=v&&l.findBy("campaignMessageId",v),D=p&&l.findBy("marketingId",p)
b=g&&l.findBy("messageId",g)||w&&h.findBy("msgHopId",w)||(v?D&&L:D)
var F=void 0
E&&E.ruleId&&0!==E.messageUserType&&(F=t.default.updateAndGetLastAutoMessage(l,E))
var B=void 0
E&&E.flowStepId&&0!==E.messageUserType&&(B=t.default.updateAndGetLastFlowMessage(l,E))
var H=void 0
if(E&&E.source===s.default.CONVERSATION.MESSAGE_SOURCE.OFFLINE&&0!==E.messageUserType&&(H=this.getOfflineMessage(l,E)),E.alias&&!E.delivered&&(E.delivered=!0,x.push(E.alias)),E&&E.messageType===s.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ENDED&&window.parent&&this.postMessage({event_id:"cobrowsingStop"}),b)M.cloneRecord(b,E),this.logger.log("Updating Message")
else if(F)M.cloneRecord(F,E),this.logger.log("Updated automessage from conversation Load")
else if(B)M.cloneRecord(B,E),this.logger.log("Updated flow from conversation Load")
else if(H)M.cloneRecord(H,E),H.set("needsUpdation",!1),this.logger.log("Updated offlinemessage from conversation Load")
else{var V=M.createRecord("message",E),G=Ember.get(l,"lastObject")
if(G&&Ember.get(G,"messageId")){for(var q=l.length-1;q>=0;q--){var z=l.objectAt(q)
if(Ember.get(z,"createdMillis")<Ember.get(E,"createdMillis")){l.insertAt(q+1,V)
break}}q<0&&l.pushObject(V)}else l.pushObject(V)
this.logger.log("Adding Message"),E.messageUserType!==s.default.CONVERSATION.USER_TYPE.AGENT||E.ruleId||this.displayChannels.findBy("channelId",d.channelId)&&this.messageStacker.setLastAgentMessage(E)}}o?(o.set("readMillis",u||o.get("readMillis")||m),o.set("hasPendingCsat",d.hasPendingCsat),Ember.isBlank(d.csat)||o.set("csat",M.createRecord("csat",d.csat))):(o=M.createRecord("conversation",{conversationId:d.conversationId,channelId:d.channelId,messages:l,readMillis:u||m,hasPendingCsat:d.hasPendingCsat,csat:M.createRecord("csat",d.csat)}),S.pushObject(o))}else o.set("hasPendingCsat",d.hasPendingCsat),Ember.isBlank(d.csat)||o.set("csat",M.createRecord("csat",d.csat))
else for(r=0;r<T;r++)if(h=(d=e[r])&&d.messages,u=(c=d&&d.readReceiptMobileUser)&&c.readUntil,(y=(f=h&&h.length)?h[f-1]:null)&&((m=y.createdMillis)>N&&(N=m),!d.readMillis)){var Y,W=h.length
for(l=Ember.A([]),d.readMillis=u||this.getUserLastMsgCreatedMillis(h),Y=0;Y<W;Y++)(E=h[Y]).channelId=d.channelId,-1!==a.indexOf(E.messageType)&&t.default.resizeImage(E),E.messageId&&!E.delivered&&(E.delivered=!0,x.push(E.alias)),l.pushObject(M.createRecord("message",E)),E.messageUserType===s.default.CONVERSATION.USER_TYPE.AGENT&&!E.ruleId&&d.readMillis<E.createdMillis&&this.displayChannels.findBy("channelId",d.channelId)&&this.messageStacker.setLastAgentMessage(E)
d.messages=l,Ember.isBlank(d.csat)||(d.csat=M.createRecord("csat",d.csat)),o=M.createRecord("conversation",d),S.pushObject(o)}I.set("appId",A),I.set("externalId",O),I.set("seq.id",0),N&&(I.set("messageAfter",N),I.set("seq.millis",N)),this.send("save"),this.hotline.broadcastConversationLoaded()},getUserLastMsgCreatedMillis:function(e){var t,n,a
return(a=(n=(t=e.filter(function(e){return e.messageUserType===s.default.CONVERSATION.USER_TYPE.USER}))&&t.length)?t[n-1]:null)?a.createdMillis:null},actions:{ackMessageInRTS:function(e,t){var s=this
t&&this.rts.sendAck(e,t,function(e,t){s.logger.log(e||t)}),e&&e.alias&&e.messageUserId&&this.send("ackMessageInFC",e.alias)},ackMessageInFC:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:""
if(e=t.default.coercer(e)){var n=s.default.EmberModelUrl.messageACK,a=this.session,i=a&&a.user,r=n.url.replace("{token}",a.token).replace("{userAlias}",i.alias),o=a&&a.siteId
o&&(r+="?siteId=".concat(o)),this.store.postRequest(n.model,r,{messageAlias:e,time:(new Date).getTime(),socketId:this.rts.getSocketId()})}}}})
e.default=i}),define("hotline-web/mixins/conversation",["exports","jquery","hotline-web/mixins/datastore","hotline-web/utils/constants","hotline-web/utils/dom-utils"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Mixin.create(s.default,{validationTextMessage:null,canShowChannelFlowForBusinessHourSetting:Ember.computed("channelInfo.flowBusinessHourType",{get:function(){var e=!1
switch(this.get("channelInfo.flowBusinessHourType")){case n.default.CHANNEL_BOT_BUSINESS_HOURS.BUSINESS_HOUR_INSIDE:e=!this.isChannelOutsideBusinessHour
break
case n.default.CHANNEL_BOT_BUSINESS_HOURS.BUSINESS_HOUR_ALWAYS:e=!0
break
case n.default.CHANNEL_BOT_BUSINESS_HOURS.BUSINESS_HOUR_OUTSIDE:e=this.isChannelOutsideBusinessHour}return e}}),conversation:Ember.computed("conversations.@each","channelId",{get:function(){var e=this.conversations,t=this.channelId,s=t&&parseInt(t,10)
return e&&e.findBy("channelId",s)}}),readMillis:Ember.computed("messages.@each","conversation.readMillis",{get:function(){return this.get("conversation.readMillis")}}),messages:Ember.computed("conversation.messages",{get:function(){return this.get("conversation.messages")}}),messagesCount:Ember.computed("messages.@each",{get:function(){return this.get("messages.length")}}),messagesCountWithMessageId:Ember.computed("messages.@each",{get:function(){var e=this.messages&&this.messages.filterBy("messageId")
return e&&Ember.get(e,"length")}}),lastMessage:Ember.computed("messages.@each",{get:function(){var e=this.messages,t=this.messagesCount
return e&&t?e.objectAt(t-1):null}}),isOngoingFlow:Ember.computed("conversation.status","messages.length",{get:function(){if(Ember.get(this,"conversation.status")===n.default.CONVERSATION.CONVERSATION_STATUS.FREDDY_BOT)return!0
var e=!1
if((this.currentConversationStatus===n.default.CONVERSATION.CONVERSATION_STATUS.RESOLVED||!this.messagesCountWithMessageId)&&this.messages&&this.get("messages.length")&&this.get("messages.length")>1){var t=this.messages.objectAt(this.get("messages.length")-2)
Ember.get(t,"flowStepId")&&Ember.get(t,"autoRuleId")&&(e=!0)}return e}}),hasUnrepliedFlowMessages:Ember.computed.gt("unrepliedFlowMessages.length",0),unrepliedFlowMessages:Ember.computed("messages.[]",{get:function(){return this.messages&&this.messages.filter(function(e){return Ember.get(e,"flowId")&&!Ember.get(e,"messageId")&&!Ember.get(e,"hasBeenRepliedTo")})}}),canTriggerFlow:function(){var e=(new Date).getTime(),t=this.lastMessage,s=t&&Ember.get(t,"createdMillis")
return s&&e-s>n.default.SessionTimeOut},removeFlowMessages:function(){var e,t=this.conversation,s=this.localds;(e=t.get("messages").toArray().filter(function(e){return!(e.get("flowId")&&!e.get("messageId"))})).length?t.set("messages",e):this.conversations.removeObject(t)
s.save()},channelInfo:Ember.computed("channelId",{get:function(){var e=this.channelId,t=e&&parseInt(e,10),s=this.channels
return s&&s.findBy("channelId",t)}}),offlineMessages:Ember.computed("messages.@each",{get:function(){return this.messages&&this.messages.filterBy("offlineMessage",!0)}}),lastOfflineMessage:Ember.computed("offlineMessages.[]",{get:function(){var e=this.offlineMessages,t=e&&e.length
return e&&t?e.objectAt(t-1):null}}),lastUserMessage:Ember.computed("messages.@each",{get:function(){var e=this.messages&&this.messages.filterBy("messageUserType",0),t=e&&e.length
return e&&t?e.objectAt(t-1):null}}),lastOfflineMessageTriggeredTime:Ember.computed("lastOfflineMessage",{get:function(){var e=this.lastOfflineMessage
return e?e.get("createdMillis"):null}}),lastUserMessageTime:Ember.computed("lastUserMessage",{get:function(){var e=this.lastUserMessage
return e?e.get("createdMillis"):null}}),hasUnrepliedOfflineMessage:Ember.computed("repliedToLastOfflineMessage","conversationOfflineMessagesCount",{get:function(){return this.conversationOfflineMessagesCount&&!this.repliedToLastOfflineMessage}}),repliedToLastOfflineMessage:Ember.computed("lastOfflineMessage.hasBeenRepliedToOffline",{get:function(){var e=this.lastOfflineMessage
return!!e&&(e&&e.get("hasBeenRepliedToOffline"))}}),conversationOfflineMessagesCount:Ember.computed("offlineMessages.[]",{get:function(){var e=this.offlineMessages
return e&&e.length}}),removelastOfflineMessage:function(){var e=this.conversation,t=this.localds,s=e.get("messages").toArray();(s.forEach(function(e){!0===e.get("offlineMessage")&&!1===e.get("hasBeenRepliedToOffline")&&(s.removeObject(e),e.destroyRecord())}),s.length)?s&&s.length&&e.set("messages",s):this.conversations.removeObject(e)
t.save()},lastServerSentMessage:Ember.computed("messages.@each",{get:function(){var e=this.messages,t=this.messagesCount,s=e&&e.toArray()
if(s&&t)for(var n=s.length-1;n>=0;n--)if(!s[n].get("needsUpdation"))return s[n]
return null}}),lastAgentMessage:Ember.computed("messages.@each.messageId",{get:function(){var e=this.messages,t=this.messagesCount
if(e&&t)for(var s=t-1;s>=0;s--){var n=e.objectAt(s)
if(n&&n.get("messageUserType"))return n}return null}}),isLastUserMessageTimeExceeded:function(){var e=this.lastUserMessageTime,t=(new Date).getTime()
return!!e&&t-e>=n.default.UserMessageTimeDifference.time},currentConversationStatus:Ember.computed("conversation.status",{get:function(){var e=this.conversation
return e&&e.status?e&&e.status:0}}),currentConversationhasPendingCsat:Ember.computed("conversation.hasPendingCsat",{get:function(){var e=this.conversation
return!(!e||!e.hasPendingCsat)&&e.hasPendingCsat}}),conversationCalendarMessages:Ember.computed("messages.@each.internalMeta.calendarInviteId",{get:function(){return this.messages&&this.messages.filterBy("internalMeta.calendarInviteId")}}),unreadCount:Ember.computed("messages.@each","readMillis","conversation.channelId",{get:function(){var e=this.get("conversation.channelId")&&this.readMillis||0,t=this.messages,s=this.messagesCount,n=0
if(s)if(e)for(var a=s-1;a>=0;a--){var i=t.objectAt(a),r=i&&i.get("messageUserType"),o=i&&i.get("createdMillis")
if(r){if(!(o>e))break
n+=1}}else n=s
return n}}),unreadMarketingMessages:Ember.computed("messages.@each","unreadCount","readMillis","conversation.conversationId",{get:function(){var e=this.unreadCount,t=[]
if(e)for(var s=this.messages,n=this.messagesCount,a=1;a<=e;a++){var i=s.objectAt(n-a)
i&&i.get("messageUserType")&&i.get("marketingId")&&t.push(i)}return t}}),unreadMarketingMessagesCount:Ember.computed("unreadMarketingMessages.@each",{get:function(){var e=this.unreadMarketingMessages
return e&&e.length}}),hideName:Ember.computed.alias("session.config.agent.hideName"),hidePic:Ember.computed("session.config.agent.{hideName,hidePic}",{get:function(){return Ember.get(this,"session.config.agent.hideName")||Ember.get(this,"session.config.agent.hidePic")}}),upcomingCalendarEventMessage:Ember.computed("messages.@each",{get:function(){var e=this.messages,t=e&&e.filterBy("messageFragments.firstObject.fragmentType",n.default.CONVERSATION.FRAGMENT_TYPE.MEETING)
t=t&&t.filterBy("internalMeta.calendarMessageMeta.retryCalendarEvent",!1)
var s=[]
t&&t.forEach(function(e){s.push(e.get("messageFragments")[0])}),s=s.sortBy("startMillis")
for(var a=0;a<s.length;a++){if(s[a].startMillis>(new Date).getTime())return t.findBy("messageFragments.firstObject.eventId",s[a].eventId)}return null}}),hideBio:Ember.computed("session.config.agent.{hidePic,hideBio}",{get:function(){return Ember.get(this,"session.config.agent.hidePic")||Ember.get(this,"session.config.agent.hideBio")}}),isArticleListType:Ember.computed("message.messageFragments",{get:function(){var e=this.get("message.messageFragments")
if(e&&e.length>0)for(var t=0;t<e.length;t++){var s=e[t]
if(s&&s.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.COLLECTION)return!0}return!1}}),isArticleFeedbackMessage:function(e){return!!(e&&e.length>0)&&(e.lastObject.fragmentType===n.default.CONVERSATION.FRAGMENT_TYPE.COLLECTION&&e.lastObject.fragments&&e.lastObject.fragments.lastObject.fragmentType===n.default.CONVERSATION.FRAGMENT_TYPE.CALLBACK)},isDropDownMessage:function(e){var t=e&&e[0]
return t&&t.fragmentType===n.default.CONVERSATION.FRAGMENT_TYPE.DYNAMIC_TEMPLATE_CONTENT&&t.templateType===n.default.TemplateType.QUIC_REPLY_DROPDOWN},isCarouselMessage:function(e){var t=e&&e[0],s=t&&t.fragmentType,a=t&&t.templateType
return s===n.default.CONVERSATION.FRAGMENT_TYPE.DYNAMIC_TEMPLATE_CONTENT&&a===n.default.TemplateType.CAROUSEL},isCustomComposer:function(e,t){if(e&&e.length>0){var s=e[0]
return s.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.COLLECTION||s.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.DYNAMIC_TEMPLATE_CONTENT}return!!this.isArticleFeedbackMessage(t)},defaultComposer:Ember.computed("lastMessage",{get:function(){var e=this
this.set("exampletextMessage",""),this.set("validationTextMessage",""),this.set("validations",null)
var t=this.lastMessage,s=t&&this.isArticleFeedbackMessage(t.get("messageFragments"))
if(t&&(t.get("replyFragments")||s)){if(this.isCustomComposer(t.get("replyFragments"),t.get("messageFragments")))return!1
if(t&&t.get("replyFragments")&&t.get("replyFragments").length>0){var n=t.get("replyFragments")[0]
n&&n.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.INPUT&&(this.set("exampletextMessage",n.exampleText),this.set("validations",this.getValidations()),Ember.run.later(function(){var t=e.element.querySelector(".editable")
t&&a.default.setAttr(t,{"data-placeholder":n.placeholderText})},0))}return!0}var i=""
i=this.get("session.config.content.placeholders.reply_field")?this.get("session.config.content.placeholders.reply_field"):this.intl.t("conversation.ce.placeholders.default")
var r=this.element.querySelector(".editable")
return r&&a.default.setAttr(r,{"data-placeholder":i}),!0}}),getValidations:function(){var e=this.lastMessage
if(e&&e.get("replyFragments")&&e.get("replyFragments").length>0){var t=e.get("replyFragments")[0]
if(t&&t.fragmentType===this.CONVERSATION.FRAGMENT_TYPE.INPUT)return{validations:t.validations,validationtype:t.inputType}}},setChatWindowHeight:function(e){var t=this,s=document.querySelector(".body .h-chat-window")
s&&(e?(a.default.addCSSInline(s,"height","calc(100% - 52px)"),this.scrollToBottom()):Ember.run.later(function(){var e=t.element&&t.element.querySelector(".body .h-reply-wrapper .h-reply-button"),s=e&&e.offsetHeight+20
a.default.addCSSInline(t.element&&t.element.querySelector(".body .h-reply-wrapper"),"height","".concat(s,"px")),a.default.addCSSInline(t.element&&t.element.querySelector(".body .h-chat-window"),"height","calc(100% - ".concat(s,"px)")),t.scrollToBottom()}))},scrollToBottom:function(){var e=(0,t.default)(".body .h-chat-window")
e&&e.length&&e.animate({scrollTop:e[e.length-1].scrollHeight},1)},getNeedUpdationValue:function(e){var t=!0
return e.flowStepId&&!this.messagesCountWithMessageId&&this.session&&this.session.user&&this.session.user.alias&&(t=!1),t}})
e.default=i}),define("hotline-web/mixins/data-dog-mixin",["exports","jquery","hotline-web/config/environment","hotline-web/utils/constants"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Mixin.create({ddTags:{},getAccountIdArray:Ember.computed({get:function(){var e=s.default&&s.default.datadog
return Array.isArray(e)?e:[]}}),setTag:function(e){var t=e&&e.key
t&&(this.ddTags[t]=e.value)},getTag:function(e){var t=this.ddTags
return t&&t[e]},increment:function(e,t){var s=this.ddTags
this.getAccountIdArray.indexOf(s.accountId)>-1&&this.applyEvent(e,{op:"INCREMENT"},t)},decrement:function(e,t){var s=this.ddTags
this.getAccountIdArray.indexOf(s.accountId)>-1&&this.applyEvent(e,{op:"DECREMENT"},t)},applyEvent:function(e,t,s){if(e.evt){var n=this.ddTags
e.tags?e.tags.accountId=n.accountId:e.tags=n,this.triggerEvent(e.evt,e.tags,t,s)}},triggerEvent:function(e,t,s,a){var i=e&&e.key
if(i){var r={}
t&&Object.keys(t).concat().forEach(function(s){if(-1!==n.default.DataDog.tags.indexOf(s))r[s]=t[s]
else{var a=e&&e.tags,i=a&&Object.keys(a).map(function(e){return a[e].key})
i&&-1!==i.indexOf(s)&&(r[s]=t[s])}}),s.key=i,r&&(s.tags=r),this.logEvent(s,a)}},logEvent:function(e,s){var a=this
if(e)if(s=s||this.callback.bind(this),navigator.sendBeacon&&"function"==typeof navigator.sendBeacon)this.batch.enter({type:n.default.Batch.transactions.types.dd,payload:e}).then(function(){a.logger.log("DataDog Event Recorded")},function(e){a.logger.log(e.message)})
else{var i=this.session,r=i&&i.siteId,o=n.default.EmberModelUrl.dataDog.url.replace("{token}",i.token)
r&&(o+="?siteId=".concat(r)),t.default.ajax({type:"POST",url:o,contentType:"application/json; charset=UTF-8",data:JSON.stringify(e)}).then(s,s)}},callback:function(e){this.logger.log(e)}})
e.default=a}),define("hotline-web/mixins/datastore",["exports","hotline-web/utils/utils","hotline-web/utils/constants","hotline-web/helpers/guid","hotline-web/helpers/collate"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Mixin.create({hotlineUI:Ember.computed("hotline.ui",{get:function(){return this.get("hotline.ui")}}),getUUID:function(){var e=this.get("session.omniCookie")
return this.get("hotlineUI.config.sales360App")&&e||n.default.generate()},dsTypeEnum:s.default.DatastoreTypes,dsType:Ember.computed.alias("hotlineUI.dsType"),isLFDS:Ember.computed("dsType",{get:function(){return this.dsType===this.dsTypeEnum.LFDS.id}}),isLSDS:Ember.computed("dsType",{get:function(){return this.dsType===this.dsTypeEnum.LSDS.id}}),dsBrowserSupport:Ember.computed("hotlineUI.browser","isLSDS","isLFDS",{get:function(){var e=this.get("hotlineUI.browser")
return this.isLSDS?!!this.get("hotlineUI.lsds"):!!this.isLFDS&&!!(this.get("hotline.ui.storageAvailable")&&s.default.Browsers.includes(e.name)&&window.indexedDB)},set:function(e,t){return t}}),dsName:Ember.computed("isLSDS","isLFDS",{get:function(){return this.isLSDS?"lsDatastore":"datastore"}}),dsNamespace:Ember.computed("isLSDS","isLFDS","session.{token,siteId,appId}",{get:function(){var e=this.get("session.appId").toString(),t=this.get("session.token").toString(),s=this.get("session.siteId")
return this.isLSDS?s?"lsds_".concat(t,"_").concat(s):"lsds_".concat(t):this.isLFDS?s?"".concat(e,"_").concat(s):e:""}}),datastore:Ember.computed.alias("hotlineUI.datastore"),localds:Ember.computed("records","hotlineUI.localds",{get:function(){return this.records||this.get("hotlineUI.localds")}}),records:Ember.computed("datastore","session.appId",{get:function(){var e=this.datastore,t=this.session
return e&&e.findBy("appId",t.appId)},set:function(e,t){return t}}),conversations:Ember.computed.alias("localds.conversations"),categories:Ember.computed.alias("faqs.dsCategories"),articles:Ember.computed.alias("categories.dsArticles"),faqs:Ember.computed.alias("localds.dsFaq"),userBehaviour:Ember.computed.alias("localds.userBehaviour"),properties:Ember.computed.alias("localds.properties"),totalCount:Ember.computed("conversations.@each",{get:function(){return this.get("conversations.length")}}),channels:Ember.computed.alias("hotlineUI.channels"),isFAQAvailable:Ember.computed("localds.dsFaq","session.config.hideFAQ",{get:function(){return this.get("localds.dsFaq.dsCategories.length")>0&&!this.get("session.config.hideFAQ")}}),displayChannels:Ember.computed("channels","conversations","session.{tags,didMessage}",{get:function(){var e,s=this.channels,n=this.conversations,a=this.totalCount,i=this.session,r=i&&i.tags,o=i&&i.didMessage,l=r&&r.length,c=[]
if(s){if(t.default.sortArray(s),o||a){a&&n.forEach(function(e){var n=e.get("channelId"),a=e.get("messages"),i=a&&a.toArray(),r=i&&i.length&&i[i.length-1],o=r&&r.get("createdMillis")
if(n&&o){var l=t.default.findIndexByValueProperty(s,n,"channelId"),u=-1!==l?s[l]:void 0,d=!0
if(u){if(s.removeAt(l),c&&c.length)for(var m=0,h=c.length;m<h;m++){var f=c[m]
if(f&&f.createdOn<=o){c.splice(m,0,{channel:u,createdOn:o}),d=!1
break}}d&&c.addObject({channel:u,createdOn:o})}}})
for(var u=0,d=c.length;u<d;u++)s.insertAt(u,c[u].channel)}if(e=s.filter(function(e){return!e.hidden&&!e.restricted}),l){var m=s.filter(function(e){return!e.hidden}).filter(function(e){var s=e.tags
if(s)for(var n=0,a=s.length;n<a;n++)if(t.default.matchArray(r,s[n]))return!0
return!1})
return m&&m.length?m:e}return e}return s}}),channelsCount:Ember.computed("displayChannels.length",{get:function(){var e=this.displayChannels
return e?e.length:1}}),defaultChannel:Ember.computed("displayChannels",{get:function(){var e=this.displayChannels
return e&&e.findBy("defaultChannel",!0)}}),totalUnreadCount:Ember.computed("conversations.@each.{conversationId,readMillis}","localds.messageAfter","displayChannels",{get:function(){for(var e,s,n,a,i,r,o,l,c=this.conversations,u=this.totalCount,d=this.displayChannels,m=0,h=0,f=0;f<u;f++)if(r=(e=c.objectAt(f))&&e.get("channelId"),o=t.default.findObjectByValueProperty(d,r,"channelId"),m=e&&e.get("channelId")&&e.get("readMillis")||0,l=(s=e&&e.get("messages"))&&s.get("length"),s&&l&&o)for(var g=l-1;g>=0;g--)if(a=(n=s.objectAt(g))&&n.get("messageUserType"),i=n&&n.get("createdMillis"),a){if(!(i>m))break
h+=1}return h}}),yet2BRead:Ember.computed("totalUnreadCount",{get:function(){return this.totalUnreadCount>0}}),displayUnreadCount:Ember.computed("totalUnreadCount",{get:function(){var e=this.totalUnreadCount
return e>9?this.intl.t("common.numbers.nine")+"+":e}}),init_localds:function(){var e=this
return new Ember.RSVP.Promise(function(t,s){var n=e.get("localds"),a=e.get("session"),i=e.get("hotline.ui"),r=e.get("dsName")
e.get("dsBrowserSupport")?n?t():(n=e.store.createRecord(r,{appId:a.appId,conversations:Ember.A([]),dsFaq:e.store.createRecord("dsFaq",{categories:Ember.A([]),lastModifiedAt:0}),userBehaviour:e.get("store").createRecord("userBehaviour",{visitsCount:0,viewsCount:0,lastLocationMillis:0,firstLocationMillis:0,locations:Ember.A([]),eventConditions:Ember.A([]),events:Ember.A([]),executedRules:Ember.A([]),hasLocationRule:!1,locationRuleFetchMillis:0,userGeolocation:{}}),alias:e.getUUID(),seq:{id:0,millis:void 0}})).save().then(function(s){e.set("records",s),t()},function(e){s(e)}):(i.localds||Ember.set(i,"localds",e.store.createRecord(r,{appId:a.appId,conversations:Ember.A([]),messageAfter:void 0,dsFaq:e.get("store").createRecord("dsFaq",{dsCategories:Ember.A([]),contentLocale:null,lastModifiedAt:null}),userBehaviour:e.get("store").createRecord("userBehaviour",{visitsCount:0,viewsCount:0,firstLocationMillis:0,lastLocationMillis:0,locations:Ember.A([]),eventConditions:Ember.A([]),events:Ember.A([]),executedRules:Ember.A([]),hasLocationRule:!1,locationRuleFetchMillis:0,userGeolocation:{}}),alias:e.getUUID(),seq:{id:0,millis:void 0}})),t())})},doesConversationHaveOnlyGeneratedMessages:function(){var e=this.conversations,t=!0
return e&&e.forEach(function(e){var s=e.get("messages")
s&&(s.filter(function(e){return e.get("autoRuleId")||e.get("offlineMessage")||e.get("flowId")}).get("length")!==s.get("length")&&(t=!1))}),t},actions:{reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.localds,n=this.conversations
s.get("alias")&&!t||s.set("userBehaviour",this.store.createRecord("userBehaviour",{visitsCount:0,viewsCount:0,firstLocationMillis:0,lastLocationMillis:0,locations:Ember.A([]),eventConditions:Ember.A([]),events:Ember.A([]),executedRules:Ember.A([]),hasLocationRule:!1,locationRuleFetchMillis:0,userGeolocation:{}})),n?this.doesConversationHaveOnlyGeneratedMessages()||n.clear():s.set("conversations",Ember.A([])),s.set("messageAfter",void 0),s.set("seq",{id:0,millis:void 0}),e?e.send("save"):this.send("save")},save:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=this.localds,n=this.get("hotline.ui.collate"),i=function(){var t=e.localds,s=e.session,n=t&&t.get("messageAfter")
Ember.set(s,"didMessage",n)}
t&&(n?this.get("hotline.ui.collate").queued()||this.get("hotline.ui.collate").delay()||this.get("hotline.ui.collate").initialize(i,100,this):(this.set("hotline.ui.collate",a.default.create()),this.get("hotline.ui.collate").initialize(i,100,this))),this.dsBrowserSupport&&s.save().then(function(){},function(){e.isLFDS?window.localforage.clear(function(){e.parentView.send("reloadWidget")}):e.isLSDS})}}})
e.default=i}),define("hotline-web/mixins/direction",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({r2l:Ember.computed({get:function(){return"rtl"===document.body.getAttribute("dir")}})})
e.default=t}),define("hotline-web/mixins/faq",["exports","hotline-web/mixins/datastore","hotline-web/utils/utils"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create(t.default,{fetchFaqData:function(){var e=this.get("localds.dsFaq.lastModifiedAt"),t=this.get("localds.dsFaq.contentLocale")
e&&this.set("hotline.ui.lastModifiedFaqsAt",e),t&&this.set("hotline.ui.lastLocaleId",t.localeId)
var s=(new Date).getTime().toString()
return this.store.findRecord("faq",s,{reload:!0}).then(function(e){return e})},buildFaqDataObject:function(e){var t=e&&e.get("status")
if(t)switch(t){case 304:this.cachedDataObject(e)
break
case 204:this.emptyDataObject(e)
break
case 200:default:this.regularDataObject(e)}return e},regularDataObject:function(e){var t=this,s=e&&e.categories,n=this.localds,a=Ember.A([])
Ember.set(e,"category",void 0),s.forEach(function(e){var s=e.serialize(),n=e.get("articles"),i=Ember.A([])
n.forEach(function(e){var s=t.store.createRecord("dsArticle",e.serialize())
i.pushObject(s)}),s.dsArticles=i,a.pushObject(t.store.createRecord("dsCategory",s))}),Ember.set(n,"dsFaq",this.store.createRecord("dsFaq",{dsCategories:a,contentLocale:e.contentLocale,lastModifiedAt:e.lastModifiedAt})),this.send("save",!1)},cachedDataObject:function(e){var t=this,s=this.get("localds.dsFaq"),n=s&&s.content.serialize(),a=n.dsCategories,i=[]
a.forEach(function(e){var s=e,n=e.dsArticles,a=[]
n.forEach(function(e){var s=e
s.id=void 0,a.push(t.store.createRecord("article",s))}),s.articles=a,s.id=void 0,i.push(t.store.createRecord("category",s))}),Ember.set(e,"categories",i),Ember.set(e,"contentLocale",n.contentLocale),Ember.set(e,"lastModifiedAt",n.lastModifiedAt),Ember.set(e,"category",void 0)},emptyDataObject:function(e){Ember.set(e,"categories",[]),Ember.set(e,"contentLocale",null),Ember.set(e,"lastModifiedAt",null),Ember.set(e,"category",void 0)},filterFAQCategories:function(e,t){if(e){if(t){if("category"===t.filterType)return e.filter(function(e){return s.default.subsetOfArray(e.tags,t.tags)}).sortBy("position")
if("article"===t.filterType)return e.filter(function(e){if(s.default.subsetOfArray(e.tags,t.tags))return!0
var n=e.articles||e.dsArticles
return!!n&&n.filter(function(e){return s.default.subsetOfArray(e.tags,t.tags)}).length>0}).sortBy("position")}return e.sortBy("position")}return[]}})
e.default=n}),define("hotline-web/mixins/file-upload-helper-mixin",["exports","hotline-web/utils/constants","hotline-web/mixins/message-mask-mixin"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create(s.default,{assertThatAllAttachmentsHaveBeenUploaded:function(e){if(e&&e.messageFragments&&e.messageFragments.length){for(var s=e.messageFragments.length-1;s>=0;s--){if(Ember.get(e.messageFragments[s],"fragmentType")===t.default.CONVERSATION.FRAGMENT_TYPE.IMAGE&&!Ember.get(e.messageFragments[s],"height"))return!1
if(Ember.get(e.messageFragments[s],"fragmentType")===t.default.CONVERSATION.FRAGMENT_TYPE.FILE&&!Ember.get(e.messageFragments[s],"fileHash"))return!1}return!0}this.logger.log("Error while validating attachments for message: ",e)},updateMessageFragmentsAfterFileUpload:function(e,s){if(e&&e.messageFragments&&e.messageFragments.length&&s)for(var n=e.messageFragments.length-1;n>=0;n--)Ember.get(e.messageFragments[n],"fragmentType")===t.default.CONVERSATION.FRAGMENT_TYPE.IMAGE?Ember.setProperties(e.messageFragments[n],s.image):Ember.get(e.messageFragments[n],"fragmentType")===t.default.CONVERSATION.FRAGMENT_TYPE.FILE&&s.file&&Ember.get(e.messageFragments[n],"fileAlias")===s.name&&Ember.setProperties(e.messageFragments[n],s.file)
else this.logger.log("Error while updating attachments for message: ",e)
return e},getTextFromEditorForClosedOrOpenWidgetState:function(){var e=document.getElementById(t.default.DOM_ID.appReplyEditor),s=document.getElementById(t.default.DOM_ID.appReplyComposerEditor),n=document.getElementById(t.default.DOM_ID.appConversationEditor)
return e&&e.innerText.length>0?e.innerText.trim():s&&s.innerText.length>0?s.innerText.trim():n&&n.innerText.length>0?n.innerText.trim():void 0},uploadTextAndGetFileHash:function(e,s,n){var a=this
e=this.maskText(e)
var i=new Blob([e],{type:"text/plain"})
i.lastModifiedDate=new Date,this.uploadFile({file:i,fileType:t.default.FILETYPE.FILE,fileName:n,fileAlias:n},function(e,n){e?(a.set("pendingUploadTextFileObject",null),s=a.updateMessageFragmentsAfterFileUpload(s,n),a.assertThatAllAttachmentsHaveBeenUploaded(s)&&(s=a.updateNotAuthenticatedMessage(s),a.postMessageAPI(s))):(a.logger.log("Error while uploading file: ",n),a.set("pendingUploadTextFileObject",null),a.updateMessageStatusUsingHopId({messageHopId:s.msgHopId,messageChannelId:s.channelId},t.default.MESSAGE_STATUS.NOT_UPLOADED))})},getTextFilePreviewFragment:function(e){e=this.maskText(e)
var s="fc_message_"+(new Date).getTime()+".txt"
return{fileContentType:"text/plain",fileName:s,fileAlias:s,fileSize:2*e.length,filePreview:{content:e.substring(0,800)},fileExtension:"txt",fragmentType:t.default.CONVERSATION.FRAGMENT_TYPE.FILE}},hideFileUpload:Ember.computed.alias("session.config.hideFileUpload"),disableHugeMessageSending:Ember.computed("isTextLimitExceeded","hideFileUpload","uploadFilesEnabled",{get:function(){return this.isTextLimitExceeded&&(this.hideFileUpload||!this.uploadFilesEnabled)}}),uploadFilesEnabled:Ember.computed("hotline.ui.config.enabledFeatures",{get:function(){var e=this.get("hotline.ui"),t=e&&e.config
return-1!==(t&&t.enabledFeatures||[]).indexOf("APP_FILE_UPLOAD")}})})
e.default=n}),define("hotline-web/mixins/focus-field",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({becomeFocused:Ember.on("didInsertElement",function(){var e=this
Ember.run.later(function(){Ember.isEqual(e.get("autofocus"),!0)&&e.$().focus()},100)}),focusOut:function(){var e=this["focus-out"]
e&&this.targetObject.send("gotoParentFocusOut",e)}})
e.default=t}),define("hotline-web/mixins/handle-event",["exports","jquery","hotline-web/mixins/datastore","hotline-web/utils/constants","hotline-web/helpers/event-conditions","hotline-web/helpers/command","hotline-web/mixins/data-dog-mixin"],function(e,t,s,n,a,i,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=Ember.Mixin.create(s.default,r.default,{ruleEngine:Ember.inject.service(),commandHelper:Ember.computed({get:function(){return i.default.create({scope:this})}}),updateEvent:function(e,t,s){var n=this
if(this.cache.findBy("post_message","rules_loaded")){var i,r=this.localds.get("userBehaviour"),o=r&&r.get("firstLocationMillis")||0,l=r&&r.get("events"),c=Ember.A([])
for(var u in s=s||(new Date).getTime(),this.reportEvent(e,t),t)t.hasOwnProperty(u)&&c.pushObject(this.store.createRecord("eventProperty",{key:u,value:t[u]}))
i=this.store.createRecord("event",{createdMillis:s,name:e,eventProperties:c}),l.pushObject(i)
var d=a.default.create({scope:this}).update(i)
this.send("save",!1),this.ruleEngine.processRules(e,d).then(function(e){n.commandHelper.execute(e),s&&(o||r.set("firstLocationMillis",s),r.set("lastLocationMillis",s),n.send("save",!1))})}else this.cache.encache("track_events",{eventName:e,eventProperties:t})},reportEvent:function(e,s){var a=this
if(!this.get("session.config.disableEvents")&&("fc_page"!==e||!this.get("session.config.disablePageTransition")||s.force)){var i=this.get("session.user"),r=this.get("session.token"),o=this.get("session.siteId"),l={eventName:e,properties:s}
if(i&&i.id)if(navigator.sendBeacon&&"function"==typeof navigator.sendBeacon)this.batch.enter({type:n.default.Batch.transactions.types.events,payload:l}).then(function(){a.logger.log("Event Recorded")},function(e){a.logger.log(e.message)
var t,s,i,r=n.default.DataDog.events.dropEvent
a.increment({evt:r,tags:(t={},s=r.tags.eventStorePayload.key,i=JSON.stringify(l),s in t?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i,t)})})
else{var c=n.default.EmberModelUrl.newEvent.url.replace("{token}",r).replace("{userAlias}",i&&i.alias)
o&&(c+="?siteId=".concat(o)),t.default.ajax({type:"POST",url:c,data:JSON.stringify(l),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){})}}},reportVisit:function(){var e=this.get("session.user"),s=n.default.EmberModelUrl.newSession.url.replace("{token}",this.get("session.token")),a=this.get("session.siteId"),i=(new Date).getTime(),r=this.localds,o=r&&r.get("userBehaviour"),l=o&&o.get("executedRules"),c=o&&o.get("lastLocationMillis")||0,u=o&&o.get("visitsCount")||0,d=o&&o.get("viewsCount")||0
i-c>18e5?(l&&l.forEach(function(e){e.set("sentCountSession",0)}),Ember.setProperties(o,{viewsCount:1,visitsCount:u+1}),this.send("save",!1),a&&(s+="?siteId=".concat(a)),e&&e.id&&t.default.ajax({type:"POST",url:s,cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){})):Ember.setProperties(o,{viewsCount:d+1})}})
e.default=o}),define("hotline-web/mixins/jwt",["exports","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/user"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Mixin.create(n.default,{isJWTStrictMode:Ember.computed({get:function(){return this.jwt.isJWTStrictMode()}}),isJWTEnabled:function(){return this.jwt.isEnabled&&this.jwt.auth.app},getJWTMeta:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.get("session.jwtAuthToken"),t=e&&e.split(".")
return t&&3===t.length?s.default.safelyParseJSON(atob(t[1])):null},buildJWTResponse:function(e){this.send("userStateChange",{success:e.success,status:e.status,userState:e.success?t.default.UserState.AUTHENTICATED:t.default.UserState.NOT_AUTHENTICATED}),this.postMessage(e)},processJWTResponse:function(e){var s=e.success
this.jwt.auth.app?this.jwt.authenticateUser(s):this.jwt.authenticateApp(s),e.callback&&"function"==typeof e.callback&&e.callback({action:"frame_state_change",success:s,status:e.status,data:{frameState:s?t.default.FrameState.AUTHENTICATED:t.default.FrameState.NOT_AUTHENTICATED}}),this.buildJWTResponse({action:"user_authenticated",success:s,status:e.status,resp:e.resp})},isJwtExpired:function(){var e=this.getJWTMeta(),t=(new Date).getTime()/1e3
return e&&e.exp<t},initiateSendingMode:function(){var e=(new Date).getTime()/1e3
this.postMessage({action:"user_state_change",status:401,success:!1,data:{userState:t.default.UserState.AUTH_EXPIRED}}),Ember.set(this.jwt.auth,"user",!1),this.jwt.authenticateToken(e)},jwtAuthErrorMsg:Ember.computed("session.config.headerProperty.jwtInvalidBanner.msg",{get:function(){return this.get("session.config.headerProperty.jwtInvalidBanner.msg")||this.intl.t("jwt.invalid")}}),validateAndResetUUID:function(e){if(e){var t=this.getUserAlias()
if(t&&t===e)return this.send("resetTokenAlias"),!0}return!1},actions:{checkJWTExpiry:function(){this.isJWTStrictMode&&this.send("validateJWTExpiry")},validateJWTExpiry:function(){this.jwt.auth.expired||this.jwt.auth.expiredAt||this.jwt.auth.scheduled||!this.jwt.auth.user?!this.isJwtExpired()||this.jwt.auth.user&&this.get("session.user.alias")?this.jwt.auth.expired&&this.jwt.authenticateUser(!1):this.initiateSendingMode():this.isJwtExpired()?this.initiateSendingMode():this.jwt.authenticateUser(!0)},verifyJWT:function(e){var s=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=t.default.EmberModelUrl.verifyJWT,i=this.session,r=i&&i.siteId,o=a.url.replace("{token}",Ember.get(this,"session.token")),l=!0,c=200
r&&(e.siteId=r),this.jwt.validateJWT({url:o,payload:e}).then(function(t){if(t.validToken){var a=e&&e.jwtAuthToken&&s.getJWTMeta(e.jwtAuthToken),r=a&&a.freshchat_uuid
if(Ember.set(i,"externalId",a&&a.reference_id||void 0),s.jwt.isStrict&&(!s.jwt.auth.app||!s.jwt.auth.user)){var o=s.localds
!t.userAliasExists||i.user.alias&&i.user.alias===r?o&&r&&(s.validateAndResetUUID(r)?Ember.set(o,"alias",null):Ember.set(o,"alias",r),s.send("save",!1)):(o&&(s.validateAndResetUUID(r),Ember.set(o,"alias",null),s.send("save",!1)),c=304,l=!1)}}else l=!1,c=400
l?Ember.set(i,"jwtAuthToken",e.jwtAuthToken):Ember.set(i,"jwtAuthToken",null),s.processJWTResponse({callback:n,success:l,status:c,resp:t})},function(t){l=t&&t.success||!1,429!==(c=t&&t.status||400)&&Ember.set(i,"jwtAuthToken",e.jwtAuthToken),s.processJWTResponse({callback:n,success:l,status:c,resp:t})})}}})
e.default=a}),define("hotline-web/mixins/live-translation",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({isLiveTranslationEnabled:Ember.computed.readOnly("hotline.ui.config.liveTranslationSetting.enabled"),containsTranslatedContent:function(e){var s=!1
Ember.isArray(e)||(e=[e])
for(var n=0;n<e.length&&!s;n++){var a=e[n]
if(a.messageFragments)for(var i=0;i<a.messageFragments.length&&!s;i++)Ember.isBlank(a.messageId)||a.shouldTranslate!==t.default.liveTranslationSettings.translateStatusForMessage.yes||a.emojisCount||a.messageType!==t.default.CONVERSATION.MESSAGE_TYPE.NORMAL||!a.messageFragments[i]||a.messageFragments[i].fragmentType!==t.default.CONVERSATION.FRAGMENT_TYPE.TEXT||!a.messageFragments[i].content||Ember.isBlank(a.messageFragments[i].translatedContent)||(s=!0)}return s}})
e.default=s}),define("hotline-web/mixins/localstorage",["exports","hotline-web/utils/utils","hotline-web/mixins/message"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create(s.default,{namespace:Ember.computed("session.{token,siteId}",{get:function(){var e=Ember.get(this,"session.siteId"),t=Ember.get(this,"session.token")
return e?"".concat(t,"_").concat(e):t}}),storageAvailable:Ember.computed("hotline.ui.storageAvailable",{get:function(){return this.get("hotline.ui.storageAvailable")}}),updateStorage:function(e,t){var s=this.get("hotline.ui.storage")
s?s[e]=t:this.set("hotline.ui.storage",{namespace:t})},getStorage:function(e){var s,n
return this.storageAvailable&&(s=localStorage.getItem(e),n=t.default.safelyParseJSON(s)||{}),t.default.isEmptyObject(n)&&(n=(s=this.get("hotline.ui.storage"))&&s[e],t.default.isEmptyObject(n)&&(n={})),n},setItemLS:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3]
null===s&&(s=this.namespace)
var a=this.storageAvailable,i=this.getStorage(s)
i&&(i[e]=t,a?localStorage.setItem(s,JSON.stringify(i)):n=!0,this.updateStorage(s,i),n&&t&&this.postMessage({action:"set_storage_item",data:{key:s,value:i}}))},getItemLS:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
null===t&&(t=this.namespace)
var n,a=this.storageAvailable,i=this.getStorage(t)
if(i&&i.hasOwnProperty(e)&&(n=i[e]),a||(s=!0),s&&!n){var r=this.get("hotline.ui.storage"),o=r?r[t]:null
o&&(n=o[e],Object.keys(o).length&&a&&localStorage.setItem(t,JSON.stringify(o)))}return n},removeItemLS:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]
null===s&&(s=this.namespace)
var a=this.storageAvailable,i=this.getStorage(s)
a||(n=!0),i&&(delete i[e],t.default.isEmptyObject(i)?(a&&localStorage.removeItem(s),this.updateStorage(s,{}),n&&this.postMessage({action:"remove_storage_item",data:{key:s}})):(a&&localStorage.setItem(s,JSON.stringify(i)),this.updateStorage(s,i),n&&this.postMessage({action:"set_storage_item",data:{key:s,value:i}})))}})
e.default=n}),define("hotline-web/mixins/message-mask-mixin",["exports","hotline-web/utils/regex-utils"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({maskText:function(e){if(null==e||""===e)return this.logger.log("Error while masking text. Text is null."),null
var t=this.get("hotline.ui.backendMaskConfigData"),s=this.get("session.config.mask_text")&&this.get("session.config.mask_text")instanceof Array?this.get("session.config.mask_text"):[]
return t&&t.length>0?this.doMaskingUsingBackendConfig(e,t):s&&s.length>0?this.doMaskingUsingFrontendConfig(e,s):e},maskTextForFragments:function(e){for(var t=e&&e.length,s=0;s<t;s++){var n=e[s].content
e[s].content=n?this.maskText(n):null}return e},doMaskingUsingBackendConfig:function(e,s){if(null==e||""===e)return this.logger.log("Error while masking text. Text is null."),null
for(var n=s&&s.length,a=0;a<n;a++){var i=s[a].javascriptRegexMasks
if((i=i&&i instanceof Array?i:[])&&i.length)for(var r=0;r<i.length;r++){var o=i[r]
if(o.regex&&o.replacementStr){var l=new RegExp(o.regex,"g")
e=1===o.replacementStr.length?t.default.maskTextUsingSingleCharacter(e,l,o.replacementStr):t.default.replaceText(e,l,o.replacementStr)}}}return e},doMaskingUsingFrontendConfig:function(e,s){for(var n=s&&s.length,a=0;a<n;a++){var i=s[a]
i.regex_to_hide&&i.replace_text&&(e=1===i.replace_text.length?t.default.maskTextUsingSingleCharacter(e,i.regex_to_hide,i.replace_text):t.default.replaceText(e,i.regex_to_hide,i.replace_text))}return e}})
e.default=s}),define("hotline-web/mixins/message",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({widget:Ember.computed("hotline.ui.widget",{get:function(){return this.get("hotline.ui.widget")}}),origin:Ember.computed("session.referrer",{get:function(){var e=this.get("session.referrer")
return e&&atob(e)}}),updateNotAuthenticatedMessage:function(e){return this.jwt.isJWTStrictMode()&&this.jwt.auth.expired&&Ember.set(e,"status",t.default.MESSAGE_STATUS.UNAUTHENTICATED),e},postMessage:function(e){this.widget&&(this.cache.encache("post_message",e),window.parent.postMessage(e,this.origin))}})
e.default=s}),define("hotline-web/mixins/payload",["exports","ember-inflector"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({normalizeSingleResponse:function(e,t,s,n,a){var i=t&&Ember.String.camelize(t.modelName),r=this.primaryKey||"appId",o={}
return s.id=s[r]||n,o[i]=s,this._super(e,t,o,n,a)},normalizeFindAllResponse:function(e,s,n,a,i){for(var r=s&&Ember.String.camelize(s.modelName),o=r&&(0,t.pluralize)(r),l=this.primaryKey||"appId",c={},u=0;u<n.length;u++)n[u].id=n[u][l]
return c[o]=n,this._super(e,s,c,a,i)},serializeIntoHash:function(e,t,s,n){var a=this.serialize(s,n)
for(var i in a)e[i]=a[i]
s.id&&(e.id=s.id)}})
e.default=s}),define("hotline-web/mixins/sanitize",["exports","hotline-web/utils/sanitize"],function(e,t){function s(e,t){if(t)return e.lookup("sanitizer:"+t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create({sanitizeElement:function(e,n){var a=this.$(e)[0]
return(0,t.sanitizeElement)(a,s(this.container,n))},sanitizeHTML:function(e,n){return(0,t.sanitize)(e,s(Ember.getOwner(this),n))}})
e.default=n}),define("hotline-web/mixins/store-url",["exports","hotline-web/utils/constants","hotline-web/mixins/jwt"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create(s.default,{addSiteIdParam:function(e){if(Ember.isBlank(e))return e
var s=this.session,n=s&&s.siteId
if(n){var a="".concat(t.default.EmberModelQueryParams.SiteId,"=").concat(n)
e+=-1!==e.indexOf("?")?"&".concat(a):"?".concat(a)}return e},getUserUpdateURL:function(e){var s=this.session,n=s&&s.identifyByReferenceId,a=e&&e.token,i=e&&e.alias,r=(e&&e.url||t.default.EmberModelUrl.updateUser.url).replace(t.default.EmberModelPathParams.Token,a).replace(t.default.EmberModelPathParams.UserAlias,i)
return this.isJWTEnabled&&n&&(r+="?".concat(t.default.EmberModelQueryParams.IdentifyByReferenceId,"=true")),r=this.addSiteIdParam(r)}})
e.default=n}),define("hotline-web/mixins/subscription",["exports","hotline-web/mixins/localstorage"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create(t.default,{actions:{clearSubscription:function(){var e=this.get("session.token"),t=this.get("session.siteId"),s=t?"hop-".concat(e,"-").concat(t):"hop-".concat(e)
this.removeItemLS("subscriptionInfo"),this.removeItemLS("lastPushActionMillis"),this.removeItemLS("subDomainName"),this.removeItemLS("hop",s,!1),this.set("hotline.ui.push",void 0),this.postMessage({action:"clear_subscription"})}}})
e.default=s}),define("hotline-web/mixins/transaction-mixin",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Mixin.create({processTransaction:function(e){if(this._transactions[e]){for(var t=[];this._transactions[e].length;){var s=this._transactions[e].shift()
s&&t.push(s)}if(t.length)switch(e){case 1:this.processDDEvents(t)
break
case 2:this.processStoreEvents(t)}}},processDDEvents:function(e){var s=this.session,n=s&&s.siteId,a=t.default.EmberModelUrl.dataDogSBMulti.url.replace("{token}",s.token)
a+="?token=".concat(this.get("session.wcfcToken")),n&&(a+="&siteId=".concat(n)),navigator.sendBeacon(a,JSON.stringify({metrics:e}))},processStoreEvents:function(e){var s=Ember.get(this,"session.user"),n=Ember.get(this,"session.siteId"),a=t.default.EmberModelUrl.newSBMultiEvent.url.replace("{token}",this.get("session.token")).replace("{userAlias}",s&&s.alias)
a+="?token=".concat(this.get("session.wcfcToken")),n&&(a+="&siteId=".concat(n)),s&&s.id&&navigator.sendBeacon(a,JSON.stringify({events:e}))}})
e.default=s}),define("hotline-web/mixins/url-mixin",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Mixin.create({session:Ember.inject.service(),token:Ember.computed("session.token",{get:function(){return Ember.get(this,"session.token")}}),siteId:Ember.computed("session.siteId",{get:function(){return Ember.get(this,"session.siteId")}}),alias:Ember.computed("session.user.alias",{get:function(){return Ember.get(this,"session.user.alias")}}),urlTemplate:Ember.computed("token","alias",{get:function(){var e=this.URL.default.replace("{token}",this.token).replace("{userAlias}",this.alias)
return this.siteId&&(e+="?siteId=".concat(this.siteId)),e}}),createRecordUrlTemplate:Ember.computed({get:function(){var e=this.URL.create?this.URL.create:this.URL.default
return this.siteId&&(e+="?siteId=".concat(this.siteId)),e.replace("{token}",this.token).replace("{userAlias}",this.alias)}}),updateRecordUrlTemplate:Ember.computed({get:function(){var e=this.URL.update?this.URL.update:this.URL.create?this.URL.create:this.URL.default
return this.siteId&&(e+="?siteId=".concat(this.siteId)),e.replace("{token}",this.token).replace("{userAlias}",this.alias)}})})
e.default=t}),define("hotline-web/mixins/user-locate",["exports","jquery","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/utils/locale","hotline-web/mixins/handle-event","hotline-web/mixins/localstorage","hotline-web/mixins/subscription","hotline-web/mixins/user-token","hotline-web/mixins/jwt","hotline-web/mixins/store-url","hotline-web/mixins/article-load","hotline-web/utils/timezone"],function(e,t,s,n,a,i,r,o,l,c,u,d,m){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var h=Ember.Mixin.create(i.default,r.default,o.default,l.default,c.default,u.default,d.default,{locale:Ember.inject.service(),isObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return e&&e.constructor===Object},isObjectEmpty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return!!this.isObject(e)&&0===Object.keys(e).length},getUserPropertiesDiff:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={}
if(!this.isObjectEmpty(e))for(var n in e){var a=e[n]
if(!this.isObject(a)&&e.hasOwnProperty(n)&&Ember.isPresent(a)){var i=String(a).trim()
i&&i!==("function"==typeof t.get?t.get(n):t[n])&&(s[n]=a)}}return s},getUpdatedUserProperties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.localds,s=this.getUserPropertiesDiff(e,t.get("properties")),n=this.getUserPropertiesDiff(e.meta,t.get("meta"))
return this.isObjectEmpty(n)||(s.meta=n),s},actions:{isUserCreated:function(e){var t=this.isUserAvailable()
e&&e(!0,200,t)},loadUser:function(){var e=this,t=this.session,n=t&&t.user,a=n&&n.alias,i=n&&n.identifier,r=n&&n.restoreId,o=n&&n.errors,l=o&&o.length?o[0]:o,c=t&&t.externalId,u=t&&t.restoreId,d=t&&t.jwtAuthToken,m=this.localds,h=this.jwt.isEnabled&&d&&this.jwt.auth.app,f=h&&c&&(1===n.errorCode||2===n.errorCode),g=h&&i&&n.alias
if(c&&u||g||f)if(i===c&&r===u||g)m.set("externalId",c),this.send("save",!1),this.send("trackActivity",a),this.send("userStateChange",{userState:s.default.UserState.LOADED}),this.isJWTEnabled()&&this.jwt.authenticateUser(!0),this.send("updateProperties",n)
else{Ember.set(t,"user",{}),m.set("externalId",void 0),m.set("properties",void 0),m.set("alias",void 0),m.set("meta",void 0)
var p=s.default.EmberModelUrl,v=t&&t.siteId,b=t&&t.token,E=p.reset,y=E.url.replace("{token}",b)
v&&(y+="?siteId=".concat(v)),this.send("resetTokenAlias")
var w=function(){e.send("reset"),e.send("clearSubscription"),e.send("locateUser")}
this.store.postRequest(E.model,y).then(w,w)}else c?l?this.send("handleUserError",l):a&&this.send("identifyUser",{externalId:c,jwtAuthToken:d},function(t,n,i){e.postMessage({action:"user_created",success:t,status:n,data:i}),!1===t&&403===n&&e.isJWTStrictMode?e.send("userStateChange",{userState:s.default.UserState.NOT_LOADED,success:!1,status:404}):e.send("trackActivity",a)}):l?this.send("handleUserError",l):(this.send("userStateChange",{userState:s.default.UserState.LOADED}),this.isJWTEnabled()&&this.jwt.authenticateUser(!0),this.send("handleUserSuccess",n))},locateUser:function(){var e=this,t=this.session,n=t&&t.token,a=t&&t.siteId,i=t&&t.externalId,r=t&&t.restoreId,o=t&&t.jwtAuthToken,l=s.default.EmberModelUrl,c=l.user,u=l.renewJWT,d=c.url.replace("{token}",n),m="".concat(d,"/").concat(btoa(i),"/restore/").concat(r),h=u.url.replace("{token}",n),f=!0
a&&(m+="?siteId=".concat(a),h+="?siteId=".concat(a))
var g=function(n){e.send("clearSubscription")
var a=e.getItemLS("wcfcAlias",t.token),i=e.getItemLS("wcfcMigrated",t.token)
n&&!n.errorCode?i&&a===n.alias?e.send("handleUserError",{status:"404",updateUserStateChange:f}):(e.send("userStateChange",{userState:s.default.UserState.RESTORED}),e.isJWTEnabled()&&e.jwt.authenticateUser(!0),e.get("hotlineUI.config.sales360App")&&e.postMessage({action:"restore_user_cookie",alias:n.alias}),e.send("handleUserSuccess",n)):(n.updateUserStateChange=f,e.send("resetTokenAlias"),e.send("handleUserError",n))},p=function(t){t.updateUserStateChange=f,e.send("resetTokenAlias"),e.send("handleUserError",t)}
if(this.jwt.isEnabled&&o){var v={jwtAuthToken:o}
f=!1,this.store.postRequest(u.model,h,v).then(g,p)}else this.store.getRequest(c.model,m).then(g,p)},trackActivity:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this.get("session.token"),i=this.getItemLS("lastActivitySent"),r=i&&new Date(i),o=new Date
r&&r.getDate()===o.getDate()&&r.getMonth()===o.getMonth()&&r.getYear()===o.getYear()||t.default.ajax({type:"PUT",url:s.default.EmberModelUrl.trackActivity.url.replace("{token}",a).replace("{userAlias}",n||this.get("localds.alias"))}).then(function(t){t&&t.errorCode||e.setItemLS("lastActivitySent",new Date)}),this.send("loadHomeView")},handleUserSuccess:function(e){if(e){var t=e.identifier,s=e.restoreId,n=e.alias,a=this.session,i=Ember.get(this,"localds.messageAfter")
this.postMessage({action:"user_created",success:!0,status:200,data:t?{externalId:t,restoreId:s}:null})
var r=e.nameGenerated?void 0:e.firstName,o=e.nameGenerated?void 0:e.lastName,l=r?o?"".concat(r," ").concat(o).trim():r.trim():"Unknown"
e.name=l,Ember.set(a,"user",e),a.token&&n&&this.send("updateTokenAlias",{token:e.wcfcToken||a&&a.wcfcToken,alias:n}),this.send("updateProperties",e),i?Ember.set(a,"didMessage",i):Ember.set(a,"didMessage",0),this.send("trackActivity",n)}},handleUserError:function(e){var t=e&&e.errors,n=t&&t.length?t[0]:t,a=e&&e.errorCode||n&&n.errorCode,i=e&&e.status||n&&n.status,r=void 0===e.updateUserStateChange||e.updateUserStateChange,o=this.isJWTEnabled()&&"404"===i&&!r
if("502"===i&&this.router.replaceWith("503"),"401"===i||"404"===i||"412"===i||"428"===i||1===a||2===a||11===a){if(this.send("reset"),this.send("clearSubscription"),r){var l=this.get("session.jwtAuthToken"),c=l&&this.getJWTMeta(l),u=c&&c.freshchat_uuid
if(this.validateAndResetUUID(u)){var d=this.localds
d&&(Ember.set(d,"alias",null),this.send("save",!1))}this.send("userStateChange",{userState:s.default.UserState.NOT_LOADED,success:!1,status:404})}else o&&this.jwt.authenticateUser(!0)
this.postMessage({action:"user_created",success:!1,status:parseInt(i,10)}),this.isJWTStrictMode&&!o||this.send("trackActivity")}},resetSession:function(e){var t=this,n=this.session,a=n&&n.user,i=n&&n.token,r=n&&n.siteId,o=this.store,l=s.default.EmberModelUrl.reset
if(i)if(a&&a.alias){var c=l.url.replace("{token}",i)
r&&(c+="?siteId=".concat(r)),this.send("resetTokenAlias"),this.jwt.isEnabled&&(Ember.set(n,"jwtAuthToken",void 0),Ember.set(n,"externalId",void 0)),o.postRequest(l.model,c).then(function(){var s=t.localds
s&&(s.set("externalId",void 0),s.set("properties",void 0),s.set("alias",void 0),s.set("meta",void 0),t.postMessage({action:"reset_user_cookie"}),t.send("reset",null,!0),Ember.set(n,"user",{}),Ember.set(n,"prop",{})),t.reloadRoute(),e(!0,200)},function(){e(!1,400)})}else e(!1,401)
else e(!1,404)},createUser:function(e,i){var r=this,o=this.session,l=o&&o.token,c=o&&o.user,u=o&&o.siteId,d=e&&e.externalId||o&&o.externalId,h=e&&e.firstName,f=e&&e.lastName,g=e&&e.email,p=e&&e.phone,v=e&&e.flowId,b=e&&e.flowVersionId,E=e&&e.previewMode,y=e&&e.phoneCountry,w=e&&e.locale||a.default.getNavigatorLanguage(),T=e&&e.meta,S=this.getUserParams(),_=s.default.EmberModelUrl.user,M=o&&o.config&&o.config.pushToFreshSales,I={},C=function(t){if(r.setItemLS("isUserCreateSent",!1),!r.get("session.user.wcfcToken"))if(304===t)if(r.get("hotlineUI.config.sales360App")){var s=r.localds.get("alias")
r.send("loadUserByAlias",s,i)}else r.restoreAlias()&&r.send("createUser",e,i)
else 400!==t&&409!==t||i(!1,t)}
if(v&&Ember.set(S.user,"flowId",v),b&&Ember.set(S.user,"flowVersionId",b),E&&Ember.set(S.user,"previewMode",E),d&&Ember.set(S.user,"identifier",d),h&&Ember.set(S.user,"firstName",h),f&&Ember.set(S.user,"lastName",f),g&&Ember.set(S.user,"email",g),p&&Ember.set(S.user,"phone",p),y&&Ember.set(S.user,"phoneCountry",y),w&&Ember.set(S.user,"locale",w),T&&Ember.set(S.user,"meta",T),S.user.meta?Ember.set(S.user.meta,"fc_user_timezone",m.default.guess()):Ember.set(S.user,"meta",{fc_user_timezone:m.default.guess()}),Ember.set(S.user,"totalSessions",1),l)if(c&&c.alias||this.getItemLS("isUserCreateSent")||this.isUserAvailable())i(!1,403)
else{this.setItemLS("isUserCreateSent",!0)
var A=_.url.replace("{token}",l),O=this.get("hotline.ui.browser")
u&&(S.user.meta?Ember.set(S.user.meta,"siteId",u):Ember.set(S.user,"meta",{siteId:u}),I.siteId=u),M&&(I.pushToFreshSales=!0),A=n.default.addQueryParams(A,I),this.get("session.config.isFCSDKWebView")||Ember.set(S.user,"deviceWebMeta",{browser:O.name,browserVersion:O.versionx,device:O.os,os:"Web"}),t.default.ajax({type:"POST",url:A,data:JSON.stringify(S),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(e,t,s){r.setItemLS("isUserCreateSent",!1)
var n=s&&s.status
n>=200&&n<=299?(r.logger.log("User Created"),r.send("setSessionUser",e,i)):C(n)},function(e){C(e&&e.status)})}else i(!1,404)},userIdentified:function(e){var t=e&&e.alias,s={alias:t,externalId:e&&e.identifier,restoreId:e&&e.restoreId}
t?(this.postMessage({action:"user_created",success:!0,status:200,data:s}),this.send("toggleExternalId",e.identifier)):this.postMessage({action:"user_created",success:!1,status:400})},getUserUUID:function(e){var t=this.getUserUUID()
t&&(this.localds.set("alias",t),this.send("save",!1),e(t))},generateUserUUID:function(e){e&&e(this.generateUserUUID())},userStateChange:function(e){var t=!0,s=200
void 0!==e.success&&(t=e.success,delete e.success),void 0!==e.status&&(s=e.status,delete e.status),this.postMessage({action:"user_state_change",status:s,success:t,data:e})},userCleared:function(){this.postMessage({action:"user_cleared"})},updateUser:function(e){var t=this,n=s.default.EmberModelUrl.updateUser,a=this.session,i=this.store,r=this.get("hotline.ui.browser"),o=a&&a.user,l=a&&a.token,c=o&&o.alias,u=o&&o.id,d=!(!this.jwt.isEnabled||!e.jwtAuthToken),m={browser:r.name,browserVersion:r.versionx,device:r.os,os:"Web"},h={}
if(this.jwt.isEnabled){if(e.user?(e.user.id=u,h=e):(h.jwtAuthToken=e.jwtAuthToken||a.jwtAuthToken,delete e.jwtAuthToken,h.user=e,h.user.id=u),h.user.deviceWebMeta=m,!h.jwtAuthToken)return void this.postMessage({action:"update_user_ack",status:401,success:!1})
if(this.jwt.auth.scheduled&&d)return void this.postMessage({action:"update_user_ack",status:429,success:!1})
d&&(this.jwt.authenticateToken(),this.jwt.auth.scheduled=!0)}else Ember.setProperties(e,{alias:c,id:u,deviceWebMeta:m}),h.user=e
i.putRequest(n.model,this.getUserUpdateURL({url:n.url,token:l,alias:c}),h).then(function(e){var s=e&&e.alias&&!e.errorCode?200:400,n=200===s
n?(d&&(h.jwtAuthToken&&Ember.set(t,"session.jwtAuthToken",h.jwtAuthToken),t.send("updateJWTAuthToken",h.jwtAuthToken)),t.send("updateProperties",e)):d&&t.send("updateJWTAuthToken"),t.postMessage({action:"update_user_ack",status:s,success:n})},function(){d&&t.send("updateJWTAuthToken"),t.postMessage({action:"update_user_ack",status:400,success:!1})})},updateJWTAuthToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null
this.jwt.auth.scheduled=!1,e?(Ember.set(this,"session.jwtAuthToken",e),Ember.set(this.jwt.auth,"expired",!1),this.jwt.authenticateUser(!0)):(Ember.set(this,"session.jwtAuthToken",null),Ember.set(this.auth,"expired",!0),this.jwt.authenticateUser(!1))},identifyUser:function(e,t){var n=this,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.session,r=this.store,o=this.localds,l=i&&i.user,c=i&&i.token,u=l&&l.alias,d=l&&l.id,m=l&&l.identifier,h=e&&e.externalId,f=e&&e.restoreId,g=e&&e.jwtAuthToken,p=s.default.EmberModelUrl.updateUser
if(Ember.set(i,"externalId",h),Ember.set(i,"restoreId",f),Ember.set(i,"jwtAuthToken",g),u)if(!m||g&&!f)if(f);else{var v,b=this.get("hotline.ui.browser");(h||g)&&(g?v={user:{id:d},jwtAuthToken:g}:(v=this.getUserParams(),Ember.setProperties(v.user,{identifier:h,alias:u,id:d,deviceWebMeta:{browser:b.name,browserVersion:b.versionx,device:b.os,os:"Web"}}))),r.putRequest(p.model,this.getUserUpdateURL({url:p.url,token:c,alias:u}),v).then(function(e){var a=e&&e.alias&&!e.errorCode,r=e&&e.identifier,l=e&&e.restoreId
a?(n.reloadRoute(),n.send("toggleExternalId",e.identifier),o.set("alias",a),n.send("save",!1),Ember.set(i,"restoreId",l),n.send("userStateChange",{userState:s.default.UserState.IDENTIFIED}),n.isJWTEnabled()&&n.jwt.authenticateUser(!0),t(!0,200,{externalId:r,restoreId:l})):t(!1,400)}).catch(function(){t(!1,400)})}else m===h?(Ember.set(i,"restoreId",l.restoreId),this.send("userStateChange",{userState:s.default.UserState.LOADED}),this.isJWTEnabled()&&this.jwt.authenticateUser(!0),t(!0,200,{externalId:m,restoreId:l.restoreId})):a?this.send("resetSession",function(e){e&&(t(!1,403),n.send("clearSubscription"))}):t(!1,403)
else f||this.send("toggleExternalId",h),t(!0,404)},setExternalId:function(e,t){var s=this.session
s&&s.token?this.send("identifyUser",e,t,!1):t(!0,404)},setUserProperties:function(e,t){var s=this.session,n=s&&s.prop,a=s&&s.token,i=s&&s.user,r=i&&i.id,o=i&&i.alias,l=this.localds.get("properties"),c=this.getUpdatedUserProperties(e)
if(0!==Object.keys(c).length)if(a)if(o&&r)this.set("updatingUser",!0),this.send("updateUserProperties",e,t)
else{if(this.jwt.isEnabled&&e&&e.jwtAuthToken)Ember.set(s,"jwtAuthToken",e.jwtAuthToken)
else{if(e){var u=e.firstName||n&&n.firstName||l&&l.get("firstName"),d=e.lastName||n&&n.lastName||l&&l.get("lastName");(u||d)&&(e.firstName=u,e.lastName=d,e.nameChanged=!0)}this.send("updateProperties",e)}t(!0,200)}else t(!0,404)
else t&&t.constructor===Function&&t(!0,200)},toggleExternalId:function(e){var t=this.localds
t&&(e?t.set("externalId",e):t.set("externalId",void 0),this.send("save",!1))},updateProperties:function(){var e,t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.localds,a=this.session,i=a&&a.user,r=a&&a.siteId,o=this.getItemLS("wcfcMigrated",a.token),l=s&&s.meta&&s.meta.siteId,c=this.get("hotline.ui.browser"),u={browser:c.name,browserVersion:c.versionx,device:c.os,os:"Web"},d=n.get("properties"),h=a&&a.prop,f=h&&h.locale||d&&d.get("locale"),g=h&&h.firstName||d&&d.get("firstName"),p=h&&h.lastName||d&&d.get("lastName"),v=h&&h.nameChanged||d&&d.get("nameChanged")||s&&s.nameChanged,b=h&&h.email||d&&d.get("email"),E=h&&h.phone||d&&d.get("phone"),y=h&&h.phoneCountry||d&&d.get("phoneCountry"),w=h&&h.meta||n.get("meta"),T=this.get("hotline.ui.config.sales360App")
if(s)if(e=s.nameGenerated?void 0:s.firstName||d.get("firstName"),t=s.nameGenerated?void 0:s.lastName||d.get("lastName"),d.get("id")){if(d.set("firstName",e),d.set("lastName",t),s.email&&d.set("email",s.email),s.phone&&d.set("phone",s.phone),s.phoneCountry&&d.set("phoneCountry",s.phoneCountry),s.locale&&d.set("locale",s.locale),s.meta){var S=n&&n.get("meta")||{},_=s&&s.meta
if(_)for(var M in _)_.hasOwnProperty(M)&&(S[M]=_[M])
S.fc_user_timezone=m.default.guess(),n.set("meta",S),Ember.set(a,"prop",{firstName:e,lastName:t,nameChanged:v,email:d.get("email"),phone:d.get("phone"),phoneCountry:d.get("phoneCountry"),locale:d.get("locale"),meta:S,deviceWebMeta:u})}}else this.localds.set("properties",this.store.createRecord("properties",{firstName:e,lastName:t,nameChanged:v,email:s.email,phone:s.phone,phoneCountry:s.phoneCountry,locale:s.locale,deviceWebMeta:u})),s.meta.fc_user_timezone=m.default.guess(),this.localds.set("meta",s.meta),Ember.set(a,"prop",s)
var I={}
null===s&&(s=i),v&&g&&e&&g!==e&&(Ember.set(a.prop,"firstName",g),I.firstName=g),v&&p&&t&&p!==t&&(Ember.set(a.prop,"lastName",p),I.lastName=p),b&&b!==s.email&&(Ember.set(a.prop,"email",b),T?h.email&&h.email!=d&&d.get("email")&&(I.email=b):I.email=b),E&&E!==s.phone&&(Ember.set(a.prop,"phone",E),T?!T&&h.phone&&h.phone!=d&&d.get("phone")&&(I.phone=E):I.phone=E),y&&y!==s.phoneCountry&&(Ember.set(a.prop,"phoneCountry",y),I.phoneCountry=y),f&&f!==s.locale&&(Ember.set(a.prop,"locale",f),I.locale=f),w&&JSON.stringify(w)!==JSON.stringify(s.meta)&&(Ember.set(a.prop,"meta",w),I.meta=w),Object.keys(I).length?(o&&r!==l&&(I.meta||(I.meta={}),I.meta.siteId=r),this.send("processUserUpdate",I)):o&&r!==l&&this.send("processUserUpdate",{meta:{siteId:r}}),this.send("save",!1)},processUserUpdate:function(e){if(this.updatingUser)this.set("updatingUser",!1),this.logger.log("Updating user failed")
else{var t=this.get("session.user")
t&&t.id&&(this.set("updatingUser",!0),this.send("updateUserProperties",e))}},updateUserProperties:function(e,t){var n=this,a=s.default.EmberModelUrl.updateUser,i=this.session,r=this.store,o=this.get("hotline.ui.browser"),l={browser:o.name,browserVersion:o.versionx,device:o.os,os:"Web"},c=i&&i.user,u=i&&i.token,d=c&&c.alias,m=c&&c.id,h={}
this.jwt.isEnabled?(e.user?(e.user.id=m,h=e):(h.jwtAuthToken=e.jwtAuthToken||i.jwtAuthToken,delete e.jwtAuthToken,h.user=e,h.user.id=m),h.user.deviceWebMeta=l,h.jwtAuthToken||t(!1,401)):(Ember.setProperties(e,{alias:d,id:m,deviceWebMeta:l}),h.user=e),r.putRequest(a.model,this.getUserUpdateURL({url:a.url,token:u,alias:d}),h).then(function(e){var s=e&&e.alias&&!e.errorCode?200:400,a=200===s
a&&(n.locale.updateAppLocale(e.locale),n.send("updateProperties",e)),t&&"function"==typeof t&&t(a,s,e)})},loadUserByAlias:function(e,n){var a=this,i=this.localds
if(e){var r=this.session,o=s.default.EmberModelUrl.userAlias.url.replace("{token}",r.token).replace("{userAlias}",e)
t.default.ajax({type:"GET",url:o,cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(t,s,r){200===(r&&r.status)&&t&&t.alias?(a.logger.log("User Get using user alais"),a.send("setSessionUser",t,n)):(i.set("alias",e),a.send("save",!1),n&&"function"==typeof n&&n(!1,400))},function(t){a.logger.log("Error while getting user with alias",t),i.set("alias",e),a.send("save",!1),n&&"function"==typeof n&&n(!1,400)})}},setSessionUser:function(e,t){if(e&&e.alias){var n=this.session,a=e.nameGenerated?void 0:e.firstName,i=e.nameGenerated?void 0:e.lastName,r=a?i?"".concat(a," ").concat(i).trim():a.trim():"Unknown",o=e&&e.restoreId
e.name=r,e.wcfcToken&&this.send("updateTokenAlias",{token:e.wcfcToken,alias:e.alias}),Ember.set(n,"user",e),Ember.set(n,"restoreId",o),e.alias?(this.send("userStateChange",{userState:s.default.UserState.CREATED}),this.reloadRoute(),t(!0,200,e)):t(!1,400)}}}})
e.default=h}),define("hotline-web/mixins/user-reset",["exports","hotline-web/utils/utils","hotline-web/mixins/subscription","hotline-web/mixins/message"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Mixin.create(s.default,n.default,{deleteUser:function(){this.removeItemLS("wcfcToken"),this.removeItemLS("wcfcAlias"),this.setItemLS("isUserCreateSent",!1),Ember.set(this.session,"user",{}),t.default.default.setWCFC(""),this.postMessage({action:"reset_user_cookie"}),this.send("reset",null,!0),this.send("clearSubscription")}})
e.default=a}),define("hotline-web/mixins/user-token",["exports","hotline-web/mixins/localstorage","hotline-web/utils/utils"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Mixin.create(t.default,{actions:{updateTokenAlias:function(e){var t=e&&e.token,n=e&&e.alias
this.setItemLS("wcfcToken",t),this.setItemLS("wcfcAlias",n),this.set("session.wcfcToken",t),s.default.setWCFC(t),this.localds.set("wcfcToken",t),this.localds.set("alias",n)},resetTokenAlias:function(){this.removeItemLS("wcfcToken"),this.removeItemLS("wcfcAlias"),this.set("session.wcfcToken",""),s.default.setWCFC(""),this.localds.set("wcfcToken",void 0)}}})
e.default=n}),define("hotline-web/mixins/user",["exports","jquery","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/utils/locale","hotline-web/mixins/localstorage","hotline-web/mixins/subscription","hotline-web/mixins/user-reset","hotline-web/mixins/message","hotline-web/mixins/user-token","hotline-web/mixins/file-upload-helper-mixin","hotline-web/mixins/datastore","hotline-web/utils/timezone"],function(e,t,s,n,a,i,r,o,l,c,u,d,m){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var h=Ember.Mixin.create(i.default,r.default,o.default,c.default,l.default,u.default,d.default,{maxLimit:5,tryCount:0,hasUserToCreate:!1,getUserAlias:function(){var e=this.session
return this.getItemLS("wcfcAlias")||this.getItemLS("wcfcAlias",e.token)&&!this.getItemLS("wcfcMigrated",e.token)},isUserAvailable:function(){return!!this.getUserAlias()},isUserCreated:function(e){var t=e&&e.status
return t>=200&&t<=299},checkUserStateChange:function(e,t,n,a){this.parentView&&this.isUserCreated(a)&&this.parentView.send("userStateChange",{userState:"GET"===e?s.default.UserState.LOADED:s.default.UserState.CREATED})},handleUserCreateSuccess:function(e,t,s){var n=s&&s.status
n>=200&&n<=299?this.send("createUserSuccess",e):this.send("createUserFailure",n)},handleUserCreateFailure:function(e){var t={success:!1,status:e.status}
410===e.status&&(this.deleteUser(),t.userState=s.default.UserState.DELETED),400!==e.status&&409!==e.status&&428!==e.status&&412!==e.status||(t.userState=s.default.UserState.NOT_CREATED),this.parentView&&this.parentView.send("userStateChange",t),this.send("createUserFailure",e&&e.status)},getUserUUID:function(){var e=this.localds,t=e&&e.get("alias")
if("string"!=typeof t||36!==t.length){var s=this.getUserAlias()
if(s)return s
t=this.getUUID()}return t},generateUserUUID:function(){return this.getUUID()},getUserParams:function(){var e=this.localds,t=this.get("session.prop"),s=!t||t.errors&&0!==t.errors.length?e&&e.get("properties"):t,n=this.getUserUUID(),a={user:{}}
if(s&&(s.get&&s.get("id")?Ember.setProperties(a.user,{firstName:s.get("firstName"),lastName:s.get("lastName"),email:s.get("email"),phone:s.get("phone"),phoneCountry:s.get("phoneCountry"),locale:s.get("locale"),meta:e.get("meta")}):(Ember.setProperties(a.user,{firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,phoneCountry:s.phoneCountry,locale:s.locale,meta:s.meta}),Object.keys(s).length>0?(e.set("meta",s.meta),e.set("properties",this.store.createRecord("properties",s))):(e.set("meta",void 0),e.set("properties",void 0)))),this.get("hotline.ui.calendarMessage")&&!a.user.email&&this.get("hotline.ui.calendarMessage").customMessageProperties){var i=this.get("hotline.ui.calendarMessage").customMessageProperties,r=i&&i.internalMeta&&i.internalMeta.calendarMessageMeta&&i.internalMeta.calendarMessageMeta.calendarBookingEmail
a.user.email=r}return Ember.set(a.user,"alias",n),e.set("alias",n),this.send("save",!1),a},restoreAlias:function(){var e=this.tryCount+1
return!!(e<=this.maxLimit&&(this.set("tryCount",e),this.get("session.token")))&&(this.localds.set("alias",void 0),this.send("save",!1),!0)},actions:{loadUserByAlias:function(e,n){var a=this,i=this.localds
if(e){var r=this.session,o=s.default.EmberModelUrl.userAlias.url.replace("{token}",r.token).replace("{userAlias}",e)
t.default.ajax({type:"GET",url:o,cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(t,s,r){200===(r&&r.status)&&t&&t.alias?(a.logger.log("User Get using user alais"),a.send("createUserSuccess",t)):(i.set("alias",e),a.send("save",!1),n&&"function"==typeof n&&n(!1,400))},function(t){a.logger.log("Error while getting user with alias",t),i.set("alias",e),a.send("save",!1),n&&"function"==typeof n&&n(!1,400)})}},createUser:function(e){var a=this
this.set("doesUserExists",!1),this.send("sendMessage",e),this.setItemLS("isUserCreateSent",!0)
var i={}
if(this.isUserAvailable()){var r=s.default.EmberModelUrl,o=r.user,l=r.userToken,c=this.session,u=c&&c.siteId,d=c&&c.token,m=c&&c.jwtAuthToken,h=o.url.replace("{token}",d),f=l.url.replace("{token}",d)
u&&(i.siteId=u,f+="?siteId=".concat(u)),h=n.default.addQueryParams(h,i)
var g=this.getItemLS("wcfcToken")||this.getItemLS("wcfcToken",d)
if(this.set("session.wcfcToken",g),n.default.setWCFC(g),this.jwt.isEnabled&&m){var p={jwtAuthToken:m}
t.default.ajax({type:"POST",url:f,data:JSON.stringify(p),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s]
a.checkUserStateChange.apply(a,["GET"].concat(t)),a.handleUserCreateSuccess.apply(a,t)},this.handleUserCreateFailure.bind(this))}else t.default.ajax({type:"GET",url:h,cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s]
a.checkUserStateChange.apply(a,["GET"].concat(t)),a.handleUserCreateSuccess.apply(a,t)},this.handleUserCreateFailure.bind(this))}else this.send("createNewUser")},createNewUser:function(){var e=this,i=this.session,r=this.get("hotline.ui.browser"),o=i&&i.siteId,l=i&&i.flowId,c=i&&i.flowVersionId,u=i&&i.previewMode,d=i&&i.externalId||this.get("localds.externalId"),h=s.default.EmberModelUrl.user.url.replace("{token}",i&&i.token),f=i&&i.config&&i.config.pushToFreshSales,g={},p=this.jwt.isEnabled?{user:{},jwtAuthToken:i.jwtAuthToken}:this.getUserParams()
d&&Ember.set(p.user,"identifier",d),Ember.set(p.user,"totalSessions",1),l&&Ember.set(p.user,"flowId",l),c&&Ember.set(p.user,"flowVersionId",c),u&&Ember.set(p.user,"previewMode",u),p.user.meta?Ember.set(p.user.meta,"fc_user_timezone",m.default.guess()):Ember.set(p.user,"meta",{fc_user_timezone:m.default.guess()}),o&&(this.jwt.isEnabled||!p.user.meta?Ember.set(p.user,"meta",{siteId:o}):Ember.set(p.user.meta,"siteId",o),g.siteId=o),f&&(g.pushToFreshSales=!0),h=n.default.addQueryParams(h,g),Ember.set(p.user,"locale",p.user.locale||a.default.getNavigatorLanguage()),this.get("session.config.isFCSDKWebView")||Ember.set(p.user,"deviceWebMeta",{browser:r.name,browserVersion:r.versionx,device:r.os,os:"Web"}),t.default.ajax({type:"POST",url:h,data:JSON.stringify(p),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n]
e.checkUserStateChange.apply(e,["POST"].concat(s)),e.handleUserCreateSuccess.apply(e,s)},this.handleUserCreateFailure.bind(this))},createUserSuccess:function(e){var t=this
this.setItemLS("isUserCreateSent",!1),this.set("hasUserToCreate",!1),this.logger.log("User Created")
var n=this.session,a=e.firstName,i=e.lastName,r=a?i?"".concat(a," ").concat(i).trim():a.trim():"Unknown"
e.name=r,e.wcfcToken&&this.send("updateTokenAlias",{token:e.wcfcToken,alias:e.alias}),Ember.set(n,"user",e),this.jwt.isEnabled&&this.jwt.authenticateUser(!0)
var o=this.get("localds.conversations").findBy("channelId",this.channelId)
if(o){var l=!1
o.get("messages").filterBy("messageUserType",0).forEach(function(e){if(!(e.get("status")!==s.default.MESSAGE_STATUS.PENDING||o.get("conversationId")&&-1!==o.get("conversationId")||l)){var n=t.pendingFile
if(l=!0,e.set("isResponseForBot",!0),n&&n.file&&n.fileType&&t.uploadFile(n,function(n,a){if(n){var i=e.serialize()
i=t.updateMessageFragmentsAfterFileUpload(i,a),t.assertThatAllAttachmentsHaveBeenUploaded(i)&&(i=t.updateNotAuthenticatedMessage(i),t.postMessageAPI(i)),t.set("pendingFile",null)}else t.logger.log("Error",a),t.set("pendingFile",null),t.updateMessageStatusUsingHopId({messageHopId:e.msgHopId,messageChannelId:e.channelId,messageConversationId:e.conversationId},s.default.MESSAGE_STATUS.NOT_UPLOADED)}),t.pendingUploadTextFileObject&&t.get("pendingUploadTextFileObject.text")&&t.get("pendingUploadTextFileObject.fileName")){var a=e.serialize()
t.uploadTextAndGetFileHash(t.get("pendingUploadTextFileObject.text"),a,t.get("pendingUploadTextFileObject.fileName"))}else t.assertThatAllAttachmentsHaveBeenUploaded(e.serialize())&&(e=t.updateNotAuthenticatedMessage(e),t.postMessageAPI(e.serialize()))}})}this.get("hotline.ui.offlineMessagesFragments")&&(this.send("sendOfflineMessages",this.get("hotline.ui.offlineMessagesFragments")),this.set("hotline.ui.offlineMessagesFragments",null)),this.get("hotline.ui.calendarMessage")&&(this.send("sendCalendarMessage",this.get("hotline.ui.calendarMessage").customFragments,this.get("hotline.ui.calendarMessage").customMessageProperties),this.set("hotline.ui.calendarMessage",null)),e.alias&&(this.parentView&&this.parentView.send("userIdentified",e),this.send("sendBulkEvents"))},createUserFailure:function(e){if(this.setItemLS("isUserCreateSent",!1),this.get("session.user.wcfcToken"))this.send("createUserSuccess",this.get("session.user"))
else{if(304===e){if(this.get("hotline.ui.config.sales360App"))return this.send("loadUserByAlias",this.get("session.omniCookie")),!1
this.restoreAlias()&&this.send("createUser")}this.logger.log("User Not Created")}}}})
e.default=h}),define("hotline-web/mixins/widget-load",["exports","hotline-web/utils/utils","hotline-web/utils/constants","hotline-web/mixins/localstorage","hotline-web/mixins/user-reset","hotline-web/mixins/jwt","hotline-web/mixins/user-locate"],function(e,t,s,n,a,i,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=Ember.Mixin.create(n.default,a.default,i.default,r.default,{locale:Ember.inject.service(),loadPayload:function(e){var s=this.session
if(s){if(e.externalId&&Ember.set(s,"externalId",e.externalId),e.restoreId&&Ember.set(s,"restoreId",e.restoreId),e.flowId&&Ember.set(s,"flowId",e.flowId),e.flowVersionId&&Ember.set(s,"flowVersionId",e.flowVersionId),e.previewMode&&Ember.set(s,"previewMode",e.previewMode),e.identifyByReferenceId&&Ember.set(s,"identifyByReferenceId",e.identifyByReferenceId),e.jwtAuthToken&&Ember.set(s,"jwtAuthToken",e.jwtAuthToken),e.referrer&&Ember.set(s,"referrer",e.referrer),e.siteId&&Ember.set(s,"siteId",e.siteId),e.properties&&((e.properties.firstName||e.properties.lastName)&&(e.properties.nameChanged=!0),Ember.set(s,"prop",e.properties)),e.tags&&Ember.set(s,"tags",e.tags),e.faqTags&&Ember.set(s,"faqTags",e.faqTags),e.omniCookie&&Ember.set(s,"omniCookie",e.omniCookie),Ember.set(s,"config",e.config),s.config&&s.config.headerProperty&&s.config.headerProperty.appName&&Ember.set(s,"appDisplayName",s.config.headerProperty.appName),e.host&&!s.appHost&&(Ember.set(s,"appHost",e.host),t.default.setAppHead(e.host)),e.storage){this.set("hotline.ui.storage",{})
var n=this.get("hotline.ui.storage")
for(var a in e.storage)if(e.storage.hasOwnProperty(a)){var i=e.storage[a]
i&&(n[a]=t.default.safelyParseJSON(i))}}else this.set("hotline.ui.storage",null)
if(s.token){var r=this.getItemLS("wcfcToken",s.token,!0),o=this.getItemLS("wcfcAlias",s.token,!0),l=this.getItemLS("wcfcMigrated",s.token,!0),c=this.getItemLS("wcfcToken",null,!0)
if(c?(this.set("session.wcfcToken",c),t.default.setWCFC(c)):!0===l||r&&(this.setItemLS("wcfcMigrated",!0,s.token),this.setItemLS("wcfcAlias",o,s.token),this.setItemLS("wcfcToken",r),this.setItemLS("wcfcAlias",o),this.set("session.wcfcToken",r),t.default.setWCFC(r)),null===this.get("hotline.ui.storage")&&this.storageAvailable){this.set("hotline.ui.storage",{})
var u=this.get("hotline.ui.storage"),d=e.siteId?"".concat(s.token,"_").concat(e.siteId):null,m=localStorage.getItem(s.token),h=m?t.default.safelyParseJSON(m):null,f=d?localStorage.getItem(d):null,g=f?t.default.safelyParseJSON(f):null
h?(this.postMessage({action:"set_storage_item",data:{key:s.token,value:h}}),u[s.token]=h):u[s.token]={},g?(this.postMessage({action:"set_storage_item",data:{key:d,value:g}}),u[d]=g):d&&(u[d]={})}}this.setItemLS("isUserCreateSent",!1),e.userAgent&&Ember.set(s,"userAgent",e.userAgent)}},actions:{setWidgetSize:function(){var e="fc-widget-"+Ember.get(this,"hotline.ui.config.widgetSize").toLowerCase(),t=document.getElementsByTagName("html")[0]
t.className=t.className?t.className+" "+e:e},loadWidget:function(e){this.loadPayload(e),this.send("loadDatastore",e),this.send("setWidgetSize")},loadDatastore:function(e){var t=Ember.get(this,"hotline.ui")
e.lsds?(Ember.set(t,"dsType",s.default.DatastoreTypes.LSDS.id),Ember.set(t,"lsds",e.lsds),e.migrateLFDS?(Ember.set(t,"dsMigration",!0),this.send("loadDS")):this.send("loadLSDatastore")):(this.set("hotline.ui.dsType",s.default.DatastoreTypes.LFDS.id),this.send("loadDS"))},loadLSDatastore:function(){var e=this
this.store.findAll("lsDatastore").then(function(t){Ember.set(Ember.get(e,"hotline.ui"),"datastore",t),e.send("initDS")})},loadDS:function(){var e=this,s=Ember.get(this,"hotline.ui"),n=s.dsMigration&&"lsds"===s.dsType,a=function(){n?e.send("loadLSDatastore"):e.send("initDS")}
this.dsBrowserSupport?this.store.findAll("datastore").then(function(i){if(n)if(i){var r=i.findBy("appId",e.get("session.appId")),o=r&&r.serialize()
if(o)e.store.createRecord(e.dsName,t.default.serializeRecord(o,e.store)).save().then(function(t){e.set("records",t),Ember.set(s,"localds",t),e.send("initDS")},function(){e.send("initDS")})
else a()}else a()
else i&&Ember.set(s,"datastore",i),e.send("initDS")},a):a()},initDS:function(){var e=this
this.localds?this.send("findUser"):this.init_localds().then(function(){e.send("findUser")},function(){e.isLFDS?window.localforage&&e.get("hotline.ui.storageAvailable")?!0===e.getItemLS("isReloaded")?(e.removeItemLS("isReloaded"),e.set("dsBrowserSupport",!1),e.init_localds().then(function(){e.send("findUser")})):(e.setItemLS("isReloaded",!0),window.localforage.clear(function(){e.send("reloadWidget")})):(e.set("dsBrowserSupport",!1),e.init_localds().then(function(){e.send("findUser")})):e.isLSDS})},findUser:function(){var e=this.localds,t=e&&e.get("properties"),n=this.session,a=n&&n.prop,i=this.get("hotline.ui.browser"),r={browser:i.name,browserVersion:i.versionx,device:i.os,os:"Web"}
if(a&&t)if(t.get("id")){if(a.firstName&&t.set("firstName",a.firstName),a.lastName&&t.set("lastName",a.lastName),t.set("nameChanged",a.nameChanged),a.email&&t.set("email",a.email),a.phone&&t.set("phone",a.phone),a.phoneCountry&&t.set("phoneCountry",a.phoneCountry),a.locale&&t.set("locale",a.locale),a.meta){var o=e&&e.get("meta")||{},l=a&&a.meta
if(l)for(var c in l)l.hasOwnProperty(c)&&(o[c]=l[c])
e.set("meta",o)}}else this.localds.set("properties",this.store.createRecord("properties",{firstName:a.firstName,lastName:a.lastName,nameChanged:a.nameChanged,email:a.email,phone:a.phone,phoneCountry:a.phoneCountry,locale:a.locale,deviceWebMeta:r})),a.meta&&this.localds.set("meta",a.meta)
if(this.isJWTStrictMode){var u=this.session,d=u.identifyByReferenceId?this.generateUserUUID():this.getUserAlias(),m=u&&u.jwtAuthToken
!d||m?this.send("getUser"):this.send("userStateChange",{userState:s.default.UserState.NOT_AUTHENTICATED,success:!1,status:401,freshchat_uuid:d})}else this.send("getUser")},getUser:function(){var e=this,n=s.default.EmberModelUrl,a=n.user,i=n.userToken,r=this.session,o=r&&r.siteId,l=r&&r.jwtAuthToken,c=a.url.replace("{token}",Ember.get(this,"session.token")),u=i.url.replace("{token}",Ember.get(this,"session.token"))
o&&(c+="?siteId=".concat(o),u+="?siteId=".concat(o))
var d=function(n){if(n&&n.errors&&"410"===n.errors[0].status)e.deleteUser()
else if(n){var a=n.nameGenerated?void 0:n.firstName,i=n.nameGenerated?void 0:n.lastName,o=a?i?"".concat(a," ").concat(i).trim():a.trim():"Unknown"
n.name=o,Ember.set(r,"user",n),e.locale.updateAppLocale(),n.errorCode?n.errors=n:e.isJWTStrictMode&&l&&n.alias&&e.send("updateUser",{jwtAuthToken:l})}if(e.jwt.isEnabled){var c=!(!n.success&&!n.alias)||n.errorCode>=1&&n.errorCode<=2,u=l&&c
if(e.jwt.authenticateApp(u),l){var d=l.split("."),m=d&&3===d.length?t.default.safelyParseJSON(atob(d[1])):null,h=m&&m.reference_id
h&&Ember.set(r,"externalId",h)}if(e.jwt.isStrict){var f=!!(n&&n.success||n.alias)
n.alias&&e.send("updateTokenAlias",{token:n.wcfcToken||r&&r.wcfcToken,alias:n.alias}),e.postMessage({action:"frame_state_change",success:f,status:f?200:401,data:{frameState:c?s.default.FrameState.LOADED:s.default.FrameState.NOT_AUTHENTICATED}}),u&&e.postMessage({action:"frame_state_change",success:!0,status:200,data:{frameState:s.default.FrameState.AUTHENTICATED}})}}e.send("fetchInfo")}
if(null!==this.jwt.auth.app&&null!==this.jwt.auth.user||(this.jwt.auth.app=!1,Ember.set(this.jwt.auth,"user",!1)),this.jwt.isEnabled&&l){var m={jwtAuthToken:l}
this.store.postRequest(i.model,u,m).then(d,d)}else this.store.getRequest(a.model,c).then(d)},fetchInfo:function(){var e=this,t=s.default.EmberModelUrl.widgetInfo,n=this.locale.currentLocaleString()
this.get("hotlineUI.channels")?this.send("loadUser"):this.store.getRequest(t.model,t.url.replace("{token}",Ember.get(this,"session.token")).replace("{locale}",n)).then(function(t){if(t){var s=e.hotlineUI,n=t.channelResponse,a=t.categoryResponse,i=t.operatingHoursResponse,r=t.responseTimeHolder,o=t.userRules,l=t.messageMaskConfigList,c=t.offlineExperienceResponse,u=t.requestsWhiteListedDomains
n&&Ember.set(s,"channels",n.channels),a&&Ember.set(s,"categories",a.categories),i&&(i.operatingHours&&(i.operatingHours.clientTimeInMillis=(new Date).getTime()),Ember.set(s,"hours",i)),r&&Ember.set(s,"rspTime",r),o&&Ember.set(s,"userBehaviour",{eventRules:o}),l&&Ember.set(s,"backendMaskConfigData",l),c&&Ember.set(s,"offlineExperience",c),u&&Ember.set(s,"whiteListedDomains",u)}e.send("loadUser")})},loadConfig:function(e){if(e){this.get("session.config")||this.set("session.config",{}),void 0!==e.showFAQOnOpen&&this.set("session.config.showFAQOnOpen",e.showFAQOnOpen),void 0!==e.hideFAQ&&this.set("session.config.hideFAQ",e.hideFAQ),void 0!==e.faqPopupView&&this.set("session.config.faqPopupView",e.faqPopupView),void 0!==e.hideFileUpload&&this.set("session.config.hideFileUpload",e.hideFileUpload),void 0!==e.hidePoweredBy&&this.set("session.config.hidePoweredBy",e.hidePoweredBy),void 0!==e.content&&this.set("session.config.content",e.content),void 0!==e.disableEvents&&this.set("session.config.disableEvents",e.disableEvents),void 0!==e.disableNotifications&&this.set("session.config.disableNotifications",e.disableNotifications),void 0!==e.mask_text&&this.set("session.config.mask_text",e.mask_text),void 0!==e.disablePageTransition&&this.set("session.config.disablePageTransition",e.disablePageTransition),void 0!==e.widgetSize&&this.set("session.config.widgetSize",e.widgetSize),void 0!==e.fullscreen&&this.set("session.config.fullscreen",e.fullscreen),void 0!==e.isFCSDKWebView&&this.set("session.config.isFCSDKWebView",e.isFCSDKWebView),void 0!==e.openChannelId&&this.set("session.config.openChannelId",e.openChannelId)
var t=e.agent
t&&(this.get("session.config.agent")||this.set("session.config.agent",{}),void 0!==t.hideName&&this.set("session.config.agent.hideName",t.hideName),void 0!==t.hidePic&&this.set("session.config.agent.hidePic",t.hidePic),void 0!==t.hideBio&&this.set("session.config.agent.hideBio",t.hideBio))
var s=e.headerProperty
if(s){var n=s.jwtInvalidBanner
this.get("session.config.headerProperty")||this.set("session.config.headerProperty",{}),void 0!==s.backgroundColor&&this.set("session.config.headerProperty.backgroundColor",s.backgroundColor),void 0!==s.foregroundColor&&this.set("session.config.headerProperty.foregroundColor",s.foregroundColor),void 0!==s.backgroundImage&&this.set("session.config.headerProperty.backgroundImage",s.backgroundImage),void 0!==s.fontName&&this.set("session.config.headerProperty.fontName",s.fontName),void 0!==s.fontUrl&&this.set("session.config.headerProperty.fontUrl",s.fontUrl),void 0!==s.direction&&this.set("session.config.headerProperty.direction",s.direction),void 0!==s.hideChatButton&&this.set("session.config.headerProperty.hideChatButton",s.hideChatButton),void 0!==s.appLogo&&this.set("session.config.headerProperty.appLogo",s.appLogo),void 0!==s.hideHeader&&this.set("session.config.headerProperty.hideHeader",s.hideHeader),void 0!==s.appName&&(this.set("session.config.headerProperty.appName",s.appName),this.set("session.appDisplayName",s.appName||this.get("session.appName"))),n&&(this.get("session.config.headerProperty.jwtInvalidBanner")||this.set("session.config.headerProperty.jwtInvalidBanner",{}),void 0!==n.msg&&this.set("session.config.headerProperty.jwtInvalidBanner.msg",n.msg),void 0!==n.backgroundColor&&this.set("session.config.headerProperty.jwtInvalidBanner.backgroundColor",n.backgroundColor),void 0!==n.foregroundColor&&this.set("session.config.headerProperty.jwtInvalidBanner.foregroundColor",n.foregroundColor))}void 0!==e.pushToFreshSales&&this.set("session.config.pushToFreshSales",e.pushToFreshSales)}}}})
e.default=o}),define("hotline-web/mixins/window-listener-mixin",["exports","jquery","hotline-web/mixins/localstorage","hotline-web/utils/dom-utils"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Mixin.create(s.default,{bindNetworkEvents:function(){n.default.bindEvent(window,"blur",this.onDidBlur.bind(this)),n.default.bindEvent(window,"focus",this.onDidFocus.bind(this)),n.default.bindEvent(window,"online",this.onOnline.bind(this)),n.default.bindEvent(window,"offline",this.onOffline.bind(this)),n.default.bindEvent(window,"beforeunload",this.onBeforeUnload.bind(this)),n.default.bindEvent(window,"storage",this.onStorage.bind(this))},onStorage:function(e){var t=e&&e.originalEvent,s=this.get("session.token"),n=this.get("session.siteId"),a=n?"hop-".concat(s,"-").concat(n):"hop-".concat(s)
t&&t.key===a&&null==t.newValue&&this.setItemLS("hop",this.get("hotline.ui.hop"),a,!1)},onBeforeUnload:function(){var e=this.get("session.token"),t=this.get("session.siteId"),s=t?"hop-".concat(e,"-").concat(t):"hop-".concat(e)
this.removeItemLS("hop",s,!1)},onDidBlur:function(){var e=this.get("hotline.ui")
e&&(Ember.set(e,"focussed",!1),(0,t.default)(window).trigger("window:blurred"))},onDidFocus:function(){var e=this.get("hotline.ui")
e&&(Ember.set(e,"focussed",!0),(0,t.default)(window).trigger("window:focussed"))},onOnline:function(){var e=this.get("hotline.ui")
e&&(Ember.set(e,"onLine",!0),(0,t.default)(window).trigger("window:online"))},onOffline:function(){var e=this.get("hotline.ui")
e&&(Ember.set(e,"onLine",!1),(0,t.default)(window).trigger("window:offline"))}})
e.default=a}),define("hotline-web/models/agent",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({name:s("string"),email:s("string"),type:s("number"),alias:s("string"),roleId:s("number"),profilePicThumbUrl:s("string"),profilePicUrl:s("string"),firstName:s("string"),lastName:s("string"),title:s("string"),bio:s("string"),socialInfo:s(),displayName:Ember.computed("firstName","lastName",{get:function(){var e=this.firstName?this.firstName:"",t=this.lastName?this.lastName:""
return e||t?e+" "+t:""}})})
e.default=n}),define("hotline-web/models/article",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({appId:t.default.attr("number"),articleId:t.default.attr("number"),categoryId:t.default.attr("number"),content:t.default.attr("string"),deleted:t.default.attr("boolean"),downvotesAndroid:t.default.attr("number"),downvotesIos:t.default.attr("number"),enabled:t.default.attr("boolean"),fdimported:t.default.attr("boolean"),lastUpdatedAt:t.default.attr("number"),platforms:t.default.attr(),position:t.default.attr("number"),tags:t.default.attr(),title:t.default.attr("string"),upvotesAndroid:t.default.attr("number"),upvotesIos:t.default.attr("number"),userId:t.default.attr("number")})
e.default=s}),define("hotline-web/models/calendar-avail-info",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({calendarTimeSlots:t.default.hasMany("calendarTimeSlot"),meetingLength:s("number"),bufferTime:s("number"),minNoticeTime:s("number"),calendarType:s("number")})
e.default=n})
define("hotline-web/models/calendar-time-slot",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({to:t.default.attr("number"),from:t.default.attr("number"),prevTo:t.default.attr("number"),timeDiff:t.default.attr("string")})
e.default=s}),define("hotline-web/models/category",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({categoryId:t.default.attr("number"),deleted:t.default.attr("boolean"),title:t.default.attr("string"),description:t.default.attr("string"),position:t.default.attr("number"),enabled:t.default.attr("boolean"),fdimported:t.default.attr("boolean"),appId:t.default.attr("number"),userId:t.default.attr("number"),lastUpdatedAt:t.default.attr("date"),platforms:t.default.attr(),tags:t.default.attr(),articles:t.default.hasMany("article"),icon:t.default.attr("string")})
e.default=s}),define("hotline-web/models/channel-response-time",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.hasMany,n=t.default.Model.extend({channelResponseTime:s("responseTime")})
e.default=n}),define("hotline-web/models/channel",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({appId:s("number"),channelId:s("number"),name:s("string"),defaultChannel:s("boolean"),created:s("date"),updated:s("date"),hidden:s("boolean"),position:s("number"),type:s("string",{defaultValue:"BOTH"}),groupId:s("number"),welcomeMessage:t.default.belongsTo("message")})
e.default=n}),define("hotline-web/models/color-config",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({backgroundColor:s("string"),foregroundColor:s("string")})
e.default=n}),define("hotline-web/models/config",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.belongsTo,a=t.default.Model.extend({headerProperty:n("colorConfig"),bodyProperty:n("colorConfig"),userMessageProperty:n("colorConfig"),agentMessageProperty:n("colorConfig"),iconUrl:s("string"),backgroundImage:s("string"),customBackground:s("boolean"),appId:s("number"),appName:s("string"),configId:s("number"),createdMillis:s("date"),updatedMillis:s("date")})
e.default=a}),define("hotline-web/models/conversation",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.belongsTo,a=t.default.hasMany,i=t.default.Model.extend({appId:s("number"),assignedTo:s("number"),channelId:s("number"),conversationHostUserId:s("number"),conversationHostUserName:s("string"),conversationId:s("number"),createdMillis:s("number"),deleted:s("boolean"),lastMessageApi:s("number"),messages:a("message"),repliedTo:s("boolean"),status:s("number"),unreadByWebUser:s("boolean"),updateTime:s("string"),updatedMillis:s("number"),readMillis:s("number"),markedReadMillis:s("number",{defaultValue:null}),readByAgents:a("identifier"),uiStatus:s("string"),hasPendingCsat:s("boolean"),csat:n("csat")})
e.default=i}),define("hotline-web/models/csat-values",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({star:s("number"),comment:s("string")})
e.default=n}),define("hotline-web/models/csat",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({appId:s("number"),created:s("number"),createdByUserId:s("number"),csatId:s("number"),disabled:s("boolean"),lastUpdatedByUserId:s("number"),mandatory:s("boolean"),minimumAgentInteractions:s("number"),mobileUserCommentsAllowed:s("boolean"),question:s("string"),updated:s("number"),initiated:s("number")})
e.default=n}),define("hotline-web/models/datastore",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.belongsTo,a=t.default.hasMany,i=t.default.Model.extend({appId:s("number"),conversations:a("conversation"),properties:n("properties"),externalId:s("string"),messageAfter:s("number"),updatedAt:s("number"),userBehaviour:n("userBehaviour"),alias:s("string"),wcfcToken:s("string"),seq:s(),meta:s(),dsFaq:n("dsFaq")})
e.default=i}),define("hotline-web/models/days",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({day:s("number"),hour:s("string")})
e.default=n}),define("hotline-web/models/ds-article",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({appId:t.default.attr("number"),articleId:t.default.attr("number"),categoryId:t.default.attr("number"),content:t.default.attr("string"),deleted:t.default.attr("boolean"),downvotesAndroid:t.default.attr("number"),downvotesIos:t.default.attr("number"),enabled:t.default.attr("boolean"),fdimported:t.default.attr("boolean"),lastUpdatedAt:t.default.attr("number"),platforms:t.default.attr(),position:t.default.attr("number"),tags:t.default.attr(),title:t.default.attr("string"),upvotesAndroid:t.default.attr("number"),upvotesIos:t.default.attr("number"),userId:t.default.attr("number")})
e.default=s}),define("hotline-web/models/ds-category",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({categoryId:t.default.attr("number"),deleted:t.default.attr("boolean"),title:t.default.attr("string"),description:t.default.attr("string"),position:t.default.attr("number"),enabled:t.default.attr("boolean"),fdimported:t.default.attr("boolean"),appId:t.default.attr("number"),userId:t.default.attr("number"),lastUpdatedAt:t.default.attr("date"),platforms:t.default.attr(),tags:t.default.attr(),dsArticles:t.default.hasMany("dsArticle"),icon:t.default.attr("string")})
e.default=s}),define("hotline-web/models/ds-faq",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({dsCategories:t.default.hasMany("dsCategory"),contentLocale:s(),lastModifiedAt:s("number"),status:s("number")})
e.default=n}),define("hotline-web/models/event-condition",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({eventConditionId:s("number"),eventName:s("string"),occurrenceCount:s("number"),firstOccurredMillis:s("number"),lastOccurredMillis:s("number")})
e.default=n}),define("hotline-web/models/event-property",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({key:s("string"),value:s("string")})
e.default=n}),define("hotline-web/models/event",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.hasMany,a=t.default.Model.extend({createdMillis:s("number"),name:s("string"),eventProperties:n("eventProperty")})
e.default=a}),define("hotline-web/models/executed-rule",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({ruleId:s("number"),sentCount:s("number"),sentCountSession:s("number"),openedCount:s("number")})
e.default=n}),define("hotline-web/models/external-article",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({alias:t.default.attr("string"),appId:t.default.attr("number"),contentType:t.default.attr("string"),created:t.default.attr("string"),templateContentPayloads:t.default.attr(),templateId:t.default.attr("number"),updated:t.default.attr("string")})
e.default=s}),define("hotline-web/models/faq",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({categories:t.default.hasMany("category"),contentLocale:s(),lastModifiedAt:s("number"),status:s("number")})
e.default=n}),define("hotline-web/models/geolocation",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({country:s("string"),city:s("string")})
e.default=n}),define("hotline-web/models/heartbeat",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.Model.extend({seen:t.default.attr("number")})
e.default=s}),define("hotline-web/models/identifier",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({identifier:s("number")})
e.default=n}),define("hotline-web/models/ls-datastore",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.belongsTo,a=t.default.hasMany,i=t.default.Model.extend({appId:s("number"),conversations:a("conversation"),properties:n("properties"),externalId:s("string"),messageAfter:s("number"),updatedAt:s("number"),userBehaviour:n("userBehaviour"),alias:s("string"),wcfcToken:s("string"),seq:s(),meta:s(),dsFaq:n("dsFaq")})
e.default=i}),define("hotline-web/models/message",["exports","ember-data","hotline-web/utils/constants"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.attr,a=t.default.Model.extend({alias:n("string"),appId:n("number"),articleId:n("number"),autoRuleId:n("number"),autoRuleRead:n("boolean"),bytes:n("number"),campaignMessageId:n("string"),categoryId:n("number"),channelId:n("number"),conversationId:n("number"),createdMillis:n("number"),deeplinkId:n("number"),delivered:n("boolean"),durationInSecs:n("number"),flowId:n("string"),flowStepId:n("string"),flowVersionId:n("string"),hasBeenRepliedTo:n("boolean"),hasBeenRepliedToOffline:n("boolean"),internalMeta:n(),isCalendarInviteBooked:n("boolean"),isNotAuthenticated:n("boolean"),isResponseForBot:n("boolean"),location:n("string"),manualCampaignRead:n("boolean"),marketingId:n("number"),messageFragments:n(),messageId:n("number"),messageType:n("number"),messageUserAlias:n("string"),messageUserFirstName:Ember.computed("messageUserName","userFirstName",{get:function(){return s.default.CONVERSATION.MESSAGE_TYPE.BOT===this.messageType||s.default.CONVERSATION.MESSAGE_TYPE.FREDDY_BOT===this.messageType?this.messageUserName:this.userFirstName?this.userFirstName:this.messageUserName?this.messageUserName.split(" ")[0]:""}}),messageUserId:n("number"),messageUserName:n("string"),messageUserProfilePic:n("string"),messageUserType:n("number"),msgHopId:n("string"),needsUpdation:n("boolean"),offlineMessage:n("boolean"),read:n("boolean"),readByUser:n("boolean"),replyFragments:n(),replyTo:n(),ruleId:n("number"),shouldTranslate:n("number"),source:n("number"),status:n("number"),text:n("string"),title:n("string"),userFirstName:n("string"),userLastName:n("string")})
e.default=a}),define("hotline-web/models/offline-experience",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({appId:s("number"),awayMessage:s(),endMessage:s(),channelIds:s(),agentAvailability:s("boolean"),localeId:s("number"),offlineExpEnabled:s("boolean"),contactInfo:s("number")})
e.default=n}),define("hotline-web/models/operating-hours",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({appId:s("number"),awayMessage:s("string"),created:s("number"),days:s(),enabled:s("boolean"),operatingHoursId:s("number"),timezone:s("string"),working:s(),workingDaily:s("boolean"),defaultBhr:s("boolean")})
e.default=n}),define("hotline-web/models/participant",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.hasMany,a=t.default.Model.extend({appId:s("number"),clientType:s("number"),clientVersionCode:s("number"),createdMillis:s("number"),email:s("string"),agentId:s("number"),name:s("string"),notificationId:s("string"),notificationType:s("number"),type:s("number"),updatedMillis:s("number"),roleId:s("number"),groups:n("identifier")})
e.default=a}),define("hotline-web/models/pic-file",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({dataUrl:s("string")})
e.default=n}),define("hotline-web/models/properties",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({name:Ember.computed("firstName","lastName",{get:function(){var e=this.firstName,t=this.lastName
return e?t?"".concat(e," ").concat(t).trim():e.trim():"Unknown"}}),firstName:s("string"),lastName:s("string"),nameChanged:s("boolean"),email:s("string"),phone:s("string"),phoneCountry:s("string"),locale:s("string")})
e.default=n})
define("hotline-web/models/response-time",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({responseTime:s("string")})
e.default=n}),define("hotline-web/models/response",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({success:s("boolean")})
e.default=n}),define("hotline-web/models/rts-token",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({accountId:s("string"),channelName:s("string")})
e.default=n}),define("hotline-web/models/rule-command-value",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({channelId:s("number"),agentId:s("number"),message:s(),link:s("string"),picUrl:s("string")})
e.default=n}),define("hotline-web/models/rule-command",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({commandType:s("string"),commandValue:t.default.belongsTo("ruleCommandValue")})
e.default=n}),define("hotline-web/models/rule-condition",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({conditionId:s("number"),conditionType:s("string"),dataType:s("string"),key:s("string"),value:s("string")})
e.default=n}),define("hotline-web/models/rule-event-condition",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({segmentId:s("number"),eventConditionId:s("number"),eventName:s("string"),occurrenceConditions:t.default.hasMany("ruleCondition"),propertyConditions:t.default.hasMany("ruleCondition")})
e.default=n}),define("hotline-web/models/rule-segment",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({ruleId:s("number"),segmentId:s("number"),conditionMatchType:s("string"),userConditions:t.default.hasMany("ruleCondition"),eventConditions:t.default.hasMany("ruleEventCondition")})
e.default=n}),define("hotline-web/models/rule",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({appId:s("number"),ruleId:s("number"),enabled:s("boolean"),ruleName:s("string"),ruleDescription:s("string"),ruleType:s("string"),isScheduled:s("boolean"),sendAt:s("string"),triggerType:s("string"),segment:t.default.belongsTo("segment"),command:t.default.belongsTo("ruleCommand"),created:s("date"),updated:s("date")})
e.default=n}),define("hotline-web/models/user-behaviour",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.hasMany,a=t.default.Model.extend({locations:n("userLocation"),events:n("event"),eventConditions:n("eventCondition"),firstLocationMillis:s("number"),lastLocationMillis:s("number"),visitsCount:s("number"),viewsCount:s("number"),executedRules:n("executedRule"),hasLocationRule:s("boolean"),hasLocationKeyInRuleContent:s("boolean",{defaultValue:!1}),locationRuleFetchMillis:s("number"),userGeolocation:s()})
e.default=a}),define("hotline-web/models/user-location",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({pageUrl:s("string"),viewCount:s("number")})
e.default=n}),define("hotline-web/models/widget-info",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({channelResponse:s(),operatingHoursResponse:s(),offlineExperienceResponse:s(),responseTimeHolder:s(),userRules:s(),webChatConfig:s(),requestsWhiteListedDomains:s()})
e.default=n}),define("hotline-web/models/working",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.attr,n=t.default.Model.extend({day:s("number"),enabled:s("boolean")})
e.default=n}),define("hotline-web/modifiers/did-insert",["exports","@ember/render-modifiers/modifiers/did-insert"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/modifiers/did-update",["exports","@ember/render-modifiers/modifiers/did-update"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/modifiers/will-destroy",["exports","@ember/render-modifiers/modifiers/will-destroy"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/resolver",["exports","ember-resolver"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default
e.default=s}),define("hotline-web/router",["exports","hotline-web/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Router.extend({location:t.default.locationType})
s.map(function(){this.route("home",function(){this.route("channel",{path:"/:channel_id"}),this.route("faqs")}),this.route("widget",function(){this.route("index",{path:"/",queryParams:["token","referrer"]}),this.route("index",{path:"/:version",queryParams:["token","referrer"]})}),this.route("access-denied",{path:"/error/403"},function(){}),this.route("503",{path:"/error/503"},function(){}),this.route("404",{path:"*path"})})
var n=s
e.default=n}),define("hotline-web/routes/404",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Route.extend({templateName:"error/404"})
e.default=t}),define("hotline-web/routes/503",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Route.extend({templateName:"error/503"})
e.default=t}),define("hotline-web/routes/access-denied",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Route.extend({templateName:"error/access-denied"})
e.default=t}),define("hotline-web/routes/application",["exports","hotline-web/mixins/message","hotline-web/mixins/localstorage"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=Ember.Route.extend(t.default,s.default,{router:Ember.inject.service(),beforeModel:function(e){var t=this.get("session.token"),s=this.get("session.siteId"),n=s?"hop-".concat(t,"-").concat(s):"hop-".concat(t)
!this.getItemLS("hop",n)&&t&&this.setItemLS("hop",this.get("hotline.ui.hop"),n,!1),Ember.set(this,"transition",e)},afterModel:function(){var e=this.routeName,t=this.transition,s=t&&t.targetName,n=this.session,a=n&&n.token,i=n&&n.referrer
s&&-1!==s.indexOf(e)&&(a&&i||this.unauthorizedRoute(t)),"application"===e&&"index"===s&&this.unauthorizedRoute(t)},unauthorizedRoute:function(e){e.abort(),this.replaceWith("access-denied")}})
e.default=n}),define("hotline-web/routes/home",["exports","hotline-web/routes/application","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/activity","hotline-web/mixins/window-listener-mixin","hotline-web/mixins/datastore","hotline-web/mixins/message","hotline-web/mixins/subscription","hotline-web/mixins/article-load","hotline-web/mixins/conversation-load","hotline-web/mixins/data-dog-mixin","hotline-web/mixins/user-reset","hotline-web/mixins/jwt","hotline-web/utils/dayjs","hotline-web/utils/timezone","hotline-web/helpers/polling"],function(e,t,s,n,a,i,r,o,l,c,u,d,m,h,f,g,p){function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var b=s.default.CONVERSATION.MESSAGE_TYPE.IMAGE,E=t.default.extend(a.default,i.default,r.default,o.default,l.default,u.default,c.default,d.default,m.default,h.default,{ruleEngine:Ember.inject.service(),notification:Ember.inject.service(),fetchFaqs:!1,messageStacker:Ember.inject.service(),model:function(){var e=Ember.get(this,"hotline.ui"),t=e&&e.userBehaviour,s=e&&e.channels,n=e&&e.hours,a=t&&t.eventRules,i=e&&e.rspTime,r=e&&e.offlineExperience
return Ember.RSVP.hash({channels:s,hours:n,rspTime:i,eventRules:a,offlineExperience:r})},afterModel:function(e){Ember.get(this,"session.user.id")||this.hotline.broadcastConversationLoaded(),this.bindNetworkEvents(),e&&(this.setupModel(e),this.getAgentsInformationForRules(e),this.getAgentsInformationForChannels(e)),this._super()},getAgentsInformationForRules:function(e){var t=e&&e.eventRules
if(t&&t.length>0)for(var s=t.length-1;s>=0;s--){var n=t[s]
n.agent&&this.store.pushPayload("agent",{agent:n.agent}),n.serviceAccount&&this.store.pushPayload("agent",{agent:n.serviceAccount})}},getAgentsInformationForChannels:function(e){var t=e&&e.channels
if(t&&t.length>0)for(var s=t.length-1;s>=0;s--){var n=t[s]
n.serviceAccount&&this.store.pushPayload("agent",{agent:n.serviceAccount})}},setupModel:function(e){this.postModel(e),this.loadFAQS()},postModel:function(e){var t,s=Ember.get(this,"hotline.ui")
e.hours&&(Ember.set(s,"hours",e.hours),this.processOperatingHours(),this.pollster||((t=p.default.create({onPoll:this.processOperatingHours.bind(this),interval:6e4})).start(),this.set("pollster",t))),e.rspTime&&Ember.set(s,"rspTime",e.rspTime),Ember.set(s,"userBehaviour",{eventRules:e.eventRules}),-1!==this.get("transition.targetName").indexOf("channels.index")&&this.openChannel(),this.connectSocket(),this.isJWTStrictMode&&this.jwt.on("didAuthenticateUser",this.didAuthUserCB),s.dsLoaded||(Ember.set(s,"dsLoaded",!0),this.postMessage({action:"datastore_loaded"})),e.isRoutedFromFAQ=this.transition.to.queryParams.isRoutedFromFAQ},didAuthUserCB:Ember.computed({get:function(){return this.didAuthenticateUser.bind(this)}}),didAuthenticateUser:function(){this.jwt.auth.expired?this.disconnectSocket(!1):this.jwt.auth.user&&this.connectSocket()},canShowBusinessClosedBanner:function(e){return!!e&&(1===e.filter(function(e){return e.enabled&&e.defaultBhr}).length&&!(!this.get("hotline.ui.config.messengerVisibility")||this.get("hotline.ui.config.messengerVisibility.selected")!==s.default.messengerVisibilityOptions.businessHours))},processOperatingHours:function(){var e=this,t=this.get("hotline.ui.hours"),n=t&&t.operatingHours,a=void 0,i=this.canShowBusinessClosedBanner(n)
this.get("hotline.ui.hours.operatingHours")&&this.set("hotline.ui.hours.operatingHours.clientTimeInMillis",(new Date).getTime()),Ember.set(this.get("hotline.ui"),"awayMessage",[])
for(var r=0,o=n.length;r<o;r++){var l=n[r],c=(new Date).getTime(),u=void 0,d=void 0,m=void 0,h=!0,p=void 0
if(Ember.set(l,"clientTimeInMillis",(new Date).getTime()),l)if(l.enabled)if(u=c-n.clientTimeInMillis,m=((d=(0,f.default)(g.default.convert(l.serverTimeInMillis+u,l.timezone.replace(" - ","/")))).day()+6)%7,"true"!==l.working[m])h=!0
else for(var v=0,b=(p=this.workingHours(l.days[m])).length;v<b;v++){var E=p[v],y=parseInt(E[0],10),w=parseInt(E[1],10),T=d.clone().startOf("day").add(y,"s"),S=d.clone().startOf("day").add(w,"s")
if(d.isAfter(T)&&d.isBefore(S)){h=!1,i&&(a=S.diff(d))
break}}else h=!1
else h=!1
var _={operatingHoursId:l.operatingHoursId,awayMessage:h?l.awayMessage:"",defaultBhr:l.defaultBhr,enabled:l.enabled}
this.get("hotline.ui.awayMessage").push(_)}i&&!this.get("hotline.ui.triggerTimerForBusinessHours")&&a&&a>0&&(Ember.set(this.get("hotline.ui"),"triggerTimerForBusinessHours",!0),this.logger.log("Countdown timer to show Business Closed banner after end of Business hours has begun. Duration: ".concat(a," milliseconds")),Ember.run.later(function(){Ember.set(e.get("hotline.ui"),"showBusinessClosedBanner",!0),Ember.set(e.get("hotline.ui"),"triggerTimerForBusinessHours",s.default.messengerVisibilityOptions.businessHours),e.logger.log("Countdown timer to show Business Closed banner has completed. Duration: ".concat(a," milliseconds"))},a))},workingHours:function(e){return e.substr(0,e.length-1).split(";").reduce(function(e,t,s){var n=Math.floor(s/2)
return e[n]=[].concat(e[n]||[],t),e},[])},onAdvicePullCB:Ember.computed({get:function(){return this.onAdvicePull.bind(this)}}),onUserMessageCB:Ember.computed({get:function(){return this.onUserMessage.bind(this)}}),disconnectSocket:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]
!this.rts.connection||this.rts.connecting||this.rts.reconnecting||(this.rts.off("didUserMessage",this.onUserMessageCB),this.rts.off("didAdvicePull",this.onAdvicePullCB),e&&this.rts.connection.unsubscribeAll(),this.rts.close())},connectSocket:function(){if(this.rts.connection||this.rts.connecting||this.rts.reconnecting||!Ember.get(this,"session.user.id")){if(this.rts.connection&&this.rts.didDisconnect&&!this.rts.connecting&&!this.rts.reconnecting&&Ember.get(this,"session.user.id")){var e=s.default.DataDog.events.connectionDropped
this.increment({evt:e,tags:v({},e.tags.dropStatus.key,e.tags.dropStatus.value.connection_retried)}),this.rts.close(),this.rts.create()}}else this.rts.on("didUserMessage",this.onUserMessageCB),this.rts.on("didAdvicePull",this.onAdvicePullCB),this.rts.create()},sessionUserObserver:Ember.observer("session.user.id",function(){this.get("session.user.id")?this.connectSocket():this.disconnectSocket()}),onUserMessage:function(e,t,a){var i,r,o=this.get("hotline.ui"),l=this.messageStacker,c=this.session,u=c&&c.config,d=u&&u.agent,m=d&&d.hideName,h=c&&c.appDisplayName||c.appName,f=this.store,g=this.localds,p=g.get("seq"),v=this.conversations,E=this.displayChannels,y=e&&e.type,w=e&&e.conversation,T=w&&w.messages&&w.messages.length&&w.messages[0],S=w&&w.channelId,_=v.findBy("channelId",S),M=n.default.findObjectByValueProperty(E,S,"channelId")
if(T&&T.messageType===s.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ENDED&&window.parent&&this.postMessage({event_id:"cobrowsingStop"}),this.isJWTStrictMode){if(this.jwt.auth.expiredAt||this.jwt.auth.scheduled||this.jwt.auth.expired)return void this.disconnectSocket(!1)
if(this.isJwtExpired())return this.disconnectSocket(!1),void this.initiateSendingMode()}if((this.send("ackMessageInRTS",T,t),"MESSAGE_RECEIVED"===y)&&(r=(T&&T.messageUserType)===s.default.CONVERSATION.USER_TYPE.USER?"message_from_user":"message_from_agent",this.rts.checkForSubscription(),T)){var I=T.messageUserName
s.default.CONVERSATION.MESSAGE_TYPE.BOT!==T.messageType&&s.default.CONVERSATION.MESSAGE_TYPE.FREDDY_BOT!==T.messageType&&(I=m||!I?h:I.split(" ")[0]),this.postMessage({action:r,data:{message:{messageFragments:T.messageFragments,messageUserName:I,appName:h,createdMillis:T.createdMillis,channelId:S,conversationId:w.conversationId,stepId:T.flowStepId}}})}if(1===a||0===p.id||a===p.id+1){if("MESSAGE_RECEIVED"===y||"COBOROWSING_STATUS_UPDATED"===y){if(w){var C,A,O,x,N,k,R=T&&T.messageId,P=T&&T.marketingId,j=T&&T.msgHopId,U=T&&T.messageUserType,L=_&&_.get("messages"),D=this.notification
if(-1!==b.indexOf(T.messageType)&&n.default.resizeImage(T),S&&Ember.set(T,"channelId",S),Ember.set(T,"delivered",!0),L){C=R&&L.findBy("messageId",R)||P&&L.findBy("marketingId",P)||j&&L.findBy("msgHopId",j),T&&T.flowStepId&&0!==T.messageUserType&&(k=n.default.updateAndGetLastFlowMessage(L,T)),T&&T.ruleId&&0!==T.messageUserType&&(A=n.default.updateAndGetLastAutoMessage(L,T)),T&&T.source===s.default.CONVERSATION.MESSAGE_SOURCE.OFFLINE&&(O=(N=(x=L.filter(function(e){return e.get("source")===s.default.CONVERSATION.MESSAGE_SOURCE.OFFLINE&&e.get("needsUpdation")}))&&x.length)?x[N-1]:null)
var F=L.filterBy("offlineMessage",!0).filterBy("hasBeenRepliedToOffline",!1)
if((T&&T.messageUserType===s.default.CONVERSATION.USER_TYPE.AGENT&&F.length||T.internalMeta)&&F.length&&F[F.length-1].set("hasBeenRepliedToOffline",!0),C&&j&&C.get("msgHopId")&&R&&C.get("messageId")&&C.get("msgHopId")===j&&C.get("messageId")!==R&&(C=null),C)"COBOROWSING_STATUS_UPDATED"===y?C.set("messageType",T.messageType):f.cloneRecord(C,T),this.logger.log("Updating Message")
else if(A)Ember.set(A,"messageUserAlias",T.messageUserAlias),f.cloneRecord(A,T),this.logger.log("Updated automessage via Websockets")
else if(k)Ember.set(k,"messageUserAlias",T.messageUserAlias),f.cloneRecord(k,T),this.logger.log("Updated flowmessage via Websockets")
else if(O){Ember.set(O,"messageUserAlias",T.messageUserAlias),f.cloneRecord(O,T),O.set("needsUpdation",!1)
for(var B=0;B<N-1;B++)x[B].set("needsUpdation",!1)
this.logger.log("Updated offlineMessage via Websockets")}else{var H=f.createRecord("message",T),V=Ember.get(L,"lastObject")
if(V&&Ember.get(V,"messageId")){for(var G=L.length-1;G>=0;G--){var q=L.objectAt(G)
if(Ember.get(q,"createdMillis")<Ember.get(T,"createdMillis")){L.insertAt(G+1,H)
break}}G<0&&L.pushObject(H)}else L.pushObject(H)
this.logger.log("Adding Message")}}else{var z,Y=Ember.A([])
if(Y.pushObject(f.createRecord("message",T)),z=f.createRecord("conversation",{conversationId:w.conversationId,channelId:w.channelId,messages:Y}),v)v.pushObject(z)
else{var W=Ember.A([])
W.pushObject(z),g.set("conversations",W)}}i=T.createdMillis,g.set("messageAfter",i),this.send("save",M&&!C),M&&(U&&!T.ruleId?(l.isSameAsLastAgentChannelId(T.channelId)?Ember.setProperties(o,{lockAgentMessage:!0}):o.lockAgentMessage||Ember.setProperties(o,{lockAgentMessage:void 0}),l.setLastAgentMessage(T),Ember.run.later(function(){D.playSound()},0)):o.lockAgentMessage||(Ember.setProperties(o,{lockAgentMessage:void 0}),l.resetLastAgentMessages())),_.set("status",w.status)}}else"CONVERSATION_RESOLVED"===y?(w.hasPendingCsat&&(_.set("csat",f.createRecord("csat",w.csat)),_.set("hasPendingCsat",w.hasPendingCsat)),_.set("status",w.status),this.send("save")):"CSAT_RESPONSE_RECEIVED"===y?_.get("csat")&&(Ember.set(_,"hasPendingCsat",!1),this.send("save")):"GDPR_USER_DELETED"===y&&this.deleteUser()
g.set("seq",{id:a,millis:i}),this.send("save")}else this.populateConversation(s.default.CONVERSATION.FETCH.RTS_SEQ_ID_MISMATCH,null,p.millis)},onAdvicePull:function(e){var t=e&&e.src
if(t===s.default.CONVERSATION.FETCH.RTS_ADVICE_PULL){var n=s.default.DataDog.events.advicePull
this.increment({evt:n,tags:v({},n.tags.pullStatus.key,n.tags.pullStatus.value.called)})}var a=this.router.currentRouteName,i=a&&"home.faqs"!==a
this.populateConversation(t,e.channel&&i?this.openChannel:null,e&&e.reset?0:null)},openChannel:function(){var e=this.displayChannels,t=e&&e.length,s=this.get("session.config.openChannelId")
if(t&&1===t&&!this.isFAQAvailable)this.transition.abort(),this.replaceWith("home.channel",e[0].channelId)
else if(s){var n=e.findBy("channelId",s)
n&&n.channelId&&this.replaceWith("home.channel",n.channelId)}},populateConversation:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=s.default.EmberModelUrl.conversations,r=this.session,o=r&&r.user,l=i.url.replace("{token}",r.token).replace("{userAlias}",o.alias),c=r&&r.siteId,u=null!==a?a:r&&r.didMessage,d=t?{src:t}:{src:s.default.CONVERSATION.FETCH.DEFAULT}
u&&(d.messageAfter=u),c&&(l+="?siteId=".concat(c)),this.store.getRequest(i.model,l,d).then(function(i){var r=i&&i.errorCode,o=e.get("hotline.ui"),l=t===s.default.CONVERSATION.FETCH.RTS_ADVICE_PULL,c=s.default.DataDog.events.advicePull
if(o&&o.helpNote&&Ember.set(o,"helpNote",void 0),r)l&&e.increment({evt:c,tags:v({},c.tags.pullStatus.key,c.tags.pullStatus.value.readError)})
else{l&&e.increment({evt:c,tags:v({},c.tags.pullStatus.key,c.tags.pullStatus.value.read)})
var u=e.conversations,d=[]
if(0===a&&u){u.forEach(function(e){var t=[]
if(e.get("messages").forEach(function(e){0===e.get("messageUserType")&&e.get("status")===s.default.MESSAGE_STATUS.PENDING&&t.push(e)}),t.length){var n=e.serialize()
e.messages=t,d.push(n)}})
var m=i&&i.conversations
m&&m.forEach(function(e){var t=u.findBy("channelId",e.channelId)
u.removeObject(t)}),e.send("save",!1)}e.loadConversation(i.conversations||[]),e.loadConversation(d)}n&&n.call(e)})},actions:{restoreConversation:function(){this.populateConversation(s.default.CONVERSATION.FETCH.CONVERSATION_RESTORED,this.openChannel)},gotoFAQ:function(e,t){var s=this.get("hotline.ui")
Ember.set(s,"modal",e),this.transitionTo("home.faqs",{queryParams:{isDeepLinkFAQ:!0,fromChannelId:t}})},gotoFAQCategory:function(e){this.transitionTo("home.faqs",{queryParams:{isDeepLinkCategory:!0,categoryID:e}})}}})
e.default=E}),define("hotline-web/routes/home/channel",["exports","hotline-web/routes/application","hotline-web/mixins/datastore","hotline-web/mixins/channel","hotline-web/utils/constants"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=t.default.extend(s.default,n.default,{init:function(){this._super.apply(this,arguments),this.conversationStatus=[]},model:function(e){var t,s,n=this,i=a.default.EmberModelUrl.conversationStatus,r=this.getParentRouteName(),o=r?this.modelFor(r):null,l=parseInt(e.channel_id)
if((o&&(t=o.channels,s=o.offlineExperience),s&&s.offlineExpEnabled)&&this.offlineExperienceEnabledChannel(l,s.channelIds)){var c=t.findBy("channelId",l),u=this.get("session.token"),d=this.get("hotline.ui.awayMessage"),m=c.operatingHoursId,h=d.findBy("operatingHoursId",m)
if((!h||h&&!h.enabled)&&(h=d.findBy("defaultBhr",!0)),h&&h.awayMessage){var f=this.conversations.findBy("channelId",l),g=f&&f.get("conversationId"),p=this.session,v=p&&p.user,b=v&&v.alias
if(g){var E,y=this.channelInfoAvailable(l,this.conversationStatus)
if(y&&(E=this.shouldUpdateChannelInfo(l,this.conversationStatus)),!y||y&&E)return Ember.RSVP.hash({channelId:e.channel_id,conversationStatus:this.store.getRequest(i.model,i.url.replace("{token}",u).replace("{userAlias}",b)+"?conversationId="+g+"&excludeMessages=true").then(function(e){y?y&&E&&n.conversationStatus&&n.conversationStatus.forEach(function(t){t.channelId===l&&(t.lastRequestedTime=(new Date).getTime(),t.conversationStatus=e.status,f.set("status",e.status),n.send("save"))}):(n.conversationStatus.push({channelId:l,conversationStatus:e.status,lastRequestedTime:(new Date).getTime()}),f.set("status",e.status),n.send("save"))})})}}}return Ember.RSVP.hash({channelId:e.channel_id})},afterModel:function(e){var t=this.getParentRouteName(),s=t?this.modelFor(t):null
s&&(e.channels=s.channels,e.operatingHours=s.hours,e.offlineExperience=s.offlineExperience),this._super()},channelInfoAvailable:function(e,t){return t&&t.findBy("channelId",e)},shouldUpdateChannelInfo:function(e,t){var s=t.findBy("channelId",e)
return!(!s||!s.lastRequestedTime)&&(new Date).getTime()-s.lastRequestedTime>3e5},offlineExperienceEnabledChannel:function(e,t){return(t&&t.indexOf(e))>=0}})
e.default=i}),define("hotline-web/routes/home/faqs",["exports","hotline-web/routes/application","hotline-web/mixins/datastore","hotline-web/mixins/data-dog-mixin","hotline-web/mixins/conversation-load","hotline-web/mixins/faq"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=t.default.extend(s.default,n.default,a.default,i.default,{queryParams:{isDeepLinkFAQ:{refreshModel:!1},isDeepLinkCategory:{refreshModel:!1},category:{refreshModel:!1}},model:function(){return this.get("localds.dsFaq")?Ember.Object.create({status:304}):this.fetchFaqData()},afterModel:function(e,t){e=this.buildFaqDataObject(e)
var s=t.to.queryParams
if(s&&s.isDeepLinkFAQ&&JSON.parse(s.isDeepLinkFAQ))Ember.set(e,"isDeepLinkFAQ",!0),s.fromChannelId&&Ember.set(e,"fromChannelId",s.fromChannelId)
else{var n=this.get("hotline.ui")
n&&Ember.setProperties(n,{modal:void 0,modalOpen:!1,openArticleFromMessage:!1})}if(s&&s.isDeepLinkCategory&&JSON.parse(s.isDeepLinkCategory)){var a=e.categories&&e.categories.findBy("categoryId",parseInt(s.categoryID))
Ember.setProperties(e,{isDeepLinkCategory:!0,category:a})}return e},actions:{gotoChannel:function(){var e=this.displayChannels,t=e&&e.length
if(t&&1===t&&this.replaceWith("home.channel",e[0].channelId),t&&t>1){var s=this.modelFor(this.routeName)
s&&s.fromChannelId?this.replaceWith("home.channel",s.fromChannelId):this.replaceWith("home")}},gotoHome:function(){this.replaceWith("home")}}})
e.default=r}),define("hotline-web/routes/widget",["exports","hotline-web/utils/constants","hotline-web/mixins/datastore","hotline-web/mixins/data-dog-mixin","hotline-web/mixins/conversation-load","hotline-web/routes/application","hotline-web/mixins/message","hotline-web/utils/utils"],function(e,t,s,n,a,i,r,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var l=i.default.extend(s.default,a.default,n.default,r.default,{locale:Ember.inject.service(),beforeModel:function(){this.locale.updateAppLocale()},model:function(e,s){var n=s.to.queryParams.token&&s.to.queryParams.token.trim(),a=s.to.queryParams.referrer,i=t.default.EmberModelUrl.config,r=i.url.replace("{token}",n).replace("{domainName}",a),o=this.session
return n&&n.toUpperCase()===t.default.SAMPLE_TOKEN?null:n&&a&&o?(Ember.set(o,"token",n),Ember.set(o,"referrer",a),Ember.set(o,"config",{}),this.store.getRequest(i.model,r)):null},afterModel:function(e,s){var n=this.session,a=this.hotlineUI,i=e&&e.appId,r=e&&e.appName,l=e&&e.userAuthConfig,c=e&&o.default.bulidBetaFeatureFlagObject(e.betaFeatures)
if(e&&(e.betaFeatures=c,c[t.default.FEATURES.KUBE_CANARY_ENABLED_FLAG]&&o.default.setKubeCanaryHeader(!0),this.jwt.enable(l&&l.jwtAuthEnabled||!1),this.jwt.strict(l&&l.strictModeEnabled||!1),this.jwt.isEnabled&&(this.jwt.auth.timeoutInterval=l&&l.authTimeOutInterval),Ember.set(a,"config",e),this.setTag({key:"accountId",value:e.accountId}),Ember.set(n,"appId",i),Ember.set(n,"appName",r),Ember.set(n,"appDisplayName",r)),e.hideMessenger)return s.abort(),this.replaceWith("access-denied"),!1}})
e.default=l}),define("hotline-web/sanitizer/strict",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={elements:["h1","h2","a","b","i","u","strong","em"],attributes:{a:["href","target"]}}}),define("hotline-web/sanitizers/strict",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={elements:["h1","h2","a","b","i","u","br","strong","em","li","ol","ul","p"],attributes:{a:["href","target","rel"]}}}),define("hotline-web/serializers/agent",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.RESTSerializer.extend(t.default.EmbeddedRecordsMixin,{primaryKey:"alias"})
e.default=s}),define("hotline-web/serializers/application",["exports","ember-data","hotline-web/mixins/payload"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.RESTSerializer.extend(t.default.EmbeddedRecordsMixin,s.default,{attrs:{}})
e.default=n})
define("hotline-web/serializers/article",["exports","hotline-web/serializers/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({primaryKey:"articleId"})
e.default=s}),define("hotline-web/serializers/calendar-avail-info",["exports","hotline-web/serializers/datastore"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({attrs:{calendarTimeSlots:{embedded:"always"}}})
e.default=s}),define("hotline-web/serializers/calendar-time-slot",["exports","hotline-web/serializers/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({normalize:function(e,t){return t.id=this.record.next(),this._super.apply(this,arguments)}})
e.default=s}),define("hotline-web/serializers/category",["exports","hotline-web/serializers/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({primaryKey:"categoryId",attrs:{articles:{embedded:"always"}}})
e.default=s}),define("hotline-web/serializers/conversation",["exports","ember-data","hotline-web/serializers/datastore"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{messages:{embedded:"always"},csat:{embedded:"always"}}})
e.default=n}),define("hotline-web/serializers/datastore",["exports","ember-data","ember-localforage-adapter/serializers/localforage"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{conversations:{embedded:"always"},properties:{embedded:"always"},userBehaviour:{embedded:"always"},dsFaq:{embedded:"always"}}})
e.default=n}),define("hotline-web/serializers/ds-article",["exports","ember-data","hotline-web/serializers/datastore"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{}})
e.default=n}),define("hotline-web/serializers/ds-category",["exports","ember-data","hotline-web/serializers/datastore"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{dsArticles:{embedded:"always"}}})
e.default=n}),define("hotline-web/serializers/ds-faq",["exports","ember-data","hotline-web/serializers/datastore"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{dsCategories:{embedded:"always"}}})
e.default=n}),define("hotline-web/serializers/event",["exports","ember-data","ember-localforage-adapter/serializers/localforage"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{eventProperties:{embedded:"always"}}})
e.default=n}),define("hotline-web/serializers/external-article",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.RESTSerializer.extend(t.default.EmbeddedRecordsMixin,{primaryKey:"alias",normalizeSingleResponse:function(e,t,s,n,a){var i={}
return i[Ember.String.camelize(t.modelName)]=s,this._super(e,t,i,n,a)}})
e.default=s}),define("hotline-web/serializers/faq",["exports","hotline-web/serializers/application"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.extend({attrs:{categories:{embedded:"always"}}})
e.default=s}),define("hotline-web/serializers/localforage",["exports","ember-localforage-adapter/serializers/localforage"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default
e.default=s}),define("hotline-web/serializers/ls-datastore",["exports","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=t.default.JSONSerializer.extend(t.default.EmbeddedRecordsMixin,{attrs:{conversations:{embedded:"always"},properties:{embedded:"always"},userBehaviour:{embedded:"always"},dsFaq:{embedded:"always"}},_shouldSerializeHasMany:function(e,t,s){var n=e.type.determineRelationshipType(s,this.store)
return!!this._mustSerialize(t)||this._canSerialize(t)&&("manyToNone"===n||"manyToMany"===n||"manyToOne"===n)}})
e.default=s}),define("hotline-web/serializers/user-behaviour",["exports","ember-data","ember-localforage-adapter/serializers/localforage"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=s.default.extend(t.default.EmbeddedRecordsMixin,{attrs:{locations:{embedded:"always"},events:{embedded:"always"},eventConditions:{embedded:"always"},executedRules:{embedded:"always"}}})
e.default=n}),define("hotline-web/services/agent",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend({store:Ember.inject.service(),getAgentInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:""
return!Ember.isBlank(e)&&this.store.findRecord("agent",e.toString())}})
e.default=t}),define("hotline-web/services/ajax",["exports","ember-ajax/services/ajax"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/services/batch",["exports","hotline-web/utils/constants","hotline-web/mixins/transaction-mixin","hotline-web/utils/dom-utils"],function(e,t,s,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=t.default.Batch.errors,i=Ember.Service.extend(Ember.Evented,s.default,{init:function(){this._super.apply(this,arguments),this._transactions=[],this._interval=3e4,this._timer=null,this._size=200,this._runner=null,this._runnerCB=null,this._types=[t.default.Batch.transactions.types.dd.id,t.default.Batch.transactions.types.events.id],this._registers()},_registers:function(){this._timer=setInterval(this.execute.bind(this),this._interval),n.default.bindEvent(window,"beforeunload",this._deregisters.bind(this))},_deregisters:function(){var e=this
!1===this.paused()&&this._types.forEach(function(t){return e.processTransaction(t)}),this._timer&&clearInterval(this._timer),n.default.unbindEvent(window,"beforeunload")},enter:function(e){var t=this
return new Ember.RSVP.Promise(function(s,n){var i=e&&e.type,r=e&&e.payload
if(t.isValid(i)&&r){var o=t.paused(),l=function(){this.push(i,r),s()}
o?o.then(l.bind(t)):l.call(t)}else n(a.ERR_TRANS_INVALID)})},push:function(e,t){var s=e&&e.id
this._transactions[s]||(this._transactions[s]=[]),2!==s||t.occTime||(t.occTime=(new Date).getTime()),this._transactions[s].push(t)},execute:function(){var e=this
this._runner=new Ember.RSVP.Promise(function(t,s){e._runnerCB=function(e){e?t():s()}}),this.run().then(function(){e._runnerCB&&"function"==typeof e._runnerCB&&(e._runnerCB(!0),e._runnerCB=void 0,e._runner=void 0)})},run:function(){var e=this
return new Ember.RSVP.Promise(function(t){e._types.forEach(function(t){return e.processTransaction(t)}),t()})},paused:function(){return!!this._runner&&this._runner},isValid:function(e){var t=e&&e.id
return!(!t||!this._types.includes(t))}})
e.default=i}),define("hotline-web/services/cache",["exports"],function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Service.extend({init:function(){this._super.apply(this,arguments),this._cache={}},encache:function(e,s){void 0===this._cache[e]&&(this._cache[e]=[]),"object"===t(s)?this._cache[e].push(s):this._cache[e].addObject(s)},clearAll:function(){this._cache={}},clear:function(e){this._cache[e]=void 0},decache:function(e){var t=this._cache[e]
return this.clear(e),t},findBy:function(e,t){return this._cache[e]?this._cache[e].findBy("action",t):null}})
e.default=s}),define("hotline-web/services/external-article",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend({store:Ember.inject.service(),getArticleInfo:function(e,t){return this.store.adapterFor("external-article").getArticle(e,t)},postArticleFeedback:function(e){return this.store.adapterFor("external-article").postArticleFeedback(e)}})
e.default=t}),define("hotline-web/services/flash",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend({init:function(){this._super.apply(this,arguments),this.set("message","")},showMessage:function(e){var t=this
this.set("message",e),setTimeout(function(){t.isDestroyed||t.set("message",void 0)},4e3)}})
e.default=t}),define("hotline-web/services/hotline",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t,s,n=Ember.Service.extend(Ember.Evented,{broadcastConversationLoaded:function(){this.get("ui.isConversationsLoaded")||this.trigger("conversationsLoadedEvent"),this.set("ui.isConversationsLoaded",!0)},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isIOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},isIPad:function(){return/iPad/i.test(navigator.userAgent)},isIPhone:function(){return/iPhone/i.test(navigator.userAgent)},isAndroid:function(){return/Android/i.test(navigator.userAgent)},isTablet:function(){return"function"==typeof this.md&&this.md().tablet()},init:function(){this._super.apply(this,arguments),this.set("ui",{hop:(new Date).getTime().toString(),sockets:{},onLine:!0,pushPermission:"default",parentTitle:"",parentLocation:"",widgetFocussed:!1,awayMessage:"",expandCollapse:!0,loading:!1,widget:window!==window.parent,isDesktop:!this.isMobile(),isIPhone:this.isIPhone(),isIOS:this.isIOS(),isIPad:this.isIPad(),isTablet:this.isTablet(),isAndroid:this.isAndroid(),browser:this.getBrowserInfo(),isFirefoxMobile:this.isFirefoxMobile(),storageAvailable:this.storageAvailable("localStorage"),isConversationsLoaded:!1})},md:(t=window.navigator.userAgent,function(){return s||(s=new window.MobileDetect(t))}),storageAvailable:function(e){var t,s="__storage_test__"
try{return(t=window[e]).setItem(s,s),t.removeItem(s),!0}catch(n){return n instanceof window.DOMException&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)&&0!==t.length}},device:function(){var e=this.md()
return e.phone()?"phone":e.tablet()?"tablet":"desktop"},isFirefoxMobile:function(){var e=this.md()
return!("Firefox"!==this.getBrowserInfo().name||!e.phone()&&!e.tablet())},getBrowserInfo:function(){var e,t,s,n=navigator.appVersion,a=navigator.userAgent,i=navigator.appName,r=""+parseFloat(n),o=parseInt(n,10)
return-1!==(t=a.indexOf("Opera"))?(i="Opera",r=a.substring(t+6),-1!==(t=a.indexOf("Version"))&&(r=a.substring(t+8))):-1!==(t=a.indexOf("MSIE"))?(i="Microsoft Internet Explorer",r=a.substring(t+5)):-1!==(t=a.indexOf("Edge"))?(i="Edge",r=a.substring(t+5)):-1!==(t=a.indexOf("Trident"))?(i="Trident",r=a.substring(t+8)):-1!==(t=a.indexOf("Chrome"))?(i="Chrome",r=a.substring(t+7)):-1!==(t=a.indexOf("Safari"))?(i="Safari",r=a.substring(t+7),-1!==(t=a.indexOf("Version"))&&(r=a.substring(t+8))):-1!==(t=a.indexOf("Firefox"))?(i="Firefox",r=a.substring(t+8)):(e=a.lastIndexOf(" ")+1)<(t=a.lastIndexOf("/"))&&(i=a.substring(e,t),r=a.substring(t+1),i.toLowerCase()===i.toUpperCase()&&(i=navigator.appName)),-1!==(s=r.indexOf(";"))&&(r=r.substring(0,s)),-1!==(s=r.indexOf(" "))&&(r=r.substring(0,s)),o=parseInt(""+r,10),isNaN(o)&&(r=""+parseFloat(n),o=parseInt(n,10)),{name:i,version:o,versionx:r,os:this.device()}}})
e.default=n}),define("hotline-web/services/intl",["exports","ember-intl/services/intl","hotline-web/utils/locale","jquery"],function(e,t,s,n){function a(e,t,s,n,a,i,r){try{var o=e[i](r),l=o.value}catch(c){return void s(c)}o.done?t(l):Promise.resolve(l).then(n,a)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=t.default.extend({fetchTranslations:function(e){var t=s.LocaleMapping.AcceptedLocalizations[e]&&s.LocaleMapping.AcceptedLocalizations[e].url
return n.default.ajax({method:"GET",url:t,dataType:"json"})},_loadTranslations:function(e){var t,n=this
return(t=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.locales||n.locales.includes(e)){t.next=5
break}return t.next=3,n.fetchTranslations(e).done(function(t){n.addTranslations(e,t),n.setLocale(e),-1!==s.LocaleMapping.RTLBasedLanguages.indexOf(e)&&document.body.setAttribute("dir","rtl")}).fail(function(){e!==s.LocaleMapping.DefaultLocaleKey&&n._loadTranslations(s.LocaleMapping.DefaultLocaleKey)})
case 3:t.next=6
break
case 5:n.setLocale(e)
case 6:case"end":return t.stop()}},t)}),function(){var e=this,s=arguments
return new Promise(function(n,i){var r=t.apply(e,s)
function o(e){a(r,n,i,o,l,"next",e)}function l(e){a(r,n,i,o,l,"throw",e)}o(void 0)})})()}})
e.default=i}),define("hotline-web/services/jwt",["exports","jquery"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Service.extend(Ember.Evented,{init:function(){this._super.apply(this,arguments),this.isEnabled=!1,this.isStrict=!1,this.auth={app:null,user:null,timer:null,timeoutInterval:null,expiredAt:null,expired:!1,scheduled:null}},enable:function(e){this.isEnabled=!0===e},strict:function(e){this.isStrict=!0===e},isJWTStrictMode:function(){return this.isEnabled&&this.isStrict},authenticateApp:function(e){this.auth.app=!0===e,this.trigger("didAuthenticateApp")},authenticateUser:function(e){Ember.set(this.auth,"user",!0===e),this.trigger("didAuthenticateUser")},authenticateToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null
e?(this.setExpiry(e),this.setAuthTimer(),this.authenticateUser(this.auth.user)):(this.unsetExpiry(),this.resetAuthTimer())},setAuthTimer:function(){var e=this
this.resetAuthTimer(),this.auth.timer=setTimeout(function(){e.setExpiry(),e.resetAuthTimer(),Ember.set(e.auth,"expired",!0),e.authenticateUser(!1)},this.auth.timeoutInterval||3e4)},resetAuthTimer:function(){this.auth.timer&&clearTimeout(this.auth.timer)},setExpiry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null
this.auth.expiredAt=e||parseInt((new Date).getTime()/1e3,10)},unsetExpiry:function(){this.auth.expiredAt=null},validateJWT:function(e){var s=this
return new Ember.RSVP.Promise(function(n,a){if(s.auth.scheduled)a({status:429,success:!1})
else{s.authenticateToken(),s.auth.scheduled=!0
var i=function(e){s.auth.scheduled=!1,e.validToken?(s.unsetExpiry(),Ember.set(s.auth,"expired",!1),n(e)):(s.setExpiry(),Ember.set(s.auth,"expired",!0),a())}
t.default.ajax({type:"POST",url:e.url,data:JSON.stringify(e.payload),dataType:"json",contentType:"application/json",success:i,error:i})}})}})
e.default=s}),define("hotline-web/services/locale",["exports","hotline-web/utils/update-locale","hotline-web/utils/locale"],function(e,t,s){function n(e,t,s,n,a,i,r){try{var o=e[i](r),l=o.value}catch(c){return void s(c)}o.done?t(l):Promise.resolve(l).then(n,a)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=Ember.Service.extend({intl:Ember.inject.service(),session:Ember.inject.service(),currentLocaleString:function(){var e=this.get("session.prop.locale")||this.get("session.user.locale"),t=window.navigator.languages&&window.navigator.languages.length&&window.navigator.languages[0],s=window.navigator.language
return t&&(e=e?"".concat(e,",").concat(t):t),s&&(e=e?"".concat(e,",").concat(s):s),e},currentLocale:function(){return this.get("session.prop.locale")||this.get("session.user.locale")||s.default.getNavigatorLanguage()},updateAppLocale:function(e){var a,i=this
return(a=regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Ember.isBlank(e)&&(e=i.currentLocale()),e=s.default.checkValidLocale(e),t.default.updateLocaleWith(e),n.next=5,i.intl._loadTranslations(e)
case 5:case"end":return n.stop()}},n)}),function(){var e=this,t=arguments
return new Promise(function(s,i){var r=a.apply(e,t)
function o(e){n(r,s,i,o,l,"next",e)}function l(e){n(r,s,i,o,l,"throw",e)}o(void 0)})})()}})
e.default=a}),define("hotline-web/services/logger",["exports","hotline-web/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Service.extend({log:function(e){"development"===t.default.environment&&console.log(e)}})
e.default=s}),define("hotline-web/services/message-stacker",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend({init:function(){this._super.apply(this,arguments),this.setProperties({showUnreadMessage:!1,lastAgentMessages:[],unreadMessagesCount:0})},hasMessages:Ember.computed.gt("lastAgentMessages.length",0),setLastAgentMessage:function(e){var t=e&&e.channelId
t&&this.get("lastAgentMessages.lastObject.channelId")!==t?this.resetLastAgentMessages():this.showUnreadMessage&&this.toggleUnreadMessagesCount(this.unreadMessagesCount+1)
var s,n=this.lastAgentMessages
Ember.isEmpty(n)||(s=e.flowId?n.find(function(t){return e.ruleId&&t.ruleId===e.ruleId&&e.flowStepId===t.flowStepId}):n.find(function(t){return e.ruleId&&t.ruleId===e.ruleId&&t.campaignMessageId===e.campaignMessageId}))&&n.removeAt(n.indexOf(s))
n.pushObject(e)},toggleUnreadMessagesCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0
this.set("unreadMessagesCount",e)},toggleShowUnreadMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]
this.set("showUnreadMessage",e)},resetLastAgentMessages:function(){this.set("lastAgentMessages",[]),this.toggleUnreadMessagesCount(),this.toggleShowUnreadMessage()},isSameAsLastAgentChannelId:function(e){return this.get("lastAgentMessages.length")&&this.get("lastAgentMessages.lastObject.channelId")===e}})
e.default=t}),define("hotline-web/services/notification",["exports","jquery","hotline-web/utils/utils","hotline-web/utils/constants","hotline-web/config/environment","hotline-web/mixins/message","hotline-web/mixins/localstorage","hotline-web/utils/dom-utils"],function(e,t,s,n,a,i,r,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var l=Ember.Service.extend(i.default,r.default,{init:function(){this._super.apply(this,arguments),this.set("isPushEventsBound",!1),this.set("lastAction",null)},requestPermission:function(){this.postMessage({action:"ask_permission"})},clearPermission:function(){this.postMessage({action:"clear_subscription"})},subscribeCB:Ember.computed({get:function(){return this.sendSubscriptionToServer.bind(this)}}),unsubscribeCB:Ember.computed({get:function(){return this.sendUnsubscribeToServer.bind(this)}}),unloadCB:Ember.computed({get:function(){return this.sendSubscribeOnUnload.bind(this)}}),bindPushEvents:function(){this.isPushEventsBound||(this.set("isPushEventsBound",!0),this.unbindPushEvents(),o.default.bindEvent(window,"focus",this.unsubscribeCB),o.default.bindEvent(window,"blur",this.subscribeCB),o.default.bindEvent(window,"beforeunload",this.unloadCB))},unbindPushEvents:function(){o.default.bindEvent(window,"focus",this.unsubscribeCB),o.default.bindEvent(window,"blur",this.subscribeCB),o.default.bindEvent(window,"beforeunload",this.unloadCB)},sendSubscribeOnUnload:function(e){s.default.setResetAsync(!1),this.sendSubscriptionToServer(e)},sendSubscriptionToServer:function(e){var s=this.get("hotline.ui.push.subscription"),a=this.get("hotline.ui.config.appSubDomain"),i=this.session,r=i&&i.user,o=i&&i.siteId,l=r&&r.alias
if(s&&(s.appSubDomain=a,l)){if("subscribe"===this.lastAction)return
e&&e.type?this.logger.log("Webchat:subscribe"):this.logger.log("Widget:subscribe"),this.set("lastAction","subscribe")
var c=n.default.EmberModelUrl.subscribePush.url.replace("{token}",i.token).replace("{userAlias}",l)
o&&(c+="?siteId=".concat(o)),t.default.ajax({type:"POST",url:c,data:JSON.stringify(s),cache:!1,contentType:"application/json; charset=UTF-8"}).then(function(){},function(){})}},sendUnsubscribeToServer:function(e){var s=this,a=this.get("hotline.ui.push.subscription"),i=this.get("hotline.ui.config.appSubDomain"),r=this.session,o=r&&r.user,l=r&&r.siteId,c=o&&o.alias
a&&(a.appSubDomain=i,c&&setTimeout(function(){if("unsubscribe"!==s.lastAction){e&&e.type?s.logger.log("Webchat:unsubscribe"):s.logger.log("Widget:unsubscribe"),s.set("lastAction","unsubscribe")
var i=n.default.EmberModelUrl.subscribePush.url.replace("{token}",r.token).replace("{userAlias}",o.alias)
l&&(i+="?siteId=".concat(l)),t.default.ajax({type:"DELETE",url:i,data:JSON.stringify(a),cache:!1,contentType:"application/json; charset=UTF-8"})}},300))},playEmptySound:function(){if("Audio"in window&&!this.get("session.config.isFCSDKWebView"))try{var e=new Audio
return e.canPlayType&&e.canPlayType("audio/mpeg;").replace(/no/,"")&&(e.volume=0,e.src=a.default.EmberENV.cdnUrl+"assets/audio/notif.mp3"),void(e.autoplay=!0)}catch(t){this.logger.log("Media Feature Pack may not been installed")}},playSound:function(){if(!(this.session&&this.get("session.config")&&this.get("session.config.disableNotifications"))){var e=this.get("hotline.ui.hop"),t=this.get("session.token"),s=this.get("session.siteId"),n=s?"hop-".concat(t,"-").concat(s):"hop-".concat(t)
if(e===this.getItemLS("hop",n)&&"Audio"in window&&!this.get("session.config.isFCSDKWebView"))try{var i=new Audio
return i.canPlayType&&i.canPlayType("audio/mpeg;").replace(/no/,"")&&(i.src=a.default.EmberENV.cdnUrl+"assets/audio/notif.mp3"),void(i.autoplay=!0)}catch(r){this.logger.log("Media Feature Pack may not been installed")}}},isPushSupportedByBrowser:function(){var e,t,s,n,a,i,r,o,l=!1,c=!1
n=window.navigator,a=n.vendor,i=n.userAgent&&n.userAgent.toLowerCase().indexOf("chrome")>-1,r=n.userAgent.indexOf("OPR")>-1,o=n.userAgent.indexOf("Edge")>-1,null!=i&&"Google Inc."===a&&!1===r&&!1===o&&(e=!!(s=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(s[2],10))&&(l=e>=50),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(t=function(){var e=navigator.userAgent,t=e.indexOf("Firefox"),s=e.substring(t+8).split(".")
return!(!s||!s.length)&&parseInt(s[0],10)}())&&(c=t>=44)
var u="serviceWorker"in navigator,d=function(){var e=!1
try{window.ServiceWorkerRegistration&&"showNotification"in window.ServiceWorkerRegistration.prototype&&(e=!0)}catch(t){this.logger.log(t)}return e}(),m="PushManager"in window
return u&&d&&m&&(l||c)}})
e.default=l}),define("hotline-web/services/placeholder",["exports","hotline-web/utils/placeholder-constants","hotline-web/utils/constants","hotline-web/mixins/datastore","hotline-web/mixins/jwt","hotline-web/utils/countrycodes"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Service.extend(n.default,a.default,{session:Ember.inject.service(),jwt:Ember.inject.service(),hotline:Ember.inject.service(),init:function(){this._super.apply(this,arguments)},replacePlaceholders:function(e,t){return t&&t.forEach(function(t){e=e.replace(t.placeholderString,t.value)}),e},getPlaceholderStringWithValue:function(e){var s=this,n=[]
return e&&e.forEach(function(e){var a,i=e.category,r=e.key,o=e.altText,l=e.keyType
if(i===t.default.CATEGORIES.USER)if(l===t.default.KEY_TYPES.SYSTEM_TAG)if(r===t.default.USER_NAME_KEYS.name){var c=s.getUserBasicProperty("firstName"),u=s.getUserBasicProperty("lastName")
a=c?"".concat(c).concat(u?" ".concat(u):""):""}else a=s.getUserBasicProperty(r)
else l===t.default.KEY_TYPES.CUSTOM_TAG&&(a=s.getUserMetaProperty(r))
a=a||o||""
var d=o?" | ".concat(o):"",m="{{".concat(i,".").concat(r).concat(d,"}}")
n.push({placeholderString:m,value:a})}),n},getUserBasicProperty:function(e){var s,n=this.localds,a=this.get("session.user")||{},i=this.get("session.prop")||{},r=n&&n.get("properties")||Ember.Object.create(),o=this.isJWTEnabled()&&this.getJWTMeta()||{},l=!!t.default.USER_NAME_KEYS[e]
return!!t.default.GEOLOCATION_KEYS[e]?s=this.getLocationProperty(e):l&&a.isNameGenerated||(s=r.get(e)||a[e]||i[e]||o[e]),s},getUserMetaProperty:function(e){var t=this.localds,s=this.get("session.user.meta")||{},n=this.get("session.prop.meta")||{},a=t&&t.get("meta")||{},i=this.isJWTEnabled()&&this.getJWTMeta()||{}
return a[e]||s[e]||n[e]||i[e]},getLocationProperty:function(e){var n=this.localds,a=n&&n.get("userBehaviour"),r=a&&a.get("userGeolocation")
if(r){var o=r.country
if(e===t.default.GEOLOCATION_KEYS.country&&o&&o!==s.default.VALUE_STRINGS.NA)return i.default[o]
var l=r[e]
return l&&l!==s.default.VALUE_STRINGS.NA?l:void 0}},hasLocationKeyInPlaceholderMeta:function(e){return!!(e&&e.find(function(e){var s=e.key,n=e.category,a=e.keyType
if(n===t.default.CATEGORIES.USER&&a===t.default.KEY_TYPES.SYSTEM_TAG&&t.default.GEOLOCATION_KEYS[s])return!0}))}})
e.default=r}),define("hotline-web/services/queue",["exports","hotline-web/utils/constants"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=Ember.Service.extend(Ember.Evented,{init:function(){this._super.apply(this,arguments),this.queue={},this.fired={}},enque:function(e,s){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
if(e&&s){if(-1===e.indexOf(t.default.EventType.TIMER)&&this.fired[e]&&n)return s()
void 0===this.queue[e]&&(this.queue[e]=[]),this.queue[e].push(s)}},clear:function(e){e&&-1!==e.indexOf(t.default.EventType.TIMER)&&(this.queue[e]?(this.queue[e]=void 0,this.trigger("didClear",e)):this.trigger("didFail",e))},deque:function(e){var s=this.queue[e]
if(void 0!==s){for(;s.length;)s.shift()();-1===e.indexOf(t.default.EventType.TIMER)&&(this.fired[e]=!0),this.queue[e]=void 0,this.trigger("didTrigger",e)}}})
e.default=s})
define("hotline-web/services/record",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend({id:null,init:function(){this._super.apply(this,arguments),this.set("id",0)},next:function(){return this.id+=1,this.id}})
e.default=t}),define("hotline-web/services/rts",["exports","jquery","hotline-web/utils/constants","hotline-web/mixins/datastore","hotline-web/mixins/data-dog-mixin","hotline-web/config/environment","hotline-web/helpers/polling","hotline-web/utils/utils","hotline-web/mixins/message"],function(e,t,s,n,a,i,r,o,l){function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var u=Ember.Service.extend(Ember.Evented,n.default,a.default,l.default,{init:function(){this._super.apply(this,arguments)
var e=i.default.socket
this.url=e.protocol+e.domain[i.default.hotlineEnv.type],this.connection=void 0,this.invokeCreateAfterLoad=!1,this.rtsScriptFailed=void 0,this._setDefaults(),this._loadRTSScript()},getSocketId:function(){return this.connection&&this.connection.socket&&this.connection.socket.id},resetFlags:function(){this.connecting=!1,this.reconnecting=!1,this.didReconnect=!1,this.didConnect=!1,this.didDisconnect=!1,this.retryCounter=0},resetTimers:function(){this.stopPing(),this.stopConnectionTimer()},_setDefaults:function(){this.clientId=void 0,this.connectionError=null,this.resetFlags(),this.resetTimers()},_create:function(){var e=this.user,t=this.userToken,s=e&&e.id,n=t&&t.accountId,a=this.hotline.ui.config&&this.hotline.ui.config.rtsServiceId||"",i=t&&t.channelName,r=t&&t.privateToken
this.connecting||(this.close(),n&&s&&i&&r&&(this.clientId=s,this._createConnection(n,a,s,r)))},_loadRTSScript:function(){var e=this
return new Promise(function(t){var s=i.default.rtsCdnUrl&&i.default.rtsCdnUrl[i.default.hotlineEnv.type]
if(s){var n=document.createElement("script")
n.src=s,n.onload=function(){e.rtsScriptFailed=!1,e.invokeCreateAfterLoad&&e.create(),t(!0)},n.onerror=function(){e.rtsScriptFailed=!0,e.onAfterDisconnect(6),t(!1)},document.head.appendChild(n)}else e.rtsScriptFailed=!0,e.onAfterDisconnect(6),e.logger.log("there is no rts script url in config file"),t(!1)})},_createConnection:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0
if(i.default.socket.albDomain)if(i.default.socket.supportAppId){var r=this.get("hotline.ui.config.appId")&&this.get("hotline.ui.config.appId").toString()
i.default.socket.supportAppId.indexOf(r)>-1&&(this.url=i.default.socket.protocol+i.default.socket.albDomain[i.default.hotlineEnv.type])}else this.url=i.default.socket.protocol+i.default.socket.albDomain[i.default.hotlineEnv.type]
this.connecting=!0,this.onBeforeConnect(),this.connection=new window.RTS({accId:e,userId:n.toString(),serviceId:s,token:a,origin:this.url,webURL:this.url,nocookie:!this.get("hotline.ui.storageAvailable"),onConnect:this.onConnect.bind(this),onConnectError:this.onConnectError.bind(this),onReconnect:this.onConnect.bind(this),onReconnecting:this.onReconnecting.bind(this),onDisconnect:this.onDisconnect.bind(this),onMessage:this.onMessage.bind(this),isHealthCheckEnabled:!0}),this.trigger("willConnect"),(0,t.default)(window).on("beforeunload",this.onUnloadRTSCB)},user:Ember.computed("session.user",{get:function(){return Ember.get(this,"session.user")}}),onUnloadRTSCB:Ember.computed({get:function(){return this.close.bind(this)}}),userToken:Ember.computed("user.token",{get:function(){},set:function(e,t){return t}}),create:function(){var e=this
if(window.RTS){if(Ember.get(this,"session.user.id"))if(this.userToken)this._create()
else{var t=Ember.get(this,"session.token"),n=Ember.get(this,"session.siteId"),a=s.default.EmberModelUrl.webSocket,i=a.url.replace("{token}",t),r=this.store
n&&(i+="?siteId=".concat(n)),r.getRequest(a.model,i).then(function(t){t&&t.errorCode||(Ember.set(e,"userToken",t),e._create())})}}else this.invokeCreateAfterLoad=!0},close:function(){this.stopPing(),(0,t.default)(window).unbind("beforeunload",this.onUnloadRTSCB),this.connection&&(this.connection.close(),this.connection.disconnect(),this.trigger("didClose")),this.connection=void 0,this._setDefaults()},onConnect:function(){this.stopConnectionTimer(),this.didDisconnect=!1,this.connectionError=null,this.connecting?(this.connecting=!1,this.didConnect=!0,this.trigger("didConnect"),this.logger.log("Connected")):(this.reconnecting=!1,this.didReconnect=!0,this.trigger("didReconnect"),this.logger.log("Reconnected")),this.connectVisitorChannel(),this.get("user.id")&&this.connectUserChannel()},onConnectError:function(e){if(this.connectionError)this.removeSocketListener("connect_error")
else{this.logger.log("Connection Error")
var t=e&&e.type
if(t){this.connectionError=e
var n=s.default.DataDog.events.connection
this.increment({evt:n.key,tags:c({},n.tags.errFlag.key,t)}),this.onAfterDisconnect(0)}}},removeSocketListener:function(e){this.connection&&e&&this.connection.removeSocketListeners(e)},onBeforeConnect:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e4
this.resetTimers(),this.notConnected=setInterval(function(){e.onAfterDisconnect(t)},s)},stopConnectionTimer:function(){this.notConnected&&(clearInterval(this.notConnected),this.notConnected=null)},onAfterDisconnect:function(e){if(this.logger.log("Unable to connect"),this.logger.log("Flag => ".concat(e)),this.resetFlags(),this.resetTimers(),this.didDisconnect=!0,6===e?this.trigger("scriptLoadFailed"):(this.trigger("didDisconnect"),this.postMessage({action:"rts_disconnected",status:200,success:!0,data:{connected:!1}})),Ember.get(this,"hotline.ui.onLine")){var t,n=s.default.DataDog.events.connection
this.increment({evt:n.key,tags:(t={},c(t,n.tags.connStatus.key,3===e?n.tags.connStatus.value.pong_failed:n.tags.connStatus.value.timeout),c(t,n.tags.connFlag.key,0===e?n.tags.connFlag.value.created:1===e?n.tags.connFlag.value.disconnected:2===e?n.tags.connFlag.value.reconnected:3===e?n.tags.connFlag.value.connected:4===e?n.tags.connFlag.value.subscribed:5===e?n.tags.connFlag.value.forcedClosed:n.tags.connFlag.value.scriptNotLoaded),t)})}},onDisconnect:function(e,t){t&&parseInt(t.userId,10)!==parseInt(this.clientId,10)||(this.clientId?(this.logger.log("Disconnected"),this.resetFlags(),this.resetTimers(),this.connecting=!0,this.trigger("willConnect"),this.onBeforeConnect(1,5e3)):e&&"forced close"===e.toLocaleLowerCase()&&Ember.get(this,"session.user.id")&&this.onAfterDisconnect(5))},onReconnecting:function(){this.logger.log("Reconnecting"),this.trigger("didConnect"),this.resetFlags(),this.resetTimers(),this.reconnecting=!0,this.trigger("willReconnect"),this.onBeforeConnect(2,5e3)},onMessage:function(e){e&&"PONG"===e.event&&this.onPong()},connectVisitorChannel:function(){if(this.connection){var e=Ember.get(this,"hotline.ui.config.publicChannelName")
e&&this.open(e,null,null,640)}},connectUserChannel:function(){if(this.connection){var e=this.userToken
e&&e.channelName&&this.open(e.channelName,this.onPrivate,this.onSubscription,0)}},open:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0
this.connection&&this.connection.subscribe(e,function(r,o){if(r)if(n.logger.log("Not Subscribed 🙁"),n.retryCounter++,1===n.retryCounter)n.open(e,t,a,i)
else{n.onAfterDisconnect(4)
var l=s.default.DataDog.events.subscription
n.increment({evt:l.key,tags:c({},l.tags.subTimeout.key,e)})}else n.logger.log("Subscribed 👍🏾"),n.executeConnectionHandler(a,o),n.handleSubscriptionWithDisconnect(n.userToken)},{messageHandler:function(e){var a=e&&2===e.mtyp
if(e&&"ADVICE_PULL"===e.event){var i=s.default.DataDog.events.advicePull
n.increment({evt:i.key,tags:c({},i.tags.pullStatus.key,i.tags.pullStatus.value.triggered)}),n.trigger("didAdvicePull",{channel:e.channel,reset:!0,src:s.default.CONVERSATION.FETCH.RTS_ADVICE_PULL})}else a&&t&&"function"==typeof t&&t.call(n,e.msg,e.id,e.seq)},opt:i})},executeConnectionHandler:function(e,t){e&&"function"==typeof e&&(e.call(this,t),this.startPing())},sendMessage:function(e,t){this.connection&&this.connection.publish(Ember.get(this,"userToken.channelName"),e,null,{msgType:e&&"is_typing"===e.action?1:0,traceId:t&&t.ti||void 0})},sendAck:function(e,t,s){if(this.connection){var n=e&&e.messageId?{messageId:e.messageId,millis:e.createdMillis}:{}
this.connection.sendAck(Ember.get(this,"userToken.channelName"),t.toString(),this.clientId.toString(),s,{message:n})}},onPrivate:function(e,t,s){var n=o.default.safelyParseJSON(e)||{}
this.trigger("didRTSMessage",n,t,s),n.userId||this.trigger("didUserMessage",n,t,s)},onSubscription:function(e){this.didReconnect?(this.didReconnect=!1,this.trigger("didAdvicePull",{channel:e.channel,reset:!1,src:s.default.CONVERSATION.FETCH.RTS_RECONNECT_SUCCESS})):this.trigger("didAdvicePull",{channel:this.get("session.config.showFAQOnOpen")?null:e.channel,reset:!1,src:s.default.CONVERSATION.FETCH.RTS_CONNECT_SUCCESS})},startPing:function(){this.timer||(this.timer=r.default.create({onPoll:this.onPing.bind(this),interval:12e4}),this.timer.start())},onPing:function(){var e=this
this.notPong||(this.notPong=setInterval(function(){e.onAfterDisconnect(3)},5e3),this.connection.ping())},onPong:function(){this.notPong&&(clearInterval(this.notPong),this.notPong=null)},stopPing:function(){this.onPong(),this.timer&&(this.timer.stop(),this.timer=null)},healthCheck:function(){if(this.user&&this.get("user.id")&&Ember.get(this,"hotline.ui.onLine")&&!this.connecting&&!this.reconnecting){var e=s.default.DataDog.events.connectionDropped
this.connection&&this.connection.connected&&!this.didDisconnect?this.timer||(this.increment({evt:e.key,tags:c({},e.tags.dropStatus.key,e.tags.dropStatus.value.no_ping_pong)}),this.close(),this.create()):(this.increment({evt:e.key,tags:c({},e.tags.dropStatus.key,e.tags.dropStatus.value.no_connection)}),this.create())}},checkForSubscription:function(){if(this.connection){var e=this.userToken
if(e){this.handleSubscriptionWithDisconnect(e)
var t=Ember.get(this,"hotline.ui.config.publicChannelName")
this.connection.channels[t]&&this.connection.channels[t].connected&&!this.didDisconnect||this.connectVisitorChannel(),this.connection.channels[e.channelName]&&this.connection.channels[e.channelName].connected&&!this.didDisconnect||this.connectUserChannel()}}},handleSubscriptionWithDisconnect:function(e){if(e){var t=Ember.get(this,"hotline.ui.config.publicChannelName")
this.isBothChannelSubscribed(t,e)&&this.didDisconnect&&(this.didDisconnect=!1,this.reconnecting?this.didReconnect=!0:this.didConnect=!0,this.trigger("didConnect"))}},isBothChannelSubscribed:function(e,t){return!!(this.connection.channels[e]&&this.connection.channels[e].connected&&this.connection.channels[t.channelName]&&this.connection.channels[t.channelName].connected)},reset:function(){this.hotline.ui.onLine?this.logger.log("Online"):(this.resetFlags(),this.resetTimers(),this.logger.log("Offline"))}.observes("hotline.ui.onLine"),hasConnectionInitialized:function(){return!!this.connection}})
e.default=u}),define("hotline-web/services/rule-engine",["exports","hotline-web/utils/utils","hotline-web/utils/locale","hotline-web/mixins/datastore","hotline-web/mixins/jwt","hotline-web/utils/dayjs"],function(e,t,s,n,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Service.extend(n.default,a.default,{getUserMetaGivenKey:function(e){var t,s=this.localds,n=this.get("session.user.meta")||{},a=this.get("session.prop.meta")||{},i=s&&s.get("meta")||{},r=this.isJWTEnabled()&&this.getJWTMeta()||{},o=this.get("session.siteId")
return t=i[e]||n[e]||a[e]||r[e],"siteId"===e&&(t=t||o),t},checkPageViewsCondition:function(e){var s,n=this.userBehaviour,a=n&&n.get("locations"),i=JSON.parse(e),r=i.pageUrl,o=i.viewCount,l=!1
return(s=a&&a.findBy("pageUrl",r.value))&&(l=t.default.checkCondition(o.dataType,o.conditionType,s.get("viewCount"),t.default.convertOperand(o.dataType,o.value))),l},checkLocationCondition:function(e){var s,n=this.localds,a=n&&n.get("userBehaviour"),i=a&&a.get("userGeolocation"),r=i&&i.country||"",o=i&&i.state||"",l=t.default.safelyParseJSON(e.value)||{}
return s=t.default.checkCondition("STRING",e.conditionType,r,l.countryCode),l.region&&"All Regions"!==l.region&&(s=s&&t.default.checkCondition("STRING",e.conditionType,o,l.region)),s},checkBrowserLanguageCondition:function(e){var n=this.localds,a=n&&n.get("properties"),i=this.get("session.prop.locale")||a&&a.get("locale")||this.get("session.user.locale")||s.default.getNavigatorLanguage()
return-1===e.value.indexOf("-")&&(i=i.substring(0,2)),t.default.checkCondition(e.dataType,e.conditionType,i,e.value)},evaluateUserConditions:function(e,s){var n,a=this,i=this.userBehaviour,r=i&&i.get("firstLocationMillis")||0,o=i&&i.get("lastLocationMillis")||0,l=i&&i.get("visitsCount"),c=this.get("hotline.ui.browser"),u=this.get("hotline.ui.userBehaviour"),d=i&&i.get("userGeolocation"),m=d&&d.city||"",h=u&&u.currentUrl&&u.currentUrl.toLowerCase()||"",f=0
return m="N/A"===m?"":m,n=e.reduce(function(e,n){var i=!1
switch(n.keyRaw){case"CURRENT_PAGE_URL":i=t.default.checkCondition(n.dataType,n.conditionType,h,n.value)
break
case"NUMBER_OF_PAGE_VIEWS":i=a.checkPageViewsCondition(n.value)
break
case"TIME_ON_CURRENT_PAGE":f=t.default.convertOperand(n.dataType,n.value),i=!0
break
case"NUMBER_OF_VISITS":i=t.default.checkCondition(n.dataType,n.conditionType,l,n.value)
break
case"LOCATION":i=a.checkLocationCondition(n)
break
case"CITY":i=t.default.checkCondition(n.dataType,n.conditionType,m,n.value)
break
case"BROWSER_LANGUAGE":i=a.checkBrowserLanguageCondition(n)
break
case"BROWSER":i=t.default.checkCondition(n.dataType,n.conditionType,c.name,n.value)
break
case"BROWSER_VERSION":i=t.default.checkCondition(n.dataType,n.conditionType,c.versionx,n.value)
break
case"OS":i=t.default.checkCondition(n.dataType,n.conditionType,c.os,n.value)
break
case"FIRST_SEEN":i=a.checkDaterelativeCondition(n,r)
break
case"LAST_SEEN":i=a.checkDaterelativeCondition(n,o)
break
case"TIMEZONE":i=t.default.checkCondition(n.dataType,n.conditionType,jstz.determine().name(),n.value)
break
default:i=t.default.checkCondition(n.dataType,n.conditionType,a.getUserMetaGivenKey(n.keyRaw),n.value,!0)}return s?e&&i:e||i},s),{isMatch:e.length?n:s,delay:f}},checkDaterelativeCondition:function(e,s){var n,a=e.value,r=!0
return"NUMBER"===e.dataType?(r=(n=t.default.convertOperand(e.dataType,e.value))%86400==0,a=(0,i.default)().subtract(n,"seconds").valueOf()):"STRING"===e.dataType&&(a=(0,i.default)(a).valueOf()),t.default.checkCondition("DATE",e.conditionType,s,a,r)},evaluateOccurrenceConditions:function(e,s){var n,a=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.userBehaviour,o=(r&&r.get("eventConditions")).findBy("eventConditionId",e),l=!!o
return o||(o=Ember.Object.create({occurrenceCount:0})),s=s||[],o&&(n=s.reduce(function(e,s){var n=!1
switch(s.key){case"LAST_OCCURRED":n=a.checkDaterelativeCondition(s,o.get("lastOccurredMillis"))
break
case"FIRST_OCCURRED":n=a.checkDaterelativeCondition(s,o.get("firstOccurredMillis"))
break
case"COUNT":n=t.default.checkCondition(s.dataType,s.conditionType,o.get("occurrenceCount"),s.value)}return i?e&&n:e||n},i)),s.length?n:l},evaluateEventConditions:function(e,t){var s,n=this
return s=(e=e||[]).reduce(function(e,s){var a=n.evaluateOccurrenceConditions(s.eventConditionId,s.occurrenceConditions,!0)
return t?e&&a:e||a},t),e.length?s:t},processSegment:function(e){var t,s,n=e.userConditions||[],a=e.eventConditions||[],i="ALL"===e.conditionMatchType,r=i
return t=this.evaluateUserConditions(n,i),s=this.evaluateEventConditions(a,i),{isMatch:r=i?(r=r&&t.isMatch)&&s:(r=r||t.isMatch)||s,delay:t.delay}},processRule:function(e){for(var t=e&&e.segments||[],s="ALL"===e.segmentMatchType,n=s,a=0,i=0,r=t.length;i<r;i++){var o=t[i],l=this.processSegment(o)
if(s)n=n&&l.isMatch,a=l.delay>a?l.delay:a
else if(n=n||l.isMatch){a=l.delay||0
break}}return{isMatch:n,delay:a}},canTriggerEventForRule:function(e,t,s){var n=!1
switch(s.triggerType){case"PAGE":n="fc_page"===e||!!t[s.ruleId]
break
case"EVENT":n="fc_page"!==e&&!!t[s.ruleId]
break
default:n=!0}return n},maxTriggerCheck:function(e){var t=this.userBehaviour,s=t&&t.get("executedRules"),n=s&&s.findBy("ruleId",e.ruleId),a=n&&n.get("sentCount")||0,i=n&&n.get("sentCountSession")||0,r=e.command.commandValue
return!r.hasMaxTrigger||!r.maxTriggerCount||(a&&"FOREVER"===r.maxTriggerType?a<r.maxTriggerCount:!i||"SESSION"!==r.maxTriggerType||i<r.maxTriggerCount)},getAwayMessage:function(e){var t=e&&e.command&&e.command.commandValue&&e.command.commandValue.operatingHoursId,s=this.get("hotline.ui.awayMessage")
if(t){var n=s.findBy("operatingHoursId",t[0])
return n&&n.awayMessage}return null},processRules:function(e,t){var s=this,n=this.get("hotline.ui.userBehaviour"),a=n&&n.eventRules||[]
return new Ember.RSVP.Promise(function(n){var i=[]
a.forEach(function(n){var a=!1
if(s.getAwayMessage(n)&&n&&n.command&&n.command.commandValue&&n.command.commandValue.skipBusinessHours&&(a=!0),n.enabled&&s.maxTriggerCheck(n)&&s.canTriggerEventForRule(e,t,n)&&!a){var r=s.processRule(n.segment)
r.isMatch&&(n.command.delay=r.delay,n.command.ruleId=n.ruleId,i.push(n))}}),n(i)})}})
e.default=r}),define("hotline-web/services/screenshare",["exports","jquery","hotline-web/utils/constants","hotline-web/utils/utils","hotline-web/mixins/message"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=Ember.Service.extend(a.default,{CONVERSATION:s.default.CONVERSATION,rts:Ember.inject.service(),session:Ember.inject.service(),logger:Ember.inject.service(),hotline:Ember.inject.service(),cache:Ember.inject.service(),init:function(){var e=this
this._super.apply(this,arguments),window.addEventListener("message",function(n){var a=e.get("session.token")
if(n&&n.data&&"startScreenShare"===n.data.event_id){if(n.data.cb_data){var i=n.data.cb_data,r=i.room,o=i.conversationId,l=i.messageId,c=i.name,u=i.role,d=i.sdata,m=i.app_alias,h=i.viewerId,f=i.messageUserId,g=i.cobrowsingId,p=i.startTime
t.default.ajax({url:"/app/services/app/webchat/".concat(a,"/cbstatus"),contentType:"application/json; charset=UTF-8",method:"PUT",data:JSON.stringify({conversationId:o,messageId:l,messageType:s.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ACCEPTED,room:r,name:c,role:u,sdata:d,app_alias:m,messageUserId:f,viewerId:h,cobrowsingId:g}),success:function(){e.sendMessage("".concat(m,"-cobrowse-").concat(o),{event:"coBrowsingAccepted",room:r,conversationId:o,messageId:l,name:c,role:u,sdata:d,app_alias:m,viewerId:h,messageUserId:f,startTime:p})},error:function(){this.sendMessage("".concat(m,"-cobrowse-").concat(o),{event:"coBrowsingError"})}})}}else if(n&&n.data&&"endScreenShare"===n.data.event_id){var v=(new Date).getTime(),b=sessionStorage.getItem("_fc_ongoing_cb_id"),E={msgHopId:v+"_"+e.get("hotline.ui.hop"),messageType:s.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ENDED,messageUserType:s.default.CONVERSATION.USER_TYPE.USER,channelId:n.data.channelId,createdMillis:(new Date).getTime(),cobrowsingId:b,messageFragments:[{fragmentType:s.default.CONVERSATION.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:"SCREEN SHARING ENDED"}]}
e.createMessage(E)}})},accept:function(e){window.parent.postMessage({event_id:"startScreenShare",cbData:e},"*")},startCoBrowsing:function(e){var n=this,a=this.get("session.token"),i=e.room,r=e.conversationId,o=e.messageId,l=e.name,c=e.role,u=e.sdata,d=e.app_alias,m=e.viewerId,h=e.messageUserId,f=e.cobrowsingId,g=e.startTime
t.default.ajax({url:"/app/services/app/webchat/".concat(a,"/cbstatus"),contentType:"application/json; charset=UTF-8",method:"PUT",data:JSON.stringify({conversationId:r,messageId:o,messageType:s.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ACCEPTED,room:i,name:l,role:c,sdata:u,app_alias:d,messageUserId:h,viewerId:m,cobrowsingId:f}),success:function(){n.sendMessage("".concat(d,"-cobrowse-").concat(r),{event:"coBrowsingAccepted",room:i,conversationId:r,messageId:o,name:l,role:c,sdata:u,app_alias:d,viewerId:m,messageUserId:h,startTime:g})},error:function(){this.sendMessage("".concat(d,"-cobrowse-").concat(r),{event:"coBrowsingError"})}})},endCoBrowsing:function(e){var t=(new Date).getTime(),n=sessionStorage.getItem("_fc_ongoing_cb_id"),a={msgHopId:t+"_"+this.get("hotline.ui.hop"),messageType:s.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.ENDED,messageUserType:s.default.CONVERSATION.USER_TYPE.USER,channelId:e.channelId,createdMillis:(new Date).getTime(),cobrowsingId:n,messageFragments:[{fragmentType:s.default.CONVERSATION.FRAGMENT_TYPE.TEXT,contentType:"text/html",content:"SCREEN SHARING ENDED"}]}
this.createMessage(a)},deny:function(e){var n=this
t.default.ajax({url:"/app/services/app/webchat/".concat(e.token,"/cbstatus"),contentType:"application/json; charset=UTF-8",method:"PUT",data:JSON.stringify({conversationId:e.conversationId,messageId:e.messageId,messageType:s.default.CONVERSATION.MESSAGE_TYPE.SCREEN_SHARING.DENIED}),success:function(){n.logger.log("Successfully denied the cobrowsing"),n.sendMessage("".concat(e.app_alias,"-cobrowse-").concat(e.conversationId),{event:"coBrowsingDenied"})},error:function(){n.sendMessage("".concat(e.app_alias,"-cobrowse-").concat(e.conversationId),{event:"coBrowsingDenied"})}})},acceptAudioCall:function(e){var t=e.data
this.sendMessage("".concat(t.app_alias,"-cobrowse-").concat(t.conversationId),{event:"acceptAudioCall"})},denyAudioCall:function(e){var t=e.data
this.sendMessage("".concat(t.app_alias,"-cobrowse-").concat(t.conversationId),{event:"denyAudioCall"})},createMessage:function(e){var n=this,a=this.session,i=a&&a.user,r=a&&a.siteId,o=s.default.EmberModelUrl.message.url.replace("{token}",a.token).replace("{userAlias}",i.alias)
r&&(o+="?siteId=".concat(r)),t.default.ajax({type:"POST",url:o,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",processData:!1}).then(function(){n.logger.log("message created successfully")},function(){n.logger.log("Error in creating the messages")})},sendMessage:function(e,t){var s=this,n=this.rts
n.connection.subscribe(e,function(a){a&&s.logger.log("Error in subscribing to the channel",a),Ember.run.later(function(){n.connection.publish(e,t)},3e3)},{messageHandler:function(e){s.handleCobrowsingMessages(e)}})},handleCobrowsingMessages:function(e){switch(n.default.safelyParseJSON(e.msg).event){case"requestForAudioCall":this.postMessage({action:"requestForAudioCall"})}}})
e.default=i}),define("hotline-web/services/session",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend({init:function(){this._super.apply(this,arguments),this.set("user",{})}})
e.default=t}),define("hotline-web/services/timer",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Service.extend(Ember.Evented,{init:function(){this._super.apply(this,arguments),this.queue.on("didTrigger",this.done.bind(this)),this.queue.on("didClear",this.cancel.bind(this)),this.queue.on("didFail",this.error.bind(this))},push:function(e){var t=this
e.delay&&e.handler&&(this.queue.enque(e.type,e.handler),e.trigger=setTimeout(function(){t.queue.deque(e.type)},e.delay))},done:function(e){this.trigger("didTrigger",e)},cancel:function(e){this.trigger("didClear",e)},error:function(e){this.trigger("didFail",e)},clear:function(e){var t=e&&e.trigger
t&&(clearTimeout(t),this.queue.clear(e.type))},clearAll:function(e){var t=this
e.forEach(function(e){t.clear(e)})}})
e.default=t}),define("hotline-web/snippets",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={"chat-style.html":'<style type="text/css">\n\n  {{FONT_URL_IMPORT}}\n\n  html, body {\n    font-family: {{FONT_NAME}} !important;\n  }\n  .h-chat-custom .odd .h-conv .h-comment,\n  .h-chat-custom .h-channel .h-header,\n  .h-chat-custom .h-channel .dummy-bar,\n  .h-chat-custom .h-conv .h-header,\n  .h-chat-custom .odd .h-conv .h-comment,\n  .h-chat-custom .h-conv div.body div.message-container.odd span.chat-msg,\n  .iframe-modal .h-modal-notes .modal-header,\n  .h-chat-custom .odd .h-conv .h-comment.file-attached .h-message-text,\n  .h-chat-custom .odd .h-conv .h-comment.media-message .h-message-text {\n    background-color: {{HD_BG_COLOR}} !important;\n  }\n\n  .h-chat-custom .odd .h-conv .h-comment .h-message-text a {\n    color: {{HD_FG_COLOR}} !important;\n  }\n  \n  .h-chat-custom .h-channel .h-header {\n    border: 0.1px solid {{HD_BG_COLOR}} !important;\n  }\n\n  .h-chat-custom .h-channel .h-header .icon, .h-chat-custom .h-conv .h-header .icon,\n  .h-chat-custom .h-channel .h-header .conv-title, .h-chat-custom .h-conv .h-header .conv-title,\n  .h-chat-custom .h-channel .h-header .ic-back, .h-chat-custom .h-conv .h-header .ic-back,\n  .h-chat-custom .h-channel .h-header .title, .h-chat-custom .h-conv .h-header .title,\n  .h-chat-custom .odd .h-conv .h-comment,\n  .h-chat-custom .h-conv div.body div.message-container.odd span.chat-msg,\n  .iframe-modal .h-modal-notes .modal-header .frame-title,\n  .iframe-modal .h-modal-notes .modal-header .h-close i,\n  .preview-bubble {\n    color: {{HD_FG_COLOR}} !important;\n  }\n\n  .h-chat-custom .h-conv div.body div.message-container.odd span.arrow.right {\n    border-left-color: {{HD_BG_COLOR}} !important;\n  }\n\n  .h-chat-custom div.h-conv div.body div.h-conv-chat {\n    background-image: url("{{ICON_URL}}") !important;\n  }\n  .preview-wrapper .top-border{\n    border-top: 4px solid {{HD_BG_COLOR}};\n  }\n\n  .reply-options .reply-option-button,\n  .h-reply-wrapper .h-reply-button .h-img-button {\n    border: 1px solid {{HD_BG_COLOR}};\n  }\n\n  .reply-options .reply-option-button:hover,\n  .h-reply-wrapper .h-reply-button .h-img-button:hover {\n    background-color: {{HD_BG_COLOR}} !important;\n    color: {{HD_FG_COLOR}};\n  }\n\n  .d-hotline {\n    background-color: {{HD_BG_COLOR}} !important;\n    color: {{HD_FG_COLOR}} !important;\n    border-color: transparent {{HD_BG_COLOR}} transparent transparent;\n  }\n  .loader {\n    border-top: 1em solid rgba({{HD_BG_COLOR}}, 0.4);\n    border-right: 1.05em solid {{HD_BG_COLOR}};\n    border-bottom: 1.05em solid {{HD_BG_COLOR}};\n    border-left: 1.05em solid {{HD_BG_COLOR}};\n  }\n\n  .article-modal .modal-footer .h-message-us-btn:hover,\n  .article-modal .modal-footer .article_vote:hover {\n    background-color: {{HD_BG_COLOR}} !important;\n    color : {{HD_FG_COLOR}} !important;\n  }\n\n  /* .article-content .modal-footer .h-message-us-btn:hover,\n  .article-content .modal-footer .article_vote:hover {\n    background-color: {{HD_BG_COLOR}} !important;\n    color : {{HD_FG_COLOR}} !important;\n  } */\n\n  .tabs .tabs-inner:after{\n    background-color: {{HD_BG_COLOR}} !important;\n  }\n\n  .chat-btn:hover{\n    background-color: {{HD_BG_COLOR}} !important;\n    color: {{HD_FG_COLOR}} !important;\n    border: 0 !important;\n  }\n\n  .submit-rating .submit.btn {\n    background-color: {{HD_BG_COLOR}} !important;\n    color: {{HD_FG_COLOR}} !important;\n  }\n\n  .send-offline-reply .send-message {\n    background-color: {{HD_BG_COLOR}} !important;\n    color: {{HD_FG_COLOR}} !important;\n  }\n\n  .h-comment.h-wrapped-article .articles-listview .article-showmore,\n  .fc-conversation-view div.body .h-chat-window .fc-agent-profile .u-social-network div i{\n    color: {{HD_BG_COLOR}} !important;\n  }\n\n  .h-chat-custom .odd .h-conv .h-comment.file-attached,\n  .h-chat-custom .odd .h-conv .h-comment.media-message {\n    background-color: unset !important;\n  }\n\n  .h-chat-custom .odd .h-conv .h-comment.file-attached .text-file-preview .text-haze-holder{\n    background-color: {{HD_BG_COLOR}} !important;\n    color: {{HD_FG_COLOR}} !important;\n  }\n\n  .h-chat-custom .odd .h-conv .h-comment.file-attached .text-file-preview .text-haze-holder .bottom-gradient {\n    background: linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, {{HD_BG_COLOR}} 100%) !important;\n  }\n\n  .article-content .fc_web_modal_closed .article-header-section .progress-bar {\n    background-color: {{HD_BG_COLOR}} !important;\n  }\n\n  .preview-container .h-reply-button .h-button-area button,\n  .h-reply-wrapper .h-reply-button .h-img-button {\n    border-color: {{HD_BG_COLOR}} !important;\n  }\n\n  .h-header .jwt-error-message {\n    color: {{JWT_FG_COLOR}} !important;\n    background-color: {{JWT_BG_COLOR}} !important;\n  }\n\n  .cal-time-slot:hover {\n      background-color: {{HD_BG_COLOR}};\n  }\n  .calendar-picker-minified .cal-picker-conf-view .confirm-button-holder .cal-confirm-button {\n      background-color: {{HD_BG_COLOR}};\n  }\n\n  .meeting-frag-holder {\n    background-color: {{HD_BG_COLOR}} !important;\n  }\n  .meeting-frag-holder .event-header {\n    color: {{HD_FG_COLOR}};\n  }\n  .h-conv-chat .h-chat .h-conv .h-comment .event-fragment .event-body .event-timings.actionable a{\n      color: {{HD_BG_COLOR}};\n  }\n\n  .h-conv-chat .h-chat .h-conv .h-comment.emojis-1,\n  .h-conv-chat .h-chat .h-conv .h-comment.emojis-2,\n  .h-conv-chat .h-chat .h-conv .h-comment.emojis-3 {\n    background-color: transparent !important;;\n  }\n\n  .h-reply-wrapper .ui-agent-typing-indicator {\n    background-color: {{HD_BG_COLOR}};\n  }\n\n  .h-reply-wrapper .ui-agent-typing-indicator .indicator-dot {\n    background-color: {{HD_FG_COLOR}};\n  }\n\n  .fc-mobile-close.minimize i.icon-ic_close{\n    color: {{HD_FG_COLOR}};\n  }\n</style>\n'}}),define("hotline-web/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"KHx9Miqs",block:'{"symbols":[],"statements":[[4,"if",[[28,"not",[[24,["hotline","ui","config","hideMessenger"]]],null]],null,{"statements":[[4,"if",[[24,["hotline","ui","modalOpen"]]],null,{"statements":[[0,"    "],[5,"ui-modal",[],[["@home"],[[28,"action",[[23,0,[]],"gotoHome"],null]]]],[0,"\\n"]],"parameters":[]},null],[0,"  "],[5,"content-viewport",[],[["@config","@reloadRoute","@restore","@home","@gotoChannel"],[[24,["hotline","ui","config"]],[28,"action",[[23,0,[]],"reloadRoute"],null],[28,"action",[[23,0,[]],"restoreConversation"],null],[28,"action",[[23,0,[]],"gotoHome"],null],[28,"action",[[23,0,[]],"gotoChannel"],null]]]],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/application.hbs"}})
e.default=t}),define("hotline-web/templates/components/code-snippet",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"V8NUz6JB",block:'{"symbols":[],"statements":[[1,[22,"source"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/components/code-snippet.hbs"}})
e.default=t}),define("hotline-web/templates/error/404",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"+f5Pq5/L",block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","error-page-wrap"],[8],[0,"\\n  "],[7,"h3",true],[8],[0,"\\n    "],[1,[28,"t",["status_messages.not_found.heading"],null],false],[0,"\\n  "],[9],[0,"\\n  "],[7,"h4",true],[8],[0,"\\n    "],[1,[28,"t",["status_messages.not_found.status"],null],false],[0,"\\n  "],[9],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/error/404.hbs"}})
e.default=t}),define("hotline-web/templates/error/503",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"PKgDZWxS",block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","error-page-wrap"],[8],[0,"\\n  "],[7,"h3",true],[8],[0,"\\n    "],[1,[28,"t",["status_messages.service_unavailable.heading"],null],false],[0,"\\n  "],[9],[0,"\\n  "],[7,"h4",true],[8],[0,"\\n    "],[1,[28,"t",["status_messages.service_unavailable.status"],null],false],[0,"\\n  "],[9],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/error/503.hbs"}})
e.default=t}),define("hotline-web/templates/error/access-denied",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"RCaMRP+q",block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","error-page-wrap"],[8],[0,"\\n  "],[7,"h3",true],[8],[0,"\\n    "],[1,[28,"t",["status_messages.access_denied.heading"],null],false],[0,"\\n  "],[9],[0,"\\n  "],[7,"div",true],[8],[0,"\\n    "],[1,[28,"t",["status_messages.access_denied.line1"],null],false],[0,"\\n  "],[9],[0,"\\n  "],[7,"div",true],[8],[0,"\\n    "],[1,[28,"t",["status_messages.access_denied.line2"],null],false],[0,"\\n  "],[9],[0,"\\n  "],[7,"div",true],[8],[0,"\\n    "],[1,[28,"t",["status_messages.access_denied.line3"],null],false],[0,"\\n  "],[9],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/error/access-denied.hbs"}})
e.default=t}),define("hotline-web/templates/home",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"TM23QVjS",block:'{"symbols":[],"statements":[[1,[22,"outlet"],false]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/home.hbs"}})
e.default=t}),define("hotline-web/templates/home/channel",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"LDGUg8kS",block:'{"symbols":[],"statements":[[5,"app-conversation",[],[["@model","@gotoHome"],[[22,"model"],[28,"action",[[23,0,[]],"gotoHome"],null]]]]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/home/channel.hbs"}})
e.default=t}),define("hotline-web/templates/home/faqs",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"FnBhsKlB",block:'{"symbols":[],"statements":[[5,"app-categories-list",[],[["@model","@gotoChannel"],[[22,"model"],[22,"gotoChannel"]]]]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/home/faqs.hbs"}})
e.default=t}),define("hotline-web/templates/home/index",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"t8mNWlWH",block:'{"symbols":[],"statements":[[5,"app-home",[],[["@model"],[[22,"model"]]]]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/home/index.hbs"}})
e.default=t}),define("hotline-web/templates/widget",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"sl6XdDCo",block:'{"symbols":[],"statements":[[5,"app-widget",[],[[],[]]]],"hasEval":false}',meta:{moduleName:"hotline-web/templates/widget.hbs"}})
e.default=t}),define("hotline-web/utils/calculate-position",["exports","ember-basic-dropdown/utils/calculate-position"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/utils/constants",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={SessionTimeOut:18e5,CHANNEL_BOT_BUSINESS_HOURS:{BUSINESS_HOUR_INSIDE:"BUSINESS_HOUR_INSIDE",BUSINESS_HOUR_OUTSIDE:"BUSINESS_HOUR_OUTSIDE",BUSINESS_HOUR_ALWAYS:"BUSINESS_HOUR_ALWAYS"},TemplateType:{QUIC_REPLY_DROPDOWN:"quick_reply_dropdown",CAROUSEL:"carousel",CAROUSEL_CARD:{DEFAULT:"carousel_card_default"}},DownloadFileIframeId:"downloadFile",MaxFileAttachments:1,SAMPLE_TOKEN:"WEB_CHAT_TOKEN",DOM_ID:{appReplyEditor:"app-reply-dialog-editor",appReplyComposerEditor:"app-reply-composer-editor",appConversationEditor:"app-conversation-editor",previewWrapper:"bubble-preview-wrapper"},FILETYPE:{INVALID:0,IMAGE:1,FILE:2},FileUrlValidityTimeout:3e5,FileSecurityStatus:{SafeFile:"SAFE_FILE",AVPending:"AV_PENDING",MalwareFile:"MALWARE_FILE",LargeFile:"TOO_LARGE_FOR_MALWARE_CHECK"},ExcludedFileExtensions:".cmd,.msi,.com,.exe,.hta,.html,.htm,.js,.jar,.vbs,.vb,.sfx,.bat,.ps1,.war,.sh,.bash,.command",SupportedImageFileExtensions:{".jpg":"image",".png":"image",".jpeg":"image",".gif":"image"},MessageSpecs:{maxLength:2e3},DefaultLocale:999,GeolocationCacheDuration:864e5,freshchatblue:"#45A4EC",Keys:{socket_msgs:"socket_messages"},RuleMetricKeys:{sent:"sent",uniqueSent:"unique_sent",clicked:"clicked",uniqueClicked:"unique_clicked"},EventState:{SENT:"sent",OPENED:"opened",CLICKED:"clicked",REPLIED:"replied",CLEARED:"cleared",ERROR:"error"},EventType:{CLICK:"click",LOAD:"load",TIMER:"timer"},FrameState:{INITIALIZED:"initialized",LOADED:"loaded",AUTHENTICATED:"authenticated",NOT_AUTHENTICATED:"not_authenticated",BLOCKED:"blocked"},UserState:{CREATED:"created",NOT_CREATED:"not_created",LOADED:"loaded",NOT_LOADED:"not_loaded",IDENTIFIED:"identified",RESTORED:"restored",AUTHENTICATED:"authenticated",NOT_AUTHENTICATED:"not_authenticated",AUTH_EXPIRED:"auth_expired",AUTH_INVALID:"auth_invalid",UUID_GENERATED:"uuid_generated",UNLOADED:"unloaded"},DialogState:{OPEN:"open",CLOSE:"close"},ImageAttr:{size:26214400,source:"conversation"},FileAttr:{size:36700160},CALENDAR:{GOOGLE_EVENT_PREFIX:"https://www.google.com/calendar/event?eid=",DISPLAY_TRIPLETS:3,DISPLAY_QUADS:4,EVENT_STATUS:{PENDING:1,CREATED:2,FAILED:3},EVENT_SOURCE:{GOOGLE:1,FRESHSALES:2},SESSIONS:{MORNING:1,AFTERNOON:2,EVENING:3,NIGHT:4},TIMESLOT_ROUNDOFF:9e5},UserMessageTimeDifference:{time:18e5},CONVERSATION:{FETCH:{DEFAULT:100,USER_CREATED:101,CHANNELS_LOADED:102,CONVERSATION_RESTORED:103,CONVERSATION_RELOADED:104,RTS_CONNECT_SUCCESS:110,RTS_RECONNECT_SUCCESS:111,RTS_USER_CREATED:112,RTS_SEQ_ID_MISMATCH:113,RTS_ADVICE_PULL:114},MESSAGE_TYPE:{NORMAL:1,BOT:2,FREDDY_BOT:3,FEEDBACK_RESPONSE:1001,SCREEN_SHARING:{REQUESTED:8001,ACCEPTED:8002,DENIED:8003,CANCELLD:8004,ENDED:8005},CALENDAR:{SENT_BY_AGENT:9001,CANCELLED_BY_USER:9002,SUCCESS:9003,FAILURE:9004,USER_EMAIL_UPDATE:9005},IMAGE:[3,5]},USER_TYPE:{AGENT:1,USER:0,CHANNEL:9},FRAGMENT_TYPE:{TEXT:1,IMAGE:2,AUDIO:3,VIDEO:4,BUTTON:5,FILE:6,MEETING:7,QUICKREPLY:51,CALLBACK:52,INPUT:201,COLLECTION:1e3,DYNAMIC_TEMPLATE_CONTENT:1002,TEMPLATE:5e3},OFFLINE_MESSAGE_TYPE:{EMAIL:"EMAIL",PHONE:"PHONE_NUMBER",COMMENT:"COMMENT"},CONTACT_INFO:{EMAIL:0,PHONE:1},PLACEHOLDERS:{EMAIL:"email",MOBILE:"mobile",NAME:"name",URL:"url"},MESSAGE_SOURCE:{OFFLINE:503},CONVERSATION_STATUS:{RESOLVED:2,FREDDY_BOT:22}},MESSAGE_STATUS:{PENDING:0,READY_TO_SEND:1,SENT:2,UNAUTHENTICATED:3,NOT_SENT:4,NOT_UPLOADED:5,RETRYING:6},LunrLanguage:{da:"assets/lunr-languages/lunr.da.min.js",de:"assets/lunr-languages/lunr.de.min.js",du:"assets/lunr-languages/lunr.du.min.js",es:"assets/lunr-languages/lunr.es.min.js",fi:"assets/lunr-languages/lunr.fi.min.js",fr:"assets/lunr-languages/lunr.fr.min.js",hu:"assets/lunr-languages/lunr.hu.min.js",it:"assets/lunr-languages/lunr.it.min.js",no:"assets/lunr-languages/lunr.no.min.js",pt:"assets/lunr-languages/lunr.pt.min.js",ro:"assets/lunr-languages/lunr.ro.min.js",ru:"assets/lunr-languages/lunr.ru.min.js",sv:"assets/lunr-languages/lunr.sv.min.js",tr:"assets/lunr-languages/lunr.tr.min.js"},Browsers:["Chrome","Firefox","Safari","Trident","WebView","Edge"],EmberModelUrl:{agent:{model:"agent",url:"/app/services/app/webchat/{token}/agents/{id}"},config:{model:"config",url:"/app/services/app/webchat/{token}/config?domain={domainName}"},widgetInfo:{model:"widget-info",url:"/app/services/app/webchat/{token}/widget_info_v2?locales={locale}&platform=web"},conversations:{model:"conversations",url:"/app/services/app/webchat/{token}/user/{userAlias}/messages"},csatRating:{model:"csat",url:"/app/services/app/webchat/{token}/conversation/{conversationId}/csat/{csatId}/response"},cobrowsingSettings:{model:"cobrowsing",url:"/app/services/app/webchat/{token}/cobrowsing_settings"},fileDownload:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/file/{fileHash}/download"},newEvent:{model:"",url:"/app/services/app/webchat/{token}/events/new"},newMultiEvent:{model:"",url:"/app/services/app/webchat/{token}/events/new/multi"},newSBMultiEvent:{model:"",url:"/app/services/app/webchat/{token}/events/v2/new/multi"},newRecentEvent:{model:"",url:"/app/services/app/webchat/{token}/events/recent"},newSession:{model:"",url:"/app/services/app/webchat/{token}/session"},dataDog:{model:"",url:"/app/services/app/webchat/{token}/track/dd/multi"},dataDogSBMulti:{model:"",url:"/app/services/app/webchat/{token}/track/dd/v2/multi"},faqCategories:{model:"faqs",url:"/app/services/app/webchat/{token}/faq/category"},geolocation:{model:"geolocation",url:"/app/services/app/webchat/{token}/geolocation"},heartbeat:{model:"heartbeat",url:"/app/services/app/webchat/{token}/user/{userAlias}/heartbeat"},imageUpload:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/picture"},message:{model:"messages",url:"/app/services/app/webchat/{token}/user/{userAlias}/message"},offlineMessage:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/offline_message"},messageACK:{model:"messages",url:"/app/services/app/webchat/{token}/user/{userAlias}/delivered"},read:{model:"response",url:"/app/services/app/webchat/{token}/user/{userAlias}/conversation/read"},reset:{model:"response",url:"/app/services/app/webchat/{token}/logout"},subscribePush:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/register_push"},tattletale:{model:"",url:"/app/services/app/webchat/{token}/rules/metrics?ruleId={ruleId}&keys={keys}"},trackActivity:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/activity"},updateCampaign:{model:"response",url:"/app/services/app/webchat/{token}/user/{userAlias}/message/marketing/{marketingId}/status"},updateUser:{model:"user",url:"/app/services/app/webchat/{token}/user/{userAlias}/update"},updateUserJWT:{model:"user",url:"/app/services/app/webchat/{token}/user/{userAlias}/update/update-with-jwt"},upvoteDownvote:{model:"",url:"/app/services/app/webchat/{token}/faq/category/{categoryId}/article/{articleId}?localeId={localeId}&platform=web"},user:{model:"user",url:"/app/services/app/webchat/{token}/user"},userAlias:{model:"user",url:"/app/services/app/webchat/{token}/user/{userAlias}"},userToken:{model:"user",url:"/app/services/app/webchat/{token}/user/token"},verifyJWT:{model:"jwt",url:"/app/services/app/webchat/{token}/jwt/validate"},renewJWT:{model:"jwt",url:"/app/services/app/webchat/{token}/user/renew-by-jwt"},webSocket:{model:"rtsToken",url:"/app/services/app/webchat/{token}/token"},fileUpload:{model:"",url:"/app/services/app/webchat/{token}/user/{userAlias}/file/upload"},conversationStatus:{model:"conversations",url:"/app/services/app/webchat/{token}/user/{userAlias}/messages"},getTemplateArticle:{model:"external-article",url:"/app/services/app/webchat/{token}/template/content/{alias}",postBackURL:"/app/services/app/webchat/{token}/message/{messageAlias}/{referenceId}/postback"},calendarData:{model:"config",url:"/app/services/app/webchat/{token}/agents/{userAlias}/calendar/availability"}},EmberModelQueryParams:{SiteId:"siteId",IdentifyByReferenceId:"identifyByReferenceId"},EmberModelPathParams:{Token:"{token}",UserAlias:"{userAlias}"},DataDog:{tags:["accountId"],events:{connection:{key:"fe.track.user.ws.connection",tags:{connStatus:{key:"conn_status",value:{timeout:"1",pong_failed:"2"}},connFlag:{key:"conn_flag",value:{created:"0",disconnected:"1",reconnected:"2",connected:"3",subscribed:"4",forcedClosed:"5",scriptNotLoaded:"6"}},errFlag:{key:"err_flag"}}},connectionDropped:{key:"fe.track.user.ws.connectionDropped",tags:{dropStatus:{key:"drop_status",value:{no_ping_pong:"1",no_connection:"2",connection_retried:"3"}}}},subscription:{key:"fe.track.user.ws.subscription",tags:{subTimeout:{key:"sub_timeout"}}},dropEvent:{key:"fe.track.user.ws.dropEvent",tags:{eventStorePayload:{key:"event_store_payload"}}},advicePull:{key:"fe.track.user.ws.advicePull",tags:{pullStatus:{key:"adv_pull_status",value:{triggered:"0",called:"1",read:"2",readError:"3"}}}}}},DatastoreTypes:{LSDS:{id:"lsds",name:"Local Storage Datastore"},LFDS:{id:"lfds",name:"Local Forage IndexDB Datastore"}},Batch:{transactions:{types:{dd:{id:1,label:"Data Dog"},events:{id:2,label:"Event Store"}}},errors:{ERR_LOCKED:{code:1,message:"BATCH SERVICE IS FULL"},ERR_TRANS_INVALID:{code:2,message:"TRANSACTION IS INVALID"}}},FEATURES:{KUBE_CANARY_ENABLED_FLAG:"KUBE_CANARY_ENABLED_APPS"},MESSAGE_CATEGORIES:{text:1,image:2,video:3},BUBBLE_CONFIG:{scrollToBottomSpeed:{high:800,medium:50,low:3},contentHeight:91,contentHeightForMobile:70,widgetBubbleHeight:76,stackViewCountInMobile:2},liveTranslationSettings:{translateStatusForMessage:{no:0,yes:1,error:2}},VALUE_STRINGS:{NA:"N/A"},messengerVisibilityOptions:{always:"always",hidden:"hidden",businessHours:"business_hours"},CRM:{DOMAIN_PATH:"myfreshworks"}}}),define("hotline-web/utils/countrycodes",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BA:"Bosnia and Herzegovina",BB:"Barbados",WF:"Wallis and Futuna",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei",BO:"Bolivia",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BT:"Bhutan",JM:"Jamaica",BV:"Bouvet Island",BW:"Botswana",WS:"Samoa",BQ:"Bonaire, Saint Eustatius and Saba ",BR:"Brazil",BS:"Bahamas",JE:"Jersey",BY:"Belarus",BZ:"Belize",RU:"Russia",RW:"Rwanda",RS:"Serbia",TL:"East Timor",RE:"Reunion",TM:"Turkmenistan",TJ:"Tajikistan",RO:"Romania",TK:"Tokelau",GW:"Guinea-Bissau",GU:"Guam",GT:"Guatemala",GS:"South Georgia and the South Sandwich Islands",GR:"Greece",GQ:"Equatorial Guinea",GP:"Guadeloupe",JP:"Japan",GY:"Guyana",GG:"Guernsey",GF:"French Guiana",GE:"Georgia",GD:"Grenada",GB:"United Kingdom",GA:"Gabon",SV:"El Salvador",GN:"Guinea",GM:"Gambia",GL:"Greenland",GI:"Gibraltar",GH:"Ghana",OM:"Oman",TN:"Tunisia",JO:"Jordan",HR:"Croatia",HT:"Haiti",HU:"Hungary",HK:"Hong Kong",HN:"Honduras",HM:"Heard Island and McDonald Islands",VE:"Venezuela",PR:"Puerto Rico",PS:"Palestinian Territory",PW:"Palau",PT:"Portugal",SJ:"Svalbard and Jan Mayen",PY:"Paraguay",IQ:"Iraq",PA:"Panama",PF:"French Polynesia",PG:"Papua New Guinea",PE:"Peru",PK:"Pakistan",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PM:"Saint Pierre and Miquelon",ZM:"Zambia",EH:"Western Sahara",EE:"Estonia",EG:"Egypt",ZA:"South Africa",EC:"Ecuador",IT:"Italy",VN:"Vietnam",SB:"Solomon Islands",ET:"Ethiopia",SO:"Somalia",ZW:"Zimbabwe",SA:"Saudi Arabia",ES:"Spain",ER:"Eritrea",ME:"Montenegro",MD:"Moldova",MG:"Madagascar",MF:"Saint Martin",MA:"Morocco",MC:"Monaco",UZ:"Uzbekistan",MM:"Myanmar",ML:"Mali",MO:"Macao",MN:"Mongolia",MH:"Marshall Islands",MK:"Macedonia",MU:"Mauritius",MT:"Malta",MW:"Malawi",MV:"Maldives",MQ:"Martinique",MP:"Northern Mariana Islands",MS:"Montserrat",MR:"Mauritania",IM:"Isle of Man",UG:"Uganda",TZ:"Tanzania",MY:"Malaysia",MX:"Mexico",IL:"Israel",FR:"France",IO:"British Indian Ocean Territory",SH:"Saint Helena",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Micronesia",FO:"Faroe Islands",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NA:"Namibia",VU:"Vanuatu",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NZ:"New Zealand",NP:"Nepal",NR:"Nauru",NU:"Niue",CK:"Cook Islands",XK:"Kosovo",CI:"Ivory Coast",CH:"Switzerland",CO:"Colombia",CN:"China",CM:"Cameroon",CL:"Chile",CC:"Cocos Islands",CA:"Canada",CG:"Republic of the Congo",CF:"Central African Republic",CD:"Democratic Republic of the Congo",CZ:"Czech Republic",CY:"Cyprus",CX:"Christmas Island",CR:"Costa Rica",CW:"Curacao",CV:"Cape Verde",CU:"Cuba",SZ:"Swaziland",SY:"Syria",SX:"Sint Maarten",KG:"Kyrgyzstan",KE:"Kenya",SS:"South Sudan",SR:"Suriname",KI:"Kiribati",KH:"Cambodia",KN:"Saint Kitts and Nevis",KM:"Comoros",ST:"Sao Tome and Principe",SK:"Slovakia",KR:"South Korea",SI:"Slovenia",KP:"North Korea",KW:"Kuwait",SN:"Senegal",SM:"San Marino",SL:"Sierra Leone",SC:"Seychelles",KZ:"Kazakhstan",KY:"Cayman Islands",SG:"Singapore",SE:"Sweden",SD:"Sudan",DO:"Dominican Republic",DM:"Dominica",DJ:"Djibouti",DK:"Denmark",VG:"British Virgin Islands",DE:"Germany",YE:"Yemen",DZ:"Algeria",US:"United States",UY:"Uruguay",YT:"Mayotte",UM:"United States Minor Outlying Islands",LB:"Lebanon",LC:"Saint Lucia",LA:"Laos",TV:"Tuvalu",TW:"Taiwan",TT:"Trinidad and Tobago",TR:"Turkey",LK:"Sri Lanka",LI:"Liechtenstein",LV:"Latvia",TO:"Tonga",LT:"Lithuania",LU:"Luxembourg",LR:"Liberia",LS:"Lesotho",TH:"Thailand",TF:"French Southern Territories",TG:"Togo",TD:"Chad",TC:"Turks and Caicos Islands",LY:"Libya",VA:"Vatican",VC:"Saint Vincent and the Grenadines",AE:"United Arab Emirates",AD:"Andorra",AG:"Antigua and Barbuda",AF:"Afghanistan",AI:"Anguilla",VI:"U.S. Virgin Islands",IS:"Iceland",IR:"Iran",AM:"Armenia",AL:"Albania",AO:"Angola",AQ:"Antarctica",AS:"American Samoa",AR:"Argentina",AU:"Australia",AT:"Austria",AW:"Aruba",IN:"India",AX:"Aland Islands",AZ:"Azerbaijan",IE:"Ireland",ID:"Indonesia",UA:"Ukraine",QA:"Qatar",MZ:"Mozambique"}}),define("hotline-web/utils/dayjs",["exports","dayjs","dayjs/plugin/advancedFormat","dayjs/plugin/relativeTime","dayjs/plugin/localizedFormat"],function(e,t,s,n,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t.default.extend(s.default),t.default.extend(n.default),t.default.extend(a.default),window.dayjs=t.default
var i=t.default
e.default=i}),define("hotline-web/utils/dom-utils",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.addCSSInline=function(e,t,s){e&&e.style.setProperty(t,s)},e.bindEvent=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3]
e&&e.addEventListener&&e.addEventListener(t,s,n)},e.unbindEvent=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3]
e&&e.removeEventListener&&e.removeEventListener(t,s,n)},e.setAttr=function(e,t){for(var s in t)t.hasOwnProperty(s)&&e.setAttribute(s,t[s])}}),define("hotline-web/utils/flatten-query-params",["exports","ember-data-url-templates/utils/flatten-query-params"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("hotline-web/utils/intl/missing-message",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}}),define("hotline-web/utils/languages",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={aa:"assets/locales/aa.js",ab:"assets/locales/ab.js",ae:"assets/locales/ae.js",af:"https://assetscdn-wchat.freshchat.com/static/assets/locales/af-132057236369bf6a2ad1316ff9d58b11.js",ak:"assets/locales/ak.js",am:"assets/locales/am.js",an:"assets/locales/an.js",ar:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ar-4035878c65e8c363db6d8cfbb4c4a9ac.js",as:"assets/locales/as.js",av:"assets/locales/av.js",ay:"assets/locales/ay.js",az:"https://assetscdn-wchat.freshchat.com/static/assets/locales/az-7ccdd3aa890d917f3de8d15182a224ce.js",ba:"assets/locales/ba.js",be:"https://assetscdn-wchat.freshchat.com/static/assets/locales/be-f856252b09a4e5a4dee437be001e8619.js",bg:"https://assetscdn-wchat.freshchat.com/static/assets/locales/bg-737ad834cb39049c0deeb1a3ef4bb088.js",bh:"assets/locales/bh.js",bi:"https://assetscdn-wchat.freshchat.com/static/assets/locales/bi-aac22018c7a0582594cda1d9168590ef.js",bm:"https://assetscdn-wchat.freshchat.com/static/assets/locales/bm-8068e2881db86bbde4170634145f7c5d.js",bn:"https://assetscdn-wchat.freshchat.com/static/assets/locales/bn-4e3064fb2df4b3d9a01324bce38959df.js",bo:"https://assetscdn-wchat.freshchat.com/static/assets/locales/bo-361fee7cb7f1b50577ee1b0dce97d65a.js",br:"https://assetscdn-wchat.freshchat.com/static/assets/locales/br-8a46c4d5c6b7c3206c4cd78e035da949.js",bs:"https://assetscdn-wchat.freshchat.com/static/assets/locales/bs-d629b203647fa0991e063ab25923a63f.js",ca:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ca-39f2102d5d909242e7e0fd00c9635d30.js","ca-es":"https://assetscdn-wchat.freshchat.com/static/assets/locales/ca-39f2102d5d909242e7e0fd00c9635d30.js",ce:"assets/locales/ce.js",ch:"assets/locales/ch.js",co:"assets/locales/co.js",cr:"assets/locales/cr.js",cs:"https://assetscdn-wchat.freshchat.com/static/assets/locales/cs-8db060c6188996bfdaea1afa0d0227fa.js","cs-cz":"https://assetscdn-wchat.freshchat.com/static/assets/locales/cs-8db060c6188996bfdaea1afa0d0227fa.js",cu:"assets/locales/cu.js",cv:"https://assetscdn-wchat.freshchat.com/static/assets/locales/cv-3d61623f18f08320693df492ffc8739e.js",cy:"https://assetscdn-wchat.freshchat.com/static/assets/locales/cy-8e50e047cbce5fd80226a65d151f8d60.js",da:"https://assetscdn-wchat.freshchat.com/static/assets/locales/da-c1b737d314b810aeaeab5b341d5a3546.js","da-dk":"https://assetscdn-wchat.freshchat.com/static/assets/locales/da-c1b737d314b810aeaeab5b341d5a3546.js",de:"https://assetscdn-wchat.freshchat.com/static/assets/locales/de-75f00d8ad278351034bd8b641bd0803f.js","de-at":"https://assetscdn-wchat.freshchat.com/static/assets/locales/de-at-cbbc72ef4f4228b379fc9e25f74db42e.js","de-ch":"https://assetscdn-wchat.freshchat.com/static/assets/locales/de-ch-059b115da281693ae4eed80791f9d0ed.js","de-de":"https://assetscdn-wchat.freshchat.com/static/assets/locales/de-75f00d8ad278351034bd8b641bd0803f.js","de-li":"https://assetscdn-wchat.freshchat.com/static/assets/locales/de-75f00d8ad278351034bd8b641bd0803f.js","de-lu":"https://assetscdn-wchat.freshchat.com/static/assets/locales/de-75f00d8ad278351034bd8b641bd0803f.js",dv:"https://assetscdn-wchat.freshchat.com/static/assets/locales/dv-4cfd64141a9bf830df93ffdfd6faa2ce.js",ee:"assets/locales/ee.js",el:"https://assetscdn-wchat.freshchat.com/static/assets/locales/el-59c847c4fad69fdf002e857e0667b43e.js",en:"https://assetscdn-wchat.freshchat.com/static/assets/locales/en-7c01d610bc081162e6062b3c60ca36ac.js","en-us":"https://assetscdn-wchat.freshchat.com/static/assets/locales/en-7c01d610bc081162e6062b3c60ca36ac.js",eo:"https://assetscdn-wchat.freshchat.com/static/assets/locales/eo-9a9dac7e8a69311961cc898c740c46ea.js",es:"https://assetscdn-wchat.freshchat.com/static/assets/locales/es-1aedbd165e122fbc29b23e5e04e68c2a.js","es-do":"https://assetscdn-wchat.freshchat.com/static/assets/locales/es-do-c0961c10e45f211d68dc391f558972da.js","es-la":"https://assetscdn-wchat.freshchat.com/static/assets/locales/es-us-e6ba881c4aa83db2686789f14a366952.js","es-mx":"https://assetscdn-wchat.freshchat.com/static/assets/locales/es-us-e6ba881c4aa83db2686789f14a366952.js","es-us":"https://assetscdn-wchat.freshchat.com/static/assets/locales/es-us-e6ba881c4aa83db2686789f14a366952.js",et:"https://assetscdn-wchat.freshchat.com/static/assets/locales/et-6df8f1e703dde434e3475ff3fbc51625.js","et-ee":"https://assetscdn-wchat.freshchat.com/static/assets/locales/et-6df8f1e703dde434e3475ff3fbc51625.js",eu:"https://assetscdn-wchat.freshchat.com/static/assets/locales/eu-f33508ac5558d60abe3996edeba84701.js",fa:"https://assetscdn-wchat.freshchat.com/static/assets/locales/fa-9593c8f9b4a707902512894edd422af4.js",ff:"assets/locales/ff.js",fi:"https://assetscdn-wchat.freshchat.com/static/assets/locales/fi-f8edde06b11dea3496d7f5f9ddbaba62.js","fi-fi":"https://assetscdn-wchat.freshchat.com/static/assets/locales/fi-f8edde06b11dea3496d7f5f9ddbaba62.js",fj:"assets/locales/fj.js",fo:"https://assetscdn-wchat.freshchat.com/static/assets/locales/fo-5dc5d060d94bcaf8e5859a69efb46421.js",fr:"https://assetscdn-wchat.freshchat.com/static/assets/locales/fr-fafc71fe2d03a243831addb7521d13dc.js","fr-be":"https://assetscdn-wchat.freshchat.com/static/assets/locales/fr-fafc71fe2d03a243831addb7521d13dc.js","fr-ca":"https://assetscdn-wchat.freshchat.com/static/assets/locales/fr-ca-9c4a649d9e67f51f65128eeaa4990145.js","fr-ch":"https://assetscdn-wchat.freshchat.com/static/assets/locales/fr-ch-2464be79a5dd641e8bf0a681615c45bf.js","fr-fr":"https://assetscdn-wchat.freshchat.com/static/assets/locales/fr-fafc71fe2d03a243831addb7521d13dc.js","fr-lu":"https://assetscdn-wchat.freshchat.com/static/assets/locales/fr-fafc71fe2d03a243831addb7521d13dc.js","fr-mc":"https://assetscdn-wchat.freshchat.com/static/assets/locales/fr-fafc71fe2d03a243831addb7521d13dc.js",fy:"https://assetscdn-wchat.freshchat.com/static/assets/locales/fy-8a3a38ab9fe56e06ffc32bb34d71756a.js",ga:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ga-3c49efd02168cfb34c8d94cc301df808.js",gd:"https://assetscdn-wchat.freshchat.com/static/assets/locales/gd-8e63e8f09f4d7acc118a1f7f7432516f.js",gl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/gl-60acb52415eebe9c9fa83e9dc6b9fd9e.js",gn:"assets/locales/gn.js",gu:"https://assetscdn-wchat.freshchat.com/static/assets/locales/gu-59c852723cfa1ff057c2a03711649e1b.js",gv:"assets/locales/gv.js",ha:"assets/locales/ha.js",he:"https://assetscdn-wchat.freshchat.com/static/assets/locales/he-bb8402ba5120d65a911b16ea57821b64.js",hi:"https://assetscdn-wchat.freshchat.com/static/assets/locales/hi-8bb5f2bd8df011c03ccd2f61ac5e93d0.js","hi-in":"https://assetscdn-wchat.freshchat.com/static/assets/locales/hi-8bb5f2bd8df011c03ccd2f61ac5e93d0.js",ho:"assets/locales/ho.js",hr:"https://assetscdn-wchat.freshchat.com/static/assets/locales/hr-7fa9e1be4a21b80bbd9fcc25c462e811.js",ht:"assets/locales/ht.js",hu:"https://assetscdn-wchat.freshchat.com/static/assets/locales/hu-6ad2b5e19e916da02cd7017f6676353f.js","hu-hu":"https://assetscdn-wchat.freshchat.com/static/assets/locales/hu-6ad2b5e19e916da02cd7017f6676353f.js",hy:"assets/locales/hy.js",hz:"assets/locales/hz.js",ia:"assets/locales/ia.js",id:"https://assetscdn-wchat.freshchat.com/static/assets/locales/id-6eac244746617e2e5eebbdb514ee981e.js","id-id":"https://assetscdn-wchat.freshchat.com/static/assets/locales/id-6eac244746617e2e5eebbdb514ee981e.js",ie:"assets/locales/ie.js",ig:"assets/locales/ig.js",ii:"assets/locales/ii.js",ik:"assets/locales/ik.js",io:"assets/locales/io.js",is:"https://assetscdn-wchat.freshchat.com/static/assets/locales/is-835e2cee652efa217838583c7d1fe090.js",it:"https://assetscdn-wchat.freshchat.com/static/assets/locales/it-8ac1549385245eb56ab389e1e5c06656.js","it-ch":"https://assetscdn-wchat.freshchat.com/static/assets/locales/it-8ac1549385245eb56ab389e1e5c06656.js","it-it":"https://assetscdn-wchat.freshchat.com/static/assets/locales/it-8ac1549385245eb56ab389e1e5c06656.js",iu:"assets/locales/iu.js",ja:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ja-2ae5305acb08e8543d51541e65117d70.js","ja-jp":"https://assetscdn-wchat.freshchat.com/static/assets/locales/ja-2ae5305acb08e8543d51541e65117d70.js",jv:"https://assetscdn-wchat.freshchat.com/static/assets/locales/jv-62c049822614a8ae71e0d756c8707b4c.js",ka:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ka-80c38d59e0eb8dc7ad85d6bfa402746d.js",kg:"assets/locales/kg.js",ki:"assets/locales/ki.js",kj:"assets/locales/kj.js",kk:"https://assetscdn-wchat.freshchat.com/static/assets/locales/kk-5cfe3f2e5e417157db1b0fa2d61f0bf0.js",kl:"assets/locales/kl.js",km:"https://assetscdn-wchat.freshchat.com/static/assets/locales/km-727a376474ed11bdd9988ecc9b352fce.js",kn:"https://assetscdn-wchat.freshchat.com/static/assets/locales/kn-3d058aac8b9a6ea1053928527e31ad64.js",ko:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ko-779208bec2bdb33373f3b6791369eebb.js","ko-kr":"https://assetscdn-wchat.freshchat.com/static/assets/locales/ko-779208bec2bdb33373f3b6791369eebb.js",kr:"assets/locales/kr.js",ks:"assets/locales/ks.js",ku:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ku-1df714652e2be20be6690514cf817b22.js",kv:"assets/locales/kv.js",kw:"assets/locales/kw.js",ky:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ky-de8a1be33380873988dde0a33ca7efa3.js",la:"assets/locales/la.js",lb:"https://assetscdn-wchat.freshchat.com/static/assets/locales/lb-f581cd70534043f1a81cea979ad79c91.js",lg:"assets/locales/lg.js",li:"assets/locales/li.js",ln:"assets/locales/ln.js",lo:"https://assetscdn-wchat.freshchat.com/static/assets/locales/lo-32b5670e3621eec6ab738f72c84140e0.js",lt:"https://assetscdn-wchat.freshchat.com/static/assets/locales/lt-31b76d01979c76b1c52e499b7ef34016.js",lu:"assets/locales/lu.js",lv:"https://assetscdn-wchat.freshchat.com/static/assets/locales/lv-c8a15a607fd3b9cf572feaedec9f5efe.js","lv-lv":"https://assetscdn-wchat.freshchat.com/static/assets/locales/lv-c8a15a607fd3b9cf572feaedec9f5efe.js",mg:"assets/locales/mg.js",mh:"assets/locales/mh.js",mi:"https://assetscdn-wchat.freshchat.com/static/assets/locales/mi-da075f82b0f3aff804b1a34460817d4c.js",mk:"https://assetscdn-wchat.freshchat.com/static/assets/locales/mk-0714dec9d23c5286c39c518fb3f2d976.js",ml:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ml-49383da543d774683857d3b057a0a93e.js",mn:"https://assetscdn-wchat.freshchat.com/static/assets/locales/mn-db1a16f1026060a60c77232b1d478fff.js",mr:"https://assetscdn-wchat.freshchat.com/static/assets/locales/mr-965c37b7c1d18b88309ec1fba131b4da.js",ms:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ms-0de7c4c976d63a9d03db51a055766a4e.js",mt:"https://assetscdn-wchat.freshchat.com/static/assets/locales/mt-937730d1fab12d88ab0e5b601294e861.js",my:"https://assetscdn-wchat.freshchat.com/static/assets/locales/my-4c55f7527d608749e60af4b608b24f2c.js",na:"assets/locales/na.js",nb:"https://assetscdn-wchat.freshchat.com/static/assets/locales/nb-10cc4d691a80458b84053ca273dbdcee.js","nb-no":"https://assetscdn-wchat.freshchat.com/static/assets/locales/nb-10cc4d691a80458b84053ca273dbdcee.js",nd:"assets/locales/nd.js",ne:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ne-27ee8e9bc45786ebc66344b1b2221189.js",ng:"assets/locales/ng.js",nl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/nl-6015e995471b6ff67499900f262a12c2.js","nl-be":"https://assetscdn-wchat.freshchat.com/static/assets/locales/nl-be-dfd83e29288996156d646697e5a27058.js","nl-nl":"https://assetscdn-wchat.freshchat.com/static/assets/locales/nl-6015e995471b6ff67499900f262a12c2.js",nn:"https://assetscdn-wchat.freshchat.com/static/assets/locales/nn-c1828060fa3bead483bf2ede7a7d7648.js",no:"https://assetscdn-wchat.freshchat.com/static/assets/locales/nb-10cc4d691a80458b84053ca273dbdcee.js",nr:"assets/locales/nr.js",nv:"assets/locales/nv.js",ny:"assets/locales/ny.js",oc:"assets/locales/oc.js",oj:"assets/locales/oj.js",om:"assets/locales/om.js",or:"assets/locales/or.js",os:"assets/locales/os.js",pa:"https://assetscdn-wchat.freshchat.com/static/assets/locales/pa-in-0d917de3eb603aeb7ba30c3be15b31ea.js","pa-in":"https://assetscdn-wchat.freshchat.com/static/assets/locales/pa-in-0d917de3eb603aeb7ba30c3be15b31ea.js",pi:"assets/locales/pi.js",pl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/pl-316d2018dd59e1ce6158f46ce6c82507.js","pl-pl":"https://assetscdn-wchat.freshchat.com/static/assets/locales/pl-316d2018dd59e1ce6158f46ce6c82507.js",ps:"assets/locales/ps.js",pt:"https://assetscdn-wchat.freshchat.com/static/assets/locales/pt-br-e35f6109e0175ad500a748ebaf3512bb.js","pt-br":"https://assetscdn-wchat.freshchat.com/static/assets/locales/pt-br-e35f6109e0175ad500a748ebaf3512bb.js","pt-pt":"https://assetscdn-wchat.freshchat.com/static/assets/locales/pt-1664f08a82cc26c3d35ff9dc3a1e55b1.js",qu:"assets/locales/qu.js",rm:"assets/locales/rm.js",rn:"assets/locales/rn.js",ro:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ro-f6b3f886f6b8ea333dc966692fd990c7.js","ro-ro":"https://assetscdn-wchat.freshchat.com/static/assets/locales/ro-f6b3f886f6b8ea333dc966692fd990c7.js",ru:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ru-89e3ccda060dc98e3438fdd5e3bc8fdb.js","ru-ru":"https://assetscdn-wchat.freshchat.com/static/assets/locales/ru-89e3ccda060dc98e3438fdd5e3bc8fdb.js",rw:"assets/locales/rw.js",sa:"assets/locales/sa.js",sc:"assets/locales/sc.js",sd:"https://assetscdn-wchat.freshchat.com/static/assets/locales/sd-c9c679445df2ec80541f616fec0c893d.js",se:"https://assetscdn-wchat.freshchat.com/static/assets/locales/se-ef5927c5f16e6213647b82c82c5121ce.js",sg:"assets/locales/sg.js",si:"https://assetscdn-wchat.freshchat.com/static/assets/locales/si-ec0cee5d223e5e8fbf393101cce0f1b4.js",sk:"https://assetscdn-wchat.freshchat.com/static/assets/locales/sk-4dd9bbe109ae78f476277fb12313035e.js","sk-sk":"https://assetscdn-wchat.freshchat.com/static/assets/locales/sk-4dd9bbe109ae78f476277fb12313035e.js",sl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/sl-11cf8112949863c35047e53b50fd523e.js","sl-si":"https://assetscdn-wchat.freshchat.com/static/assets/locales/sl-11cf8112949863c35047e53b50fd523e.js",sm:"assets/locales/sm.js",sn:"assets/locales/sn.js",so:"assets/locales/so.js",sq:"https://assetscdn-wchat.freshchat.com/static/assets/locales/sq-5e14efd7d00fbf1afd095c34710e8cc2.js",sr:"https://assetscdn-wchat.freshchat.com/static/assets/locales/sr-11af68e4ece1daa72af8d1e0ac7cb06b.js",ss:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ss-e2f9793f04799ba9bfc479b8c283e505.js",st:"assets/locales/st.js",su:"assets/locales/su.js",sv:"https://assetscdn-wchat.freshchat.com/static/assets/locales/sv-a8aa88578e4e15e45e227be8f677e3e8.js","sv-fi":"https://assetscdn-wchat.freshchat.com/static/assets/locales/sv-a8aa88578e4e15e45e227be8f677e3e8.js","sv-se":"https://assetscdn-wchat.freshchat.com/static/assets/locales/sv-a8aa88578e4e15e45e227be8f677e3e8.js",sw:"https://assetscdn-wchat.freshchat.com/static/assets/locales/sw-dfacc8bb38fe8636df5a86339ff94478.js",ta:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ta-9073e58597f460d1aa4302c3e2fb0fd1.js",te:"https://assetscdn-wchat.freshchat.com/static/assets/locales/te-35b50da1322f645ea6074dbfa98dc241.js",tg:"https://assetscdn-wchat.freshchat.com/static/assets/locales/tg-680cd7a082e8d7f037ff73a96e8a279d.js",th:"https://assetscdn-wchat.freshchat.com/static/assets/locales/th-7d0a3221305e4fbc9c45c4e888de4d9e.js","th-th":"https://assetscdn-wchat.freshchat.com/static/assets/locales/th-7d0a3221305e4fbc9c45c4e888de4d9e.js",ti:"assets/locales/ti.js",tk:"assets/locales/tk.js",tl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/tl-ph-2d7d82391de7edcb51c9ccc56caae755.js","tl-ph":"https://assetscdn-wchat.freshchat.com/static/assets/locales/tl-ph-2d7d82391de7edcb51c9ccc56caae755.js","tl-tl":"https://assetscdn-wchat.freshchat.com/static/assets/locales/tl-ph-2d7d82391de7edcb51c9ccc56caae755.js",tn:"assets/locales/tn.js",to:"assets/locales/to.js",tr:"https://assetscdn-wchat.freshchat.com/static/assets/locales/tr-19683ee3dbee24150905c0f1e1dd1865.js","tr-tr":"https://assetscdn-wchat.freshchat.com/static/assets/locales/tr-19683ee3dbee24150905c0f1e1dd1865.js",ts:"assets/locales/ts.js",tt:"assets/locales/tt.js",tw:"assets/locales/tw.js",ty:"assets/locales/ty.js",ug:"assets/locales/ug.js",uk:"https://assetscdn-wchat.freshchat.com/static/assets/locales/uk-2fc65cf8e6727a1c4ccec82dd5fe593d.js","uk-ua":"https://assetscdn-wchat.freshchat.com/static/assets/locales/uk-2fc65cf8e6727a1c4ccec82dd5fe593d.js",ur:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ur-23b2cd0b261fe3b376a8d04f720fc485.js",uz:"https://assetscdn-wchat.freshchat.com/static/assets/locales/uz-ff481cdfaceb730f0d4f6134f5904ddd.js",ve:"assets/locales/ve.js",vi:"https://assetscdn-wchat.freshchat.com/static/assets/locales/vi-93229ba271aed63ca303829b86ca0ad3.js","vi-vn":"https://assetscdn-wchat.freshchat.com/static/assets/locales/vi-93229ba271aed63ca303829b86ca0ad3.js",vo:"assets/locales/vo.js",wa:"assets/locales/wa.js",wo:"assets/locales/wo.js",xh:"assets/locales/xh.js",yi:"assets/locales/yi.js",yo:"https://assetscdn-wchat.freshchat.com/static/assets/locales/yo-5cb07d0495da6c1f9fb6930d9ea7abf5.js",za:"assets/locales/za.js",zh:"https://assetscdn-wchat.freshchat.com/static/assets/locales/zh-cn-1814444ba8a770b7afffd4dd5e6544f0.js","zh-cn":"https://assetscdn-wchat.freshchat.com/static/assets/locales/zh-cn-1814444ba8a770b7afffd4dd5e6544f0.js","zh-hk":"https://assetscdn-wchat.freshchat.com/static/assets/locales/zh-hk-d9d82776bfbcfb43689dcb7d7cfca06c.js","zh-mo":"https://assetscdn-wchat.freshchat.com/static/assets/locales/zh-hk-d9d82776bfbcfb43689dcb7d7cfca06c.js","zh-sg":"https://assetscdn-wchat.freshchat.com/static/assets/locales/zh-cn-1814444ba8a770b7afffd4dd5e6544f0.js","zh-tw":"https://assetscdn-wchat.freshchat.com/static/assets/locales/zh-tw-9874d66501e9629bbb483cc9b3a98ee4.js"}}),define("hotline-web/utils/locale",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultLocaleFor=function(e){if(Ember.isBlank(e))return e
e=e.toLowerCase()
for(var s=t.LocaleSubsets,n=s.length-1;n>=0;n--)if(-1!==s[n].indexOf(e))return s[n][0]
return},e.checkValidLocale=function(e){var s=t.DefaultLocaleKey,n=Object.keys(t.AcceptedLocalizations),a=Ember.isBlank(e)?s:e
if(a&&!Ember.isBlank(a)&&(a=this.getDefaultLocaleFor(a))&&-1!==n.indexOf(a))return a
return s},e.getNavigatorLanguage=function(){return window.navigator.languages&&window.navigator.languages.length&&window.navigator.languages[0]||window.navigator.language},e.LocaleMapping=void 0
var t={DefaultLocaleKey:"en-us",RTLBasedLanguages:["ar","he"],AcceptedLocalizations:{ar:{id:"ar",text:"عربى",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/ar-0f96444aed050117e354a3825fa09acf.js",dateId:"ar",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ar-4035878c65e8c363db6d8cfbb4c4a9ac.js"},ca:{id:"ca",text:"Català",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/ca-c5569597d234629a96ee04d9e82fbf1c.js",dateId:"ca",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ca-39f2102d5d909242e7e0fd00c9635d30.js"},cs:{id:"cs",text:"čeština",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/cs-e3e0c9d9d613d9f63a213f6b7ca18e12.js",dateId:"cs",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/cs-8db060c6188996bfdaea1afa0d0227fa.js"},cy:{id:"cy",text:"Cymraeg",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/cy-758c1465a0b5e89546e1cdd20bd27157.js",dateId:"cy",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/cy-8e50e047cbce5fd80226a65d151f8d60.js"},da:{id:"da",text:"dansk",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/da-12330c5fb5af57fde7e7197135b93bb8.js",dateId:"da",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/da-c1b737d314b810aeaeab5b341d5a3546.js"},de:{id:"de",text:"Deutsch",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/de-ab747101f5e978796affb6aa1e676254.js",dateId:"de",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/de-75f00d8ad278351034bd8b641bd0803f.js"},"en-us":{id:"en-us",text:"English",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/en-us-ce4f00450d23c6b6dfa2ee28f67d20a9.js",dateId:"en",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/en-7c01d610bc081162e6062b3c60ca36ac.js"},en:{id:"en-us",text:"English",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/en-us-ce4f00450d23c6b6dfa2ee28f67d20a9.js",dateId:"en",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/en-7c01d610bc081162e6062b3c60ca36ac.js"},"es-mx":{id:"es-mx",text:"Español (Americas)",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/es-mx-0152c93d80a2d1ea3af8cd250719239c.js",dateId:"es-us",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/es-us-e6ba881c4aa83db2686789f14a366952.js"},es:{id:"es",text:"Español",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/es-64a97ef870d74b52d77b7e3e391def47.js",dateId:"es",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/es-1aedbd165e122fbc29b23e5e04e68c2a.js"},et:{id:"et",text:"Eestlane",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/et-a1802ea1b5989f80b9465691a0a82da3.js",dateId:"et",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/et-6df8f1e703dde434e3475ff3fbc51625.js"},fi:{id:"fi",text:"Suomi",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/fi-a90828a086e5f7434c5a1a26d7d9ac36.js",dateId:"fi",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/fi-f8edde06b11dea3496d7f5f9ddbaba62.js"},fr:{id:"fr",text:"Français",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/fr-53092f1fa6ae812a3ca733dd8bdeca5b.js",dateId:"fr",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/fr-fafc71fe2d03a243831addb7521d13dc.js"},he:{id:"he",text:"עברי",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/he-de79dfa5df941f66300f9a2bb52c0b03.js",dateId:"he",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/he-bb8402ba5120d65a911b16ea57821b64.js"},hu:{id:"hu",text:"Magyar",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/hu-3a6ad1e07b8ceea783bc906d555053ce.js",dateId:"hu",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/hu-6ad2b5e19e916da02cd7017f6676353f.js"},id:{id:"id",text:"Bahasa Indonesia",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/id-538c2528d054704ac70827ecc0423c5a.js",dateId:"id",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/id-6eac244746617e2e5eebbdb514ee981e.js"},it:{id:"it",text:"Italiano",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/it-b74ec668fc19f0699766befc51882e64.js",dateId:"it",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/it-8ac1549385245eb56ab389e1e5c06656.js"},ja:{id:"ja",text:"日本人",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/ja-deb9eb5a1682dbdcd4a593717fe35fa8.js",dateId:"ja",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ja-2ae5305acb08e8543d51541e65117d70.js"},ko:{id:"ko",text:"한국어",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/ko-79b3afdd80f1c7d94b53b1c23fdc6b70.js",dateId:"ko",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ko-779208bec2bdb33373f3b6791369eebb.js"},lv:{id:"lv",text:"Latvietis",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/lv-ab619edc6ea75bfb30d37bfc6ab8a3cb.js",dateId:"lv",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/lv-c8a15a607fd3b9cf572feaedec9f5efe.js"},ms:{id:"ms",text:"Melayu",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/ms-af6b4a25157186b156caf4fa4f3638db.js",dateId:"ms",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ms-0de7c4c976d63a9d03db51a055766a4e.js"},nl:{id:"nl",text:"Nederlands",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/nl-b8cd665bac454c5df8ecc9a9cc3d50a1.js",dateId:"nl",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/nl-6015e995471b6ff67499900f262a12c2.js"},no:{id:"no",text:"Norsk",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/no-e3313bbe67c4bc14c7dd42aa5cc7f8af.js",dateId:"nb",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/nb-10cc4d691a80458b84053ca273dbdcee.js"},pl:{id:"pl",text:"Polskie",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/pl-2e68944ade832492398e6dde52d78a36.js",dateId:"pl",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/pl-316d2018dd59e1ce6158f46ce6c82507.js"},"pt-br":{id:"pt-br",text:"Português - Brasil",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/pt-br-7238383f43300a90fb885d99ad856d31.js",dateId:"pt-br",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/pt-br-e35f6109e0175ad500a748ebaf3512bb.js"},"pt-pt":{id:"pt-pt",text:"Português - Portugal",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/pt-pt-b282a4ccf7f55dd70f64c661db71c11f.js",dateId:"pt",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/pt-1664f08a82cc26c3d35ff9dc3a1e55b1.js"},ru:{id:"ru",text:"русский",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/ru-9bc6ea9024e9448a739b33f795e9d7d0.js",dateId:"ru",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/ru-89e3ccda060dc98e3438fdd5e3bc8fdb.js"},sk:{id:"sk",text:"slovenský",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/sk-641e8d1ae59d134f0584fc1fdfcdf22f.js",dateId:"sk",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/sk-4dd9bbe109ae78f476277fb12313035e.js"},sl:{id:"sl",text:"Slovenščina",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/sl-ed7cd7d4cc4957b25a0768c794a25175.js",dateId:"sl",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/sl-11cf8112949863c35047e53b50fd523e.js"},sv:{id:"sv",text:"Svenska",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/sv-f970f5fb1f4af06a592a4356837df3aa.js",dateId:"sv",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/sv-a8aa88578e4e15e45e227be8f677e3e8.js"},th:{id:"th",text:"Thai",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/th-073b395e5ccb2687131206d7f94e3860.js",dateId:"th",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/th-7d0a3221305e4fbc9c45c4e888de4d9e.js"},tr:{id:"tr",text:"Türk",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/tr-53c4a40415a82f3ba516da5ff9ca081f.js",dateId:"tr",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/tr-19683ee3dbee24150905c0f1e1dd1865.js"},uk:{id:"uk",text:"Укр",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/uk-c04587bdb0c2567d80d2f06f066682fb.js",dateId:"uk",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/uk-2fc65cf8e6727a1c4ccec82dd5fe593d.js"},vi:{id:"vi",text:"Tiếng Việt",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/vi-45b4e59330b7bec8dc63e5ebb9783c21.js",dateId:"vi",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/vi-93229ba271aed63ca303829b86ca0ad3.js"},"zh-cn":{id:"zh-cn",text:"简体中文",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/zh-cn-bf9e76629b238c20ac805674e4066682.js",dateId:"zh-cn",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/zh-cn-1814444ba8a770b7afffd4dd5e6544f0.js"},"zh-tw":{id:"zh-tw",text:"繁體中文",url:"https://assetscdn-wchat.freshchat.com/static/assets/translations/zh-tw-91d63c473a262524e3a93c2d86deedab.js",dateId:"zh-tw",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/zh-tw-9874d66501e9629bbb483cc9b3a98ee4.js"},"fc-stretch":{id:"fc-stretch",text:"fc-stretch",url:"assets/translations/fc-stretch.js",dateId:"en",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/en-7c01d610bc081162e6062b3c60ca36ac.js"},"fc-asterisk":{id:"fc-asterisk",text:"fc-asterisk",url:"assets/translations/fc-asterisk.js",dateId:"en",dateUrl:"https://assetscdn-wchat.freshchat.com/static/assets/locales/en-7c01d610bc081162e6062b3c60ca36ac.js"}},LocaleSubsets:[["en-us","en","en-gb","en-in","en-001","en-150","en-ag","en-ai","en-as","en-at","en-au","en-bb","en-be","en-bi","en-bm","en-bs","en-bw","en-bz","en-ca","en-cc","en-ch","en-ck","en-cm","en-cx","en-cy","en-de","en-dg","en-dk","en-dm","en-er","en-fi","en-fj","en-fk","en-fm","en-gd","en-gg","en-gh","en-gi","en-gm","en-gu","en-gy","en-hk","en-ie","en-il","en-im","en-io","en-je","en-jm","en-ke","en-ki","en-kn","en-ky","en-lc","en-lr","en-ls","en-mg","en-mh","en-mo","en-mp","en-ms","en-mt","en-mu","en-mw","en-my","en-na","en-nf","en-ng","en-nl","en-nr","en-nu","en-nz","en-pg","en-ph","en-pk","en-pn","en-pr","en-pw","en-rw","en-sb","en-sc","en-sd","en-se","en-sg","en-sh","en-si","en-sl","en-ss","en-sx","en-sz","en-tc","en-tk","en-to","en-tt","en-tv","en-tz","en-ug","en-um","en-us","en-us-posix","en-vc","en-vg","en-vi","en-vu","en-ws","en-za","en-zm","en-zw"],["ar","ar-ar","ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ye"],["ca","ca-es"],["cs","cs-cz"],["cy","cy-gb"],["da","da-dk"],["de","de-de","de-at","de-li","de-lu","de-ch"],["es-mx","es-la","es-ar","es-bo","es-cl","es-co","es-cr","es-do","es-ec","es-sv","es-gt","es-hn","es-ni","es-pa","es-py","es-pe","es-pr","es-uy","es-ve"],["es","es-es"],["et","et-ee"],["fi","fi-fi"],["fr","fr-fr","fr-be","fr-ca","fr-lu","fr-ch"],["he","he-il"],["hu","hu-hu"],["id","id-id"],["it","it-it","it-ch"],["ja","ja-jp"],["ko","ko-ko"],["lv","lv-lv"],["ms","ms-my","ms-bn"],["nl","nl-nl","nl-be"],["no","nb-no","no-no","nb","nn"],["pl","pl-pl"],["pt-br","pt"],["pt-pt"],["ru","ru-ru","ru-mo"],["sk","sk-sk"],["sl","sl-sl"],["sv","sv-sv","sv-fi","sv-se"],["th","th-th"],["tr","tr-tr"],["uk","uk-ua"],["vi","vi-vi"],["zh-cn","zh-hk","zh-mo","zh-sg","zh","zh-hans"],["zh-tw","zh-hant"],["fc-stretch"],["fc-asterisk"]],LocaleSpecificUrlPatterns:{translations:"translations","lunr-languages":"lunr-languages","moment-locales":"moment-locales"}}
e.LocaleMapping=t}),define("hotline-web/utils/placeholder-constants",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GEOLOCATION_KEYS=e.USER_NAME_KEYS=e.KEY_TYPES=e.CATEGORIES=void 0
e.CATEGORIES={USER:"user"}
e.KEY_TYPES={SYSTEM_TAG:"SYSTEM_TAG",CUSTOM_TAG:"CUSTOM_TAG"}
e.USER_NAME_KEYS={firstName:"firstName",lastName:"lastName",name:"name"}
e.GEOLOCATION_KEYS={country:"country",city:"city",state:"state"}}),define("hotline-web/utils/regex-utils",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t={_EMAIL_REGEX:/^[-a-zA-Z0-9.'’&_%+]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,10}$/,_PHONE_REGEX:/^(?=.{6,}$)[+]*[0-9\s]{0,4}[(]{0,1}[0-9]{1,5}[)]{0,1}[-\s\.\/0-9]*$/,_DOMAIN_REGEX:/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i,_HTTPS_REGEX:/^((https):\/\/)/gim,_FILE_EXTENSION:/^\.[0-9a-zA-Z]+$/,get:function(e){return this["_"+e]},emailCheck:function(e){return!!e&&e.match(this._EMAIL_REGEX)},phoneCheck:function(e){return!!e&&this._PHONE_REGEX.test(e)},replaceText:function(e,t,s){return e.replace(t,s)},getDomainName:function(e){var t=e&&e.match(this._DOMAIN_REGEX)
return t&&t[1]},checkHTTPSurl:function(e){return!!e&&e.match(this._HTTPS_REGEX)},checkValidFileExtension:function(e){return!!e&&this._FILE_EXTENSION.test(e)},maskTextUsingSingleCharacter:function(e,t,s){var n=e.match(t),a=n&&n.length
if(a)for(var i=0;i<a;i++){var r=n[i],o=r.length
"$"===s&&(o*=2)
var l=s.repeat(o)
e=e.replace(r,l)}return e}}
e.default=t}),define("hotline-web/utils/sanitize",["exports"],function(e){function t(e,t){var s=new Sanitize(t),n=document.implementation.createHTMLDocument("sanitizerdoc").body
return n.appendChild(s.clean_node(e)),n.innerHTML}Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=function(e,s){var n=document.implementation.createHTMLDocument("sanitizerdoc").body
return n.innerHTML=e,t(n,s)},e.sanitizeElement=t}),define("hotline-web/utils/send-request",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.adapterFor(t),i=n.params||{},r=n.requestType||"GET"
return a.ajax(s,r,{data:i})}})
define("hotline-web/utils/timezone",["exports","timezone-support/dist/index-2012-2022.umd","timezone-support/dist/parse-format"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n={convert:function(e,n){if(e&&n)try{var a=(0,t.findTimeZone)(n),i=(0,t.getZonedTime)(e,a)
return(0,s.formatZonedTime)(i,"YYYY-MM-DD HH:mm:ss")}catch(r){return e}return!1},listTimeZones:t.listTimeZones,guess:function(){return"undefined"!=typeof Intl&&void 0!==Intl.DateTimeFormat&&void 0!==Intl.DateTimeFormat().resolvedOptions().timeZone?Intl.DateTimeFormat().resolvedOptions().timeZone:window.jstz.determine().name()}}
e.default=n}),define("hotline-web/utils/update-locale",["exports","hotline-web/utils/dayjs","hotline-web/utils/locale"],function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n={locale:{},isLoading:!1,setLocaleToEN:function(){var e={name:"en-us",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekStart:1,formats:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A",l:"M/D/YYYY",ll:"MMM D, YYYY",lll:"MMM D, YYYY h:mm A",llll:"ddd, MMM D, YYYY h:mm A"},relativeTime:{future:"%s",past:"%s",s:"now",m:"a minute ago",mm:"%d minutes ago",h:"an hour ago",hh:"%d hours ago",d:"a day ago",dd:"%d days ago",M:"a month ago",MM:"%d months ago",y:"a year ago",yy:"%d years ago"},ordinal:function(e){var t=["th","st","nd","rd"],s=e%100
return"[".concat(e).concat(t[(s-20)%10]||t[s]||t[0],"]")}}
t.default.locale(e,null,!0),t.default.locale(e)},addScript:function(e){var s=this
return new Promise(function(n){if(s.isLoading=!1,e&&t.default.locale()!==e.locale){var a=document.createElement("script")
a.type="text/javascript",a.onload=function(){t.default.locale(e.locale),n(t.default.locale())},a.onerror=function(){s.setLocaleToEN(),n(t.default.locale())},a.src=e.scriptUrl,a.setAttribute("data-fc-locale",e.locale),document.head.appendChild(a)}else n(t.default.locale())})},updateLocaleWith:function(e){if(!this.isLoading){if(Ember.isBlank(e))return this.setLocaleToEN(),!1
var t=s.LocaleMapping.AcceptedLocalizations[e]
return e===s.LocaleMapping.DefaultLocaleKey||Ember.isBlank(t&&t.dateId)?(this.setLocaleToEN(),!1):(this.isLoading=!0,this.addScript({locale:t.dateId,scriptUrl:t.dateUrl}))}return!1}}
e.default=n}),define("hotline-web/utils/utils",["exports","jquery","hotline-web/utils/dayjs","hotline-web/config/environment","hotline-web/utils/regex-utils","hotline-web/utils/locale"],function(e,t,s,n,a,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return!("string"!=typeof e||!e)&&-1!==e.indexOf(i.LocaleMapping.LocaleSpecificUrlPatterns.translations)}function l(e,t){var n,a
switch(e){case"STRING":n="string"==typeof(n=t&&t.toString().trim().toLowerCase())?n:""
break
case"DATE":n=(a=(0,s.default)(t)).isValid()?a.valueOf():0
break
case"NUMBER":n="number"!=typeof(n=parseInt(t,10))||isNaN(n)?0:n
break
case"BOOLEAN":n="boolean"==typeof t?t:"string"==typeof t?"true"===t:!!t}return n}function c(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e&&t&&e[t],a="number"==typeof s&&s,i=n&&"Array"===n.constructor.name&&n.length,r=n&&"Object"===n.constructor.name&&Object.keys(n).length,o=i&&a<i?n[a]:r?n:e
return o&&o.id&&delete o.id,o}Object.defineProperty(e,"__esModule",{value:!0}),e.formatBytes=function(e,t){if(!e)return"0 Bytes"
var s=t||2,n=Math.floor(Math.log(e)/Math.log(1024))
return parseFloat((e/Math.pow(1024,n)).toFixed(s))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},e.updateAndGetLastFlowMessage=function(e,t){var s
return e.forEach(function(e){e.get("flowStepId")===t.flowStepId&&e.get("needsUpdation")&&0!==e.get("messageUserType")&&(s=e).set("needsUpdation",!1)}),s},e.updateAndGetLastAutoMessage=function(e,t){var s
return e.forEach(function(e){e.get("autoRuleId")===t.ruleId&&e.get("campaignMessageId")===t.campaignMessageId&&e.get("needsUpdation")&&0!==e.get("messageUserType")&&(s=e).set("needsUpdation",!1)}),s},e.isTranslationsUrl=o,e.setWCFC=function(e){e=e||""
t.default.ajaxPrefilter(function(t,s,n){o(t.url)||n.setRequestHeader("x-wc-fc-token",e)
return n})},e.convertOperand=l,e.checkCondition=function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=l(e,n),o=l(e,a),c=!1,u=i?"day":"second"
switch(t){case"CONDITION_EQUAL":"DATE"===e?r&&o&&(c=(0,s.default)(r).isSame((0,s.default)(o),u)):c=r===o
break
case"CONDITION_NOT_EQUAL":c=r!==o
break
case"CONDITION_GREATER_THAN":"DATE"===e?r&&o&&(c=(0,s.default)(r).isAfter(o,u)):c=r>o
break
case"CONDITION_LESS_THAN":"DATE"===e?r&&o&&(c=(0,s.default)(r).isBefore(o,u)):c=r<o
break
case"CONDITION_IS_UNKNOWN":case"CONDITION_NOT_SET":c=!r
break
case"CONDITION_HAS_ANY_VALUE":case"CONDITION_SET":c=!!r
break
case"CONDITION_CONTAINS":c=-1!==r.indexOf(o)
break
case"CONDITION_DOES_NOT_CONTAIN":c=-1===r.indexOf(o)
break
case"CONDITION_STARTS_WITH":c=r.startsWith(o)
break
case"CONDITION_ENDS_WITH":c=r.endsWith(o)}return c},e.safelyParseJSON=function(e){var t
try{t=JSON.parse(e)}catch(s){}return t},e.setResetAsync=function(e){e=!!e,t.default.ajaxSettings.async=e},e.resizeImage=function(e){var t=e.picThumbWidth||225,s=e.picThumbHeight||225
t>200&&(s*=200/t,t=200)
s>200&&(t*=200/s,s=200)
Ember.set(e,"picThumbWidth",Math.round(t)),Ember.set(e,"picThumbHeight",Math.round(s))},e.setAppHead=function(e){t.default.ajaxPrefilter(function(t,s,a){var r=t.url,l=n.default&&n.default.cdn&&n.default.cdn.enabled&&n.default.cdn.enabled.forApi,c=Object.keys(i.LocaleMapping.LocaleSpecificUrlPatterns),u=!1
c.forEach(function(e){-1!==r.indexOf(e)&&(u=!0)}),-1!==r.indexOf("response_time")&&l?t.url=e.replace("//","//"+n.default.cdn.api)+r:t.url=u?r:e+r
o(r)||a.setRequestHeader("withCredentials",!0)
return a})},e.getKeys=function(e){var t=[]
for(var s in e)e.hasOwnProperty(s)&&t.push(s)
return t},e.findIndexByValueProperty=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=0
for(var a in e)if(e.hasOwnProperty(a)){var i=e[a]
if(i&&i[s]===t)return n
n++}return-1},e.findObjectByValueProperty=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id"
for(var n in e)if(e.hasOwnProperty(n)){var a=e[n]
if(a&&a[s]===t)return a}return null},e.sortArray=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"position"
e&&e.sort(function(e,s){var n=e[t],a=s[t]
return"position"!==t&&(n=n.toLowerCase(),a=a.toLowerCase()),n>a?1:n<a?-1:0})},e.matchArray=function(e,t){if(e&&t){var s=e.filter(function(e){return e.toLowerCase()===t.toLowerCase()})
return!(!s||!s.length)}return!1},e.coercer=function(e){var t=r(e)
if("number"===t)return e.toString()
if("string"===t)return e
if("object"===t&&e)return e.join(",")
return null},e.addQueryParams=function(e,t){if(e&&t&&Object.keys(t).length>0){var s=e.indexOf("#"),n=-1===s?"":e.substr(s),a=-1!==(e=-1===s?e:e.substr(0,s)).indexOf("?")?"&":"?",i=Object.keys(t).map(function(e){return"".concat(e,"=").concat(t[e])})
return"".concat(e).concat(a).concat(i.join("&")).concat(n)}return e},e.checkReplyValidation=function(e,t){if(e)switch(e){case"email":return a.default.emailCheck(t)
case"phone":return a.default.phoneCheck(t)
case"number":return!isNaN(Number(t))}return!1},e.singleMessageFromTextFragments=function(e){var t=""
if(e&&e.length)for(var s=0,n=e.length;s<n;s++)0!==s?"\r\n"===e[s].content?t+=e[s].content:t=t+" \r\n"+e[s].content:t=e[s].content
return t},e.getParameterByName=function(e,t){e=e.replace(/[\[\]]/g,"\\$&")
var s=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t)
if(!s)return null
if(!s[2])return""
return decodeURIComponent(s[2].replace(/\+/g," "))},e.getArticleToShow=function(e,t){var s,n,a=this.getParameterByName("category_id",t),i=this.getParameterByName("article_id",t)
if(e&&(s=e.filter(function(e){return a===e.categoryId.toString()}))[0]&&s[0].dsArticles)return n=s[0].dsArticles,n.filter(function(e){return i===e.articleId.toString()})[0]},e.isEmptyObject=function(e){if(e)for(var t in e)return!e.hasOwnProperty(t)
return!0},e.isTrustedDomain=function(e,t){var s=t&&t.filter(function(t){return t&&t.toLowerCase()===e&&e.toLowerCase()})
return s&&s.length>0},e.serializeArrayObjectRecord=c,e.serializeRecord=function(e,t){for(var s in e)if(e.hasOwnProperty(s)){if("id"===s&&delete e[s],e[s]&&e[s].id&&delete e[s].id,"conversations"===s){for(var n=Ember.A([]),a=0,i=e[s].length;a<i;a++){var r=c(e,"conversations",a),o=Ember.A([])
if(r){var l=r.messages
if(l){for(var u=0,d=l.length;u<d;u++){var m=c(r,"messages",u)
m&&o.pushObject(t.createRecord("message",m))}r.messages=o}var h=r.readByAgents
h&&delete r.readByAgents
var f=c(r,"csat")
f&&(r.csat=t.createRecord("csat",f)),n.pushObject(t.createRecord("conversation",r))}}e.conversations=n}if("properties"===s&&(e[s]=t.createRecord("properties",e[s])),"userBehaviour"===s){var g=e[s].eventConditions
if(g){for(var p=Ember.A([]),v=0,b=g.length;v<b;v++){var E=c(e[s],"eventConditions",v)
E&&p.pushObject(t.createRecord("eventCondition",E))}e[s].eventConditions=p}var y=e[s].events
if(y){for(var w=Ember.A([]),T=0,S=y.length;T<S;T++){var _=c(e[s],"events",T),M=Ember.A([])
if(_&&_.eventProperties){for(var I=0,C=_.eventProperties.length;I<C;I++){var A=c(_,"eventProperties",I)
A&&M.pushObject(t.createRecord("eventProperty",A))}_.eventProperties=M,w.pushObject(t.createRecord("event",_))}}e[s].events=w}var O=e[s].executedRules
if(O){for(var x=Ember.A([]),N=0,k=O.length;N<k;N++){var R=c(e[s],"executedRules",N)
R&&x.pushObject(t.createRecord("executedRule",R))}e[s].executedRules=x}var P=e[s].locations
if(P){for(var j=Ember.A([]),U=0,L=P.length;U<L;U++){var D=c(e[s],"locations",U)
D&&j.pushObject(t.createRecord("userLocation",D))}e[s].locations=j}e[s]=t.createRecord("userBehaviour",e[s])}if("dsFaq"===s){var F=e[s].dsCategories
if(F){for(var B=Ember.A([]),H=0,V=F.length;H<V;H++){var G=c(e[s],"dsCategories",H),q=G&&G.dsArticles
if(q){for(var z=Ember.A([]),Y=0,W=q.length;Y<W;Y++){var J=c(G,"dsArticles",Y)
J&&z.pushObject(t.createRecord("dsArticle",J))}G.dsArticles=z}B.pushObject(t.createRecord("dsCategory",G))}e[s].dsCategories=B}e[s]=t.createRecord("dsFaq",e[s])}}return e},e.bulidBetaFeatureFlagObject=function(e){var t={}
if(e&&Ember.isArray(e))for(var s=0,n=e.length;s<n;s++)t[e[s]]=!0
return t},e.setKubeCanaryHeader=function(e){t.default.ajaxPrefilter(function(t,s,n){o(t.url)||n.setRequestHeader("X-FC-KUBE-CANARY",e)
return n})},e.subsetOfArray=function(e,t){for(var s=!1,n=0,a=t.length;n<a;n++)for(var i=0,r=e.length;i<r;i++)if(t[n]&&e[i]&&t[n].toLowerCase()===e[i].toLowerCase()){s=!0
break}return s}
e.isFeatureEnabled=function(e,t){return e.enabledFeatures&&e.enabledFeatures.indexOf(t)>-1}}),define("hotline-web/utils/uuid-generator",["exports","ember-uuid/utils/uuid-generator"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return t.v4}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.v1}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}}),Object.defineProperty(e,"unparse",{enumerable:!0,get:function(){return t.unparse}})}),define("hotline-web/config/environment",[],function(){try{var e="hotline-web/config/environment",t=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),s={default:JSON.parse(decodeURIComponent(t))}
return Object.defineProperty(s,"__esModule",{value:!0}),s}catch(n){throw new Error('Could not read config from meta tag with name "'+e+'".')}}),runningTests||require("hotline-web/app").default.create({name:"hotline-web",version:"8.12.1.0+68747308"})
